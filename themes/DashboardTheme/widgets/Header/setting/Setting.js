// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),function(l,h,p,b,d,c,f,g,k,n,m){return l([h,p],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,
around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){k.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},enable:function(){this._ENABLE=!0;d.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;d.addClass(this.domNode,"disable")},isPartOfPopup:function(a){var e=this.tooltipDialog.domNode;return a===e||d.isDescendant(a,
e)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){k.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){k.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var a=
d.create("div");this.tooltipDialog=new g({content:a});d.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var e=new n({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:b.hitch(this,function(a){a&&(a=new f(a),this.setColor(a),this.onChange(a))})});e.placeAt(a);e.startup();this.own(c(e,"close",b.hitch(this,function(){this._hideTooltipDialog()})));
this.own(c(e,"change-style",b.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(c(this.domNode,"click",b.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==this._ENABLE&&this._showTooltipDialog()})));this.own(c(document,"click",b.hitch(this,function(a){this.isPartOfPopup(a.srcElement||a.target)||this._hideTooltipDialog()})));this.picker=e},setColor:function(a){if(a instanceof f){null===this.color&&
!0===this.showLabel&&this._changeLabel(a);var e=a.toHex();this.color=a;d.setStyle(this.domNode,"backgroundColor",e);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(e,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},_changeLabel:function(a){d.empty(this.domNode);d.create("span",{innerHTML:a.toHex(),className:"color-label",style:{color:m.invertColor(a.toHex())}},this.domNode)},onChange:function(a){a&&this.showLabel&&this._changeLabel(a)},
changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(a){this.domNode.title=a},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"themes/DashboardTheme/widgets/Header/setting/SharedThemeChooserPopup":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/html dojo/on dijit/TooltipDialog dojo/text!./SharedThemeChooserPopup.html dijit/popup".split(" "),
function(l,h,p,b,d,c,f,g,k,n,m){return h([p,b,d,l],{declaredClass:"shared-theme-chooser-popup",templateString:n,_DISAPPEAR_TIMER:null,_isTooltipDialogOpened:!1,placeAt:null,isPortalSupported:null,ACTION:null,postMixInProperties:function(){this.inherited(arguments);this.nls=c.mixin(this.nls,builderNls);this.ACTION={ORG:"org",SHARED:"shared",CUSTOM:"custom"}},postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this.isPortalSupported||f.addClass(this.orgItem,"no-support");this.own(g(this.orgItem,
"click",c.hitch(this,function(a){a.stopPropagation();a.preventDefault();this.isPortalSupported&&this.orgClickHanlder(a)})));this.own(g(this.sharedItem,"click",c.hitch(this,function(a){a.stopPropagation();a.preventDefault();this.sharedClickHanlder(a)})));this.own(g(this.customItem,"click",c.hitch(this,function(a){a.stopPropagation();a.preventDefault();this.customClickHanlder(a)})));this._hideTooltipDialog()},destroy:function(){m.close(this.tooltipDialog);this.tooltipDialog.destroy();this.inherited(arguments)},
hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},getTooltipDialog:function(){return this.tooltipDialog&&this.tooltipDialog.domNode?this.tooltipDialog:null},_showTooltipDialog:function(){!0!==this._isTooltipDialogOpened&&(m.open({parent:this.placeAt||this.getParent(),popup:this.tooltipDialog,around:this.around}),this._isTooltipDialogOpened=!0,this.emit("showPopup"))},_hideTooltipDialog:function(){m.close(this.tooltipDialog);this._isTooltipDialogOpened=
!1},_createTooltipDialog:function(){this.tooltipDialog=new k({content:this.domNode});f.addClass(this.tooltipDialog.domNode,"shared-theme-chooser-popup-container");var a=this.getTooltipDialog();this.own(g(a.domNode,"mouseover",c.hitch(this,function(a){this.showPopup(a)})));this.own(g(a.domNode,"mouseleave",c.hitch(this,function(a){this.hidePopup(a)})))},orgClickHanlder:function(a){this.emit("btnClick",this.ACTION.ORG,a)},sharedClickHanlder:function(a){this.emit("btnClick",this.ACTION.SHARED,a)},customClickHanlder:function(a){this.emit("btnClick",
this.ACTION.CUSTOM,a)},setChecked:function(a){f.removeClass(this.orgCheck,"check");f.removeClass(this.sharedCheck,"check");f.removeClass(this.customCheck,"check");a===this.ACTION.ORG&&this.isPortalSupported&&f.addClass(this.orgCheck,"check");a===this.ACTION.SHARED&&f.addClass(this.sharedCheck,"check");a===this.ACTION.CUSTOM&&f.addClass(this.customCheck,"check")},showPopup:function(a){a&&(a.stopPropagation(),a.preventDefault());this._clearDisappearTimer();!1===this._isTooltipDialogOpened&&(this.showTooltipDialog(),
this._isTooltipDialogOpened=!0)},hidePopup:function(a){a&&(a.stopPropagation(),a.preventDefault());this.hideTooltipDialog();this._isTooltipDialogOpened=!1},_clearDisappearTimer:function(){this._miniModeTimer&&clearTimeout(this._miniModeTimer)}})})},"themes/DashboardTheme/widgets/Header/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:themes/DashboardTheme/widgets/Header/setting/SharedThemeChooserPopup.html":'\x3cdiv class\x3d"shared-theme-chooser-popup"\x3e\r\n  \x3cdiv class\x3d"btns-container"\x3e\r\n    \x3cdiv class\x3d"btn-itmes" data-dojo-attach-point\x3d"orgItem"\x3e\r\n      \x3cdiv class\x3d"btns jimu-float-leading" data-dojo-attach-point\x3d"org"\x3e${nls.sharedTheme}\x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-float-trailing disabled" data-dojo-attach-point\x3d"orgCheck"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"btn-itmes" data-dojo-attach-point\x3d"sharedItem"\x3e\r\n      \x3cdiv class\x3d"btns jimu-float-leading" data-dojo-attach-point\x3d"shared"\x3e${nls.themeColor}\x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-float-trailing " data-dojo-attach-point\x3d"sharedCheck"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"btn-itmes" data-dojo-attach-point\x3d"customItem"\x3e\r\n      \x3cdiv class\x3d"btns jimu-float-leading" data-dojo-attach-point\x3d"custom"\x3e${nls.custom}\x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-float-trailing " data-dojo-attach-point\x3d"customCheck"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:themes/DashboardTheme/widgets/Header/setting/Setting.html":'\x3cdiv style\x3d"width:100%;"\x3e\r\n  \x3cdiv class\x3d"title"\x3e\r\n    ${nls.setStyle}\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"jimu-color-btn" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:themes/DashboardTheme/widgets/Header/setting/css/style.css":".dashboard-header-setting {display: flex; align-items: center;}.dashboard-header-setting .jimu-color-btn {margin: 0 20px; width: 100px; height: 36px; border: 1px solid lightgray; display: flex; align-items: center; justify-content: center; cursor: pointer;}.dashboard-header-setting .jimu-color-btn:hover {border: 2px solid #24B5CC;}",
"*now":function(l){l(['dojo/i18n!*preload*themes/DashboardTheme/widgets/Header/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/on dojo/_base/array dojo/_base/lang dojo/_base/html dojo/_base/Color dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/utils jimu/portalUtils jimu/dijit/ColorPickerPopup ./SharedThemeChooserPopup".split(" "),function(l,h,p,b,d,c,f,g,k,n,m,a){return l([g,f],{baseClass:"dashboard-header-setting",darkColor:"#444444",lightColor:"#EEEEEE",startup:function(){this.inherited(arguments);this._createTooltipDialog();if(this.config.mode){if("org"===this.config.mode)this.popup.setChecked(this.popup.ACTION.ORG),
this._getOrgColor().then(b.hitch(this,function(a){this._changeLabel(new c(a))}));else if("custom"===this.config.mode)this.popup.setChecked(this.popup.ACTION.CUSTOM),this._changeLabel(new c(this.config.color));else{this.popup.setChecked(this.popup.ACTION.SHARED);var a=this._getThemeColor();this._changeLabel(new c(a))}this.colorPickerPopup.setColor(new c(this.config.color))}else{var d=b.getObject("theme.customStyles.mainBackgroundColor",!1,this.appConfig);d?this._getOrgColor().then(b.hitch(this,function(a){a===
d?(this.popup.setChecked(this.popup.ACTION.ORG),this._getOrgColor().then(b.hitch(this,function(a){this._changeLabel(new c(a))}))):(this.popup.setChecked(this.popup.ACTION.CUSTOM),this._changeLabel(new c(d)))})):(this.popup.setChecked(this.popup.ACTION.SHARED),a=this._getThemeColor(),this._changeLabel(new c(a)))}this.own(h(this.domNode,"mouseenter",b.hitch(this,function(){this.colorPickerPopup.isOpen()||this.popup.showPopup()})));this.own(h(this.domNode,"mouseleave",b.hitch(this,function(){this.colorPickerPopup.isOpen()||
this.popup.hidePopup()})))},_createTooltipDialog:function(){var e=b.getObject("theme.sharedTheme",!1,this.appConfig);this.popup=new a({placeAt:this.getParent(),nls:this.nls,around:this.colorPicker,isPortalSupported:e&&e.isPortalSupport});this.own(h(this.popup,"btnClick",b.hitch(this,function(a,e){a===this.popup.ACTION.ORG?this.showOrgThemeColor():a===this.popup.ACTION.SHARED?this.showSharedThemeColor():a===this.popup.ACTION.CUSTOM&&this.showCustomColor(e)})));this.colorPickerPopup=new m({showColorPickerOK:!0,
showLabel:!1,recordUID:this.recordUID,around:this.domNode});this.colorPickerPopup.placeAt(this.getParent());this.colorPickerPopup.startup();this.own(h(this.colorPickerPopup,"change",b.hitch(this,function(a){this.config.color=a;this.config.mode="custom";this._changeLabel(a);this.popup.setChecked(this.popup.ACTION.CUSTOM);this.popup.hideTooltipDialog()})))},_changeLabel:function(a){d.empty(this.colorPicker);this.colorPicker.style.background=a.toHex();d.create("span",{innerHTML:k.sanitizeHTML(a.toHex()),
className:"color-label",style:{color:k.invertColor(a.toHex())}},this.colorPicker)},_getOrgColor:function(){return n.getPortal(this.appConfig.portalUrl).loadSelfInfo().then(b.hitch(this,function(a){if(a&&a.portalProperties&&a.portalProperties.sharedTheme&&a.portalProperties.sharedTheme.header)return a.portalProperties.sharedTheme.header.background}),b.hitch(this,function(a){console.error(a)}))},_getThemeColor:function(){return"light"!==b.getObject("theme.styles",!1,this.appConfig)[0]?this.darkColor:
this.lightColor},showOrgThemeColor:function(){this.config.mode="org";d.empty(this.colorPicker);this.colorPicker.style.background="transparent";this.popup.setChecked(this.popup.ACTION.ORG);this.popup.hideTooltipDialog();this._getOrgColor().then(b.hitch(this,function(a){this._changeLabel(new c(a))}))},showSharedThemeColor:function(){this.config.mode="theme";d.empty(this.colorPicker);this.colorPicker.style.background="transparent";this.popup.setChecked(this.popup.ACTION.SHARED);this.popup.hideTooltipDialog();
var a=this._getThemeColor();this._changeLabel(new c(a))},showCustomColor:function(a){this.config.mode="custom";a&&(a.stopPropagation(),a.preventDefault());this.popup.hidePopup();this.colorPickerPopup.showTooltipDialog();this.colorPickerPopup.initUI()},destroy:function(){this.colorPickerPopup&&this.colorPickerPopup.picker.destroy();this.popup&&this.popup.destroy();this.inherited(arguments)},setConfig:function(a){this.config=a||{}},getConfig:function(){return this.config}})});