// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),function(h,k,m,g,f,d,
c,b,e,a,l,n,p,r,t,v,q,B,x,u,C,A,z,y,F){function D(a){return new u({command:a.name})}function w(a){return new u({buttonClass:x,command:a.name})}m=m("dijit.Editor",y,{plugins:null,extraPlugins:null,constructor:function(){l.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",C]);this._plugins=[];this._editInterval=
1E3*this.editActionInterval;if(n("ie")||n("trident")||n("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new g;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);l.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=f.getLocalization("dijit._editor","commands",this.lang);
n("webkit")&&e.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new v({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));k.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);c.add(this.iframe.parentNode,"dijitEditorIFrameContainer");c.add(this.iframe,"dijitEditorIFrame");d.set(this.iframe,"allowTransparency",!0);this.toolbar.startup();
this.onNormalizedDisplayChanged()},destroy:function(){k.forEach(this._plugins,function(a){a&&a.destroy&&a.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(a,b){var c=l.isString(a)?{name:a}:l.isFunction(a)?{ctor:a}:a;if(!c.setEditor){var d={args:c,plugin:null,editor:this};c.name&&(u.registry[c.name]?d.plugin=u.registry[c.name](c):r.publish(F._scopeName+".Editor.getPlugin",d));if(!d.plugin)try{var e=c.ctor||l.getObject(c.name)||
h(c.name);e&&(d.plugin=new e(c))}catch(J){throw Error(this.id+": cannot find plugin ["+c.name+"]");}if(!d.plugin)throw Error(this.id+": cannot find plugin ["+c.name+"]");a=d.plugin}1<arguments.length?this._plugins[b]=a:this._plugins.push(a);a.setEditor(this);l.isFunction(a.setToolbar)&&a.setToolbar(this.toolbar)},resize:function(a){a&&B.prototype.resize.apply(this,arguments)},layout:function(){var a=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+b.getPadBorderExtents(this.iframe.parentNode).h+
b.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=a+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(a){var b,c=this.document.body,d=c.clientWidth,e=c.clientHeight,p=c.clientLeft,l=c.offsetWidth,n=c.offsetHeight,f=c.offsetLeft;/^rtl$/i.test(c.dir||"")?d<l&&a.x>d&&a.x<l&&(b=!0):a.x<p&&a.x>f&&(b=!0);b||e<n&&a.y>e&&a.y<n&&(b=!0);b||(delete this._cursorToStart,delete this._savedSelection,"BODY"==a.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(a){this.customUndo&&this.endEditing(!0);"BODY"!=a.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(a){this._inEditing||(this._inEditing=!0,this._beginEditing(a));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(a){if(!this.customUndo||
"undo"!=a&&"redo"!=a){this.customUndo&&(this.endEditing(),this._beginEditing());var b=this.inherited(arguments);this.customUndo&&this._endEditing();return b}return this[a]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(a){var b;try{if(b=this.document.execCommand(a,!1,null),n("webkit")&&!b)throw{};}catch(E){b=p.substitute,alert(b(this.commands.systemShortcut,
[this.commands[a],b(this.commands[n("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[a]])])),b=!1}return b},queryCommandEnabled:function(a){return!this.customUndo||"undo"!=a&&"redo"!=a?this.inherited(arguments):"undo"==a?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(a){var b=a.mark,c=a.mark;a=a.isCollapsed;var d,e,p;c&&(9>n("ie")||9===n("ie")&&n("quirks")?l.isArray(c)?(b=[],k.forEach(c,function(a){b.push(z.getNode(a,this.editNode))},this),this.selection.moveToBookmark({mark:b,
isCollapsed:a})):c.startContainer&&c.endContainer&&(p=z.getSelection(this.window))&&p.removeAllRanges&&(p.removeAllRanges(),a=z.create(this.window),d=z.getNode(c.startContainer,this.editNode),e=z.getNode(c.endContainer,this.editNode),d&&e&&(a.setStart(d,c.startOffset),a.setEnd(e,c.endOffset),p.addRange(a))):(p=z.getSelection(this.window))&&p.removeAllRanges&&(p.removeAllRanges(),a=z.create(this.window),d=z.getNode(c.startContainer,this.editNode),e=z.getNode(c.endContainer,this.editNode),d&&e&&(a.setStart(d,
c.startOffset),a.setEnd(e,c.endOffset),p.addRange(a))))},_changeToStep:function(a,b){this.setValue(b.text);(a=b.bookmark)&&this._moveToBookmark(a)},undo:function(){var a=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._steps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(b,this._steps[this._steps.length-1]),this._undoedSteps.push(b),this.onDisplayChanged(),delete this._undoRedoActive,a=!0);delete this._undoRedoActive}return a},redo:function(){var a=
!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var b=this._undoedSteps.pop();b&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],b),this._steps.push(b),this.onDisplayChanged(),a=!0);delete this._undoRedoActive}return a},endEditing:function(a){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(a),this._inEditing=!1)},_getBookmark:function(){var a=this.selection.getBookmark(),b=[];if(a&&a.mark){var c=
a.mark;if(9>n("ie")||9===n("ie")&&n("quirks")){var d=z.getSelection(this.window);if(l.isArray(c))k.forEach(a.mark,function(a){b.push(z.getIndex(a,this.editNode).o)},this),a.mark=b;else if(d){var e;d.rangeCount&&(e=d.getRangeAt(0));a.mark=e?e.cloneRange():this.selection.getBookmark()}}try{a.mark&&a.mark.startContainer&&(b=z.getIndex(a.mark.startContainer,this.editNode).o,a.mark={startContainer:b,startOffset:a.mark.startOffset,endContainer:a.mark.endContainer===a.mark.startContainer?b:z.getIndex(a.mark.endContainer,
this.editNode).o,endOffset:a.mark.endOffset})}catch(J){a.mark=null}}return a},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:A.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var a=A.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(b){n("ie")||this.iframe||b.keyCode!=a.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var c=b.keyCode;if(b.ctrlKey&&
!b.shiftKey&&!b.altKey){if(90==c||122==c){b.stopPropagation();b.preventDefault();this.undo();return}if(89==c||121==c){b.stopPropagation();b.preventDefault();this.redo();return}}this.inherited(arguments);switch(c){case a.ENTER:case a.BACKSPACE:case a.DELETE:this.beginEditing();break;case 88:case 86:if(b.ctrlKey&&!b.altKey&&!b.metaKey){this.endEditing();88==b.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!b.ctrlKey&&!b.altKey&&!b.metaKey&&(b.keyCode<
a.F1||b.keyCode>a.F15)){this.beginEditing();break}case a.ALT:this.endEditing();break;case a.UP_ARROW:case a.DOWN_ARROW:case a.LEFT_ARROW:case a.RIGHT_ARROW:case a.HOME:case a.END:case a.PAGE_UP:case a.PAGE_DOWN:this.endEditing(!0);case a.CTRL:case a.SHIFT:case a.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(H){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(a){this.customUndo?this.isClosed?this.setValue(a):(this.beginEditing(),a||(a="\x26#160;"),this.setValue(a),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(a){this.setValueDeferred.then(l.hitch(this,function(){!this.disabled&&a||!this._buttonEnabledPlugins&&a?
k.forEach(this._plugins,function(a){a.set("disabled",!0)}):this.disabled&&!a&&k.forEach(this._plugins,function(a){a.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(e.set(this.document.body,"color",e.get(this.iframe,"color")),e.set(this.document.body,"background-color",e.get(this.iframe,"background-color")))}catch(H){}}});l.mixin(u.registry,{undo:D,redo:D,cut:D,copy:D,paste:D,insertOrderedList:D,insertUnorderedList:D,
indent:D,outdent:D,justifyCenter:D,justifyFull:D,justifyLeft:D,justifyRight:D,"delete":D,selectAll:D,removeFormat:D,unlink:D,insertHorizontalRule:D,bold:w,italic:w,underline:w,strikethrough:w,subscript:w,superscript:w,"|":function(){return new u({setEditor:function(a){this.editor=a;this.button=new q({ownerDocument:a.ownerDocument})}})}});return m})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(h,k,m,g,f,d,c,b){m("dijit-legacy-requires")&&f(0,function(){h(["dijit/ToolbarSeparator"])});return k("dijit.Toolbar",[d,b,c],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(h,k,m,g){return h("dijit.ToolbarSeparator",[m,g],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);k.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(h,k,m,g,f){k=k("dijit._editor._Plugin",g,{constructor:function(d){this.params=
d||{};m.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:f,disabled:!1,getLabel:function(d){return this.editor.commands[d]},_initButton:function(){if(this.command.length){var d=this.getLabel(this.command),c=this.editor,b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(d=m.mixin({label:d,ownerDocument:c.ownerDocument,dir:c.dir,
lang:c.lang,showLabel:!1,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete d.name,this.button=new this.buttonClass(d))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(d,c,b){this.own(h.connect(d,c,this,b))},updateState:function(){var d=this.editor,c=this.command,b,e;if(d&&d.isLoaded&&c.length){var a=this.get("disabled");if(this.button)try{var l=
d._implCommand(c);e=!a&&(this[l]?this[l](c):d.queryCommandEnabled(c));this.enabled!==e&&(this.enabled=e,this.button.set("disabled",!e));e&&"boolean"==typeof this.button.checked&&(b=d.queryCommandState(c),this.checked!==b&&(this.checked=b,this.button.set("checked",d.queryCommandState(c))))}catch(n){console.log(n)}}},setEditor:function(d){this.editor=d;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",m.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",m.hitch(this,"updateState")))},setToolbar:function(d){this.button&&d.addChild(this.button)},set:function(d,c){if("object"===typeof d){for(var b in d)this.set(b,d[b]);return this}b=this._getAttrNames(d);if(this[b.s])var e=this[b.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(d,c);return e||this},get:function(d){var c=this._getAttrNames(d);
return this[c.g]?this[c.g]():this[d]},_setDisabledAttr:function(d){this._set("disabled",d);this.updateState()},_getAttrNames:function(d){var c=this._attrPairNames;if(c[d])return c[d];var b=d.charAt(0).toUpperCase()+d.substr(1);return c[d]={s:"_set"+b+"Attr",g:"_get"+b+"Attr"}},_set:function(d,c){this[d]=c}});k.registry={};return k})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l){return h("dijit._editor.plugins.EnterKeyHandling",e,{blockNodeForEnter:"BR",constructor:function(a){a&&("blockNodeForEnter"in a&&(a.blockNodeForEnter=a.blockNodeForEnter.toUpperCase()),g.mixin(this,a))},setEditor:function(a){if(this.editor!==a)if(this.editor=a,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,a.onLoadDeferred.then(g.hitch(this,function(b){this.own(f(a.document,"keydown",g.hitch(this,function(a){if(a.keyCode==m.ENTER){var b=g.mixin({},a);b.shiftKey=
!0;this.handleEnterKey(b)||(a.stopPropagation(),a.preventDefault())}})));9<=d("ie")&&10>=d("ie")&&this.own(f(a.document,"paste",g.hitch(this,function(a){setTimeout(g.hitch(this,function(){var a=this.editor.document.selection.createRange();a.move("character",-1);a.select();a.move("character",1);a.select()}),0)})));return b}));else if(this.blockNodeForEnter){var b=g.hitch(this,"handleEnterKey");a.addKeyHandler(13,0,0,b);a.addKeyHandler(13,0,1,b);this.own(this.editor.on("KeyPressed",g.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var b=this.editor.selection.getAncestorElement("LI");if(b){d("mozilla")&&"LI"==b.parentNode.parentNode.nodeName&&(b=b.parentNode.parentNode);var c=b.firstChild;!c||1!=c.nodeType||"UL"!=c.nodeName&&"OL"!=c.nodeName||(b.insertBefore(c.ownerDocument.createTextNode("\u00a0"),c),c=l.create(this.editor.window),c.setStart(b.firstChild,0),b=l.getSelection(this.editor.window,!0),b.removeAllRanges(),b.addRange(c))}else a.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(b=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(b.innerHTML=this.bogusHtmlContent,9>=d("ie")&&(b=this.editor.document.selection.createRange(),b.move("character",-1),b.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(c){var e,f,n,g,q=this.editor.document,h,m,u;if(c.shiftKey){c=this.editor.selection.getParentElement();if(g=l.getAncestor(c,this.blockNodes)){if("LI"==g.tagName)return!0;c=l.getSelection(this.editor.window);e=c.getRangeAt(0);e.collapsed||(e.deleteContents(),c=l.getSelection(this.editor.window),e=c.getRangeAt(0));if(l.atBeginningOfContainer(g,e.startContainer,e.startOffset))h=q.createElement("br"),e=l.create(this.editor.window),g.insertBefore(h,
g.firstChild),e.setStartAfter(h),c.removeAllRanges(),c.addRange(e);else if(l.atEndOfContainer(g,e.startContainer,e.startOffset))e=l.create(this.editor.window),h=q.createElement("br"),g.appendChild(h),g.appendChild(q.createTextNode("\u00a0")),e.setStart(g.lastChild,0),c.removeAllRanges(),c.addRange(e);else return(m=e.startContainer)&&3==m.nodeType?(u=m.nodeValue,f=q.createTextNode(u.substring(0,e.startOffset)),n=q.createTextNode(u.substring(e.startOffset)),g=q.createElement("br"),""==n.nodeValue&&
d("webkit")&&(n=q.createTextNode("\u00a0")),k.place(f,m,"after"),k.place(g,f,"after"),k.place(n,g,"after"),k.destroy(m),e=l.create(this.editor.window),e.setStart(n,0),c.removeAllRanges(),c.addRange(e),!1):!0}else c=l.getSelection(this.editor.window),c.rangeCount?(e=c.getRangeAt(0))&&e.startContainer&&(e.collapsed||(e.deleteContents(),c=l.getSelection(this.editor.window),e=c.getRangeAt(0)),(m=e.startContainer)&&3==m.nodeType?(g=e.startOffset,m.length<g&&(n=this._adjustNodeAndOffset(m,g),m=n.node,g=
n.offset),u=m.nodeValue,f=q.createTextNode(u.substring(0,g)),n=q.createTextNode(u.substring(g)),g=q.createElement("br"),n.length||(n=q.createTextNode("\u00a0")),f.length?k.place(f,m,"after"):f=m,k.place(g,f,"after"),k.place(n,g,"after"),k.destroy(m)):(0<=e.startOffset&&(h=m.childNodes[e.startOffset]),g=q.createElement("br"),n=q.createTextNode("\u00a0"),h?(k.place(g,h,"before"),k.place(n,g,"after")):(m.appendChild(g),m.appendChild(n))),e=l.create(this.editor.window),e.setStart(n,0),e.setEnd(n,n.length),
c.removeAllRanges(),c.addRange(e),this.editor.selection.collapse(!0)):a.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var C=!0;c=l.getSelection(this.editor.window);e=c.getRangeAt(0);e.collapsed||(e.deleteContents(),c=l.getSelection(this.editor.window),e=c.getRangeAt(0));h=l.getBlockAncestor(e.endContainer,null,this.editor.editNode);var A=h.blockNode;if(this._checkListLater=A&&("LI"==A.nodeName||"LI"==A.parentNode.nodeName))return d("mozilla")&&(this._pressedEnterInBlock=
A),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(A.innerHTML)&&(A.innerHTML="",d("webkit")&&(e=l.create(this.editor.window),e.setStart(A,0),c.removeAllRanges(),c.addRange(e)),this._checkListLater=!1),!0;if(!h.blockNode||h.blockNode===this.editor.editNode){try{a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(z){}h={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(h.blockNode){if(h.blockNode!=this.editor.editNode&&!(h.blockNode.textContent||h.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(h.blockNode),!1}else h.blockNode=this.editor.editNode;c=l.getSelection(this.editor.window);e=c.getRangeAt(0)}A=q.createElement(this.blockNodeForEnter);A.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(h.blockNode);n=e.endOffset;C=e.endContainer;C.length<n&&(n=this._adjustNodeAndOffset(C,n),C=
n.node,n=n.offset);if(l.atEndOfContainer(h.blockNode,C,n))h.blockNode===h.blockContainer?h.blockNode.appendChild(A):k.place(A,h.blockNode,"after"),C=!1,e=l.create(this.editor.window),e.setStart(A,0),c.removeAllRanges(),c.addRange(e),this.editor.height&&b.scrollIntoView(A);else if(l.atBeginningOfContainer(h.blockNode,e.startContainer,e.startOffset))k.place(A,h.blockNode,h.blockNode===h.blockContainer?"first":"before"),A.nextSibling&&this.editor.height&&(e=l.create(this.editor.window),e.setStart(A.nextSibling,
0),c.removeAllRanges(),c.addRange(e),b.scrollIntoView(A.nextSibling)),C=!1;else{h.blockNode===h.blockContainer?h.blockNode.appendChild(A):k.place(A,h.blockNode,"after");C=!1;h.blockNode.style&&A.style&&h.blockNode.style.cssText&&(A.style.cssText=h.blockNode.style.cssText);if((m=e.startContainer)&&3==m.nodeType){n=e.endOffset;m.length<n&&(n=this._adjustNodeAndOffset(m,n),m=n.node,n=n.offset);u=m.nodeValue;f=q.createTextNode(u.substring(0,n));n=q.createTextNode(u.substring(n,u.length));k.place(f,m,
"before");k.place(n,m,"after");k.destroy(m);for(e=f.parentNode;e!==h.blockNode;){u=q.createElement(e.tagName);e.style&&u.style&&e.style.cssText&&(u.style.cssText=e.style.cssText);"FONT"===e.tagName&&(e.color&&(u.color=e.color),e.face&&(u.face=e.face),e.size&&(u.size=e.size));for(;n;)m=n.nextSibling,u.appendChild(n),n=m;k.place(u,e,"after");f=e;n=u;e=e.parentNode}if(1==n.nodeType||3==n.nodeType&&n.nodeValue)A.innerHTML="";for(f=n;n;)m=n.nextSibling,A.appendChild(n),n=m}e=l.create(this.editor.window);
q=f;if("BR"!==this.blockNodeForEnter){for(;q;)g=q,q=m=q.firstChild;g&&g.parentNode?(A=g.parentNode,e.setStart(A,0),c.removeAllRanges(),c.addRange(e),this.editor.height&&b.scrollIntoView(A),d("mozilla")&&(this._pressedEnterInBlock=h.blockNode)):C=!0}else e.setStart(A,0),c.removeAllRanges(),c.addRange(e),this.editor.height&&b.scrollIntoView(A),d("mozilla")&&(this._pressedEnterInBlock=h.blockNode)}return C},_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3==a.nextSibling.nodeType;)b-=
a.length,a=a.nextSibling;return{node:a,offset:b}},removeTrailingBr:function(a){if(a=/P|DIV|LI/i.test(a.tagName)?a:this.editor.selection.getParentOfType(a,["P","DIV","LI"]))a.lastChild&&(1<a.childNodes.length&&3==a.lastChild.nodeType&&/^[\s\xAD]*$/.test(a.lastChild.nodeValue)||"BR"==a.lastChild.tagName)&&k.destroy(a.lastChild),a.childNodes.length||(a.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p,r,t,v,q,B,x,u,C,A,z,y,F,D,w,H,I){var E=m("dijit._editor.RichText",[z,y],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};a&&p.isString(a.value)&&(this.value=a.value);this.onLoadDeferred=new g},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[p.trim,p.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);q("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));q("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(q("ie")||q("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[p.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[p.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);x.publish(I._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=p.hitch(this,function(a,b){return function(){return!this.execCommand(a,b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock",
"h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};q("ie")||(b.Z=a("redo"));for(var c in b)this.addKeyHandler(c,!0,!1,b[c])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(E._editorCommandsLocalized)this._local2NativeFormatNames=E._local2NativeFormatNames,this._native2LocalFormatNames=E._native2LocalFormatNames;else{E._editorCommandsLocalized=!0;E._local2NativeFormatNames={};
E._native2LocalFormatNames={};this._local2NativeFormatNames=E._local2NativeFormatNames;this._native2LocalFormatNames=E._native2LocalFormatNames;for(var a="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),c="",e,d=0;e=a[d++];)c="l"!==e.charAt(1)?c+("\x3c"+e+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+e+"\x3e\x3cbr/\x3e"):c+("\x3c"+e+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+e+"\x3e\x3cbr/\x3e");var l=b.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:c});this.ownerDocumentBody.appendChild(l);
a=p.hitch(this,function(){for(var a=l.firstChild;a;)try{this.selection.selectElement(a.firstChild);var c=a.tagName.toLowerCase();this._local2NativeFormatNames[c]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[c]]=c;a=a.nextSibling.nextSibling}catch(N){}b.destroy(l)});this.defer(a)}},open:function(e){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new g;this.isClosed||this.close();x.publish(I._scopeName+"._editor.RichText::open",
this);1===arguments.length&&e.nodeName&&(this.domNode=e);var l=this.domNode,n;if(p.isString(this.value))n=this.value,l.innerHTML="";else if(l.nodeName&&"textarea"==l.nodeName.toLowerCase()){var y=this.textarea=l;this.name=y.name;n=y.value;l=this.domNode=this.ownerDocument.createElement("div");l.setAttribute("widgetId",this.id);y.removeAttribute("widgetId");l.cssText=y.cssText;l.className+=" "+y.className;b.place(l,y,"before");var G=p.hitch(this,function(){a.set(y,{display:"block",position:"absolute",
top:"-1000px"});if(q("ie")){var b=y.style;this.__overflow=b.overflow;b.overflow="hidden"}});q("ie")?this.defer(G,10):G();if(y.form){var t=y.value;this.reset=function(){this.getValue()!==t&&this.replaceValue(t)};r(y.form,"submit",p.hitch(this,function(){d.set(y,"disabled",this.disabled);y.value=this.getValue()}))}}else n=w.getChildrenHtml(l),l.innerHTML="";this.value=n;l.nodeName&&"LI"===l.nodeName&&(l.innerHTML=" \x3cbr\x3e");this.header=l.ownerDocument.createElement("div");l.appendChild(this.header);
this.editingArea=l.ownerDocument.createElement("div");l.appendChild(this.editingArea);this.footer=l.ownerDocument.createElement("div");l.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!k.useXDomain||k.allowXdRichTextSave)){if((n=f.byId(I._scopeName+"._editor.RichText.value"))&&""!==n.value)for(var G=n.value.split(this._SEPARATOR),h=0,v;v=G[h++];)if(v=v.split(this._NAME_CONTENT_SEP),v[0]===this.name){this.value=v[1];G=G.splice(h,1);n.value=G.join(this._SEPARATOR);
break}E._globalSaveHandler||(E._globalSaveHandler={},u.addOnUnload(function(){for(var a in E._globalSaveHandler){var b=E._globalSaveHandler[a];p.isFunction(b)&&b()}}));E._globalSaveHandler[this.id]=p.hitch(this,"_saveContent")}this.isClosed=!1;n=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");n.id=this.id+"_iframe";n.style.border="none";n.style.width="100%";this._layoutMode?n.style.height="100%":7<=q("ie")?(this.height&&(n.style.height=this.height),this.minHeight&&(n.style.minHeight=
this.minHeight)):n.style.height=this.height?this.height:this.minHeight;n.frameBorder=0;n._loadFunc=p.hitch(this,function(a){this.window=a;this.document=a.document;this.selection=new F.SelectionManager(a);q("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});G=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");G=11>q("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+G+"');document.close()":"javascript: '"+
G+"'";this.editingArea.appendChild(n);n.src=G;"LI"===l.nodeName&&(l.lastChild.style.marginTop="-1.2em");c.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var b=a.getComputedStyle(this.domNode),c;if(this["aria-label"])c=this["aria-label"];else{var e=t('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||f.byId(this["aria-labelledby"],this.ownerDocument);e&&(c=e.textContent||e.innerHTML||"")}var e="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(c?" aria-label\x3d'"+B.escape(c)+"'":"")+"\x3e\x3c/div\x3e",d=[b.fontWeight,b.fontSize,b.fontFamily].join(" "),n=b.lineHeight,n=0<=n.indexOf("px")?parseFloat(n)/parseFloat(b.fontSize):0<=n.indexOf("em")?parseFloat(n):"normal",w="",g=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(b){b=b.replace(/^;/ig,"")+";";var c=b.split(":")[0];if(c){var c=p.trim(c),c=c.toLowerCase(),e,d="";for(e=0;e<c.length;e++){var l=c.charAt(e);switch(l){case "-":e++,l=c.charAt(e).toUpperCase();default:d+=
l}}a.set(g.domNode,d,"")}w+=b+";"});this.iframe.setAttribute("title",c);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||l.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",c?"\x3ctitle\x3e"+B.escape(c)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",d,";\n",this.height||q("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",n,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",q("ie")||q("trident")||q("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",c?" aria-label\x3d'"+B.escape(c)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+w+"'\x3e",e,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];this.styleSheets&&(a=this.styleSheets.split(";"),this.styleSheets=
"");a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",c=0,e,d=A.get(this.ownerDocument);e=a[c++];)e=(new C(d.location,e)).toString(),this.editingAreaStyleSheets.push(e),b+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+e+'"/\x3e';return b},addStyleSheet:function(a){var b=a.toString(),c=A.get(this.ownerDocument);if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new C(c.location,b)).toString();-1<h.indexOf(this.editingAreaStyleSheets,b)||(this.editingAreaStyleSheets.push(b),
this.onLoadDeferred.then(p.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);else{var a=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.appendChild(c)}})))},removeStyleSheet:function(a){var b=a.toString(),c=A.get(this.ownerDocument);if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new C(c.location,b)).toString();a=h.indexOf(this.editingAreaStyleSheets,b);-1!==a&&(delete this.editingAreaStyleSheets[a],
t('link[href\x3d"'+b+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){a=!!a;this._set("disabled",a);if(this.isLoaded){var b=q("ie")&&(this.isLoaded||!this.focusOnLoad);b&&(this.editNode.unselectable="on");this.editNode.contentEditable=!a;this.editNode.tabIndex=a?"-1":this.tabIndex;b&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(q("mozilla")&&!a&&this._mozSettingProps){a=this._mozSettingProps;for(var c in a)if(a.hasOwnProperty(c))try{this.document.execCommand(c,
!1,a[c])}catch(L){}}this._disabledOK=!0}},onLoad:function(a){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=H.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var c=this;this.beforeIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){c.editNode.focus()};this.focusNode=
this.editNode;var e=this.events.concat(this.captureEvents),d=this.iframe?this.document:this.editNode;this.own.apply(this,h.map(e,function(a){var b=a.toLowerCase().replace(/^on/,"");return r(d,b,p.hitch(this,a))},this));this.own(r(d,"mouseup",p.hitch(this,"onClick")));q("ie")&&(this.own(r(this.document,"mousedown",p.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);q("webkit")&&(this._webkitListener=this.own(r(this.document,"mouseup",p.hitch(this,"onDisplayChanged")))[0],this.own(r(this.document,
"mousedown",p.hitch(this,function(a){a=a.target;!a||a!==this.document.body&&a!==this.document||this.defer("placeCursorAtEnd")}))));if(q("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(M){}this.isLoaded=!0;this.set("disabled",this.disabled);e=p.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&v(p.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(e):e()},onKeyDown:function(a){if(a.keyCode===n.SHIFT||a.keyCode===n.ALT||a.keyCode===n.META||a.keyCode===n.CTRL)return!0;a.keyCode===n.TAB&&this.isTabIndent&&(a.stopPropagation(),a.preventDefault(),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")&&this.execCommand(a.shiftKey?"outdent":"indent"));if(a.keyCode==n.TAB&&!this.isTabIndent&&!a.ctrlKey&&!a.altKey)return a.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>q("ie")&&a.keyCode===n.BACKSPACE&&"Control"===this.document.selection.type&&(a.stopPropagation(),a.preventDefault(),this.execCommand("delete"));q("ff")&&(a.keyCode===n.PAGE_UP||a.keyCode===n.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&a.preventDefault();var b=this._keyHandlers[a.keyCode],c=arguments;b&&!a.altKey&&h.some(b,function(b){if(!(b.shift^a.shiftKey||b.ctrl^(a.ctrlKey||a.metaKey)))return b.handler.apply(this,c)||a.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(a){l.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?d.set(this.document.body,"spellcheck",!a):this.onLoadDeferred.then(p.hitch(this,function(){d.set(this.document.body,"spellcheck",!a)}));this._set("disableSpellCheck",a)},addKeyHandler:function(a,b,c,e){"string"==
typeof a&&(a=a.toUpperCase().charCodeAt(0));p.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:c||!1,ctrl:b||!1,handler:e})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(a){(q("ie")||q("trident"))&&this.defer(function(){H.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var b=this.getValue(!0);if(b!==this.value)this.onChange(b);
this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!q("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>q("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,b){a=a.toLowerCase();"formatblock"===a?q("safari")&&void 0===b&&(a="heading"):"hilitecolor"!==a||q("mozilla")||(a="backcolor");return a},_implCommand:function(a){return"_"+this._normalizeCommand(a)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(a){var b=this._qcaCache[a];return void 0!==b?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return q("ie")||q("trident")||q("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!q("webkit");default:return!1}},execCommand:function(a,b){var c;this.focused&&this.focus();a=this._normalizeCommand(a,b);if(void 0!==b){if("heading"===a)throw Error("unimplemented");"formatblock"===
a&&(q("ie")||q("trident"))&&(b="\x3c"+b+"\x3e")}var e="_"+a+"Impl";if(this[e])c=this[e](b);else if((b=1<arguments.length?b:null)||"createlink"!==a)c=this.document.execCommand(a,!1,b);this.onDisplayChanged();return c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);var b=this._implCommand(a);return this[b]?this[b](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);
try{return this.document.queryCommandState(a)}catch(K){return!1}},queryCommandValue:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);if(q("ie")&&"formatblock"===a)a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(q("mozilla")&&"hilitecolor"===a){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(J){b=!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",
!1,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return this.selection[a].apply(this.selection,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(q("mozilla"))for(var b=this.editNode.firstChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(b);break}}else if(1===b.nodeType){var a=!0,c=b.tagName?b.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(c)?this.selection.selectElement(b):
this.selection.selectElementChildren(b);break}b=b.nextSibling}else a=!0,this.selection.selectElementChildren(this.editNode);a&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var a=!1;if(q("mozilla"))for(var b=this.editNode.lastChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(b);break}}else if(1===b.nodeType){a=!0;this.selection.selectElement(b.lastChild||b);break}b=b.previousSibling}else a=!0,this.selection.selectElementChildren(this.editNode);
a&&this.selection.collapse(!1)},getValue:function(a){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,a):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;b.innerHTML=a;this._preDomFilterContent(b)}else this.textarea.value=a;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(p.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){this.isClosed?this.setValue(a):this.window&&this.window.getSelection&&!q("mozilla")?this.setValue(a):this.window&&this.window.getSelection?(a=this._preFilterContent(a),this.execCommand("selectall"),this.execCommand("inserthtml",a),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(a);this._set("value",this.getValue(!0))},_preFilterContent:function(a){var b=
a;h.forEach(this.contentPreFilters,function(a){a&&(b=a(b))});return b},_preDomFilterContent:function(a){a=a||this.editNode;h.forEach(this.contentDomPreFilters,function(b){b&&p.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var c;p.isString(a)?c=a:(a=a||this.editNode,this.contentDomPostFilters.length&&(b&&(a=p.clone(a)),h.forEach(this.contentDomPostFilters,function(b){a=b(a)})),c=w.getChildrenHtml(a));p.trim(c.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(c="");h.forEach(this.contentPostFilters,
function(a){c=a(c)});return c},_saveContent:function(){var a=f.byId(I._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,b){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");b||(a=a.replace(/'/gm,"\x26#39;"));return a},getNodeHtml:function(a){l.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return w.getNodeHtml(a)},getNodeChildrenHtml:function(a){l.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return w.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);q("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var e=this.textarea.style;e.position="";e.left=e.top="";q("ie")&&(e.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;b.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;c.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);E._globalSaveHandler&&delete E._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,"");a=a.replace(/\sclass="apple-style-span"/gi,
"");return a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"\x3c$1b$2").replace(/<(\/)?em([ \>])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(a){if(!a)return!1;
if(q("ie")||q("trident")||q("edge"))return this.focused&&!this.disabled;var b=9>q("ie")?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(J){return!1}},_createlinkEnabledImpl:function(){var a=!0;return a=q("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var a=!0;return a=q("mozilla")||q("webkit")||q("ie")||q("trident")||q("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var a=!0;return a=q("mozilla")||q("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;q("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;q("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("copy");
return a},_pasteEnabledImpl:function(){var a=!0;return q("webkit")?!0:a=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(a){return q("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&(q("mozilla")||q("webkit"))?(a=this.selection.getAncestorElement("a"),this.selection.selectElement(a),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,a)},_hilitecolorImpl:function(a){var b;this._handleTextColorOrProperties("hilitecolor",a)||(q("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),console.log("Executing color command."),b=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):b=this.document.execCommand("hilitecolor",!1,a));return b},_backcolorImpl:function(a){q("ie")&&(a=a?a:null);var b=this._handleTextColorOrProperties("backcolor",a);b||(b=this.document.execCommand("backcolor",
!1,a));return b},_forecolorImpl:function(a){q("ie")&&(a=a?a:null);var b=!1;(b=this._handleTextColorOrProperties("forecolor",a))||(b=this.document.execCommand("forecolor",!1,a));return b},_inserthtmlImpl:function(a){a=this._preFilterContent(a);var c=!0;if(9>q("ie")){var e=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var d=e.item(0);e.length;)e.remove(e.item(0));d.outerHTML=a}else e.pasteHTML(a);e.select()}else if(8>q("trident")){var l=D.getSelection(this.window);
if(l&&l.rangeCount&&l.getRangeAt){e=l.getRangeAt(0);e.deleteContents();var p=b.create("div");p.innerHTML=a;for(var n,d=this.document.createDocumentFragment();a=p.firstChild;)n=d.appendChild(a);e.insertNode(d);n&&(e=e.cloneRange(),e.setStartAfter(n),e.collapse(!1),l.removeAllRanges(),l.addRange(e))}}else q("mozilla")&&!a.length?this.selection.remove():c=this.document.execCommand("inserthtml",!1,a);return c},_boldImpl:function(a){var b=!1;if(q("ie")||q("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("bold");
b||(b=this.document.execCommand("bold",!1,a));return b},_italicImpl:function(a){var b=!1;if(q("ie")||q("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("italic");b||(b=this.document.execCommand("italic",!1,a));return b},_underlineImpl:function(a){var b=!1;if(q("ie")||q("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("underline");b||(b=this.document.execCommand("underline",!1,a));return b},_strikethroughImpl:function(a){var b=!1;if(q("ie")||q("trident"))this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("strikethrough");b||(b=this.document.execCommand("strikethrough",!1,a));return b},_superscriptImpl:function(a){var b=!1;if(q("ie")||q("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("superscript");b||(b=this.document.execCommand("superscript",!1,a));return b},_subscriptImpl:function(a){var b=!1;if(q("ie")||q("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("subscript");b||(b=this.document.execCommand("subscript",!1,a));return b},
_fontnameImpl:function(a){var b;if(q("ie")||q("trident"))b=this._handleTextColorOrProperties("fontname",a);b||(b=this.document.execCommand("fontname",!1,a));return b},_fontsizeImpl:function(a){var b;if(q("ie")||q("trident"))b=this._handleTextColorOrProperties("fontsize",a);b||(b=this.document.execCommand("fontsize",!1,a));return b},_insertorderedlistImpl:function(a){var b=!1;if(q("ie")||q("trident")||q("edge"))b=this._adaptIEList("insertorderedlist",a);b||(b=this.document.execCommand("insertorderedlist",
!1,a));return b},_insertunorderedlistImpl:function(a){var b=!1;if(q("ie")||q("trident")||q("edge"))b=this._adaptIEList("insertunorderedlist",a);b||(b=this.document.execCommand("insertunorderedlist",!1,a));return b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(a){var b=0;if(a&&a.childNodes){var c;for(c=0;c<a.childNodes.length;c++)var d=e.position(a.childNodes[c]),
b=b+d.h}return b},_isNodeEmpty:function(a,b){return 1===a.nodeType?0<a.childNodes.length?this._isNodeEmpty(a.childNodes[0],b):!0:3===a.nodeType?""===a.nodeValue.substring(b):!1},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(a=a.parentNode;a&&null==a.nextSibling;)a=a.parentNode;a&&b.setStart(a.nextSibling,0)}return b},_adaptIESelection:function(){var a=D.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),c=b.startContainer,
e=b.startOffset;3===c.nodeType&&e>=c.length&&c.nextSibling;)e-=c.length,c=c.nextSibling;for(var d=null;this._isNodeEmpty(c,e)&&c!==d;)d=c,b=this._removeStartingRangeFromRange(c,b),c=b.startContainer,e=0;a.removeAllRanges();a.addRange(b)}},_adaptIEFormatAreaAndExec:function(a){var c=D.getSelection(this.window),e=this.document,d,l,p,n,f,w,g;if(a&&c&&c.isCollapsed){if(this.queryCommandValue(a)){a=this._tagNamesForCommand(a);p=c.getRangeAt(0);n=p.startContainer;3===n.nodeType&&(l=p.endOffset,n.length<
l&&(l=this._adjustNodeAndOffset(d,l),n=l.node,l=l.offset));for(;n&&n!==this.editNode;){d=n.tagName?n.tagName.toLowerCase():"";if(-1<h.indexOf(a,d)){g=n;break}n=n.parentNode}if(g&&(d=p.startContainer,a=e.createElement(g.tagName),b.place(a,g,"after"),d&&3===d.nodeType)){l=p.endOffset;d.length<l&&(l=this._adjustNodeAndOffset(d,l),d=l.node,l=l.offset);n=d.nodeValue;p=e.createTextNode(n.substring(0,l));var y=n.substring(l,n.length);y&&(f=e.createTextNode(y));b.place(p,d,"before");f&&(w=e.createElement("span"),
w.className="ieFormatBreakerSpan",b.place(w,d,"after"),b.place(f,w,"after"),f=w);b.destroy(d);l=p.parentNode;for(d=[];l!==g;){n=l.tagName;p={tagName:n};d.push(p);n=e.createElement(n);l.style&&n.style&&l.style.cssText&&(n.style.cssText=l.style.cssText,p.cssText=l.style.cssText);"FONT"===l.tagName&&(l.color&&(n.color=l.color,p.color=l.color),l.face&&(n.face=l.face,p.face=l.face),l.size&&(n.size=l.size,p.size=l.size));l.className&&(n.className=l.className,p.className=l.className);if(f)for(;f;)p=f.nextSibling,
n.appendChild(f),f=p;n.tagName==l.tagName?(w=e.createElement("span"),w.className="ieFormatBreakerSpan",b.place(w,l,"after"),b.place(n,w,"after")):b.place(n,l,"after");p=l;f=n;l=l.parentNode}if(f){if(1===f.nodeType||3===f.nodeType&&f.nodeValue)a.innerHTML="";for(;f;)p=f.nextSibling,a.appendChild(f),f=p}if(d.length){p=d.pop();f=e.createElement(p.tagName);p.cssText&&f.style&&(f.style.cssText=p.cssText);p.className&&(f.className=p.className);"FONT"===p.tagName&&(p.color&&(f.color=p.color),p.face&&(f.face=
p.face),p.size&&(f.size=p.size));for(b.place(f,a,"before");d.length;)p=d.pop(),g=e.createElement(p.tagName),p.cssText&&g.style&&(g.style.cssText=p.cssText),p.className&&(g.className=p.className),"FONT"===p.tagName&&(p.color&&(g.color=p.color),p.face&&(g.face=p.face),p.size&&(g.size=p.size)),f.appendChild(g),f=g;g=e.createTextNode(".");w.appendChild(g);f.appendChild(g)}else w=e.createElement("span"),w.className="ieFormatBreakerSpan",g=e.createTextNode("."),w.appendChild(g),b.place(w,a,"before");f=
D.create(this.window);f.setStart(g,0);f.setEnd(g,g.length);c.removeAllRanges();c.addRange(f);this.selection.collapse(!1);g.parentNode.innerHTML="";a.firstChild||b.destroy(a);return!0}return!1}p=c.getRangeAt(0);if((d=p.startContainer)&&3===d.nodeType)return l=p.startOffset,d.length<l&&(l=this._adjustNodeAndOffset(d,l),d=l.node,l=l.offset),n=d.nodeValue,p=e.createTextNode(n.substring(0,l)),y=n.substring(l),""!==y&&(f=e.createTextNode(n.substring(l))),w=e.createElement("span"),g=e.createTextNode("."),
w.appendChild(g),p.length?b.place(p,d,"after"):p=d,b.place(w,p,"after"),f&&b.place(f,w,"after"),b.destroy(d),f=D.create(this.window),f.setStart(g,0),f.setEnd(g,g.length),c.removeAllRanges(),c.addRange(f),e.execCommand(a),b.place(w.firstChild,w,"before"),b.destroy(w),f.setStart(g,0),f.setEnd(g,g.length),c.removeAllRanges(),c.addRange(f),this.selection.collapse(!1),g.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(a){var c=D.getSelection(this.window);if(c.isCollapsed&&c.rangeCount&&
!this.queryCommandValue(a)){var e=c.getRangeAt(0),d=e.startContainer;if(d&&3==d.nodeType&&!e.startOffset)return e="ul","insertorderedlist"===a&&(e="ol"),a=this.document.createElement(e),e=b.create("li",null,a),b.place(a,d,"before"),e.appendChild(d),b.create("br",null,a,"after"),a=D.create(this.window),a.setStart(d,0),a.setEnd(d,d.length),c.removeAllRanges(),c.addRange(a),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(c,e){var d=D.getSelection(this.window),l=this.document,
p,n,f,g,w;e=e||null;if(c&&d&&d.isCollapsed&&d.rangeCount&&(n=d.getRangeAt(0),(p=n.startContainer)&&3===p.nodeType)){w=n.startOffset;p.length<w&&(n=this._adjustNodeAndOffset(p,w),p=n.node,w=n.offset);f=p.nodeValue;n=l.createTextNode(f.substring(0,w));""!==f.substring(w)&&(g=l.createTextNode(f.substring(w)));f=l.createElement("span");w=l.createTextNode(".");f.appendChild(w);l=l.createElement("span");f.appendChild(l);n.length?b.place(n,p,"after"):n=p;b.place(f,n,"after");g&&b.place(g,f,"after");b.destroy(p);
p=D.create(this.window);p.setStart(w,0);p.setEnd(w,w.length);d.removeAllRanges();d.addRange(p);if(q("webkit")){d="color";if("hilitecolor"===c||"backcolor"===c)d="backgroundColor";a.set(f,d,e);this.selection.remove();b.destroy(l);f.innerHTML="\x26#160;";this.selection.selectElement(f);this.focus()}else this.execCommand(c,e),b.place(f.firstChild,f,"before"),b.destroy(f),p.setStart(w,0),p.setEnd(w,w.length),d.removeAllRanges(),d.addRange(p),this.selection.collapse(!1),w.parentNode.removeChild(w);return!0}return!1},
_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3===a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,offset:b}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return t(".ieFormatBreakerSpan",a).forEach(function(a){for(;a.firstChild;)b.place(a.firstChild,a,"before");
b.destroy(a)}),a},_stripTrailingEmptyNodes:function(a){function c(a){return/^(p|div|br)$/i.test(a.nodeName)&&0==a.children.length&&/^[\s\xA0]*$/.test(a.textContent||a.innerText||"")||3===a.nodeType&&/^[\s\xA0]*$/.test(a.nodeValue)}for(;a.lastChild&&c(a.lastChild);)b.destroy(a.lastChild);return a},_setTextDirAttr:function(a){this._set("textDir",a);this.onLoadDeferred.then(p.hitch(this,function(){this.editNode.dir=a}))}});return E})},"dijit/_editor/range":function(){define(["dojo/_base/array","dojo/_base/declare",
"dojo/_base/lang"],function(h,k,m){var g={getIndex:function(c,b){for(var e=[],a=[],d=c,n,p;c!=b;){var f=0;for(n=c.parentNode;p=n.childNodes[f++];)if(p===c){--f;break}e.unshift(f);a.unshift(f-n.childNodes.length);c=n}if(0<e.length&&3==d.nodeType){for(p=d.previousSibling;p&&3==p.nodeType;)e[e.length-1]--,p=p.previousSibling;for(p=d.nextSibling;p&&3==p.nodeType;)a[a.length-1]++,p=p.nextSibling}return{o:e,r:a}},getNode:function(c,b){if(!m.isArray(c)||0==c.length)return b;var e=b;h.every(c,function(a){if(0<=
a&&a<e.childNodes.length)e=e.childNodes[a];else return e=null,!1;return!0});return e},getCommonAncestor:function(c,b,e){e=e||c.ownerDocument.body;var a=function(a){for(var b=[];a;)if(b.unshift(a),a!==e)a=a.parentNode;else break;return b};c=a(c);b=a(b);for(var a=Math.min(c.length,b.length),d=c[0],n=1;n<a;n++)if(c[n]===b[n])d=c[n];else break;return d},getAncestor:function(c,b,e){for(e=e||c.ownerDocument.body;c&&c!==e;){var a=c.nodeName.toUpperCase();if(b.test(a))return c;c=c.parentNode}return null},
BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(c,b,e){e=e||c.ownerDocument.body;b=b||g.BlockTagNames;for(var a=null,d;c&&c!==e;){var n=c.nodeName.toUpperCase();!a&&b.test(n)&&(a=c);!d&&/^(?:BODY|TD|TH|CAPTION)$/.test(n)&&(d=c);c=c.parentNode}return{blockNode:a,blockContainer:d||c.ownerDocument.body}},atBeginningOfContainer:function(c,b,e){var a=!1,d=0==e;d||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(0,e))&&(d=!0);if(d)for(a=!0;b&&b!==c;){if(b.previousSibling){a=
!1;break}b=b.parentNode}return a},atEndOfContainer:function(c,b,e){var a=!1,d=e==(b.length||b.childNodes.length);d||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(e))&&(d=!0);if(d)for(a=!0;b&&b!==c;){if(b.nextSibling){a=!1;break}b=b.parentNode}return a},adjacentNoneTextNode:function(c,b){var e=c;c=0-c.length||0;for(b=b?"nextSibling":"previousSibling";e&&3==e.nodeType;)c+=e.length,e=e[b];return[e,c]},create:function(c){c=c||window;return c.getSelection?c.document.createRange():new d},getSelection:function(c,
b){if(c.getSelection)return c.getSelection();c=new f.selection(c);b||c._getCurrentSelection();return c}};if(!window.getSelection)var f=g.ie={cachedSelection:{},selection:function(c){this._ranges=[];this.addRange=function(b,c){this._ranges.push(b);c||b._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(b){return this._ranges[b]};this._getCurrentSelection=function(){this.removeAllRanges();var b;b=c.document.selection.createRange();
b="CONTROL"==c.document.selection.type.toUpperCase()?new d(f.decomposeControlRange(b)):new d(f.decomposeTextRange(b));this.addRange(b,!0),this.isCollapsed=b.collapsed}},decomposeControlRange:function(c){var b=c.item(0),e=c.item(c.length-1);c=b.parentNode;var a=e.parentNode,b=g.getIndex(b,c).o[0],e=g.getIndex(e,a).o[0]+1;return[c,b,a,e]},getEndPoint:function(c,b){var e=c.duplicate();e.collapse(!b);var a="EndTo"+(b?"End":"Start"),d=e.parentElement(),n,p,f;0<d.childNodes.length?h.every(d.childNodes,
function(b,l){var t;if(3!=b.nodeType)if(e.moveToElementText(b),0<e.compareEndPoints(a,c))if(f&&3==f.nodeType)n=f,t=!0;else return n=d,p=l,!1;else{if(l==d.childNodes.length-1)return n=d,p=d.childNodes.length,!1}else l==d.childNodes.length-1&&(n=b,t=!0);if(t&&n)return n=(b=g.adjacentNoneTextNode(n)[0])?b.nextSibling:d.firstChild,l=g.adjacentNoneTextNode(n),b=l[0],l=l[1],b?(e.moveToElementText(b),e.collapse(!1)):e.moveToElementText(d),e.setEndPoint(a,c),p=e.text.length-l,!1;f=b;return!0}):(n=d,p=0);
b||1!=n.nodeType||p!=n.childNodes.length||(b=n.nextSibling)&&3==b.nodeType&&(n=b,p=0);return[n,p]},setEndPoint:function(c,b,e){c=c.duplicate();var a;if(3!=b.nodeType)if(0<e){if(a=b.childNodes[e-1])if(3==a.nodeType)b=a,e=a.length;else if(a.nextSibling&&3==a.nextSibling.nodeType)b=a.nextSibling,e=0;else{c.moveToElementText(a.nextSibling?a:b);var d=a.parentNode;a=d.insertBefore(a.ownerDocument.createTextNode(" "),a.nextSibling);c.collapse(!1);d.removeChild(a)}}else c.moveToElementText(b),c.collapse(!0);
3==b.nodeType&&(a=g.adjacentNoneTextNode(b),d=a[0],a=a[1],d?(c.moveToElementText(d),c.collapse(!1),"inherit"!=d.contentEditable&&a++):(c.moveToElementText(b.parentNode),c.collapse(!0),c.move("character",1),c.move("character",-1)),e+=a,0<e&&c.move("character",e)!=e&&console.error("Error when moving!"));return c},decomposeTextRange:function(c){var b=f.getEndPoint(c),e=b[0],a=b[1],d=b[0],b=b[1];c.htmlText.length&&(c.htmlText==c.text?b=a+c.text.length:(b=f.getEndPoint(c,!0),d=b[0],b=b[1]));return[e,a,
d,b]},setRange:function(c,b,e,a,d,n){b=f.setEndPoint(c,b,e);c.setEndPoint("StartToStart",b);if(!n)var p=f.setEndPoint(c,a,d);c.setEndPoint("EndToEnd",p||b);return c}},d=g.W3CRange=k(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?g.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(c,b){b=parseInt(b);if(this.startContainer!==c||this.startOffset!=b)delete this._cachedBookmark,this.startContainer=c,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(c,b)},setEnd:function(c,b){b=parseInt(b);if(this.endContainer!==c||this.endOffset!=b)delete this._cachedBookmark,
this.endContainer=c,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(c,b)},setStartAfter:function(c,b){this._setPoint("setStart",c,b,1)},setStartBefore:function(c,b){this._setPoint("setStart",c,b,0)},setEndAfter:function(c,b){this._setPoint("setEnd",c,b,1)},setEndBefore:function(c,b){this._setPoint("setEnd",c,b,0)},_setPoint:function(c,b,e,a){e=g.getIndex(b,b.parentNode).o;this[c](b.parentNode,e.pop()+a)},_getIERange:function(){var c=(this._body||this.endContainer.ownerDocument.body).createTextRange();
f.setRange(c,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return c},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var c=this.startContainer,b=this._getIERange();3!==c.nodeType||this.startOffset||this.setStartBefore(c);b.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var c=new d([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);c._body=this._body;return c},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});m.setObject("dijit.range",g);return g})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(h,k,m){var g={};k.setObject("dijit._editor.html",g);var f=g.escapeXml=function(d,c){d=d.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");c||(d=d.replace(/'/gm,"\x26#39;"));return d};g.getNodeHtml=function(d){var c=[];g.getNodeHtmlHelper(d,c);return c.join("")};g.getNodeHtmlHelper=function(d,c){switch(d.nodeType){case 1:var b=d.nodeName.toLowerCase();if(!b||"/"==b.charAt(0))return"";c.push("\x3c",b);var e=[],a={},l;if(m("dom-attributes-explicit")||m("dom-attributes-specified-flag"))for(var n=0;l=d.attributes[n++];){var p=l.name;"_dj"===p.substr(0,3)||m("dom-attributes-specified-flag")&&
!l.specified||p in a||(l=l.value,("src"==p||"href"==p)&&d.getAttribute("_djrealurl")&&(l=d.getAttribute("_djrealurl")),8===m("ie")&&"style"===p&&(l=l.replace("HEIGHT:","height:").replace("WIDTH:","width:")),e.push([p,l]),a[p]=l)}else{var r=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML,a=r.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi),r=r.substr(0,r.indexOf("\x3e"));h.forEach(a,function(a){if(a){var c=a.indexOf("\x3d");if(0<c&&(a=a.substring(0,c),"_dj"!=a.substr(0,3)))if("src"!=a&&"href"!=
a||!d.getAttribute("_djrealurl")){var p;switch(a){case "style":p=d.style.cssText.toLowerCase();break;case "class":p=d.className;break;case "width":if("img"===b){(c=/width=(\S+)/i.exec(r))&&(p=c[1]);break}case "height":if("img"===b){(c=/height=(\S+)/i.exec(r))&&(p=c[1]);break}default:p=d.getAttribute(a)}null!=p&&e.push([a,p.toString()])}else e.push([a,d.getAttribute("_djrealurl")])}},this)}e.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(a=0;l=e[a++];)c.push(" ",l[0],'\x3d"',"string"===
typeof l[1]?f(l[1],!0):l[1],'"');switch(b){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":c.push(" /\x3e");break;case "script":c.push("\x3e",d.innerHTML,"\x3c/",b,"\x3e");break;default:c.push("\x3e"),d.hasChildNodes()&&g.getChildrenHtmlHelper(d,c),c.push("\x3c/",b,"\x3e")}break;case 4:case 3:c.push(f(d.nodeValue,!0));break;case 8:c.push("\x3c!--",f(d.nodeValue,!0),"--\x3e");break;default:c.push("\x3c!-- Element not recognized - Type: ",d.nodeType," Name: ",
d.nodeName,"--\x3e")}};g.getChildrenHtml=function(d){var c=[];g.getChildrenHtmlHelper(d,c);return c.join("")};g.getChildrenHtmlHelper=function(d,c){if(d)for(var b=d.childNodes||d,e=!m("ie")||b!==d,a,l=0;a=b[l++];)e&&a.parentNode!=d||g.getNodeHtmlHelper(a,c)};return g})},"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),function(h,
k,m,g,f,d,c,b){var e=function(a,b){this.storage=a;this.data=b};e.prototype={storage:null,data:null,filter:function(a){return this.storage._filter(this.data,a)},sort:function(a,b){return this.storage._sort(this.data,a,b)},fetch:function(){return this.storage._fetchRange(this.data)},fetchRange:function(a){return this.storage._fetchRange(this.data,a)},mayHaveChildren:function(a){return this.storage.mayHaveChildren(a)},getChildren:function(a){return this.storage.getChildren(a,{returnCollection:!0})}};
return h(g,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:c,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(a,b){k.mixin(this,b);this.storage=this;this.root={children:a||[]};k.mixin(this._provideBinding(this.root),{deepness:-1,selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(a){var b=this._getBinding(a);
b||(a[this.bindingProperty]=b={});return b},_getBinding:function(a){return this.bindingProperty?a[this.bindingProperty]:a},_initializeNode:function(a,b){var c=this._provideBinding(a);c.selected=!!c.selected;a.children?(c.selectCount=0,c.leafCount=0,m.forEach(a.children,function(e){this._registerNode(e);var d=this._provideBinding(e);d.parent=a;d.deepness=b;this._initializeNode(e,b+1);c.selectCount+=d.selectCount;c.leafCount+=d.leafCount},this),c.selectCount)?c.selectCount===c.leafCount&&(c.selected=
!0):c.selected=!1:("number"!==typeof c.leafCount&&(c.leafCount=1),c.selectCount=c.selected?c.leafCount:0)},isOwned:function(a,b){return b||a!==this.root?this.get(this.getIdentity(a))===a:!0},_registerNode:function(a){this._autoId&&void 0===a[this.idProperty]&&(a[this.idProperty]=this._autoId++);this.idProperty&&(this._hash[a[this.idProperty]]=a)},_unregisterNode:function(a){this.isOwned(a,!0)&&delete this._hash[a[this.idProperty]]},clear:function(){this.root.children.length&&(m.forEach(this.root.children,
function(a){this._unbindNode(a)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(a){a.children&&m.forEach(a.children,function(a){delete this._getBinding(a).parent;this._unbindNode(a)},this);this._unregisterNode(a);var b=this._getBinding(a);b.parent&&(this._incrementCounts(b.parent,-b.selectCount,-b.leafCount),delete b.parent);b!==a&&delete a[this.bindingProperty]},removeNodes:function(a,b){m.forEach(a&&a.slice(),function(a){if(this.isOwned(a,!0)){var b=
this._getBinding(a).parent,c=m.indexOf(b.children,a);0<=c&&b.children.splice(c,1);this._unbindNode(a)}},this);!b&&this.emit("updated")},addNodes:function(a,b,c){if(!b)b=this.root;else if(!this.isOwned(b)||!b.children)return!1;var e=this._getBinding(b).deepness+1,d=0,l=0;m.forEach(a,function(a){if(!this.isOwned(a)){b.children.push(a);this._registerNode(a);var c=this._provideBinding(a);c.parent=b;c.deepness=e;this._initializeNode(a,e+1);d+=c.selectCount;l+=c.leafCount}},this);this._incrementCounts(b,
d,l);!c&&this.emit("updated");return!0},select:function(a,b){return this.changeSelect(a,!0,b)},deselect:function(a){this.changeSelect(a,!1)},changeSelect:function(a,b,c){c=c||this.root.leafCount;var e=a&&this._getBinding(a);if(e){b=!!b;var d=(b?e.leafCount:0)-e.selectCount,l=0>d||this.root.selectCount+d<=c;if(!a.children)return l&&(e.selected=b,d&&this._incrementCounts(a,d)),l;l&&(e.selected=b);m.forEach(a.children,function(a){this.changeSelect(a,b,c)},this);return l}},_incrementCounts:function(a,
b,c){a=this._getBinding(a);a.selectCount+=b;c&&(a.leafCount+=c);a.selectCount?a.selectCount==a.leafCount&&(a.selected=!0):a.selected=!1;a.parent&&this._incrementCounts(a.parent,b,c)},getSelectionState:function(a){if(!this.isOwned(a))return!1;a=this._getBinding(a);return a.selectCount&&a.selectCount!=a.leafCount?"mixed":a.selected=!!a.selectCount},getSelectedNodes:function(a){return this.getDescendingNodes(this.root,!0,a)},getDescendingNodes:function(a,b,c){if(!this.isOwned(a))return[];var e=[];this._collectNodes(a.children,
e,b,c);return e},_collectNodes:function(a,b,c,e){m.forEach(a,function(a){var d=this._getBinding(a),p=null===c||void 0===c?d.leafCount:c?d.selectCount:d.leafCount-d.selectCount;p&&(!a.children||!e&&p==d.leafCount?b.push(a):this._collectNodes(a.children,b,c,e))},this)},inspectChildren:function(a,b,c,e){e&&(b=k.hitch(e,b));a=a||this.root;(a=a.children)&&c&&(a=a.slice(),a.sort(c));return m.every(a,function(a){var e=b(a);return null===e?!1:!1!==e&&a.children?this.inspectChildren(a,b,c):!0},this)},updateExpandedNodes:function(a,
b){for(var c in this._hash)this.updateExpand(this._hash[c],!!a[c]);this._updateOddEven(null,b)},updateExpand:function(a,b,c,e){if(a){var d=!1;a.children&&(a=this._getBinding(a),a.expanded!==b&&(d=!0,a.expanded=b));b={};d&&c&&this._updateOddEven(b,e);return b}},_updateOddEven:function(a,b){var c=1;this.inspectChildren(null,function(b){!1!==b.visible&&(c=1-c);var e=this._getBinding(b);a&&e.isOdd!==c&&(a[this.getIdentity(b)]=c);e.isOdd=c;return!(!b.children||!e.expanded)},b,this)},isOdd:function(a){return(a=
this._getBinding(a))&&a.isOdd},get:function(a){return this._hash[a]},getIdentity:function(a){return this.idProperty?a[this.idProperty]:null},query:function(a,b){return d(this._query(this.data,a,b))},_query:function(a,b,c){return this.queryEngine(b,c)(a)},filter:function(a){return this._filter(this.data,a)},_filter:function(a,b){a=this._query(a,b);return new e(this.storage,a)},sort:function(a,b){return this._sort(this.data,a,b)},_sort:function(a,b,c){"function"===typeof b?(a=a.slice(),a.sort(b)):(b=
Array.isArray(b)?b.map(function(a){return{attribute:a.property,descending:a.descending}}):[{attribute:b,descending:c}],a=this._query(a,{},{sort:b}));return new e(this.storage,a)},mayHaveChildren:function(a){return!!a.children},getChildren:function(a,b){var c=this.isOwned(a,!0)?a.children:null;a=this.isDstoreTree||b&&b.returnCollection;b=this.queryEngine({},a?null:b)(c||[]);return a?new e(this.storage,b):d(b)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(a){return this._fetchRange(this.data,
a)},_fetchRange:function(a,c){return b(f(c?a.slice(c.start,c.end):a.slice()),{totalLength:f(a.length)})}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(h){return h})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(h,k){function m(g,f){return k(this,function(d){for(var c=0,b=d.length;c<b;c++)g.call(f,d[c],c,d)})}return function(g,f){var d=f&&"totalLength"in f;if(g.then){g=h.delegate(g);var c=g.then(function(b){var c=d?f.totalLength:b.totalLength||
b.length;b.totalLength=c;return!d&&c});g.totalLength=d?f.totalLength:c;g.response=f&&f.response}else g.totalLength=d?f.totalLength:g.length;g.forEach=m;return g}})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p,r,t,v,q,B,x,u){var C=h(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function z(){this._selectedRowInfos={};this.inherited(z,arguments)},postCreate:function y(){this.inherited(y,arguments);g.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(a){this.selectSingleRow(this._previouslySelectedRowsByNode.get(a),
a)},selectSingleRow:function(a,b){this.unselectAllRows();this._selectRow(a,b)},_selectRow:function(a,b){g.add(a,this.selectedRowClass);g.add(a,"row-level-"+this._getNodeLevel(b));var e=this.tree.getIdentity(b),d={row:a,node:b,nodeId:e,index:b.parent&&b.parent.children.indexOf(b)};this._lastSelectedRowInfo=this._selectedRowInfos[e]=d;this._previouslySelectedRowsByNode.set(b,a);var p=this;this._outsideHandler=this._outsideHandler||c(document.body,"click",function(){B.isMouseOver(p.domNode)||p._isSelectionFrozen||
p.keepSelectionOnOutsideClick||p.unselectAllRows()})},_unselectRow:function(a,b){delete this._selectedRowInfos[this.tree.getIdentity(b)];g.remove(a,this.selectedRowClass)},unselectAllRows:function(){for(var a in this._selectedRowInfos)g.remove(this._selectedRowInfos[a].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(a){var b=this;a&&a.forEach(function(a){var c=b.grid.row(a);c&&c.element&&b._selectRow(c.element,a)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var a=[],b=[],c=[],e;for(e in this._selectedRowInfos)c.push(this._selectedRowInfos[e]);c.sort(function(a,b){return a.index-b.index});c.forEach(function(c){a.push(c.node);b.push(c.row)});return{nodes:a,rows:b}},_emitSelectedRowsEvent:function(){var a=
this._getSelectedNodesRows();if(a.nodes.length)this.onRowsSelected(a.nodes,a.rows)}});return h([a,l,m,C],{templateString:u,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(a,b){},getLabel:function(a,b){return a.label},postCreate:function F(){this.inherited(F,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a]);this._emitSelectionChanged()},setWidth:function(a){this.grid&&this.grid.domNode&&d.set(this.grid.domNode,"width",a+"px")},setHeight:function(a){this.grid&&this.grid.domNode&&d.set(this.grid.domNode,"height",a+"px")},row:function(a){return this.grid.row(a)},cell:function(a){return this.grid.cell(a)},_labelColumn:null,_createGrid:function(){var a=this;this._checkboxes={};var b={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},e;if(this.additionalColumns&&this.additionalColumns.length&&(e=this.additionalColumns.filter(function(b){return b.field===a.labelColumnField})[0])){for(var d in b)void 0===e[d]&&(e[d]=b[d]);b=e}b.indentWidth=b.indentWidth||16;this._labelColumn=b=this._prepareTreeColumn(b);d=[];this.firstColumns&&(d=d.concat(this.firstColumns));this.showCheckboxColumn&&d.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});e||d.push(b);this.additionalColumns&&(d=d.concat(this.additionalColumns));b=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&b.push(this.gridClass);this.fitParentSize&&b.push("fitParentSize");b=Object.assign({class:b.join(" "),keepScrollPosition:!0,store:this.tree,columns:d},this.gridParams);this.grid=this._createGridObject(b,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};v.oddEvenFix(this.grid);this.own(c(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();x.autoTooltip(this.domNode);this.showHeader||g.add(this.domNode,"esriMapsAnalystXGridNoHeader");c(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(b){(b=a.grid.row(b))&&a.onExpandChangedUser(b.data)})},_createGridObject:function(a,b){return new n(a,b)},onRowInserted:function(a,b){},_addGridHandlers:function(){function a(a,b){e.enableRowSelection&&b.parent&&(!e.selectedRowFilter||e.selectedRowFilter(b))&&(g.add(a,"esriMapsAnalystXClickable"),c(a,"click",function(c){setTimeout(function(){if(!e._isSelectionFrozen){if(c.shiftKey&&e.enableMultipleRowSelection){if(e._lastSelectedRowInfo&&e._lastSelectedRowInfo.row.parentNode&&e._lastSelectedRowInfo.node.parent===
b.parent){var d=q.getChildIndex(e._lastSelectedRowInfo.row.parentNode,e._lastSelectedRowInfo.row),p=q.getChildIndex(a.parentNode,a),f=d<=p?e._lastSelectedRowInfo.row:a,d=d<=p?a:e._lastSelectedRowInfo.row,p=f;if(f.id!==d.id){do{f=e.grid.row(p).data;e._selectRow(p,f);if(p.id===d.id)break;p=p.nextSibling}while(p)}}else e.selectSingleRow(a,b);q.stealFocus()}else r.isCtrl(c)&&e.enableMultipleRowSelection?e._lastSelectedRowInfo&&e._lastSelectedRowInfo.row.parentNode&&e._lastSelectedRowInfo.node.parent===
b.parent||e.allowSelectionFromManyParents?e._selectedRowInfos[b.id]?e._unselectRow(a,b):e._selectRow(a,b):e.selectSingleRow(a,b):e.selectSingleRow(a,b);e._emitSelectedRowsEvent()}})}))}var e=this;this.own(k.after(this.grid,"insertRow",function(c){var d=c&&e.grid._rowIdToObject[c.id];if(c){if(d&&e.hideInvisibleExpandoIcons&&(!d.children||!d.children.length)){var p=b(".dgrid-expando-icon",c)[0];p&&(p.style.width="0")}q[d&&!1===d.visible?"hide":"show"](c);a(c,d)}d&&(e._updateRowHighlighting(d,c),e.onRowInserted(c,
d));e.rowPostProcessor&&e.rowPostProcessor(c,d);return c}))},_addKeepScrollHandlers:function(){function a(a){if(!b.grid.contentNode)return a;if(b.fitParentSize){var c=q.hasScrollbars(b.grid.bodyNode);b.grid.headerNode.style[b.isLeftToRight()?"right":"left"]=c.w?"":"0px";b._lastContentWidth=b.grid.contentNode.style.width||b._lastContentWidth||"";b.grid.contentNode.style.width=c.h?b._lastContentWidth:""}else b.keepContentUnderScroll?b.grid.contentNode.style.width=b.grid.headerNode.firstChild.offsetWidth+
"px":!1===b.keepContentUnderScroll&&(b.grid.contentNode.style.width="");return a}var b=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)k.before(this.grid,"refresh",function(){b.hideCheckLimitMessage();b._lastCheckedNode=null}),k.after(this.grid,"resize",a),k.after(this.grid,"refresh",a)},_getNodeLevel:function(a){var b=-1;for(a=a&&a.parent;a;)b++,a=a.parent;return b},_prepareTreeColumn:function(a){return this._wrapTreeColumn(p(a))},_wrapTreeColumn:function(a){return a},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(a){var b=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,b);this.emit("SelectionChanged",{selected:b,toggledTreeNode:a})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(a){this._isRefreshSuspended=a},_refreshGrid:function(){if(!this._isRefreshSuspended){var a=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(a);for(var b in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[b].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[b].node).element,this._selectedRowInfos[b].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(a){return this.grid&&this.grid.scrollTo(a)},_renderCheckbox:function(a){if(!a.leafCount&&a!==this.tree.root||!this.showCheckboxColumn||
!1===a.selectable&&void 0===a.indepSelection)return document.createTextNode("");var b=new t(null,{class:"esriStyleInTable"});b.autoToggle=!1;b.node=a;this._updateCheckboxState(b,a);!1===a.enabled&&b.set("disabled",!0);a===this.tree.root?(this._rootCheckbox=b,q[this.showRootCheckbox?"show":"hide"](b.domNode)):this._checkboxes[this.tree.getIdentity(a)]=b;b.onClick=this._onCheckboxClick.bind(this,a,b);return b},_renderCheckboxForColumn:function(a){return(a=this._renderCheckbox(a))&&a.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(a,b,c){c.stopPropagation();this.hideCheckLimitMessage();var e=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(a));e&&c.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,a,b||c)?this._lastCheckedNode=a:(this._lastCheckedNode=e?a:null,
this._toggleNodeSelection(a,b||c),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(a,b,c){if(!a||a===b||a.parent!==b.parent)return!1;var e=b.parent.children,d=e.indexOf(a);b=e.indexOf(b);a=d<b?1:-1;for(var p=[],f=[],d=d+a;;d+=a){var l=e[d];((void 0===l.indepSelection?l.selected:l.indepSelection)?p:f).push(l);if(d===b)break}p.forEach(function(a){this._toggleNodeSelection(a,c)},this);f.every(function(a){return this._toggleNodeSelection(a,c)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(a,
b){var c=void 0===a.indepSelection?!a.selected:!a.indepSelection;if(c&&this.checkLimit){var e=this.getSelectedNodes().length,d="function"===typeof this.checkLimit?this.checkLimit(this.tree,e):this.checkLimit;if(e>=d)if(void 0===a.indepSelection&&a.children&&!1!==this.tree.getSelectionState(a))c=!1;else return this.showCheckLimitMessage(b),!1}e=!0;void 0===a.indepSelection?(e=this.tree.changeSelect(a,c,d),!e&&this.showCheckLimitMessage(b)):a.indepSelection=c;this._emitSelectionChanged(a);return e},
_checkLimitHandler:null,showCheckLimitMessage:function(a){if(this.checkLimitMessage){var b=a&&(a.domNode||a.target);b&&(e.show(this.checkLimitMessage,b,["above","below"]),a=function(){b&&e.hide(b);b=null},setTimeout(a,this.checkLimitMessageTimeout),this._checkLimitHandler=a,this.onCheckLimitReached(a))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(a){},_updateCheckboxState:function(a){if(a){var b=this._getNodeSelection(a.node);
a.set("checked",b);this._updateRowHighlighting(a.node,null,b)}},_getNodeSelection:function(a){return void 0!==a.indepSelection?a.indepSelection:this.tree.getSelectionState(a)},_updateRowHighlighting:function(a,b,c){this.highlightSelected&&a&&(c=void 0!==c?c:this._getNodeSelection(a),(b=b||this.grid&&this.row(a).element)&&(!0!==c||void 0===a.indepSelection&&!1===a.selectable?g.remove(b,"selected"):g.add(b,"selected")))},_renderLabel:function(a,b,c){b=this._renderLabelNode(a,c);this._provideLabelClickAction(b,
c,a);return b},_provideLabelClickAction:function(a,b,e){var d=this.expandOnNodeClick&&e.children?e.children.length&&(a=b,function(){this.toggleExpand(e);this.onExpandChangedUser(e)}.bind(this)):!1!==e.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,e,null):null;d&&(g.add(a,"esriMapsAnalystXClickable"),c(a,"click",function(a){a.stopPropagation();d(a)}))},_renderLabelNode:function(a){return f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)})},
_renderLabelHeader:function(a){var b=f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(g.add(b,"esriMapsAnalystXClickable"),c(b,"click",this._onCheckboxClick.bind(this,a,null)));return b},onRowsSelected:function(a,b){},isNodeSelected:function(a){return a&&(a.selected||a.indepSelection)},getSelectedNodes:function(){var a=this.tree.getSelectedNodes(!1),
b=this._getIndepSelectedNodes();return a.concat(b)},_getIndepSelectedNodes:function(){function a(c){c&&(c.indepSelection&&b.push(c),c.children&&c.children.forEach(a))}var b=[];a(this.tree.root);return b},getSelectedState:function(){if(!this.tree)return null;var a={normalSelection:{},indepSelection:{}},b=this.tree.getSelectedNodes(!1);b&&b.forEach(function(b){a.normalSelection[b.id]=!0});(b=this._getIndepSelectedNodes())&&b.forEach(function(b){a.indepSelection[b.id]=!0});return a},setSelectedState:function(a){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(a){for(var b in a.normalSelection){var c=this.tree.get(b);c&&this.tree.changeSelect(c,!0)}for(b in a.indepSelection)if(c=this.tree.get(b))c.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(a,b,c){a&&(void 0!==a.indepSelection?a.indepSelection=b:this.tree.changeSelect(a,b),!1!==c&&this.refreshCheckboxes())},isExpanded:function(a){a="string"===typeof a?a:a[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[a]},setExpanded:function(a,b,c){a="string"==typeof a?
a:a[this.tree.idProperty];void 0!==a&&(!1!==c?(c=this.grid.row(a))&&c.element&&this.grid.expand(a,b):this.grid._expanded[a]=b)},toggleExpand:function(a){this.setExpanded(a,!this.isExpanded(a))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(a){this.grid._expanded=a||{}},onExpandChangedUser:function(a){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(h,k,m){return h([k,m],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(h){return h(null,{_escapeValue:function(h){return h.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(h,
k,m,g,f,d,c,b,e,a,l){function n(a,b,c,e){e=this.grid.isRTL?"right":"left";var d=".dgrid-expando-icon";b&&(d+=".ui-icon.ui-icon-triangle-1-"+(c?"se":"e"));a=l("div"+d+"[style\x3dmargin-"+e+": "+a*(this.indentWidth||9)+"px; float: "+e+"]");a.innerHTML="\x26nbsp;";return a}function p(a){var b=this,c=this.style.height;c&&(this.style.display="0px"==c?"none":"block");a&&(l(this,".dgrid-tree-resetting"),setTimeout(function(){l(b,"!dgrid-tree-resetting")}));this.style.height=""}function r(g){var h=g.renderCell||
e.defaultRenderCell,q,r;g||(g={});g.shouldExpand=g.shouldExpand||function(a,b,c){return c};c.after(g,"init",function(){var e=g.grid,h=".dgrid-content .dgrid-column-"+g.id,t=[];e.cleanEmptyObservers=!1;if(!e.store)throw Error("dgrid tree column plugin requires a store to operate.");g.renderExpando||(g.renderExpando=n);t.push(e.on(g.expandOn||".dgrid-expando-icon:click,"+h+":dblclick,"+h+":keydown",function(a){var b=e.row(a);e.store.mayHaveChildren&&!e.store.mayHaveChildren(b.data)||"keydown"==a.type&&
32!=a.keyCode||"dblclick"==a.type&&r&&1<r.count&&b.id==r.id&&-1<a.target.className.indexOf("dgrid-expando-icon")||e.expand(b);-1<a.target.className.indexOf("dgrid-expando-icon")&&(r&&r.id==e.row(a).id?r.count++:r={id:e.row(a).id,count:1})}));b("touch")&&t.push(e.on(a.selector(h,a.dbltap),function(){e.expand(this)}));e._expanded||(e._expanded={});t.push(c.after(e,"insertRow",function(a){var b=this.row(a);g.shouldExpand(b,q,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));t.push(c.before(e,"removeRow",
function(a,b){if(a=a.connected)f("\x3e.dgrid-row",a).forEach(function(a){e.removeRow(a,!0)}),b||l(a,"!")}));g.collapseOnRefresh&&t.push(c.after(e,"cleanup",function(){this._expanded={}}));e._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};e.expand=function(a,c,n){var y=a.element?a:e.row(a),h=b("transitionend");a=new m;var w=a.promise;a.resolve();a=y.element;a=-1<a.className.indexOf("dgrid-expando-icon")?a:f(".dgrid-expando-icon",a)[0];n=n||!1===g.enableTransitions;
if(a&&a.mayHaveChildren&&(n||c!==!!this._expanded[y.id])){var r=void 0===c?!this._expanded[y.id]:c;l(a,".ui-icon-triangle-1-"+(r?"se":"e")+"!ui-icon-triangle-1-"+(r?"e":"se"));c=y.element;var t=c.connected,q,k,v={originalQuery:this.query};if(!t){var t=v.container=c.connected=l(c,"+div.dgrid-tree-container"),u=function(a){return e.store.getChildren(y.data,a)};g.allowDuplicates&&(v.parentId=y.id);"level"in a&&(u.level=a.level);w=w.then(function(){if(e.renderQuery)return e.renderQuery(u,v);var a=l(t,
"div"),b=e.renderArray(u(v),a,"level"in u?{queryLevel:u.level}:{});m.when(b,function(){l(a,"!")});return b});h?d(t,h,p):p.call(t)}t.hidden=!r;q=t.style;!h||n?(q.display=r?"block":"none",q.height=""):(r?(q.display="block",k=t.scrollHeight,q.height="0px"):(l(t,".dgrid-tree-resetting"),q.height=t.scrollHeight+"px"),setTimeout(function(){l(t,"!dgrid-tree-resetting");q.height=r?k?k+"px":"auto":"0px"}));r?this._expanded[y.id]=!0:delete this._expanded[y.id]}return w};c.after(g,"destroy",function(){k.forEach(t,
function(a){a.remove()});delete e.expand;delete e._calcRowHeight})});g.renderCell=function(a,b,c,e){var d=g.grid,p=Number(e&&e.queryLevel)+1,f=!d.store.mayHaveChildren||d.store.mayHaveChildren(a),n=e.parentId,p=q=isNaN(p)?0:p,d=g.renderExpando(p,f,d._expanded[(n?n+"-":"")+d.store.getIdentity(a)],a);d.level=p;d.mayHaveChildren=f;(a=h.call(g,a,b,c,e))&&a.nodeType?(l(c,d),l(c,a)):c.insertBefore(d,c.firstChild)};return g}r.defaultRenderExpando=n;g.getObject("dgrid.tree",!0);return dgrid.tree=r})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(h){function k(g,f){g=g.style;var d;if(f in g)return!0;f=f.slice(0,1).toUpperCase()+f.slice(1);for(d=m.length;d--;)if(m[d]+f in g)return m[d];return!1}var m=["ms","O","Moz","Webkit"];h.add("css-transitions",function(g,f,d){return k(d,"transitionProperty")});h.add("css-transforms",function(g,f,d){return k(d,"transform")});h.add("css-transforms3d",function(g,f,d){return k(d,"perspective")});h.add("transitionend",function(){var g=h("css-transitions");return g?!0===g?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[g]:!1});return h})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(h,k,m){var g={listenToKeyboardCombinationOverNode:function(f){return h(document.body,"keydown",function(d){if(!f.isCtrl||g.isCtrl(d))if(!f.isShift||d.shiftKey)if(!f.isAlt||d.altKey)String.fromCharCode(d.keyCode).toLowerCase()!==f["char"]||f.node&&!m.isNodeInLayout(f.node)||f.callback(d)})},isCtrl:function(f){return k("mac")?
f.metaKey:f.ctrlKey}};return g})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(h,k,m,g,f,d,c,b){function e(){l||(l=g.create("div",{"class":"esriGEOffscreen"},document.body));return l}var a={isHidden:function(a){return a&&m.contains(a,"esriGEHidden")},hasVisibleChildren:function(b){if(!b||!b.children.length)return!1;
for(var c=0;c<b.children.length;c++)if(!a.isHidden(b.children[c]))return!0;return!1},hide:function(b){return a.addTag(b,"esriGEHidden")},show:function(b){return a.removeTag(b,"esriGEHidden")},display:function(b,c){return a[c?"show":"hide"](b)},addTag:function(b,c){return a.applyCallback(b,function(a){a&&m.add(a,c)})},removeTag:function(b,c){return a.applyCallback(b,function(a){a&&m.remove(a,c)})},applyCallback:function(a,b,c){c&&(b=h.hitch(c,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,
b){if(!a||!a.children||!b)return-1;for(var c=0;c<a.children.length;c++)if(a.children[c]===b)return c;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],c=0;c<a.children.length;c++)b.push(a.children[c]);return b},getChildNodes:function(a){if(!a||!a.childNodes)return null;for(var b=[],c=0;c<a.childNodes.length;c++)b.push(a.childNodes[c]);return b},isChildOf:function(a,b,c){var e=!1,d=function(a){if(c&&!c(a))return!1;a.parentNode===b?e=!0:a.parentNode&&d(a.parentNode)};a&&
d(a);return e},isNodeInLayout:function(b){return a.isChildOf(b,document.body,function(b){return!a.isHidden(b)&&"none"!=d.get(b,"display")&&!m.contains(b,"dijitHidden")})},isNodeVisible:function(b){return a.isChildOf(b,document.body,function(a){return!m.contains(a,"dijitHidden")&&"hidden"!=d.get(a,"visibility")})},isNodeOnscreen:function(b){return a.isChildOf(b,document.body,function(a){return!m.contains(a,"esriGEOffscreen")})},enableContent:function(a,b,c){if(a){c=c||{};var e=a.children.length-1;
if(!(0>e)){e=a.children[e];m.contains(e,"esriGEDisabledContent")||(e=null);if(b)e&&a.removeChild(e);else if(e=e||g.create("div",{"class":"esriGEDisabledContent"+(c.overlayClass?" "+c.overlayClass:"")},a),c.textContent&&(e.textContent=c.textContent),!1!==c.fitParent&&(a=f[c.marginBox?"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",d.set(e,{height:a,marginTop:"-"+a});return e}}},enableContentAbsolute:function(b,c,e){if(b){e=e||{};var p=d.get(b,"position");"relative"!==p&&"absolute"!==p&&d.set(b,
"position","relative");return a.enableContent(b,c,{overlayClass:"esriGEAbsoluteStretched "+(e.overlayClass||"")+(e.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:e.textContent})}}},l;a.hideNodeInBackground=function(a,b){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;var c=g.create("div",null,a,"after"),d=g.create("div",{style:"position: absolute; left: 0px; top: 0px;"},e());g.place(a,d);b="DomUtil.hideNodeInBackground"+
(b?"."+b:"");k.set(c,"_bg_memo_node",b);k.set(d,"_bg_temp_node",b);b={undo:function(){c&&(c.parentNode&&g.place(a,c,"replace"),g.destroy(c),g.destroy(d),l.children.length||(g.destroy(l),l=null),c=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=b}};a.showNodeFromBackground=function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};a.noTransformPosition=function(a){function b(a){for(var b=
{x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent,b.x+=d.get(a,"borderLeftWidth"),b.y+=d.get(a,"borderTopWidth");return b}function c(a){return d.get(a,"width")+d.get(a,"paddingLeft")+d.get(a,"paddingRight")+d.get(a,"borderLeftWidth")+d.get(a,"borderRightWidth")}function e(a){return d.get(a,"height")+d.get(a,"paddingTop")+d.get(a,"paddingBottom")+d.get(a,"borderTopWidth")+d.get(a,"borderBottomWidth")}if(a){var f;if(a instanceof SVGElement&&a.getBBox)return f=(f=a.ownerSVGElement&&
a.ownerSVGElement.parentNode)&&b(f),a=a.getBBox(),{x:(a.x||0)+f.x,y:(a.y||0)+f.y,w:a.width||0,h:a.height||0};f=b(a);return{x:f.x,y:f.y,w:c(a),h:e(a)}}};a.uniteNodeBoxes=function(b,c){var e=1E6,d=1E6,f=-1E6,l=-1E6;b.forEach(function(b){b=a.noTransformPosition(b);e=Math.min(e,b.x);d=Math.min(d,b.y);f=Math.max(f,b.x+b.w);l=Math.max(l,b.y+b.h)});b={x:e,y:d,w:f-e,h:l-d};c&&(c=a.noTransformPosition(c),b.x-=c.x,b.y-=c.y);return b};a.getNodesBox=function(b,c){if(!b||!b.length)return null;for(var e=1E6,d=
-1E6,l=1E6,p=-1E6,n=0;n<b.length;n++)var g=b[n],g=c&&c.ignoreTranformation?a.noTransformPosition(g):f.position(g),e=Math.min(e,g.x),l=Math.min(l,g.y),d=Math.max(d,g.x+g.w),p=Math.max(p,g.y+g.h);return{x:e,y:l,w:d-e,h:p-l}};a.traverseChildren=function(a,b){function c(a){if(a&&a.children)for(var e=0;e<a.children.length;e++){var d=a.children[e];if(b(d))break;c(d)}}c(a)};a.scrollToListNode=function(a,b,c){var e=b.offsetTop+b.clientHeight,d=e-(a.scrollTop+a.clientHeight);0<d&&(a.scrollTop+=d);c&&(e-=b.clientHeight-
c.offsetTop,d=a.scrollTop-e,0<d&&(a.scrollTop-=d))};var n;a.getScrollbarSize=function(){if(!n){var a=g.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";n={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};g.destroy(a)}return n};a.hasScrollbars=function(a){var b=d.getComputedStyle(a);return{w:"scroll"===b.overflowX||a.offsetWidth>a.clientWidth&&"auto"===b.overflowX,h:"scroll"===b.overflowY||
a.offsetHeight>a.clientHeight&&"auto"===b.overflowY}};a.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:g.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=f.getMarginBox(this.div);delete a.l;delete a.t;return a},destroy:function(){g.destroy(this.div)}}};a.getTextBox=function(b,c){c=a.getMeasureContext(c);b=c.measureText(b);c.destroy();return b};a.getNodeFontFamily=function(a){return(a=
d.get(a,"fontFamily")||d.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};a.getNodeFontSize=function(a){return d.toPixelValue(a,d.get(a,"fontSize"))};a.stealFocus=function(){var a=new b;try{var c=g.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});g.place(c,document.body);c.select();g.destroy(c)}catch(t){}setTimeout(a.resolve,0);return a.promise};a.getWindowBox=function(){for(var b=[],c=0,e=document.body.children.length;c<e;c++){var d=document.body.children[c];
a.isHidden(d)||(a.hide(d),b.push(d))}c={w:document.body.clientWidth,h:document.body.clientHeight};b.forEach(function(b){a.show(b)});return c};a.getBorder=function(a){return{t:d.toPixelValue(a,d.get(a,"borderTopWidth")),r:d.toPixelValue(a,d.get(a,"borderRightWidth")),b:d.toPixelValue(a,d.get(a,"borderBottomWidth")),l:d.toPixelValue(a,d.get(a,"borderLeftWidth"))}};a.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};a.setAttribute=function(a,b,c){return 2===arguments.length?
k.set(a,b):k.set(a,b,c)};a.getAttribute=function(a,b,c){return 2===arguments.length?k.get(a,b):k.get(a,b,c)};a.addClass=function(a,b){return m.add(a,b)};a.removeClass=function(a,b){return m.remove(a,b)};a.toggleClass=function(a,b,c){return m[c?"add":"remove"](a,b)};a.replaceClass=function(a,b,c){return m.replace(a,b,c)};a.containsClass=function(a,b){return m.contains(a,b)};a.getStyle=function(a,b){return d.get(a,b)};a.setStyle=function(a,b,c){return 2===arguments.length?d.set(a,b):d.set(a,b,c)};a.toPixelValue=
function(a,b){return parseFloat(b)||0};a.getComputedStyle=function(a){return a&&1===a.nodeType&&window.getComputedStyle(a)};a.position=function(a,b){return f.position(a,b)};a.getMarginBox=function(a,b){return f.getMarginBox(a,b)};a.setMarginBox=function(a,b){return f.setMarginBox(a,b)};a.getMarginExtents=function(a,b){return f.getMarginExtents(a,b)};a.getContentBox=function(a,b){return f.getContentBox(a,b)};a.getPadBorderExtents=function(a,b){return f.getPadBorderExtents(a,b)};a.getPadExtents=function(a,
b){return f.getPadExtents(a,b)};a.getBorderExtents=function(a,b){return f.getBorderExtents(a,b)};a.docScroll=function(){return f.docScroll()};a.create=function(a,b,c,e){return g.create(a,b,c,e)};a.toDom=function(a){return g.toDom(a)};a.place=function(a,b,c){return g.place(a,b,c)};a.empty=function(a){return g.empty(a)};a.destroy=function(a){return g.destroy(a)};a.query=function(a,b){a=c(a,b);b=[];for(var e=0,d=a.length;e<d;e++)b.push(a[e]);return b};return a})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],
function(h){return h})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(h,k,m,g,f,d,c,b){return h(g,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(e,a,l){var n=b.isMobileDevice()?"touchstart":"click";a=a||{};var g=a["class"];a["class"]=(g?g+" ":"")+"esriTriStateCheckBoxIcon";
if(g=a.label){if(e instanceof HTMLLabelElement)e.innerHTML="\x26nbsp;"+g;else{var h=a.labelAttrs||{};h.innerHTML="\x26nbsp;"+g;h=d.create("label",h);e&&d.place(h,e);e=h}a=m.mixin({},a);delete a.label;delete a.labelAttrs}this.checkboxNode=d.create("div",a,e,e instanceof HTMLLabelElement?"first":l);this._currentClass=this._composeClass();c.add(this.checkboxNode,this._currentClass);e instanceof HTMLLabelElement?(f(e,n,m.hitch(this,this._onClick)),c.add(e,"esriTriStateCheckBoxLabel")):f(this.checkboxNode,
n,m.hitch(this,this._onClick));this.domNode=g?e:this.checkboxNode},postscript:function(){},_onClick:function(b){this.disabled||(this.autoToggle&&this.toggle(),b.checked=this.checked,this.onClick(k.fix(b)))},onClick:function(b){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(b){b!==this.checked&&(this.checked="mixed"===b?b:this._lastChecked=!!b,this._updateClass())},_disabledSetter:function(b){this.disabled=!!b;this._updateClass()},_updateClass:function(){var b=
this._composeClass();b!==this._currentClass&&(c.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var b="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?b+"Disabled":b}})})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff","dojo/domReady!"],function(h){var k={},m=function(){var f=window,d=f.navigator.platform,c=f.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,
iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!f.cordova&&!f.phonegap),phonegap:!(!f.cordova&&!f.phonegap),electron:!1,nwjs:!1},e=f.screen.width,a=f.screen.height,l=c.match(/(Android);?[\s\/]+([\d.]+)?/),n=c.match(/(iPad).*OS\s([\d_]+)/),g=c.match(/(iPod)(.*OS\s([\d_]+))?/),k=!n&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=0<=c.indexOf("MSIE ")||0<=c.indexOf("Trident/"),v=0<=c.indexOf("Edge/"),q=0<=c.indexOf("Gecko/")&&0<=c.indexOf("Firefox/"),B="Win32"===d,x=0<=c.toLowerCase().indexOf("electron"),
u="undefined"!==typeof nw&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.nw,d="MacIntel"===d,C="1024x1366 1366x1024 834x1194 1194x834 834x1112 1112x834 768x1024 1024x768".split(" ");!n&&d&&h("touch")&&0<=C.indexOf(e+"x"+a)&&((n=c.match(/(Version)\/([\d.]+)/))||(n=[0,1,"13_0_0"]),d=!1);b.ie=m;b.edge=v;b.firefox=q;l&&!B&&(b.os="android",b.osVersion=l[2],b.android=!0,b.androidChrome=0<=c.toLowerCase().indexOf("chrome"));if(n||k||g)b.os="ios",
b.ios=!0;k&&!g&&(b.osVersion=k[2].replace(/_/g,"."),b.iphone=!0);n&&(b.osVersion=n[2].replace(/_/g,"."),b.ipad=!0);g&&(b.osVersion=g[3]?g[3].replace(/_/g,"."):null,b.ipod=!0);b.ios&&b.osVersion&&0<=c.indexOf("Version/")&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]);b.webView=!(!(k||n||g)||!c.match(/.*AppleWebKit(?!.*Safari)/i)&&!f.navigator.standalone)||f.matchMedia&&f.matchMedia("(display-mode: standalone)").matches;b.webview=b.webView;b.standalone=
b.webView;b.desktop=!(b.ios||b.android)||x||u;b.desktop&&(b.electron=x,b.nwjs=u,b.macos=d,b.windows=B,b.macos&&(b.os="macos"),b.windows&&(b.os="windows"));b.pixelRatio=f.devicePixelRatio||1;return b}();k.device=m;k.isMobileDevice=function(){return!m.desktop};k.isPCWithTouchScreen=function(){return m.desktop&&h("touch")};k.isLandscape=function(){return 90===Math.abs(window.orientation)};var g=null;k.isWebLayout=function(){var f;g||(f=document.createElement("div"),f.style="visibility:hidden;height:1in;width:1in;position:absolute;left: -100%;top:-100%;",
document.body.appendChild(f),g=f.offsetHeight,f.parentNode.removeChild(f));f=g;f*=7;var d=document.body.offsetWidth;if(d>=f)return!0;var c=document.body.offsetHeight;return d>=c&&Math.sqrt(d*d+c*c)>=f?!0:!1};k.press=m.desktop?"mousedown":"touchstart";k.release=m.desktop?"mouseup":"touchend";k.click=m.desktop?"click":"touchend";k.clickOrRelease=m.desktop?"click, mouseup":"touchend";k.move=m.desktop?"mousemove":"touchmove";return k})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect",
"dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(h,k,m,g){function f(c,a,d){if(void 0===d){var e=c._rowIdToObject[a.id];e&&(d=(c=c.store)&&c.isOdd&&c.isOdd(e))}0!==d&&1!==d||k.replace(a,b[d],b[1-d])}function d(b,a,c){var e=b.store;if(e&&e.updateExpand){c=e.updateExpand(a.data,c,!0,b.getSortingFunction());for(var d in c)a=b.row(e.get(d)),a.element&&f(b,a.element,c[d])}}var c=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],b=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(b){k.add(b,
"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:b,update:function(a){a=a?1:0;k.replace(b,c[a],c[1-a])}}},oddEvenFix:function(b){b.expand&&(b.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?g.getSorting(a):null},h.after(b,"insertRow",function(a){f(b,a);return a}),h.before(b,"refresh",function(){var a=b.store;a&&a.updateExpandedNodes&&a.updateExpandedNodes(b._expanded,b.getSortingFunction())}),h.around(b,"expand",function(a){return function(c,
e){var f=c.element?c:b.row(c);void 0===e&&(e=!b._expanded[f.id]);!0===e&&d(b,f,!0);var l=a.apply(this,arguments);!1===e&&d(b,f,!1);return l}}),h.around(b,"adjustRowIndices",function(a){return function(){var c=b.store;c&&c.updateExpandedNodes&&c.updateExpand&&c.isOdd||a.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(b){function a(){var a=b.headerNode.firstChild,c=b.contentNode;c&&a&&a.offsetWidth!==c.offsetWidth&&(c.style.width="",a.style.width="",a.style.width=c.offsetWidth+"px")}
h.after(b,"resize",a);h.after(b,"refresh",a);h.after(b,"expand",function(b){setTimeout(a,100);setTimeout(a,300);return b})},inlineSortArrow:function(b,a,c){a=g.arrayToObject(g.listToArray(a));h.after(b,"updateSortArrow",function(e,d){if((d=e[0]&&e[0].attribute)&&a[d]){var f=(d=b._sortNode||b._findSortArrowParent(d))&&m(".dgrid-sort-arrow",d)[0];e=e[0].descending;if(f){f.remove();k.remove(d,"dgrid-sort-down dgrid-sort-up");var l=c?m(c,d)[0]:d.lastChild.append?d.lastChild:d;l.append||(l=d);k.add(l,
e?"dgrid-sort-down":"dgrid-sort-up");l.append(f)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(h,k,m,g,f,d){function c(a,b){a.some(function(c,e){b.func(c,e,b,a);if(b.stop)return!0});return b}function b(a){var b=a.split(" "),c=b[1];a={};switch(b[0]){case "max":a.result=-Infinity;b=function(a,b,e){e.result=Math.max(e.result,
f.getObject(a,c))};break;case "min":a.result=Infinity;b=function(a,b,e){e.result=Math.min(e.result,f.getObject(a,c))};break;case "sum":a.result=0;b=function(a,b,e){e.result+=f.getObject(a,c)};break;case "random":a.result=void 0;b=function(a,b,c,e){c.result=e[Math.round((e.length-1)*Math.random())];c.stop=!0};break;default:throw Error("Unsupported query.");}a.func=b;return a}var e={getSorting:function(a,b){if(!a)return f.compare;if("function"===typeof a)return a;var c;c=Array.isArray(a)?a:a.sort||
[a];var e={};"string"===typeof b&&(b=[b]);Array.isArray(b)?b.forEach(function(a){e[a]=f.compareNames}):b&&(e=b);return function(a,b){for(var d=void 0,l=0;d=c[l];l++){var g=a[d.attribute],n=b[d.attribute];if(g=(e[d.attribute]||(e["*"]?e["*"].bind(null,d.attribute):f.compare))(g,n,!1,!1,a,b))return d.descending?-g:g}return 0}},sort:function(a,b,c){return a.sort(e.getSorting(b,c))},sortIndices:function(a,b,c){a=m.map(a,function(a,b){return{value:a,index:b}});var d=e.getSorting(b,c);a.sort(function(a,
b){return d(a.value,b.value)});return m.map(a,function(a){return a.index})},getQueryEngine:function(a,b){return function(c,d){d&&d.sort&&(d=Object.assign({},d),d.sort=e.getSorting(d.sort,a));return(b||g)(c,d)}},objectToArray:function(a,b){void 0===b&&(b=null);var c=[],e=b?function(c){return a[c]?a[c][b]:void 0}:function(b){return a[b]},d;for(d in a){var f=e(d);"undefined"!==typeof f&&c.push(f)}return c},arrayToObject:function(a,b){var c={},e=d.composeIdentityFunction(b);m.forEach(a,function(a){c[e(a)]=
a});return c},composeIdentityFunction:d.composeIdentityFunction,removeDuplicates:d.removeDuplicates,splitArrayToBunches:d.splitArrayToBunches,contains:function(a,b){return-1!==m.indexOfLoose(a,b)},remove:function(a,b){b=m.indexOfLoose(a,b);-1!==b&&a.splice(b,1);return-1!==b},merge:function(a,b){a=a||[];null!=b&&Array.prototype.push.apply(a,b);return a},listToArray:function(a,b){if(null==a)return[];void 0===b&&(b=",");a="string"===typeof a?a.split(b):a.slice();for(b=0;b<a.length;b++)"string"===typeof a[b]&&
(a[b]=a[b].trim());return a},reorderArray:function(a,b){var c=a.length,e=0,d=Array(c),f={},g={},l;for(l in b){var h=Math.round(l);if(0<=h&&h<c&&!f[h]){var k=Math.round(b[l]);0<=k&&k<c&&!g[k]&&(d[k]=a[h],f[h]=1,g[k]=1,e++)}}e!==c&&(d=d.filter(function(a,b){return g[b]}),a.forEach(function(a,b){!f[b]&&d.push(a)}));return d},mapIndices:function(a,b,c,e){e=null==e?null:e;if(1===a)c.call(e,0,Math.floor(b/2));else{b=(b-1)/(a-1);for(var d=0;d<a;d++)c.call(e,d,Math.floor(.5+d*b))}},moveElement:function(a,
b,c,e){var d=Array.isArray(b)?b:[b];if(-1!==d.indexOf(c))return a.slice();var f=[];a.forEach(function(a){-1===d.indexOf(a)&&(a==c?"before"===e?(d.forEach(function(a){f.push(a)}),f.push(c)):"after"===e&&(f.push(c),d.forEach(function(a){f.push(a)})):f.push(a))});return f},min:function(a,b){var c=a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var e=a[0],d=b(e),f=0,g=1;g<c;g++){var l=b(a[g]);d>l&&(e=a[g],d=l,f=g)}return{key:f,value:e,comparisonValue:d}}},max:function(a,b){var c=
a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var e=a[0],d=b(e),f=0,g=1;g<c;g++){var l=b(a[g]);d<l&&(e=a[g],d=l,f=g)}return{key:f,value:e,comparisonValue:d}}},query:function(a,e){if("object"===typeof e)return c(a,e);if("string"===typeof e)return e=b(e),c(a,e).result},everyEqualProperty:function(a,b){if(2>a.length)return!0;var c;return!a.some(function(a,e){if(0===e)c=a[b];else if(c!==a[b])return!0})}};return e})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require",
"exports"],function(h,k){var m=Array.prototype,g={every:function(f,d,c){return null==f?!0:"string"===typeof f?m.every.call(f.split(""),d,c):m.every.call(f,d,c)},some:function(f,d,c){return null==f?!1:"string"===typeof f?m.some.call(f.split(""),d,c):m.some.call(f,d,c)},forEach:function(f,d,c){if(null!=f)return"string"===typeof f?m.forEach.call(f.split(""),d,c):m.forEach.call(f,d,c)},map:function(f,d,c){return null==f?[]:"string"===typeof f?m.map.call(f.split(""),d,c):m.map.call(f,d,c)},filter:function(f,
d,c){return null==f?[]:"string"===typeof f?m.filter.call(f.split(""),d,c):m.filter.call(f,d,c)},indexOf:function(f,d){return null==f?-1:"string"===typeof f?m.indexOf.call(f.split(""),d):m.indexOf.call(f,d)},indexOfLoose:function(f,d){if(null==f||void 0===f.length)return-1;if("string"===typeof f)return g.indexOfLoose(f.split(""),d);for(var c=0,b=f.length;c<b;c++)if(f[c]==d)return c;return-1},lastIndexOf:function(f,d){return null==f?-1:"string"===typeof f?m.lastIndexOf.call(f.split(""),d):m.lastIndexOf.call(f,
d)},lastIndexOfLoose:function(f,d){if(null==f||void 0===f.length)return-1;if("string"===typeof f)return g.lastIndexOfLoose(f.split(""),d);for(var c=f.length-1;0<=c;c--)if(f[c]==d)return c;return-1}};return g})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],function(h,k,m){var g=Object.assign({},h,k,m);g.getPrototypeOf=function(f){try{return Object.getPrototypeOf?
Object.getPrototypeOf(f):f.__proto__||f.constructor&&f.constructor.prototype}catch(d){return null}};g.isJson=function(f){return"object"===typeof f&&g.getPrototypeOf(f)===Object.prototype};g.copyJson=function(f){return void 0===f||null===f?null:JSON.parse(JSON.stringify({object:f})).object};g.convert=function(f,d,c){var b=d||function(){};d=b(f);if("undefined"!==typeof d)return d;if(Array.isArray(f)){var e=[];f.forEach(function(a){e.push(g.convert(a,b,c))},this);return e}if(!g.isJson(f))return f;d=
{};for(var a in f){var l=f[a],n=c?b(a):a;"undefined"===typeof n&&(n=a);d[n]=g.convert(l,b,c)}return d};g.getDeepCopy=function(f){return g.convert(f)};g.getRange=function(f,d,c){d="function"===typeof d?d.bind(null==c?null:c):null;var b,e,a;for(a in f)c=f[a],c=Number(null===d?c:d(c,a)),isNaN(c)||(void 0===b?b=e=c:(b=Math.min(b,c),e=Math.max(e,c)));return void 0===b?{}:{min:b,max:e}};g.removeEmptyObjects=function(f){function d(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(e){var a=b[e];
!a||"object"!==typeof a||Array.isArray(a)||Object.keys(a).length?d(a):(c=!0,delete b[e])})}for(var c=!0;c;)c=!1,d(f);return f};g.removeValues=function(f,d){function c(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(e){d(e,b[e])?c(b[e]):delete b[e]})}c(f);return f};g.isEqual=function(f,d){if(null===f||"object"!==typeof f||null===d||"object"!==typeof d)return f===d;if(Object.keys(f).length!==Object.keys(d).length)return!1;var c={},b;for(b in f)c[b]=!0;for(b in d)if(void 0!==c[b])delete c[b];
else return!1;for(b in f)if(!g.isEqual(f[b],d[b]))return!1;return!0};g.getObject=function(f,d){if(!d)return f;d=d.split(".");for(var c=0;c<d.length;c++)f=f&&f[d[c]];return f};g.formatNumber=function(f,d){d="number"===typeof d?{places:d}:d||{};if(null==d.places||0>d.places)d.places=g.getPlaces(f,!0),d.maxPlaces&&d.places>d.maxPlaces&&(d.places=d.maxPlaces);return k.formatNumber(f,d)};g.getPlaces=function(f,d){function c(a,c){var d=f.indexOf(a,b);if(0>d)return e;a=f.charAt(d+a.length);return!a||0>c.indexOf(a)?
e:d-b}f=+f;if(isNaN(f))return-1;f+="";var b=f.indexOf(".")+1,e=b?f.length-b:0;if(2>=e||!d)return e;d=0;if(!+f.substr(0,b-1))for(;"0"===f.charAt(b);)b++,d++,e--;for(var a=e-1;2<=a;a--){var g=Math.min(c("000000000000000".substr(0,a),"01234"),c("999999999999999".substr(0,a),"56789"));if(g!==e){e=g;break}}return e+d};return g})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(h,k){function m(g,f){for(var d=0,c=Object.keys(f);d<c.length;d++){var b=c[d];"object"!==
typeof g[b]||null===g[b]||"object"!==typeof f[b]||null===f[b]?g[b]=f[b]:Array.isArray(g[b])?Array.isArray(f[b])?g[b].concat(f[b]):g[b]=f[b]:Array.isArray(f[b])?g[b]=f[b]:m(g[b],f[b])}}return{map:function(g,f,d){void 0!==d&&(f=f.bind(d));if("object"!==typeof g)throw Error("Object or array expected");if(Array.isArray(g)){d=[];for(var c=0,b=g.length;c<b;c++)d.push(f(g[c],c));return d}d={};c=0;for(b=Object.keys(g);c<b.length;c++){var e=b[c];Object.hasOwnProperty.call(g,e)&&(d[e]=f(g[e],e))}return d},
deepAssign:function(g){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];for(d=0;d<f.length;d++)m(g,f[d]);return g}}})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(h){var k={};Math.log10=Math.log10||function(g){return Math.log(g)*Math.LOG10E};k.populateObject=function(g,f,d){function c(b,e){function a(a){var f=b[a],g=e[a],l=f&&"object"===typeof f;void 0!==f&&(void 0===g?e[a]=f:g&&"object"===typeof g&&l?c(f,g):d&&(l?(g=e[a]={},c(f,g)):e[a]=b[a]))}
if(b&&e&&!(Array.isArray(b)&&!Array.isArray(e)||Array.isArray(e)&&!Array.isArray(b)))if(Array.isArray(b))b.forEach(function(b,c){a(c)});else for(var f in b)a(f)}c(f,g);return g};k.filterByPattern=function(g,f){function d(b,c,a){for(var e in b){var f=b[e],g=c[e];if(Array.isArray(f)){var h=f[0];if(g&&Array.isArray(g)){var k=a[e]=[];g.forEach(function(a){if(a&&"object"===typeof a){var b=Array.isArray(a)?[]:{};d(h,a,b);k.push(b)}})}}else if("object"===typeof f){if(g&&"object"===typeof g){var m=a[e]={};
d(f,g,m)}}else void 0!==g&&(a[e]=g)}}var c={};d(f,g,c);return c};k.traverseObject=function(g,f){for(var d in g){var c=g[d];f(c,d,g);c&&"object"===typeof c&&k.traverseObject(c,f)}};k.copyOwnJsonProperties=function(g,f,d){f=f||{};for(var c in g){var b=g[c];g.hasOwnProperty(c)&&"function"!=typeof b&&(b&&"object"==typeof b&&d&&(b=d(c,b)),void 0!==b&&(f[c]=b))}return f};k.removeUndefinedProperties=function(g){g&&Object.keys(g).forEach(function(f){void 0===g[f]&&delete g[f]});return g};k.getValue=function(g,
f){if("string"!==typeof f)return g;f=f.split(".");for(var d=0;d<f.length;d++)g=g&&g[f[d]];return g};k.setValue=function(g,f,d){if("string"===typeof f&&(f=f.split("."),f.length)){for(var c=0;c<f.length-1;c++)g=g&&g[f[c]];g&&(g[f[f.length-1]]=d)}};k.isNumber=function(g){return!isNaN(parseFloat(g))&&isFinite(g)};k.roundNumber=function(g,f){return"number"!==typeof g?g:parseFloat(g.toFixed(void 0!==f?f:0))};k.getBestPrecision=function(g){return 0===g?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(g))))};
k.getPlaces=function(g,f){function d(a,e){var d=g.indexOf(a,c);if(0>d)return b;a=g.charAt(d+a.length);return!a||0>e.indexOf(a)?b:d-c}g=+g;if(isNaN(g))return-1;g+="";var c=g.indexOf(".")+1,b=c?g.length-c:0;if(2>=b||!f)return b;f=0;if(!+g.substr(0,c-1))for(;"0"===g.charAt(c);)c++,f++,b--;for(var e=b-1;2<=e;e--){var a=Math.min(d("000000000000000".substr(0,e),"01234"),d("999999999999999".substr(0,e),"56789"));if(a!==b){b=a;break}}return b+f};k.formatNumber=function(g,f){f="number"===typeof f?{places:f}:
f||{};var d=f.places,c={};0<=d?c.places=d:d=-1;g=h.format(g,c);if(f.noSeparator){var c=k.getSeparator(),b;if(c)for(;0<=(b=g.indexOf(c));)g=g.substr(0,b)+g.substr(b+1)}if(f.preserveTrailingZeroes||0>=d||!g)return g;for(f=g.length;0<d&&"0"==g.charAt(f-1);)f--,--d||f--;return g.substr(0,f)};k.formatNumberAsCurrency=function(g,f,d){return f?f.split(";")[0>g?1:0].replace("0",k.formatNumber(Math.abs(g),d)):k.formatNumber(g,d)};var m;k.getSeparator=function(){void 0===m&&(m=h.format(9999,{places:0}).replace(/9/g,
""));return m};k.parseNumber=function(g,f,d,c){if(""===g)return"undefined"!==typeof d?d:NaN;if(null==g||"string"!==typeof g&&isNaN(g))return NaN;g=String(g);if(!g.trim())return void 0!==d?d:NaN;d=h.parse(g,{strict:c});isNaN(d)&&g.trim().length&&(d=c?h.parse(g,{strict:c,locale:"en-US"}):Number(g));return isNaN(d)||void 0===f||0>f?d:h.round(d,f)};k.parsePercentOrCurrency=function(g,f,d,c,b){"string"===typeof g&&(g=g.replace("%",""),f&&(f=f.split(";")[0].replace("0",""),g=g.replace(f,"")));return k.parseNumber(g,
d,c,b)};k.compareEqual=function(g,f,d){return void 0===d?g===f:Number(Number(g).toFixed(d))===Number(Number(f).toFixed(d))};return k})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function h(f,d,c,b){f=void 0===f||null===f;return f!=(void 0===d||null===d)?(d=f?-1:1,(void 0===b?c:b)?-d:d):f?0:null}function k(f){var d=/^(.+)\s([1-9]\d*)$/.exec(f);return d?{base:d[1],number:d[2]}:/^[1-9]\d*$/.test(f)?{base:"",number:+f}:{base:f,number:0}}var m={NEWEST:"newest",OLDEST:"oldest",
ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(f,d,c,b){b=h(f,d,c,b);if(null!==b)return b;f=Number(f);d=Number(d);b=f>d?1:f<d?-1:0;return c?-b:b},compareString:function(f,d,c,b){b=h(f,d,c,b);if(null!==b)return b;f=String(f);d=String(d);b=f.localeCompare(d);return c?-b:b}},g=/^(.+)\s([1-9]\d*)(\D*)$/;m.compareNames=function(f,d,c,b){var e=k("string"===typeof f?f.toLowerCase():f),a=k("string"===typeof d?d.toLowerCase():d),l=null;if(e.base===a.base)l=m.compareNumeric(e.number,
a.number,c,b);else{var n=g.exec(e.base);if(n){var h=g.exec(a.base);h&&n[1]===h[1]&&n[3]===h[3]&&(l=m.compareNumeric(n[2],h[2],c,b))}null===l&&(l=m.compareString(e.base,a.base,c,b))}return l||m.compareString(f,d,c,b)};m.compare=function(f,d,c,b){var e=h(f,d,c,b);if(null!==e)return e;e=typeof f;typeof d!=e&&(e="");switch(e){case "number":case "boolean":break;case "object":f=f.valueOf();d=d.valueOf();break;default:return m.compareString(f,d,c,b)}e=f>d?1:f<d?-1:0;return c?-e:e};return m})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],
function(h){var k={},m={}.toString();k.arraysEqual=function(g,f){if(!g&&!f)return!0;if(!g||!f||g.length!==f.length)return!1;for(var d=0;d<g.length;d++)if(g[d]!==f[d])return!1;return!0};k.composeIdentityFunction=function(g,f){var d="function"===typeof g?g:g?function(c){return c[g]}:function(c){return c};return function(c){return(c=d(c))&&c.toString?c.toString():f&&void 0===c?c:String(c)}};k.removeDuplicates=function(g,f){var d=[],c={};f=k.composeIdentityFunction(f,!0);h.forEach(g,function(b,e){var a=
f(b);a===m&&(void 0===b["__ArrayUtil.js_uniqueKey__"]&&(b["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+e),a=b["__ArrayUtil.js_uniqueKey__"]);void 0===a||a in c||(c[a]=b,d.push(b))});return d};k.splitArrayToBunches=function(g,f){f=f||100;for(var d=[],c,b=0,e=g.length;b<e;b++)c&&c.length!==f||(c=[],d.push(c)),c.push(g[b]);return d};return k})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(h,k,m,g,f,d,c){var b=Object.assign({},c);b.select=function(c){return b.addTag(c,"selected")};b.unselect=function(c){return b.removeTag(c,"selected")};b.floatStart=function(c){return b.addTag(c,"esriMapsAnalystXFloatStart")};b.floatEnd=function(c){return b.addTag(c,"esriMapsAnalystXFloatEnd")};b.addSpacer=function(c,a){c=h.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},c);if(a)b[a](c);return c};b.getAndUpdateNumber=function(b,a){if(!b)return NaN;var c=b.get&&b.set;void 0===
a&&(a=0);var e=d.parseNumber(c?b.get("value"):b.value,a);isNaN(e)||(c?b.set("value",d.formatNumber(e,a)):b.value=d.formatNumber(e,a));return e};b.getAndUpdateString=function(b){if(!b)return null;if(b.get&&b.set){var a=b.get("value").trim();b.set("value",a)}else a=b.value.trim(),b.value=a;return a};b.getScreenScaleFactor=function(){return b.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};b.positionAtCenter=function(b,a){if(b&&a){var c=k.position(b);a=k.position(a);c.w&&c.h&&a.w&&a.h&&m.set(b,
{left:(a.w-c.w)/2+"px",top:(a.h-c.h)/2+"px"})}};b.showAroundOverlay=function(c,a){a=a||{};b.removeAroundOverlay(c);var e={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},d=k.position(c);if(a.viewPortContainer){var g=k.position(a.viewPortContainer),r=d.x,t=d.y;d.x=Math.max(d.x,g.x);d.w-=d.x-r;d.y=Math.max(d.y,g.y);d.h-=d.y-t;d.w=Math.min(d.w,g.x+g.w-d.x);d.h=Math.min(d.h,g.y+g.h-d.y)}c.__aroundOverlays=(a.placeInNode?[{l:0,t:-d.y,w:d.w,h:d.y},{l:d.w,t:-d.y,w:document.body.clientWidth-(d.x+
d.w),h:document.body.clientHeight},{l:0,t:d.h,w:d.w,h:document.body.clientHeight-(d.y+d.h)},{l:-d.x,t:-d.y,w:d.x,h:document.body.clientHeight}]:[{l:d.x,t:0,w:d.w,h:d.y},{w:document.body.clientWidth-(d.x+d.w),r:0,t:0,b:0},{l:d.x,h:document.body.clientHeight-(d.y+d.h),w:d.w,b:0},{l:0,t:0,w:d.x,b:0}]).map(function(b){var d=h.create("div",{"class":a.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},a.placeInNode?c:document.body),f={position:"absolute"},g;for(g in e)void 0!==b[g]&&(f[e[g]]=Math.round(b[g])+
"px");m.set(d,f);return d});d=function(){b.removeAroundOverlay(c)};a.removeOnClick&&(c.__aroundOverlaysRemoveHandle=f.once(document.body,"click",d));c.__aroundOverlaysResizeHandle=f(window,"resize",function(){b.showAroundOverlay(c,a)});var v;c.__aroundOverlaysSetIntervalHandle=setInterval(function(){if(v){var d=k.position(c);d.x==v.x&&d.y==v.y&&d.w==v.w&&d.h==v.h||b.showAroundOverlay(c,a)}else v=k.position(c)},50);return{remove:d}};b.removeAroundOverlay=function(b){b.__aroundOverlays&&b.__aroundOverlays.forEach(function(a){h.destroy(a)});
delete b.__aroundOverlays;b.__aroundOverlaysRemoveHandle&&b.__aroundOverlaysRemoveHandle.remove();delete b.__aroundOverlaysRemoveHandle;b.__aroundOverlaysResizeHandle&&b.__aroundOverlaysResizeHandle.remove();delete b.__aroundOverlaysResizeHandle;clearInterval(b.__aroundOverlaysSetIntervalHandle);delete b.__aroundOverlaysSetIntervalHandle};b.getDocumentStyleDeclaration=function(b){function a(c){var d;try{d=c.rules||c.cssRules}catch(v){d=null}if(d)for(c=0;c<d.length;c++){var e=d[c];if(e.styleSheet){if(e=
a(e.styleSheet))return e}else if(e.selectorText==b)return e.style}}for(var c=0;c<document.styleSheets.length;c++){var d=a(document.styleSheets[c]);if(d)return d}return null};b.getNodeFontFamily=function(b){return(b=m.get(b,"fontFamily")||m.getComputedStyle(b)["font-family"])?b.replace(/'|"/g,"").split(",")[0]:b};b.getNodeFontSize=function(b){return m.toPixelValue(b,m.get(b,"fontSize"))};b.listenToNodeAdded=function(c,a,d){if(b.isNodeInLayout(c))a();else{c.__listenToNodeAddedHandle&&c.__listenToNodeAddedHandle.remove();
var e=setInterval(function(){b.isNodeInLayout(c)&&(c.__listenToNodeAddedHandle&&c.__listenToNodeAddedHandle.remove(),a())},d||100);c.__listenToNodeAddedHandle={remove:function(){clearInterval(e);delete c.__listenToNodeAddedHandle}};return c.__listenToNodeAddedHandle}};b.isNodeVisible=function(c){return b.isChildOf(c,document.body,function(a){return!g.contains(a,"dijitHidden")&&"hidden"!=m.get(a,"visibility")})};b.enableHyperlink=function(b,a){a?g.replace(b,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):
g.replace(b,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return b})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(h,k){var m;k.unitTesting_setCursorOverNode=function(g){g=h.position(g);k.unitTesting_setCursorPosition(g.x+g.w/2,g.y+g.h/2)};k.unitTesting_setCursorPosition=function(g,f){k._latestEvent={clientX:g,pageX:g,clientY:f,pageY:f}};k.unitTesting_lockPosition=function(g){m=g};
k.unitTesting_shiftMousePosition=function(g,f){k.unitTesting_setCursorPosition(k._latestEvent.clientX+(g||0),k._latestEvent.clientY+(f||0))};k._setLatestEvent=function(g){m||(k._latestEvent=g)};return k})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(h,k,m,g,f,d){var c={_latestEvent:null,_setLatestEvent:function(b){c._latestEvent=b}};m("touch")?(k(document.body,g.press,function(b){c._setLatestEvent(c.fixTouchEvent(b,
!0))}),k(document.body,g.move,function(b){c._setLatestEvent(c.fixTouchEvent(b,!0))})):k(document.body,"mousemove",function(b){c._setLatestEvent(c.fixTouchEvent(b,!0))});var b;k(document.body,"mousedown",function(){b||(b=!0,k.once(document.body,"mouseup, click",function(){b=!1}))});c.getCursorPosition=function(){return c._latestEvent};c.isMouseOver=function(b,a){var e=a&&a.event||c._latestEvent;if(!(b&&b.parentNode&&b.getBoundingClientRect&&e))return!1;if(a&&a.checkAllChildren){a=h.mixin({},a);delete a.checkAllChildren;
var g=!1;d.traverseChildren(b,function(b){if(c.isMouseOver(b,a))return g=!0});return g}return c.isMouseOverBox(f.position(b),a)};c.isMouseOverBox=function(b,a){if(!b)return!1;var d=a&&a.event||c._latestEvent;a&&a.ignoreBorderTolerance&&(a=a.ignoreBorderTolerance,b=h.mixin({},b),b.x+=a,b.y+=a,b.w-=2*a,b.h-=2*a);return b.x<=d.clientX&&b.x+b.w>=d.clientX&&b.y<=d.clientY&&b.y+b.h>=d.clientY};c.fixTouchEvent=function(b,a){b=a?h.mixin({},b):b;b.touches&&1===b.touches.length?(a=b.touches[0],b.clientX=a.clientX,
b.clientY=a.clientY,b.pageX=a.pageX,b.pageY=a.pageY):b.changedTouches&&1===b.changedTouches.length&&(a=b.changedTouches[0],b.clientX=a.clientX,b.clientY=a.clientY,b.pageX=a.pageX,b.pageY=a.pageY);return b};c.isBeingDragged=function(){return b};c.addOverOutHandler=function(b){function a(){clearTimeout(e);d&&d.remove()}var d,e,f=k(b.node,"mouseover",function(f){function g(){c.isMouseOver(b.node)&&(b.onMouseOver(f),d=k(document.body,"mousemove",function(d){c.isMouseOver(b.node)||(a(),b.onMouseOut(d))}))}
a();b.delayTimeout?e=setTimeout(g,b.delayTimeout):g()});return{remove:function(){f.remove();a()}}};c.addOutHandler=function(b,a){return k(document.body,"mousemove",function(d){c.isMouseOver(b,{checkAllChildren:!0})||a(d)})};return c})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p,r){function t(){z&&(z.isMultilineContainer?u.hideTooltipForNode(z):(clearInterval(z.__autoTooltipInLayoutCheckHandle),delete z.__autoTooltipInLayoutCheckHandle,l.hide(z)),z=null)}function v(a,b){b=b||"";var c=h.create("div",{class:"esriMapsAnalystXValidationTooltip"+b},document.body);!b&&h.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+b},c);h.create("div",{innerHTML:a,class:"esriMapsAnalystXValidationTooltipBody"+b},c);k.set(c,"position","fixed");return c}
function q(a,b){function c(){a&&(document.body.removeChild(a),g.forEach(function(a){a.remove()}),a=g=null)}b=b.textbox||b;var e=m.getMarginBox(a),f=m.position(b);"rtl"===document.dir?k.set(a,{left:f.x-e.w+"px",top:f.y+f.h/2-e.h/2+"px"}):k.set(a,{left:f.x+f.w+"px",top:f.y+f.h/2-e.h/2+"px"});var g=[d(document.body,"mousedown, keydown",c),d(b,"blur",c)];return{remove:c}}function B(b,c,d){function e(){var a=h.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},l);g.add(a,"right"===d?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function f(){y=h.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},l);h.create("div",{innerHTML:b,class:"esriMapsAnalystXClosableTooltipLabel"},y);n=h.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},y)}c={class:"esriMapsAnalystXClosableTooltip "+(c||"")};c.id=a();var l=h.create("div",c,document.body),y,n;"right"!==d?(f(),e()):(e(),f());k.set(l,"position","fixed");return{tooltip:l,
body:y,closeButton:n}}function x(a,b,c,e){var f=m.getMarginBox(a.tooltip),g=m.position(b);"rtl"===document.dir&&"right"!==e||"rtl"!==document.dir&&"right"===e?k.set(a.tooltip,{left:g.x+g.w+"px",top:g.y+g.h/2-f.h/2+"px"}):k.set(a.tooltip,{left:g.x-f.w+"px",top:g.y+g.h/2-f.h/2+"px"});var l,y,w,h=function(){l&&clearTimeout(l);y&&clearInterval(y);w&&w.remove();a.tooltip.parentNode===document.body&&document.body.removeChild(a.tooltip)};y=setInterval(function(){n.isNodeInLayout(b)||h();n.isNodeVisible(b)?
n.show(a.tooltip):n.hide(a.tooltip)},300);c&&(l=setTimeout(h,c));w=d(a.closeButton,"click",function(){h()});a.tooltip._removeFunc=h;return a.tooltip}var u={},C={};u.hideTooltipForNode=r.hideTooltipForNode;u.setTooltipToNode=r.setTooltipToNode;u.createTooltip=function(b,c,e){var f={orientation:m.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};c&&(f.innerHTML=c);e&&(f=Object.assign(f,e));f.id=a();f.toMouseCursor&&(f.mouseEvent=p.getCursorPosition(),delete f.toMouseCursor);c=f.mouseEvent;delete f.mouseEvent;
e=f.htmlFragment;delete f.htmlFragment;var g=f.widget;delete f.widget;var l=f.orientation;delete f.orientation;var n=f.offset;delete f.offset;var y=f.horizontalOffset;delete f.horizontalOffset;var q=h.create("div",f,b?b.container:document.body);e?h.place(e,q):g&&g.placeAt(q);k.set(q,"position","fixed");var u=m.getMarginBox(q),v=function(a,b){var c=a.touches?event.touches[0].clientX:a.clientX;a=a.touches?event.touches[0].clientY:a.clientY;var d,e,f=n.x,g=n.y;"left"===l?0>c-u.w-f&&(d="right"):c+u.w+
f>document.body.clientWidth&&(d="left");a+u.h+g>document.body.clientHeight&&(e="above");d=d||l;k.set(q,{left:b?b+"px":c+("left"===d?-u.w-f:f)+"px",top:a+("above"===e?-u.h-g:g)+"px"});q.style.display=""};c&&v(c,y);f=[];f.push(d(b?b:document.body,b?"mouse-move, mousemove":"mousemove, touchmove",function(a){v(a,y)}));f.push(d(b?b:document.body,b?"mouse-out, mouseout":"mouseout, touchend",function(a){q.style.display="none"}));b={};b.handlers=f;b.tooltip=q;C[q.id]=b;return q};u.removeTooltip=function(a){if(a){a=
"string"===typeof a?a:a.id;var b=C[a];delete C[a];b&&(b.handlers.forEach(function(a){a.remove()}),h.destroy(b.tooltip))}};var A={};u.registerTooltipForSlider=function(b,c,f,g){var l={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};c&&(l=Object.assign(l,c));l.id=a();var n=h.create("div",l,document.body);n.style.display="none";k.set(n,"position","fixed");var w=!1,y=function(a,c){if(!w){w=!0;n.style.display="";n.innerHTML=c();var f=m.getMarginBox(n),g=m.position(a);k.set(n,{left:g.x+g.w/2-f.w/2+
l.offsetX+"px",top:g.y-f.h-5+l.offsetY+"px"});var h=[];h.push(e.after(b,"onChange",function(){n.innerHTML=c();g=m.position(a);k.set(n,{left:g.x+g.w/2-f.w/2+"px",top:g.y-f.h-5+"px"})}));var y=function(){n.style.display="none";h.forEach(function(a){a.remove()});w=!1},p=!1;h.push(d(a,"mousedown, mouseDown, mouse-down",function(){p=!0;h.push(d(document,"mouseup, mouseUp, mouse-up",function(){y()}))}));h.push(d(a,"mouseout, mouseOut, mouse-out",function(){p||y()}))}};c=[];c.push(d(b.sliderHandle,"mouseover, mouseOver, mouse-over",
function(){g&&b.isSliderDisabled&&b.isSliderDisabled()||y(b.sliderHandle,function(){var a=g?b.get("value")[0]:b.get("value");return f?f(a):a})}));g&&c.push(d(b.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){b.isSliderDisabled&&b.isSliderDisabled()||y(b.sliderHandleMax,function(){return f?f(b.get("value")[1]):b.get("value")[1]})}));c.push(e.before(b,"destroy",function(){u.unregisterTooltipForSlider(b)}));b.tooltipId=n.id;var p={};p.tooltip=n;p.handlers=c;A[n.id]=p};u.unregisterTooltipForSlider=
function(a){var b=A[a.tooltipId];b&&(b.handlers.forEach(function(a){a.remove()}),h.destroy(b.tooltip));delete A[a.tooltipId];delete a.tooltipId};var z=null;u.autoTooltip=function(a,c,e){"string"===typeof c&&(c=c.split(" ").filter(function(a){return a&&!!a.trim().length}));c=c||[];c.push("TrimWithEllipses");e=e||[];e.push("esriMapsAnalystXInfoIcon");for(var f=0;f<c.length;f++)d(a,"."+c[f]+":mouseover, "+c[f]+":touchstart, ",function(a){this!==z&&this.offsetWidth<this.scrollWidth&&!this.noAutoTooltip&&
(a=getComputedStyle(this).width,a=Number(a.substr(0,a.length-2)),0>a-Math.round(a)&&this.offsetWidth==this.scrollWidth-1||(t(),z=this,a=z.autoTooltip||z.textContent||z.value,z.title&&(a+=" ("+z.title+")"),a&&l.show(a,z,["above","below"]),d.once(z,"mouseout, touchstart, touchout",function(){t()}),z.__autoTooltipInLayoutCheckHandle=setInterval(function(){n.isNodeInLayout(z)||t()},500)))});if(b("touch"))for(f=0;f<e.length;f++)d(a,"."+e[f]+":touchstart ",function(a){this!==z&&(z=this,z.title&&(l.show(z.title,
z,["above","below"]),d.once(z,"touchstart, touchout",function(){l.hide(z);z=null})))})};u.addAutoTooltipsToTabContainer=function(a){f(".tabLabel",a.domNode).forEach(function(a){g.add(a,"TrimWithEllipses")});u.autoTooltip(a)};u.setMultilineText=function(a,b,c,d){c=c||2;b=b.trim();d=d||["above","below"];g.remove(a,"TrimWithEllipses");a.style.overflow="hidden";a.innerHTML="";for(var e=b,f=!1;e;){c--;var l=h.create("div",null,a);l.style.overflow="hidden";l.style.whiteSpace="nowrap";for(var n=e;n;)if(l.textContent=
n,l.offsetWidth<l.scrollWidth-1)n=(n=n.match(/^(.*[^\s]+)\s+[^\s]+$/))&&n[1]||"";else break;!n||!c&&n!==e?(l.textContent=e,e="",l.style.textOverflow="ellipsis",f=!0):e=e.substr(n.length).trim()}f&&u.setTooltipToNode(a,function(){t();z=a;z.isMultilineContainer=!0;return b},{position:d})};u.showErrorTip=function(a,b){return q(v(b),a.domNode||a)};u.showNewStyleErrorTip=function(a,b,c){return q(v(b,"NewStyle"+(c?" esriMapsAnalystXWarningStyle":"")),a.domNode||a)};u.showAlertTooltip=function(a){a&&a.node&&
a.message&&(l.show(a.message,a.node,a.position||["above","below"]),setTimeout(function(){l.hide(a.node)},a.timeout||5E3))};u.showClosableTooltip=function(a){var b=B(a.message,a.tooltipClass,a.position);return x(b,a.component,a.timeout,a.position)};u.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};u.showClosableTooltipOnVerticalBracket=function(a){var b=a.below||a.above,e=m.position(a.above,!0),f=m.position(b,!0),g="rtl"!==document.dir?"start"===a.direction:"end"===a.direction,
l=e.x+e.w*(g?0:1),e=e.y,p=f.y+f.h,y=h.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),q=h.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},y),f={},l={top:e-2,left:l+(g?-3:3),height:p-e+4,width:10},u;for(u in l)f[u]=l[u]+"px";k.set(y,f);var v=c.createSurface(q,l.width,l.height);v.clear();v.createPolyline([{x:g?l.width:0,y:0},{x:g?0:l.width,y:0},{x:g?0:l.width,y:l.height},{x:g?l.width:0,y:l.height}]).setStroke({color:"#6E6E6E",
width:6});a.component=y;var g=B(a.message,a.tooltipClass,a.position),t=function(){clickHandler&&clickHandler.remove();z&&clearInterval(z);v&&v.clear();h.destroy(q);h.destroy(y)},z=setInterval(function(){n.isNodeInLayout(b)||t();n.isNodeVisible(b)?k.set(y,"visibility","visible"):k.set(y,"visibility","hidden")},300);a.timeout&&setTimeout(t,a.timeout);clickHandler=d(g.closeButton,"click",t);tooltip=x(g,a.component,a.timeout,a.position);var C=tooltip._removeFunc;tooltip._removeFunc=function(){C();t()};
return tooltip};return u})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function h(){for(var d=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>d.length;)d="0"+d;return d}var k=h(),m=h(),m=m.substring(0,4)+"-4"+m.substring(5,8),g=h(),g="8"+g.substring(1,4)+"-"+g.substring(4,8),f=h();return(k+"-"+m+"-"+g+f).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],
function(h){h.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(h,m){if(!h)throw m||(m="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(m);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=
function(k){k=k.toString();var m=h.isString(k)&&36==k.length&&k==k.toLowerCase();if(m){k=k.split("-");var m=5==k.length&&8==k[0].length&&4==k[1].length&&4==k[2].length&&4==k[3].length&&12==k[4].length,g;for(g in k)var f=parseInt(k[g],16),m=m&&isFinite(f)}return m};dojox.uuid.getVariant=function(h){if(!dojox.uuid._ourVariantLookupTable){var k=dojox.uuid.variant,g=[];g[0]=k.NCS;g[1]=k.NCS;g[2]=k.NCS;g[3]=k.NCS;g[4]=k.NCS;g[5]=k.NCS;g[6]=k.NCS;g[7]=k.NCS;g[8]=k.DCE;g[9]=k.DCE;g[10]=k.DCE;g[11]=k.DCE;
g[12]=k.MICROSOFT;g[13]=k.MICROSOFT;g[14]=k.UNKNOWN;g[15]=k.UNKNOWN;dojox.uuid._ourVariantLookupTable=g}h=h.toString();h=h.charAt(19);h=parseInt(h,16);dojox.uuid.assert(0<=h&&16>=h);return dojox.uuid._ourVariantLookupTable[h]};dojox.uuid.getVersion=function(h){dojox.uuid.assert(dojox.uuid.getVariant(h)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");h=h.toString();h=h.charAt(14);return parseInt(h,16)};dojox.uuid.getNode=function(h){dojox.uuid.assert(dojox.uuid.getVersion(h)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");h=h.toString();return h.split("-")[4]};dojox.uuid.getTimestamp=function(h,m){dojox.uuid.assert(dojox.uuid.getVersion(h)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");h=h.toString();m||(m=null);switch(m){case "string":case String:return dojox.uuid.getTimestamp(h,Date).toUTCString();case "hex":var g=h.split("-");h=g[0];m=g[1];g=g[2];g=g.slice(1);h=g+m+h;dojox.uuid.assert(15==
h.length);return h;case null:case "date":case Date:return g=h.split("-"),h=parseInt(g[0],16),m=parseInt(g[1],16),g=(parseInt(g[2],16)&4095)<<16,g=4294967296*(g+m),g+=h,new Date(g/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+m)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/domReady!".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p,r,t,v,q){function B(){}var x={},u=h(a._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,addCustomClasses:function(a){a&&(m.add(this.domNode,a),this._customClasses=a)},setCustomStyle:function(a){this._customStyle=a},show:function(b,c,d,e,f,h,n){if(!this.aroundNode||this.aroundNode!==c||this.containerNode.innerHTML!=b)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof b?this.containerNode.innerHTML=b:(this.containerNode.innerHTML=
"",g.place(b.domNode||b,this.containerNode));f&&this.set("textDir",f);this.containerNode.align=e?"right":"left";var w=l.around(this.domNode,c,d&&d.length?d:a.defaultPosition,!e,k.hitch(this,"orient")),p=w.aroundNodePos;"M"==w.corner.charAt(0)&&"M"==w.aroundCorner.charAt(0)?(this.connectorNode.style.top=p.y+(p.h-this.connectorNode.offsetHeight>>1)-w.y+"px",this.connectorNode.style.left=""):"M"==w.corner.charAt(1)&&"M"==w.aroundCorner.charAt(1)?this.connectorNode.style.left=p.x+(p.w-this.connectorNode.offsetWidth>>
1)-w.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=h||B;this.onMouseLeave=n||B}},orient:function(a,b,c,d,g){this.connectorNode.style.top="";var l=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=b+"-"+c];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var h=f.position(this.domNode);h.w=Math.ceil(h.w);if(e("ie")||e("trident"))h.w+=2;f.setMarginBox(this.domNode,{w:Math.min(Math.max(d,1),h.w)});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=f.position(a),b=this.connectorNode.offsetHeight,
a.h>l?(this.connectorNode.style.top=l-(g.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,h.w-d)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var a=this.domNode.clientWidth,b=this.domNode.clientHeight,c=f.position(this.domNode),d=f.position(this.connectorNode),
e=f.position(this.containerNode);d.x-=c.x;d.y-=c.y;e.x-=c.x;e.y-=c.y;e.x+=1;e.y+=1;e.w-=2;e.h-=2;this._surface&&this._surface.destroy();this._surfaceContainer&&g.destroy(this._surfaceContainer);c=this._surfaceContainer=g.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");c.style.pointerEvents="none";a=this._surface=n.createSurface(c,a,b);b=[{x:e.x,y:e.y},{x:e.x+e.w,y:e.y},{x:e.x+e.w,y:e.y+e.h},{x:e.x,y:e.y+e.h},{x:e.x,y:e.y}];c=d.x+d.w/2;d=d.y+d.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":e=
[{x:c-5,y:e.y},{x:c,y:d},{x:c+5,y:e.y}];b.splice.apply(b,[1,0].concat(e));break;case "ML-MR":case "BL-BR":e=[{x:e.x+e.w,y:d-5},{x:c,y:d},{x:e.x+e.w,y:d+5}];b.splice.apply(b,[2,0].concat(e));break;case "TM-BM":case "TL-BL":case "TR-BR":e=[{x:c+5,y:e.y+e.h},{x:c,y:d},{x:c-5,y:e.y+e.h}];b.splice.apply(b,[3,0].concat(e));break;case "MR-ML":case "BR-BL":e=[{x:e.x,y:d+5},{x:c,y:d},{x:e.x,y:d-5}],b.splice.apply(b,[4,0].concat(e))}e=a.createPolyline(b);d="function"===typeof this._customStyle?this._customStyle():
this._customStyle;e.setFill(d&&d.backgroundColor||"white").setStroke({color:"#d3d3d3",width:1,join:"round"});d&&d.color&&(this.containerNode.style.color=d.color)}}}),C={show:function(a,b,c,d,e){"string"===typeof c&&(c=[c]);c=c&&c.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var f=new u;e&&f.setCustomStyle(e);f.addCustomClasses(d);f.show(a,b,c);return f}};x.setTooltipToNode=function(a,d,e){function f(){!g&&x.showTooltipForNode(a,d,e)}e=e||{};if(a&&!q.isPlayerOnServer&&
(x.hideTooltipForNode(a),a.__setTooltipToNodeMouseEnterHandle&&a.__setTooltipToNodeMouseEnterHandle.remove(),d)){var g=!1;p.isMobileDevice()?a.__setTooltipToNodeMouseEnterHandle=r.addNoDragClickHandler(a,f):a.__setTooltipToNodeMouseEnterHandle=c(a,b.enter,f);e.showTooltip&&f();return{remove:function(){d=null;x.hideTooltipForNode(a)},suspend:function(){x.hideTooltipForNode(a);g=!0},resume:function(){g=!1},refresh:function(){a._shownTooltip&&f()}}}};x.showTooltipForNode=function(a,d,e){function f(){x.hideTooltipForNode(a);
var b=Array.isArray(e.classes)?e.classes.join(" "):e.classes,b=(b||"")+" esriGETooltip";e.notRestricted&&(b+=" notRestricted");a._shownTooltip=l=C.show(g,a,e.position||["after","before"],b,e.style)}if(a&&!q.isPlayerOnServer){x.hideTooltipForNode(a);var g="function"==typeof d?d():d;if(g){e.textAlign&&(g="\x3cdiv class\x3d'"+("start"===e.textAlign?"esriGEStart":"end"===e.textAlign?"esriGEEnd":"")+"'\x3e"+g+"\x3c/div\x3e");m.add(a,"esriGESimpleTextTooltip");var l;f();var h=x.hideTooltipForNode.bind(x,
a);p.isMobileDevice()?a.__setTooltipToNodeMouseLeaveHandle=c(document.body,"touchstart",function(b){v.isMouseOver(a,{event:b})||h()}):a.__setTooltipToNodeMouseLeaveHandle=c.once(a,b.leave,function(){!e.stayOnHover&&h()});e.ignoreNodeRemoval||(a.__setTooltipToNodeInLayoutHandle=setInterval(function(){!t.isNodeInLayout(a)&&h()},300));p.isMobileDevice()||(a.__setTooltipToNodeMouseOverHandle=setInterval(function(){e.stayOnHover&&v.isMouseOver(l.domNode)||v.isMouseOver(a)||h()},300),a.__setTooltipToNodeClickHandle=
c(a,"click",function(b){e.hideOnClick?h():!a._shownTooltip&&f()}),e.stayOnHover&&(a.__setTooltipToNodeMouseLeaveMasterHandle=c(l.domNode,b.leave,h)));return a._shownTooltip}}};x.isShown=function(a){return!(!a||!a._shownTooltip)};x.hideTooltipForNode=function(a){a&&(a.title="",m.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),
clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var A,z;x.autoTooltip=function(a){q.isPlayerOnServer||c(a,".TrimWithEllipses:mouseover",function(){if(this!==A&&this.offsetWidth<this.scrollWidth){var a=function(){A=null;z&&(z.tooltip.destroy(),z.mouseOutH.remove(),z.mouseMoveH.remove(),z=null)};a();A=this;z={tooltip:C.show(A.textContent,
A,["above","below"]),mouseOutH:c.once(A,"mouseout, mousedown, touchstart",a),mouseMoveH:c(document.body,"mousemove",function(){v.isMouseOver(A)||a()})}}})};x.showClosableTooltip=function(a){var b=x._createClosableTooltip(a.message,a.tooltipClass,a.position);return x._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};x.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};x._createClosableTooltip=function(a,b,c){function d(){var a=g.create("div",{"class":"esriGEClosableTooltipTip"},
f);m.add(a,"right"===c?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function e(){l=g.create("div",{"class":"esriGEClosableTooltipBody"},f);g.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},l);h=g.create("div",{"class":"esriGEClosableTooltipCloseButton"},l)}var f=g.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),l,h;"right"!==c?(e(),d()):(d(),e());f.style.position="fixed";return{tooltip:f,body:l,closeButton:h}};x._placeClosableTooltip=
function(a,b,e,g,l){function h(){var c=f.position(b),e=c.x+";"+c.y+";"+c.w+";"+c.h;e!==p&&(p=e,e=f.getMarginBox(a.tooltip),d.set(a.tooltip,{left:(n?c.x+c.w:c.x-e.w)+"px",top:c.y+c.h/2-e.h/2+"px"}))}var n="rtl"===document.dir&&"right"!==g||"rtl"!==document.dir&&"right"===g,p;h();var w,k,q,m,u,y=function(){w&&clearTimeout(w);k&&clearInterval(k);q&&clearInterval(q);m&&m.remove();a.tooltip.parentNode&&a.tooltip.parentNode.removeChild(a.tooltip)};k=setInterval(function(){t.isNodeInLayout(b)&&b.parentNode||
(u=!1,y());t.isNodeVisible(b)&&t.isNodeOnscreen(b)?(u=!0,t.show(a.tooltip)):(u=!1,t.hide(a.tooltip))},0);q=setInterval(function(){u&&h()},0);e&&(w=setTimeout(y,e));m=c(a.closeButton,"click",function(){y();l&&l()});a.tooltip._removeFunc=y;return a.tooltip};x.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});x.hideTooltipForNode(document.body);return x})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],
function(h,k,m,g){var f={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(d,c,b){b=b||{};return m.isMobileDevice()?f._addMobile(d,c,b):f._addPC(d,c,b)},_addPC:function(d,c,b){var e=b.tolerance||0,a,f,n=h(d,"mousedown",function(b){f&&f.remove();var d=b.clientX,l=b.clientY,n;a=h(document.body,"mousemove",function(a){if(!a.shiftKey&&!g.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-d)||0<Math.abs(b-l))n=!0}});f=h.once(document.body,"mouseup",function(b){a.remove();var f=
b.clientX,g=b.clientY;!n&&Math.abs(f-d)<=e&&Math.abs(g-l)<=e&&c(b)})});return{remove:function(){a&&a.remove();f&&f.remove();n&&n.remove()}}},_addMobile:function(d,c,b){function e(){n&&n.remove();p&&p.remove();k&&k.remove();clearTimeout(m)}var a=b.tolerance||f.MOBILE_TOLERANCE,g,n,p,k,m;g=h(d,"touchstart",function(g){function l(b){return Math.abs(g.clientX-b.clientX)<a&&Math.abs(g.clientY-b.clientY)<a}e();var v;if(b.detectLongPress){var t;p=h(d,"touchmove",function(a){t=a});m=setTimeout(function(){l(t||
g)&&(b.ignoreReleaseIfLongPressHappened&&(v=!0),b.longPressCallback(g))},b.longPressTimeout||f.LONG_PRESS_TIMEOUT)}n=h.once(d,"touchend",function(a){!v&&l(a)&&c(a);e()});k=h.once(d,"touchcancel",e)});return{remove:function(){g&&g.remove();e()}}},addGlobalDragHanlder:function(d){function c(){b&&b.remove();e&&e.remove();a&&a.remove();f&&f.remove();n&&d.destroyDnDBox&&d.destroyDnDBox(n)}d.tolerance=0<d.tolerance?d.tolerance:5;var b,e,a,f,n;return h(d.node,d.downEventName||m.press,function(l){c();if(!d.onMouseDown||
d.onMouseDown(l)){var p=l.clientX,t=l.clientY,v=p,q=t;b=h(document.body,m.move,function(l){function r(){c();d.dragEnded&&d.dragEnded()}l.shiftKey||g.isCtrl(l)||!(Math.abs(p-l.clientX)>=d.tolerance||Math.abs(t-l.clientY)>=d.tolerance)||(b.remove(),d.dragStarted&&!d.dragStarted(l,l.clientX-v,l.clientY-q))||(v=l.clientX,q=l.clientY,n=d.createDnDBox&&d.createDnDBox(),e=h(document.body,m.move,function(a){d.dragMoved&&d.dragMoved(a,a.clientX-v,a.clientY-q,r);v=a.clientX;q=a.clientY}),a=h.once(document.body,
k("ie")||k("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){r()}),f=h(document.body,"keyup",function(a){27==a.keyCode&&(c(),d.dragCanceled&&d.dragCanceled())}))});h.once(document.body,k("ie")||k("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){b.remove()})}})}};return f})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(h){function k(h){h=h.split(".");return Number((Number(h[0])+Number(h[1])/100).toFixed(2))}h=Math.max(k("3.34"),
k(h.version)).toFixed(2);return{jsapiVersion:h,esriDijitCssUrl:"https://js.arcgis.com/"+h+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+h+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+h+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,
showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!1,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),
function(h,k,m,g,f,d,c){return{getAvailableCountries:function(){return c.getPortal(portalUrl).loadSelfInfo().then(function(b){return m({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},createRingOrDriveTimes:function(b){return c.getPortal(portalUrl).loadSelfInfo().then(function(c){return m({url:(c&&
c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreasOptions:JSON.stringify(b.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.geometry}]),
token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(b){var e={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof b.report?b.report:JSON.stringify(b.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreas:JSON.stringify(b.studyAreas),reportFields:JSON.stringify({locationname:b.locationName,latitude:b.lat,longitude:b.long,subtitle:"Prepared by Esri",areadesc2:b.areadesc2})};return c.getPortal(portalUrl).loadSelfInfo().then(function(a){return m({url:(a&&
a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/createReport",content:e,handleAs:"blob"}).then(function(a){return d.saveAs(a,b.reportDownloadName+".pdf")}).otherwise(function(a){alert("Error: "+a)})})},checkCapabilities:function(b){return c.getPortal(portalUrl).loadSelfInfo().then(function(c){var a=!1,d=!1,e=c&&c.user&&c.user.privileges,
f=c&&c.helperServices;c=f.geoenrichment&&f.geoenrichment.url;var f=f.routingUtilities&&f.routingUtilities.url,g=c?c:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&h.some(b.appProxies,function(a){return g.toLowerCase()===a.sourceUrl.toLowerCase()})?d=a=!0:h.forEach(e,function(b){"premium:user:geoenrichment"===b?a=!0:"premium:user:networkanalysis"===b&&(d=!0)});return{hasPrivilege:a&&d,geServiceConfigured:!!c,
dirRoutingServiceConfigured:!!f}})},getCountryForPolygon:function(b,d,a){return c.getPortal(portalUrl).loadSelfInfo().then(function(c){return m({url:(c&&c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),
studyAreas:JSON.stringify([{geometry:b.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(c){if(c&&c.results&&1===c.results.length&&1===c.results[0].value.FeatureSet[0].features.length)return c.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;if(c&&c.results&&1===c.results.length&&1<c.results[0].value.FeatureSet[0].features.length){var e=b.getCentroid(),e=f.xyToLngLat(e.x,e.y),l=function(b){var c="";h.forEach(b,function(b){b.attributes.sourceCountry==
a&&(c=a)});if(c)return c;h.forEach(b,function(a){a.attributes.sourceCountry==d.defaultCountryID&&(c=defaultCountryID)});return c?c:b[0].attributes.sourceCountry};return k(g.reverseGeocode({x:e[0],y:e[1]})).then(function(a){return a&&a.address&&a.address.CountryCode?a.address.CountryCode:l(c.results[0].value.FeatureSet[0].features)}).otherwise(function(){return l(c.results[0].value.FeatureSet[0].features)})}return d.defaultCountryID})})},getGEProxyUrl:function(b){var d=!1;return c.getPortal(portalUrl).loadSelfInfo().then(function(a){geUrl=
a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&h.forEach(b.appProxies,function(a){geUrl.toLowerCase()===a.sourceUrl.toLowerCase()&&(d=a.proxyUrl)});return d})}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request","jimu/portalUtils"],function(h,k){return{reverseGeocode:function(m){return k.getPortal(portalUrl).loadSelfInfo().then(function(g){return h({url:(g&&
g.isPortal&&g.helperServices&&g.helperServices.geocode&&0<g.helperServices.geocode.length?g.helperServices.geocode[0].url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:m.x,y:m.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./DataUtil","./ImageUtil"],
function(h,k,m,g){function f(){return new h.reject(Error("Saving not supported."))}var d=f,c=/[\\/:*?"<>|]/g,b={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(a,c,d,e){return b.savingSupported()?b.saveAs(new Blob([a],{type:d||"text/plain"}),c||"text.txt",e):f()},saveImageFile:function(a,c){if(b.savingSupported()){var d;"string"===typeof a?(d=g.base64DataFromDataURL(a),d=m.binaryStringToByteArray(atob(d)).buffer):a instanceof ArrayBuffer&&(d=a);return b.saveAs(d?m.arrayBuffersToBlob([d],
"image/png"):a,c)}f()},_queue:[],_isSavePendingFlag:!1,_saveTimeoutH:null,saveAs:function(a,c,e){return e&&e.addDownloadIntervals?(e=new h,b._queue.push({blob:a,name:c||"download",dfd:e}),b._trySaveAsNext(),e.promise):d(a,b.validateName(c||"download"))},_trySaveAsNext:function(){if(b._queue.length&&!b._isSavePendingFlag){var a=b._queue.shift();b._isSavePendingFlag=!0;k(d(a.blob,b.validateName(a.name))).then(a.dfd.resolve,a.dfd.reject).always(function(){setTimeout(function(){b._isSavePendingFlag=!1;
b._trySaveAsNext()},100)})}},validateName:function(a){return String(a).trim().replace(c,"")}};if(!b.savingSupported())return b;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return d=function(a,b){var c=new h;window.navigator.msSaveOrOpenBlob(a,b)?c.resolve():c.reject(Error("Failed to save or open downloaded file."));return c.promise},b;var e=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var a=function(a){var b;void 0!==window.MouseEvent?b=new MouseEvent("click",
{bubbles:!0,cancelable:!1}):(b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null));a.dispatchEvent(b)},d=function(b,c){var d=new h,f=e.createObjectURL(b),g=window.document.createElement("a");g.href=f;g.download=c;a(g);setTimeout(function(){e.revokeObjectURL(f);g=null;d.resolve();d=null},1E3);return d.promise};return b}d=function(a,b){var c=new h;a=new File([a],b,{type:a.type});var d=e.createObjectURL(a);window.open(d,"_blank");setTimeout(function(){e.revokeObjectURL(d);
c.resolve()},1E3);return c.promise};return b})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(h,k){function m(c){return"string"==typeof c?{source:c,getLength:function(){return this.source.length},getByte:function(b){return this.source.charCodeAt(b)&255}}:window.ArrayBuffer&&c instanceof ArrayBuffer?{source:new Uint8Array(c),getLength:function(){return this.source.byteLength},getByte:function(b){return this.source[b]}}:
c}function g(c){for(var b=c.length,d=new Uint8Array(c.length),a=0;a<b;a++)d[a]=c.charCodeAt(a);return d}function f(c,b){c=new Uint8Array(c);b=Math.min(b,c.byteLength);for(var d="",a=0;a<b;a++)d+=String.fromCharCode(c[a]);return d}var d={arrayBufferFromBlob:function(c){var b=new h,d=new FileReader;d.onloadend=function(){d.error?b.reject(d.error):b.resolve(d.result)};d.readAsArrayBuffer(c);return b.promise},arrayBuffersToBlob:function(c,b){return new Blob(c,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(c){if("string"==
typeof c)return c;c=m(c);for(var b=c.getLength(),d=b%4,b=b-d,a="",f=0,g,h,k,t;f<b;)g=c.getByte(f++),h=c.getByte(f++),k=c.getByte(f++),t=c.getByte(f++),a+=String.fromCharCode(g,h,k,t);1==d?a+=String.fromCharCode(c.getByte(f)):2==d?a+=String.fromCharCode(c.getByte(f),c.getByte(f+1)):3==d&&(a+=String.fromCharCode(c.getByte(f),c.getByte(f+1),c.getByte(f+2)));return a},base64FromByteSource:function(c){c=m(c);for(var b=c.getLength(),d=b%3,b=b-d,a,f,g,h,k="",t=0;t<b;t+=3)h=c.getByte(t)<<16|c.getByte(t+1)<<
8|c.getByte(t+2),a=h>>18&63,f=h>>12&63,g=h>>6&63,h&=63,k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h];1==d?(h=c.getByte(t),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h<<
4&63]+"\x3d\x3d"):2==d&&(h=c.getByte(t)<<8|c.getByte(t+1),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h<<2&63]+"\x3d");return k},base64FromJson:function(c){return btoa(unescape(encodeURIComponent("string"===typeof c?c:JSON.stringify(c))))}};d.binaryStringToByteArray=g;d.base64ToByteArray=function(c){return g(atob(c))};d.getFirstBytes=
function(c,b){var d;if("string"==typeof c)d=c.substr(0,b);else if(window.ArrayBuffer&&c instanceof ArrayBuffer)d=f(c,b);else if(window.Blob&&c instanceof Blob){d=new h;var a=new FileReader;a.onloadend=function(){a.error?d.resolve(""):d.resolve(f(a.result,b))};a.readAsArrayBuffer(c.slice(0,b))}return k(d||"")};d.isBase64=function(c){return c&&0==c.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(c.replace(/={0,2}$/,""))};d.getContentType=function(c){c=d.getFileExtension(c);
if(null===c)return null;switch(c){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};d.getFileExtension=function(c){var b=c.lastIndexOf(".")+1;return b?c.substr(b).toLowerCase():null};return d})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],
function(h,k,m){var g={base64DataToDataURL:function(f,d){if(/^data:image/.test(f))return f;d||(d=atob(f.substr(0,16)),d=g.getImageContentType(d));return"data:"+(d||"image/png")+";base64,"+f},getImageContentType:function(f){if("\u00ff\u00d8\u00ff"===f.substr(0,3)&&"JFIF"===f.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===f.substr(0,8))return"image/png";if("GIF89a"===f.substr(0,6)||"GIF87a"===f.substr(0,6))return"image/gif"},base64DataFromDataURL:function(f){0==f.indexOf("data:")&&(f=f.substr(f.indexOf(",")+
1));return f},getBase64DataIndex:function(f){f=0==f.indexOf("data:")?f.indexOf(";base64,"):-1;return 0<f?f+8:0},getContentType:function(f){var d=g.getBase64DataIndex(f);return d?f.substring(5,d-8):null},checkBase64FileSize:function(f,d){return g.getBase64FileSize(f)<=d},getBase64FileSize:function(f){return.75*f.length},imageToDataURL:function(f,d){d=d||{};var c=document.createElement("canvas"),b=c.getContext("2d");c.width=d.width||f.width;c.height=d.height||f.height;var e=d.opacity;null!=e&&!isNaN(e)&&
0<=e&&1>e&&(b.globalAlpha=+e,d.format="image/png");(e=d.pos)?b.drawImage(f,e.x||0,e.y||0):b.drawImage(f,0,0,c.width,c.height);return c.toDataURL(d.format)},imageFromUrl:function(f,d){var c=new h,b=new Image;0!==f.indexOf("data:")&&d&&d.crossOrigin&&b.setAttribute("crossOrigin",d.crossOrigin);b.onload=function(){if(b.width&&b.height)c.resolve(b);else{var e=Error("Error of reading an image from URL.");d&&d.ignoreError?c.resolve(null):c.reject(e)}b.onload=b.onerror=null};b.onerror=function(e){d&&d.ignoreError?
c.resolve(null):c.reject(e);b.onload=b.onerror=null};f=require.toUrl(f);/^http:/i.test(f)&&/^https/i.test(window.location.protocol)&&(f=m.toHttpsUrl(f));b.src=f;return c.promise},scaleImage:function(f,d){if("string"===typeof f)var c=g.base64DataToDataURL(f),b=g.getContentType(c),c=g.imageFromUrl(c);return k(c||f).then(function(c){var a=1,e=c.width,f=c.height;if(d.factor)a=d.factor;else if(d.maxDim)a=d.maxDim/Math.max(e,f);else if(d.imageDim){var h=d.imageDim.w,k=d.imageDim.h;d.imageDim.preserveRatio?
(a=Math.min(h/e,k/f),d.imageDim.reduceOnly&&1<a&&(a=1)):d.imageDim.reduceOnly?(e=Math.min(e,h),f=Math.min(f,k)):(e=h,f=k)}return g.imageToDataURL(c,{width:e*a,height:f*a,format:d.format||b,opacity:d.opacity})})},getImageViewType:function(f,d){return 1E3<=d?(f/=d,.025>=Math.abs(f-2)?"360":2<f?"pano":null):null}};return g})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],function(h,k,m,g,f){var d={getDomain:function(c){if("string"!==
typeof c)return null;c=c.replace(/^(http:\/\/|https:\/\/)/i,"");var b=c.indexOf("/");return 0>b?c:c.substr(0,b)},getPortalUrl:function(c){if("string"!==typeof c)return null;c=c.replace(/\?.*$/,"");var b=c.match(/^(.+)\/sharing(\/|$)/i);return b||(b=c.match(/^(.+)\/home$/i))?b[1]:(b=c.match(/^(.+)\/portal(\/|$)/i))?b[1]+"/portal":c},getProxyUrl:function(c){var b=k.defaults.io.proxyUrl;b&&!/^http/i.test(b)&&(b=g.getAbsoluteUrl(b));b&&c&&(b=d.toHttpsUrl(b));return b},registerCORS:function(c){(c=d.getDomain(c))&&
-1==k.defaults.io.corsEnabledServers.indexOf(c)&&k.defaults.io.corsEnabledServers.push(c);d._fixCORS()},_fixCORS:function(){k.defaults.io.corsEnabledServers=k.defaults.io.corsEnabledServers.filter(function(c){return c.indexOf&&0===c.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+c),!1):!0})},indexOfQuery:function(c){var b=c.indexOf("?");0<=b&&(c=c.substr(b+1),/^(http:\/\/|https:\/\/)/i.test(c)&&(c=c.indexOf("?"),b=0<=c?b+1+c:-1));return b},removeQuery:function(c){var b=d.indexOfQuery(c);
return 0>b?c:c.substr(0,b)},addQueryPart:function(c,b){var e=0>d.indexOfQuery(c)?"?":"\x26";return c+e+b},getVariableValue:function(c,b){if(c&&"string"===typeof b){var d=g.urlToObject(c);if(d.query){var a={};Object.keys(d.query).forEach(function(b){a[b.toLowerCase()]=d.query[b]});return a[b.toLowerCase()]}}},addUrlVariable:function(c,b,e){b=encodeURIComponent(b);e=encodeURIComponent(e);return d.addQueryPart(c,b+"\x3d"+e)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(c){return!c||/^http/i.test(c)?
c:"http://"+c},toHttpsUrl:function(c){c&&(c=d.toHttpUrl(c));if(!c||!/^http:\/\//i.test(c))return c;var b=new h(c);c=c.replace(/^http/i,"https");var e=d.securePortsMap[b.port];e&&(c=c.replace(":"+b.port,":"+e));return c},combine:function(c,b){"number"===typeof b&&(b+="");if(b){if(/^(http:\/\/|https:\/\/)/i.test(b)||!c)return b;"/"!=b.charAt(0)&&(b="/"+b);if(1==b.length)return c;var e=c.length-1;"/"==c.charAt(e)&&(c=c.substr(0,e));var a=g.urlToObject(c);c=d.removeQuery(c);e=c.length-b.length;0<=e&&
c.substr(e).toLowerCase()==b.toLowerCase()&&(c=c.substr(0,e));c+=b;for(var f in a.query)d.addQueryPart(c,a.query[f])}return c},combineMulti:function(c){for(var b=c[0],e=1;e<c.length;e++)b=d.combine(b,c[e]);return b},openUrl:function(c,b){if(b)return window.open(c,"_blank");b=window.open();b.opener=null;b.referrer=null;b.location=c;return b},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},getToken:function(c){return(c=c&&m.id.findCredential(c)||m.id.credentials[0])&&
c.token},setArcgisUrl:function(c){c&&(f.arcgisUrl=d.combine(c,"/sharing/rest/content/items"))}};return d})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),function(h,k,m,g,f,d,c){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";return{_ownedCachedCustomReports:null,_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,
_countryInitDfds:[],getAvailableClassicReports:function(b,d){var a=this,e=[],f=new h,k;d&&g.forEach(d.countryConfig,function(a){b==a.countryID&&(k=a)});k||(k={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],
enabledOrgInfographics:[]});var r=null,t=null,v=null;m(this._initReports(b),function(){if(!d||k.allowAllEsriReports||a._hasEnabledReports(a._cachedCountryClassicReports[b],k.enabledEsriReports))r=e.length,e.push({value:"esriReports",label:c.esriReports,children:[]});if(!d||k.allowAllOrgReports&&a._hasReportsForCountry(a._ownedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._ownedCachedCustomReports,b,k.enabledOrgReports))t=e.length,e.push({value:"myReports",label:c.myReports,children:[]});
if(!d||k.allowAllOrgReports&&a._hasReportsForCountry(a._sharedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._sharedCachedCustomReports,b,k.enabledOrgReports))v=e.length,e.push({value:"sharedReports",label:c.sharedReports,children:[]});(k.allowAllEsriReports||a._hasEnabledReports(a._cachedCountryClassicReports[b],k.enabledEsriReports))&&a._cachedCountryClassicReports[b]&&0<a._cachedCountryClassicReports[b].length&&g.forEach(a._cachedCountryClassicReports[b],function(b){(k.allowAllEsriReports||
k.enabledEsriReports.includes(b.reportID))&&e[r].children.push(a._formatClassicReportsForDropDown(b))});var h=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];(k.allowAllOrgReports&&a._hasReportsForCountry(a._ownedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._ownedCachedCustomReports,b,k.enabledOrgReports))&&g.forEach(a._ownedCachedCustomReports,function(c){c.properties.countries.includes(b)&&(k.allowAllOrgReports||
k.enabledOrgReports.includes(c.id))&&(c.typeKeywords.some(function(a){return 0<=h.indexOf(a)})||e[t].children.push(a._formatClassicReportsForDropDown(c)))});(k.allowAllOrgReports&&a._hasReportsForCountry(a._sharedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._sharedCachedCustomReports,b,k.enabledOrgReports))&&g.forEach(a._sharedCachedCustomReports,function(c){c.properties.countries.includes(b)&&(k.allowAllOrgReports||k.enabledOrgReports.includes(c.id))&&(c.typeKeywords.some(function(a){return 0<=
h.indexOf(a)})||e[v].children.push(a._formatClassicReportsForDropDown(c)))});var l=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<e.length&&e[0].children.sort(l);1<e.length&&e[1].children.sort(l);2<e.length&&e[2].children.sort(l);f.resolve(e)});return f},_hasEnabledReports:function(b,c){return b&&c?g.some(b,function(a){return c.includes(a.reportID)}):!1},_hasReportsForCountry:function(b,c){return b&&c?g.some(b,function(a){return a.properties.countries.includes(c)}):
!1},_hasEnabledReportsForCountry:function(b,c,a){return b&&c&&a?g.some(b,function(b){return b.properties.countries.includes(c)?a.includes(b.id):!1}):!1},_formatClassicReportsForDropDown:function(b){return b.metadata?{label:b.metadata.title,value:b.reportID,reportType:b.metadata.type}:{label:b.title,value:b.id,reportType:b.properties.type,item:{itemid:b.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(b,d){var a=this,e=[],f=new h,k;d&&g.forEach(d.countryConfig,
function(a){b==a.countryID&&(k=a)});k||(k={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var r=null,t=null,v=null;m(this._initReports(b),function(){if(!d||k.allowAllEsriInfographics||
a._hasEnabledInfographics(a._cachedInfographicReports,k.enabledEsriInfographics))r=e.length,e.push({value:"esriReports",label:c.esriInfographics,children:[]});if(!d||k.allowAllOrgInfographics&&0<a._ownedCachedCustomReports.length||a._hasEnabledInfographics(a._ownedCachedCustomReports,k.enabledOrgInfographics))t=e.length,e.push({value:"myReports",label:c.myInfographics,children:[]});if(!d||k.allowAllOrgInfographics&&0<a._sharedCachedCustomReports.length||a._hasEnabledInfographics(a._sharedCachedCustomReports,
k.enabledOrgInfographics))v=e.length,e.push({value:"sharedReports",label:c.sharedInfographics,children:[]});(k.allowAllEsriInfographics||a._hasEnabledInfographics(a._cachedInfographicReports,k.enabledEsriInfographics))&&g.forEach(a._cachedInfographicReports,function(c){c.properties.countries.includes(b)&&(k.allowAllEsriInfographics||k.enabledEsriInfographics.includes(c.id))&&e[r].children.push(a._formatInfographicReportsForDropDown(c))});(k.allowAllOrgInfographics&&0<a._ownedCachedCustomReports.length||
a._hasEnabledInfographics(a._ownedCachedCustomReports,k.enabledOrgInfographics))&&g.forEach(a._ownedCachedCustomReports,function(c){c.properties.countries.includes(b)&&(k.allowAllOrgInfographics||k.enabledOrgInfographics.includes(c.id))&&(c.typeKeywords.includes("esriWebInfographicReport")||a._isOldPortalInfographic(c))&&e[t].children.push(a._formatInfographicReportsForDropDown(c))});(k.allowAllOrgInfographics&&0<a._sharedCachedCustomReports.length||a._hasEnabledInfographics(a._sharedCachedCustomReports,
k.enabledOrgInfographics))&&g.forEach(a._sharedCachedCustomReports,function(c){c.properties.countries.includes(b)&&(k.allowAllOrgInfographics||k.enabledOrgInfographics.includes(c.id))&&(c.typeKeywords.includes("esriWebInfographicReport")||a._isOldPortalInfographic(c))&&e[v].children.push(a._formatInfographicReportsForDropDown(c))});var h=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<e.length&&e[0].children.sort(h);1<e.length&&e[1].children.sort(h);
2<e.length&&e[2].children.sort(h);f.resolve(e)});return f},_hasEnabledInfographics:function(b,c){return g.some(b,function(a){return c.includes(a.id)})},_isOldPortalInfographic:function(b){return b.properties&&b.properties.isHidden&&"true"===b.properties.isHidden?!1:b.properties&&b.properties.isGraphicReport&&"true"===b.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(b){return{label:b.title,value:b.id}},_initReports:function(b){var c=[],a=this;if(this._countryInitDfds[b])return this._countryInitDfds[b];
this._countryInitDfds[b]=new h;var l=function(a,b){return f(a).then(function(c){g.forEach(c.results,function(a){b.push(a)});if(-1!=c.nextStart)return a.content.start=c.nextStart,l(a,b)},function(a){alert(a)})};d.getPortal(portalUrl).loadSelfInfo().then(function(d){var e=d&&d.helperServices&&d.helperServices.geoenrichment&&d.helperServices.geoenrichment.url?d.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";a._cachedCountryClassicReports[b]||
c.push(f({url:e+"/Geoenrichment/reports/"+b,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(c){a._cachedCountryClassicReports[b]=c.reports},function(a){alert(a)}));a._cachedInfographicReports||(a._cachedInfographicReports=[],c.push(l({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriReportPlayerStandardInfographic jsapiVersion3.34)"}},a._cachedInfographicReports)));a._ownedCachedCustomReports||
(a._ownedCachedCustomReports=[],c.push(l({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}},a._ownedCachedCustomReports)));a._sharedCachedCustomReports||(a._sharedCachedCustomReports=[],c.push(l({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",
sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},a._sharedCachedCustomReports)),c.push(l({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},a._sharedCachedCustomReports)),
d&&d.appInfo&&d.appInfo.orgId&&c.push(l({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:public type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId+" orgid: "+d.id}},a._sharedCachedCustomReports)));0===c.length?a._countryInitDfds[b].resolve():k(c).then(function(){a._countryInitDfds[b].resolve()})});return this._countryInitDfds[b]}}})},
"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(h){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(k,m,g,f,d){var c=k.get("value"),b=m.get("value"),e=g.get("value"),a=!0;0<c.length&&null===this._tryParseFloat(c)?(a=!1,h.remove(f,"hidden"),f.innerHTML=d,h.add(k.domNode,"invalidValue")):h.remove(k.domNode,"invalidValue");0<b.length&&null===this._tryParseFloat(b)?(a=!1,h.remove(f,"hidden"),f.innerHTML=
d,h.add(m.domNode,"invalidValue")):h.remove(m.domNode,"invalidValue");0<e.length&&null===this._tryParseFloat(e)?(a=!1,h.remove(f,"hidden"),f.innerHTML=d,h.add(g.domNode,"invalidValue")):h.remove(g.domNode,"invalidValue");a&&h.add(f,"hidden");return a},validateMinMaxValues:function(k,m,g,f,d,c,b){var e=k.get("value"),a=m.get("value"),l=g.get("value"),n=!0;0<e.length?(e=parseFloat(e),e<f||e>d?(n=!1,h.remove(c,"hidden"),c.innerHTML=b,h.add(k.domNode,"invalidValue")):h.remove(k.domNode,"invalidValue")):
h.remove(k.domNode,"invalidValue");0<a.length?(e=parseFloat(a),e<f||e>d?(n=!1,h.remove(c,"hidden"),c.innerHTML=b,h.add(m.domNode,"invalidValue")):h.remove(m.domNode,"invalidValue")):h.remove(m.domNode,"invalidValue");0<l.length?(e=parseFloat(l),e<f||e>d?(n=!1,h.remove(c,"hidden"),c.innerHTML=b,h.add(g.domNode,"invalidValue")):h.remove(g.domNode,"invalidValue")):h.remove(g.domNode,"invalidValue");n&&h.add(c,"hidden");return n},_tryParseFloat:function(h){var k=null;null!==h&&0<h.length&&(isNaN(h)||
(k=parseFloat(h)));return k}}})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(h,k,m,g,f,d){var c=null,b=h([m,f],{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=this._getWhiteList();this.sanitizer=new d({whiteList:this.whiteList,
safeAttrValue:g.hitch(this,function(b,a,c,d){return"style"===a?this.xss.friendlyAttrValue(c).replace(/\"/g,"'"):"img"===b&&"src"===a?this.xss.escapeAttrValue(c):this.xss.safeAttrValue(b,a,c,d)}),onTag:g.hitch(this,function(b,a,c){if(c.isWhite&&this._isInWhiteList(b,this.graphicsWhiteList))return a}),onIgnoreTagAttr:g.hitch(this,function(b,a,c,d){if("data-"===a.substr(0,5))return a+'\x3d"'+this.xss.escapeAttrValue(c)+'"'}),onIgnoreTag:g.hitch(this,function(b,a,c){if("o:"===b.substr(0,2)||"!--[if"===
b||"!--[endif]--"===b)return a})},!0);this.xss=this.sanitizer.xss},sanitize:function(b){return this.sanitizer.sanitize(b)},_getWhiteList:function(){var b="title height width class style font-family id align text-align".split(" "),a={div:b,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,span:b,p:b,s:b,strong:b,em:b,u:b,ol:b,ul:b,li:b,a:["href","target"].concat(b),img:["src","alt","border"].concat(b),blockquote:b,font:["face","size","color"].concat(b),pre:b,code:b,b:b,i:b,wbr:b,video:"autoplay controls loop muted poster preload".split(" ").concat(b),
audio:["autoplay","controls","loop","muted","preload"].concat(b),source:["media","src","type"].concat(b),table:["cellpadding","cellspacing","border"].concat(b),tbody:[].concat(b),tr:["valign"].concat(b),td:["valign","colspan","rowspan","nowrap"].concat(b),th:["valign","colspan","rowspan","nowrap"].concat(b),hr:b,html:b,title:b,link:["rel","href"],style:["type"].concat(b),body:b};this.graphicsWhiteList={animate:[],animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],
desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],
mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],use:[],view:[],object:[],canvas:b};return this._extendObjectOfArrays([a,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],
blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align",
"valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(b){var a={};k.forEach(b,function(b){var c=Object.keys(b);k.forEach(c,function(c){Array.isArray(b[c])&&Array.isArray(a[c])?a[c]=a[c].concat(b[c]):
a[c]=b[c]},this)},this);return a},_isInWhiteList:function(b,a){a=Object.keys(a);var c=!1;k.forEach(a,function(a){b===a&&(c=!0)},this);return c}});b.getInstance=function(){null===c&&(c=new b);return c};return b})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),function(h,k,m,g,f,d,c,b,e,a,l,n){var p=k("dijit._editor.plugins.LinkDialog",
a,{buttonClass:l,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=f.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(a){h("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),f.hitch(this,function(b,c,h){var l=this;this.tag="insertImage"==this.command?"img":"a";b=f.delegate(b.getLocalization("dijit","common",this.lang),b.getLocalization("dijit._editor",
"LinkDialog",this.lang));var k=this.dropDown=this.button.dropDown=new c({title:b[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:f.hitch(this,"setValue"),onOpen:function(){l._onOpenDialog();c.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(f.hitch(l,"_onCloseDialog"),0)}});b.urlRegExp=this.urlRegExp;b.id=h.getUniqueId(this.editor.id);this._uniqueId=b.id;this._setContent(k.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
e.substitute(this.linkDialogTemplate,b));k.startup();this._urlInput=h.byId(this._uniqueId+"_urlInput");this._textInput=h.byId(this._uniqueId+"_textInput");this._setButton=h.byId(this._uniqueId+"_setButton");this.own(h.byId(this._uniqueId+"_cancelButton").on("click",f.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",f.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",f.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=f.hitch(this,function(){var a=this._urlInput.get("value");return this._urlRegExp.test(a)||this._emailRegExp.test(a)});this.own(d(k.domNode,"keydown",f.hitch(this,f.hitch(this,function(a){!a||a.keyCode!=g.ENTER||a.shiftKey||a.metaKey||a.ctrlKey||a.altKey||this._setButton.get("disabled")||(k.onExecute(),k.execute(k.get("value")))}))));a()}))},_checkAndFixInput:function(){var a=this,b=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var c=b,d=!1,e=!1;c&&1<c.length&&(c=f.trim(c),0!==c.indexOf("mailto:")&&(0<c.indexOf("/")?-1===c.indexOf("://")&&"/"!==c.charAt(0)&&c.indexOf("./")&&0!==c.indexOf("../")&&a._hostRxp.test(c)&&(d=!0):a._userAtRxp.test(c)&&(e=!0)));d&&a._urlInput.set("value","http://"+c);e&&a._urlInput.set("value","mailto:"+c);a._setButton.set("disabled",!a._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(f.hitch(this,
function(){this.own(d(this.editor.editNode,"mouseup",f.hitch(this,"_onMouseUp")));this.own(d(this.editor.editNode,"dblclick",f.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(a){this.dropDown.set({parserScope:"dojo",content:a})},_checkValues:function(a){a&&a.urlInput&&(a.urlInput=a.urlInput.replace(/"/g,"\x26quot;"));return a},_createlinkEnabledImpl:function(){return!0},setValue:function(a){this._onCloseDialog();
if(9>c("ie")){var d=n.getSelection(this.editor.window).getRangeAt(0).endContainer;3===d.nodeType&&(d=d.parentNode);d&&d.nodeName&&d.nodeName.toLowerCase()!==this.tag&&(d=this.editor.selection.getSelectedElement(this.tag));d&&d.nodeName&&d.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(d),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",e.substitute(this.htmlTemplate,a));b("a",
this.editor.document).forEach(function(a){a.innerHTML||m.has(a,"name")||a.parentNode.removeChild(a)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(a){var b,c,d;a&&a.tagName.toLowerCase()===this.tag?(b=a.getAttribute("_djrealurl")||a.getAttribute("href"),d=a.getAttribute("target")||"_self",c=a.textContent||a.innerText,this.editor.selection.selectElement(a,!0)):c=this.editor.selection.getSelectedText();return{urlInput:b||"",textInput:c||"",targetSelect:d||
""}},_onOpenDialog:function(){var a,b;if(c("ie")){if(b=n.getSelection(this.editor.window),b.rangeCount){var d=b.getRangeAt(0);a=d.endContainer;3===a.nodeType&&(a=a.parentNode);a&&a.nodeName&&a.nodeName.toLowerCase()!==this.tag&&(a=this.editor.selection.getSelectedElement(this.tag));if(!a||a.nodeName&&a.nodeName.toLowerCase()!==this.tag)(b=this.editor.selection.getAncestorElement(this.tag))&&b.nodeName&&b.nodeName.toLowerCase()==this.tag?(a=b,this.editor.selection.selectElement(a)):d.startContainer===
d.endContainer&&(b=d.startContainer.firstChild)&&b.nodeName&&b.nodeName.toLowerCase()==this.tag&&(a=b,this.editor.selection.selectElement(a))}}else a=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){if(a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&m.get(a,"href"))){var b=this.editor;this.editor.selection.selectElement(a);b.onDisplayChanged();
b._updateTimer&&(b._updateTimer.remove(),delete b._updateTimer);b.onNormalizedDisplayChanged();var c=this.button;setTimeout(function(){c.set("disabled",!1);c.loadAndOpenDropDown().then(function(){c.dropDown.focus&&c.dropDown.focus()})},10)}},_onMouseUp:function(){if(c("ff")){var a=this.editor.selection.getAncestorElement(this.tag);if(a){var b=n.getSelection(this.editor.window).getRangeAt(0);if(b.collapsed&&a.childNodes.length){var d=b.cloneRange();d.selectNodeContents(a.childNodes[a.childNodes.length-
1]);d.setStart(a.childNodes[0],0);1!==b.compareBoundaryPoints(d.START_TO_START,d)?b.setStartBefore(a):-1!==b.compareBoundaryPoints(d.END_TO_START,d)&&b.setStartAfter(a)}}}}}),r=k("dijit._editor.plugins.ImgLinkDialog",[p],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(a){var b,c;a&&a.tagName.toLowerCase()===this.tag?(b=a.getAttribute("_djrealurl")||a.getAttribute("src"),c=a.getAttribute("alt"),this.editor.selection.selectElement(a,!0)):c=this.editor.selection.getSelectedText();return{urlInput:b||"",textInput:c||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(f.hitch(this,
function(){this.own(d(this.editor.editNode,"mousedown",f.hitch(this,"_selectTag")))}))},_selectTag:function(a){a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(a))},_checkValues:function(a){a&&a.urlInput&&(a.urlInput=a.urlInput.replace(/"/g,"\x26quot;"));a&&a.textInput&&(a.textInput=a.textInput.replace(/"/g,"\x26quot;"));return a},_onDblClick:function(a){if(a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&m.get(a,
"src"))){var b=this.editor;this.editor.selection.selectElement(a);b.onDisplayChanged();b._updateTimer&&(b._updateTimer.remove(),delete b._updateTimer);b.onNormalizedDisplayChanged();var c=this.button;setTimeout(function(){c.set("disabled",!1);c.loadAndOpenDropDown().then(function(){c.dropDown.focus&&c.dropDown.focus()})},10)}}});a.registry.createLink=function(){return new p({command:"createLink"})};a.registry.insertImage=function(){return new r({command:"insertImage"})};p.ImgLinkDialog=r;return p})},
"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),function(h,k,m,g,f,d,c,b,e,a,l,n,p,r,t,v,q,B){var x=m("dijit._editor.plugins.ViewSource",t,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,
readOnly:!1,_fsPlugin:null,toggle:function(){n("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var c=b.getLocalization("dijit._editor","commands"),d=this.editor;this.button=new v({label:c.viewSource,ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:a.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(b){this.editor=
b;this._initButton();this.editor.addKeyHandler(e.F12,!0,!0,a.hitch(this,function(b){this.button.focus();this.toggle();b.stopPropagation();b.preventDefault();setTimeout(a.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(b){var d=this.editor,e=d._plugins,f;this._sourceShown=b;var g=this;try{this.sourceArea||this._createSourceView();if(b)d._sourceQueryCommandEnabled=d.queryCommandEnabled,d.queryCommandEnabled=function(a){return"viewsource"===a.toLowerCase()},
this.editor.onDisplayChanged(),f=d.get("value"),f=this._filter(f),d.set("value",f),h.forEach(e,function(a){!a||a instanceof x||!a.isInstanceOf(t)||a.set("disabled",!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return g.sourceArea}),this.sourceArea.value=f,this.sourceArea.style.height=d.iframe.style.height,this.sourceArea.style.width=d.iframe.style.width,d.iframe.parentNode.style.position="relative",c.set(d.iframe,{position:"absolute",top:0,visibility:"hidden"}),c.set(this.sourceArea,
{display:"block"}),this._resizeHandle=l(window,"resize",a.hitch(this,function(){var b=p.getBox(d.ownerDocument);"_prevW"in this&&"_prevH"in this&&b.w===this._prevW&&b.h===this._prevH||(this._prevW=b.w,this._prevH=b.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(a.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(a.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,
this.editor.getValue=a.hitch(this,function(){var a=this.sourceArea.value;return a=this._filter(a)}),this._setListener=k.after(this.editor,"setValue",a.hitch(this,function(a){a=this._filter(a||"");this.sourceArea.value=a}),!0);else{if(!d._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);d.queryCommandEnabled=
d._sourceQueryCommandEnabled;this._readOnly||(f=this.sourceArea.value,f=this._filter(f),d.beginEditing(),d.set("value",f),d.endEditing());h.forEach(e,function(a){a&&a.isInstanceOf(t)&&a.set("disabled",!1)});c.set(this.sourceArea,"display","none");c.set(d.iframe,{position:"relative",visibility:"visible"});delete d._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(a.hitch(this,function(){var a=d.domNode.parentNode;a&&(a=B.getEnclosingWidget(a))&&a.resize&&a.resize();d.resize()}),
300)}catch(F){console.log(F)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var a=this.editor,b=a.getHeaderHeight(),c=a.getFooterHeight(),e=d.position(a.domNode),f=d.getPadBorderExtents(a.iframe.parentNode),g=d.getMarginExtents(a.iframe.parentNode),h=d.getPadBorderExtents(a.domNode),l=e.w-h.w,e=e.h-(b+h.h+c);this._fsPlugin&&this._fsPlugin.isFullscreen&&(a=p.getBox(a.ownerDocument),l=a.w-h.w,e=a.h-(b+h.h+c));d.setMarginBox(this.sourceArea,{w:Math.round(l-
(f.w+g.w)),h:Math.round(e-(f.h+g.h))})},_createSourceView:function(){var b=this.editor,d=b._plugins;this.sourceArea=f.create("textarea");this.readOnly&&(g.set(this.sourceArea,"readOnly",!0),this._readOnly=!0);c.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});g.set(this.sourceArea,"aria-label",this.editor.id);f.place(this.sourceArea,b.iframe,"before");n("ie")&&b.iframe.parentNode.lastChild!==b.iframe&&c.set(b.iframe.parentNode.lastChild,{width:"0px",height:"0px",
padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});b._viewsource_oldFocus=b.focus;var h=this;b.focus=function(){if(h._sourceShown)h.setSourceAreaCaret();else try{this._vsFocused?(delete this._vsFocused,r.focus(b.editNode)):b._viewsource_oldFocus()}catch(F){console.log("ViewSource focus code error: "+F)}};var k,m;for(k=0;k<d.length;k++)if((m=d[k])&&("dijit._editor.plugins.FullScreen"===m.declaredClass||m.declaredClass===q._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=m;break}this._fsPlugin&&
(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return h._sourceShown?h.sourceArea:this._viewsource_getAltViewNode()});this.own(l(this.sourceArea,"keydown",a.hitch(this,function(c){this._sourceShown&&c.keyCode==e.F12&&c.ctrlKey&&c.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(a.hitch(this,function(){b.focus()}),100),c.stopPropagation(),c.preventDefault())})))},_stripScripts:function(a){a&&(a=a.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,
""),a=a.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),a=a.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return a},_stripComments:function(a){a&&(a=a.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return a},_stripIFrames:function(a){a&&(a=a.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return a},_stripEventHandlers:function(a){if(a){var b=a.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,
"");a=a.replace(e,f)}}return a},_filter:function(a){a&&(this.stripScripts&&(a=this._stripScripts(a)),this.stripComments&&(a=this._stripComments(a)),this.stripIFrames&&(a=this._stripIFrames(a)),this.stripEventHandlers&&(a=this._stripEventHandlers(a)));return a},setSourceAreaCaret:function(){var a=this.sourceArea;r.focus(a);this._sourceShown&&!this.readOnly&&(a.setSelectionRange?a.setSelectionRange(0,0):this.sourceArea.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),
a.moveStart("character",0),a.moveEnd("character",0),a.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.inherited(arguments)}});t.registry.viewSource=t.registry.viewsource=function(a){return new x({readOnly:"readOnly"in a?a.readOnly:!1,stripComments:"stripComments"in a?a.stripComments:!0,stripScripts:"stripScripts"in
a?a.stripScripts:!0,stripIFrames:"stripIFrames"in a?a.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in a?a.stripEventHandlers:!0})};return x})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),function(h,
k,m,g,f,d,c,b,e,a,l,n,p,r,t){h=m("dijit._editor.plugins._FontDropDown",[a,l,n],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:h,postMixInProperties:function(){this.inherited(arguments);this.strings=f.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=e.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new b({idProperty:"value",data:k.map(this.values,function(a){var b=this.strings[a]||a;return{label:this.getLabel(a,b),name:b,value:a}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(a,b){b=!1!==b;this.select.set("value",0>k.indexOf(this.values,a)?"":a,b);b||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(a){this._set("disabled",a);this.select.set("disabled",a)}});var v=m("dijit._editor.plugins._FontNameDropDown",h,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(a,b){return this.plainText?b:"\x3cdiv style\x3d'font-family: "+a+"'\x3e"+b+"\x3c/div\x3e"},_normalizeFontName:function(a){var b=this.values;if(!a||!b)return a;var d=a.split(",");if(1<d.length)for(var e=0,f=d.length;e<f;e++){var g=c.trim(d[e]);if(-1<k.indexOf(b,g))return g}return a},_setValueAttr:function(a,b){b=!1!==
b;a=this._normalizeFontName(a);this.generic&&(a={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[a]||a);this.inherited(arguments,[a,b])}}),q=m("dijit._editor.plugins._FontSizeDropDown",h,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(a,
b){return this.plainText?b:"\x3cfont size\x3d"+a+"'\x3e"+b+"\x3c/font\x3e"},_setValueAttr:function(a,b){b=!1!==b;a.indexOf&&-1!=a.indexOf("px")&&(a={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(a,10)]||a);this.inherited(arguments,[a,b])}}),B=m("dijit._editor.plugins._FormatBlockDropDown",h,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(a,b){return this.plainText||
"noFormat"==a?b:"\x3c"+a+"\x3e"+b+"\x3c/"+a+"\x3e"},_execCommand:function(a,b,c){if("noFormat"===c){var e;if((b=t.getSelection(a.window))&&0<b.rangeCount){c=b.getRangeAt(0);var f;if(c){b=c.startContainer;for(e=c.endContainer;b&&b!==a.editNode&&b!==a.document.body&&1!==b.nodeType;)b=b.parentNode;for(;e&&e!==a.editNode&&e!==a.document.body&&1!==e.nodeType;)e=e.parentNode;var g=d.hitch(this,function(b,c){if(b.childNodes&&b.childNodes.length){var d;for(d=0;d<b.childNodes.length;d++){var e=b.childNodes[d];
if(1==e.nodeType&&a.selection.inSelection(e)){var f=e.tagName?e.tagName.toLowerCase():"";-1!==k.indexOf(this.values,f)&&c.push(e);g(e,c)}}}});c=d.hitch(this,function(b){if(b&&b.length){for(a.beginEditing();b.length;)this._removeFormat(a,b.pop());a.endEditing()}});var h=[];if(b==e){var l;for(e=b;e&&e!==a.editNode&&e!==a.document.body;){if(1==e.nodeType&&(f=e.tagName?e.tagName.toLowerCase():"",-1!==k.indexOf(this.values,f))){l=e;break}e=e.parentNode}g(b,h);l&&(h=[l].concat(h))}else for(e=b;a.selection.inSelection(e);)1==
e.nodeType&&(f=e.tagName?e.tagName.toLowerCase():"",-1!==k.indexOf(this.values,f)&&h.push(e),g(e,h)),e=e.nextSibling;c(h);a.onDisplayChanged()}}}else a.execCommand(b,c)},_removeFormat:function(a,b){if(a.customUndo){for(;b.firstChild;)g.place(b.firstChild,b,"before");b.parentNode.removeChild(b)}else{a.selection.selectElementChildren(b);var c=a.selection.getSelectedHtml();a.selection.selectElement(b);a.execCommand("inserthtml",c||"")}}}),x=m("dijit._editor.plugins.FontChoice",r,{useDefaultCommand:!1,
_initButton:function(){var a={fontName:v,fontSize:q,formatBlock:B}[this.command],b=this.params;this.params.custom&&(b.values=this.params.custom);var c=this.editor;this.button=new a(d.delegate({dir:c.dir,lang:c.lang},b));this.own(this.button.select.on("change",d.hitch(this,function(a){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=a.indexOf(" ")&&(a="'"+a+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,a):this.editor.execCommand(this.command,
a)})))},updateState:function(){var a=this.editor,b=this.command;if(a&&a.isLoaded&&b.length&&this.button){var c=this.get("disabled");this.button.set("disabled",c);if(!c){var e;try{e=a.queryCommandValue(b)||""}catch(F){e=""}(c=d.isString(e)&&(e.match(/'([^']*)'/)||e.match(/"([^"]*)"/)))&&(e=c[1]);"fontSize"!==b||e||(e=3);if("formatBlock"===b)if(e&&"p"!=e)0>k.indexOf(this.button.values,e)&&(e="noFormat");else{e=null;var f;(b=t.getSelection(this.editor.window))&&0<b.rangeCount&&(b=b.getRangeAt(0))&&(f=
b.endContainer);for(;f&&f!==a.editNode&&f!==a.document;){if((b=f.tagName?f.tagName.toLowerCase():"")&&-1<k.indexOf(this.button.values,b)){e=b;break}f=f.parentNode}e||(e="noFormat")}e!==this.button.get("value")&&this.button.set("value",e,!1)}}}});k.forEach(["fontName","fontSize","formatBlock"],function(a){r.registry[a]=function(b){return new x({command:a,plainText:b.plainText})}});x._FontDropDown=h;x._FontNameDropDown=v;x._FontSizeDropDown=q;x._FormatBlockDropDown=B;return x})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(h,k,m,g){var f=h.declare("dojox.editor.plugins.Preview",g,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=h.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new k.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:h.hitch(this,"_preview")})},setEditor:function(d){this.editor=d;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var d=this.editor.get("value"),c="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",b;if(this.stylesheets)for(b=0;b<this.stylesheets.length;b++)c+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[b]+"'\x3e\n";this.styles&&(c+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");var d="\x3chtml\x3e\n\t\x3chead\x3e\n"+c+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
d+"\n\t\x3c/body\x3e\n\x3c/html\x3e",e=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");e.document.open();e.document.write(d);e.document.close()}catch(a){console.warn(a)}}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"preview"!==d.args.name.toLowerCase()||(d.plugin=new f({styles:"styles"in d.args?d.args.styles:"",stylesheets:"stylesheets"in d.args?d.args.stylesheets:null}))});return f})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(h,k,m,g,f,d){var c=m("dijit._editor.plugins.TextColor",f,{buttonClass:d,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var b=this;this.button.loadDropDown=function(c){function a(a){b.button.dropDown=new a({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,value:b.value,onChange:function(a){b.editor.execCommand(b.command,a)},onExecute:function(){b.editor.execCommand(b.command,this.get("value"))}});c()}"string"==
typeof b.colorPicker?h([b.colorPicker],a):a(b.colorPicker)}},updateState:function(){var b=this.editor,c=this.command;if(b&&b.isLoaded&&c.length){if(this.button){var a=this.get("disabled");this.button.set("disabled",a);if(a)return;var d;try{d=b.queryCommandValue(c)||""}catch(n){d=""}}""==d&&(d="#000000");"transparent"==d&&(d="#ffffff");"string"==typeof d?-1<d.indexOf("rgb")&&(d=k.fromRgb(d).toHex()):(d=((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16),d="#000000".slice(0,7-d.length)+d);this.value=
d;(b=this.button.dropDown)&&b.get&&d!==b.get("value")&&b.set("value",d,!1)}}});f.registry.foreColor=function(b){return new c(b)};f.registry.hiliteColor=function(b){return new c(b)};return c})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(h,k,m,g,f,d,c){var b=c("dojox.editor.plugins.ToolbarLineBreak",[g,f],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){h.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin){var a=c.args.name.toLowerCase();if("||"===a||"toolbarlinebreak"===a)c.plugin=new d({button:new b,setEditor:function(a){this.editor=a}})}});return b})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p,r,t){h.experimental("dojox.editor.plugins.FindReplace");var v=h.declare("dojox.editor.plugins._FindReplaceCloseBox",[d,c,e],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=k.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),q=h.declare("dojox.editor.plugins._FindReplaceTextBox",[d,c,e],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=k.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");h.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(a){this.value=a;this.textBox.set("value",a)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(a){this.disabled=a;this.textBox.set("disabled",
a)},onChange:function(a){this.value=a},_onKeyPress:function(a){var b=0,c=0;!a.target||a.ctrlKey||a.altKey||a.shiftKey||(a.keyCode==h.keys.LEFT_ARROW?(b=a.target.selectionStart,c=a.target.selectionEnd,b<c&&(k.selectInputText(a.target,b,b),h.stopEvent(a))):a.keyCode==h.keys.RIGHT_ARROW&&(b=a.target.selectionStart,c=a.target.selectionEnd,b<c&&(k.selectInputText(a.target,c,c),h.stopEvent(a))))}}),B=h.declare("dojox.editor.plugins._FindReplaceCheckBox",[d,c,e],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=k.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(a){this.checkBox.set("value",a)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(a){this.disabled=a;this.checkBox.set("disabled",a)}}),x=h.declare("dojox.editor.plugins._FindReplaceToolbar",l,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");h.addClass(this.domNode,"dijitToolbar")},addChild:function(a,b){k._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(a){a.stopPropagation()}}),u=h.declare("dojox.editor.plugins.FindReplace",[t],{buttonClass:k.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=h.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new k.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:h.hitch(this,
"_toggleFindReplace")});h.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",h.hitch(this,function(a,b){"disabled"===a&&this._toggleFindReplace(!b&&this._displayed,!0,!0)}))},setEditor:function(a){this.editor=a;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(a,b,c){var d=h.marginBox(this.editor.domNode);a&&!h.isOpera?(h.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),b||(this._displayed=
!0)):(h.style(this._frToolbar.domNode,"display","none"),b||(this._displayed=!1),c||this.editor.focus());this.editor.resize({h:d.h})},_populateFindField:function(){var a=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(a&&this._findField.textBox.set("value",a),this._findField.textBox.focus(),k.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(a){this.inherited(arguments);if(!h.isOpera){var b=this._frToolbar=new x;h.style(b.domNode,"display",
"none");h.place(b.domNode,a.domNode,"after");b.startup();this._closeBox=new v;b.addChild(this._closeBox);this._findField=new q({label:this._strings.findLabel,tooltip:this._strings.findTooltip});b.addChild(this._findField);this._replaceField=new q({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});b.addChild(this._replaceField);b.addChild(new m.editor.plugins.ToolbarLineBreak);this._findButton=new k.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;b.addChild(this._findButton);this._replaceButton=new k.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;b.addChild(this._replaceButton);this._replaceAllButton=new k.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;b.addChild(this._replaceAllButton);this._caseSensitive=new B({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});b.addChild(this._caseSensitive);this._backwards=new B({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});b.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new k.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(a){a.keyCode==h.keys.ENTER&&(this._find(),h.stopEvent(a))},_onReplaceKeyDown:function(a){a.keyCode==h.keys.ENTER&&(this._replace()||this._replace(),h.stopEvent(a))},_find:function(a){var b=this._findField.get("value")||"";if(b){var c=this._caseSensitive.get("value"),
d=this._backwards.get("value"),b=this._findText(b,c,d);!b&&a&&(this._promDialog.set("content",h.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),k.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(h.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;k.popup.close(this._promDialog)}),3E3),setTimeout(h.hitch(this,function(){this.editor.focus()}),0));return b}return!1},_replace:function(a){var b=
!1,c=this.editor;c.focus();var d=this._findField.get("value")||"",e=this._replaceField.get("value")||"";if(d){var f=this._caseSensitive.get("value"),g=this._backwards.get("value"),l=c._sCall("getSelectedText",[null]);h.isMoz&&(d=h.trim(d),l=h.trim(l));d=this._filterRegexp(d,!f);l&&d.test(l)&&(c.execCommand("inserthtml",e),b=!0,g&&(this._findText(e,f,g),c._sCall("collapse",[!0])));!this._find(!1)&&a&&(this._promDialog.set("content",h.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
k.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(h.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;k.popup.close(this._promDialog)}),3E3),setTimeout(h.hitch(this,function(){this.editor.focus()}),0));return b}return null},_replaceAll:function(a){var b=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&b++;var c=h.hitch(this,function(){this._replace(!1)?
(b++,setTimeout(c,10)):a&&(this._promDialog.set("content",h.string.substitute(this._strings.replaceDialogText,{0:""+b})),k.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(h.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;k.popup.close(this._promDialog)}),3E3),setTimeout(h.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});c()},_findText:function(a,b,
c){var d=this.editor,e=d.window,f=!1;if(a)if(e.find)f=e.find(a,b,c,!1,!1,!1,!1);else{var g=d.document;if(g.selection||e.getSelection)if(this.editor.focus(),d=g.body.createTextRange(),f=d.duplicate(),e.getSelection().getRangeAt(0),(g=g.selection?g.selection.createRange():null)?c?d.setEndPoint("EndToStart",g):d.setEndPoint("StartToEnd",g):this._bookmark&&(e=e.getSelection().toString(),d.moveToBookmark(this._bookmark),d.text!=e?(d=f.duplicate(),this._bookmark=null):(c?f.setEndPoint("EndToStart",d):f.setEndPoint("StartToEnd",
d),d=f.duplicate())),b=b?4:0,c&&(b|=1),f=d.findText(a,d.text.length,b))d.select(),this._bookmark=d.getBookmark()}return f},_filterRegexp:function(a,b){for(var c="",d=null,e=0;e<a.length;e++)switch(d=a.charAt(e),d){case "\\":c+=d;e++;c+=a.charAt(e);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=d}c="^"+c+"$";return b?new RegExp(c,"mi"):new RegExp(c,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,k.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});u._FindReplaceCloseBox=v;u._FindReplaceTextBox=q;u._FindReplaceCheckBox=B;u._FindReplaceToolbar=x;h.subscribe(k._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"findreplace"!==
a.args.name.toLowerCase()||(a.plugin=new u({}))});return u})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(h,k,m,g){var f=h.declare("dojox.editor.plugins.PasteFromWord",
g,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o\:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var d=h.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");h.mixin(d,h.i18n.getLocalization("dijit","common"));h.mixin(d,h.i18n.getLocalization("dijit._editor","commands"));this.button=new k.form.Button({label:d.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:h.hitch(this,"_openDialog")});this._uId=k.getUniqueId(this.editor.id);d.uId=this._uId;d.width=this.width||"400px";d.height=this.height||"300px";this._dialog=(new k.Dialog({title:d.pasteFromWord})).placeAt(h.body());this._dialog.set("content",h.string.substitute(this._template,d));h.style(h.byId(this._uId+"_rte"),"opacity",.001);this.connect(k.byId(this._uId+"_paste"),"onClick","_paste");this.connect(k.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(d){this.editor=d;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(h.hitch(this,function(){this._rte=new k._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(h.hitch(this,function(){h.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var d=m.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var c;for(c=0;c<this._filters.length;c++)var b=this._filters[c],d=d.replace(b.regexp,b.handler);d=m.html.format.prettyPrint(d);this.editor.focus();this.editor.execCommand("inserthtml",d)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"pastefromword"!==d.args.name.toLowerCase()||(d.plugin=new f({width:"width"in d.args?d.args.width:"400px",height:"height"in d.args?d.args.width:"300px"}))});return f})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(h,k,m,g,f){var d=h.getObject("dojox.html.format",!0);d.prettyPrint=
function(c,b,d,a,l){var e=[],p=0,r=[],t="\t",v="",q=[],B,x=/[=]([^"']+?)(\s|>)/g,u=/style=("[^"]*"|'[^']*'|\S*)/gi,C=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(b&&0<b&&10>b)for(t="",B=0;B<b;B++)t+=" ";b=g.doc.createElement("div");b.innerHTML=c;var A=k.encode,z=k.decode,y=b.ownerDocument.createElement("div"),F=function(a){a=a.cloneNode(!1);y.appendChild(a);a=y.innerHTML;y.innerHTML="";return a},D=function(){var a;for(a=0;a<p;a++)e.push(t)},w=function(){e.push("\n")},H=function(a){var b,c;a=a.split("\n");
for(b=0;b<a.length;b++)a[b]=h.trim(a[b]);a=a.join(" ");a=h.trim(a);if(""!==a){var e=[];if(d&&0<d){var f="";for(b=0;b<p;b++)f+=t;b=f.length;f=d;for(d>b&&(f-=b);a;)if(a.length>d){for(b=f;0<b&&" "!==a.charAt(b);b--);if(!b)for(b=f;b<a.length&&" "!==a.charAt(b);b++);var g=a.substring(0,b),g=h.trim(g);a=h.trim(a.substring(b==a.length?a.length:b+1,a.length));if(g){c="";for(b=0;b<p;b++)c+=t;g=c+g+"\n"}e.push(g)}else{c="";for(b=0;b<p;b++)c+=t;a=c+a+"\n";e.push(a);a=null}return e.join("")}c="";for(b=0;b<p;b++)c+=
t;return c+a+"\n"}return""},I=function(a){if(a){var b=a;b&&(b=b.replace(/&quot;/gi,'"'),b=b.replace(/&gt;/gi,"\x3e"),b=b.replace(/&lt;/gi,"\x3c"),b=b.replace(/&amp;/gi,"\x26"));var c,d;a=0;for(var e=b.split("\n"),f=[],b=0;b<e.length;b++){var g=e[b],l=-1<g.indexOf("\n");if(g=h.trim(g)){l=a;for(c=0;c<g.length;c++)d=g.charAt(c),"{"===d?a++:"}"===d&&(a--,l=a);d="";for(c=0;c<p+l;c++)d+=t;f.push(d+g+"\n")}else l&&0===b&&f.push("\n")}a=f.join("")}return a},E=function(a){var b=a.nodeName.toLowerCase(),c=
h.trim(F(a));a=c.substring(0,c.indexOf("\x3e")+1);a=a.replace(x,'\x3d"$1"$2');a=a.replace(u,function(a){var b=a.substring(0,6);a=a.substring(6,a.length);var c=a.charAt(0);a=h.trim(a.substring(1,a.length-1));a=a.split(";");var d=[];m.forEach(a,function(a){if(a=h.trim(a))a=a.substring(0,a.indexOf(":")).toLowerCase()+a.substring(a.indexOf(":"),a.length),d.push(a)});d=d.sort();a=d.join("; ");var e=h.trim(a);return e&&";"!==e?b+c+(a+";")+c:""});var d=[];a=a.replace(C,function(a){d.push(h.trim(a));return""});
d=d.sort();a="\x3c"+b;d.length&&(a+=" "+d.join(" "));-1!=c.indexOf("\x3c/")?(r.push(b),a+="\x3e"):(a=l?a+" /\x3e":a+"\x3e",r.push(!1));a:switch(b){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":b=!0;break a;default:b=!1}q.push(b);v&&!b&&(e.push(H(v)),v="");b?v+=a:(D(),e.push(a),w(),p++)},G=function(b){var c=b.childNodes;if(c){var d;for(d=0;d<c.length;d++){var g=c[d];if(1===
g.nodeType){var l=h.trim(g.tagName.toLowerCase());f("ie")&&g.parentNode!=b||l&&"/"===l.charAt(0)||(E(g),"script"===l?e.push(I(g.innerHTML)):"pre"===l?(g=g.innerHTML,f("mozilla")&&(g=g.replace("\x3cbr\x3e","\n"),g=g.replace("\x3cpre\x3e",""),g=g.replace("\x3c/pre\x3e","")),"\n"!==g.charAt(g.length-1)&&(g+="\n"),e.push(g)):G(g),g=q.pop(),v&&!g&&(e.push(H(v)),v=""),(l=r.pop())?(l="\x3c/"+l+"\x3e",g?v+=l:(p--,D(),e.push(l),w())):p--)}else 3===g.nodeType||4===g.nodeType?v+=A(g.nodeValue,a):8===g.nodeType&&
(g=z(g.nodeValue,a),D(),e.push("\x3c!--"),w(),p++,e.push(H(g)),p--,D(),e.push("--\x3e"),w())}}};G(b);v&&(e.push(H(v)),v="");return e.join("")};return d})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(h,k,m,g){var f=h.declare("dojox.editor.plugins.InsertAnchor",g,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var d=this,c=h.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),b=this.dropDown=new k.TooltipDialog({title:c.title,execute:h.hitch(this,"setValue"),onOpen:function(){d._onOpenDialog();k.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(h.hitch(d,"_onCloseDialog"),0)}});this.button=new k.form.DropDownButton({label:c.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});c.id=k.getUniqueId(this.editor.id);this._uniqueId=c.id;this.dropDown.set("content",b.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+h.string.substitute(this._template,c));b.startup();this._anchorInput=k.byId(this._uniqueId+"_anchorInput");this._textInput=k.byId(this._uniqueId+"_textInput");this._setButton=k.byId(this._uniqueId+"_setButton");this.connect(k.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(h.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(h.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(d){this.editor=d;this._initButton()},_checkInput:function(){var d=!0;this._anchorInput.isValid()&&
(d=!1);this._setButton.set("disabled",d)},_setup:function(){this.editor.onLoadDeferred.addCallback(h.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(h.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var d=h.moduleUrl(m._scopeName,"editor/plugins/resources").toString();if(!d.match(/^https?:\/\//i)&&!d.match(/^file:\/\//i)){var c;c="/"===d.charAt(0)?h.doc.location.protocol+"//"+h.doc.location.host:this._calcBaseUrl(h.global.location.href);
"/"!==c[c.length-1]&&"/"!==d.charAt(0)&&(c+="/");d=c+d}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,d)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var d=this.editor.document,c=this.getAnchorStyle();if(h.isIE)d.createStyleSheet("").cssText=
c;else{var b=d.createElement("style");b.appendChild(d.createTextNode(c));d.getElementsByTagName("head")[0].appendChild(b)}}catch(e){}},_calcBaseUrl:function(d){var c=null;null!==d&&(c=d.indexOf("?"),-1!=c&&(d=d.substring(0,c)),c=d.lastIndexOf("/"),c=0<c&&c<d.length?d.substring(0,c):d);return c},_checkValues:function(d){d&&(d.anchorInput&&(d.anchorInput=d.anchorInput.replace(/"/g,"\x26quot;")),d.textInput||(d.textInput="\x26nbsp;"));return d},setValue:function(d){this._onCloseDialog();if(!this.editor.window.getSelection){var c=
k.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===c.nodeType&&(c=c.parentNode);c&&c.nodeName&&"a"!==c.nodeName.toLowerCase()&&(c=this.editor._sCall("getSelectedElement",["a"]));c&&c.nodeName&&"a"===c.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[c]),this.editor.execCommand("unlink"))}d=this._checkValues(d);this.editor.execCommand("inserthtml",h.string.substitute(this.htmlTemplate,d))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(d){var c,b;d&&"a"===d.tagName.toLowerCase()&&h.attr(d,"name")?(c=h.attr(d,"name"),b=d.textContent||d.innerText,this.editor._sCall("selectElement",[d,!0])):b=this.editor._sCall("getSelectedText");return{anchorInput:c||"",textInput:b||""}},_onOpenDialog:function(){var d;this.editor.window.getSelection?d=this.editor._sCall("getAncestorElement",["a"]):(d=k.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===d.nodeType&&(d=d.parentNode),d&&d.nodeName&&"a"!==
d.nodeName.toLowerCase()&&(d=this.editor._sCall("getSelectedElement",["a"])));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(d))},_onDblClick:function(d){d&&d.target&&(d=d.target,"a"===(d.tagName?d.tagName.toLowerCase():"")&&h.attr(d,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[d]),setTimeout(h.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(d){h.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(d){d&&h.query("a[name]:not([href])",d).removeClass("dijitEditorPluginInsertAnchorStyle");return d}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin){var c=d.args.name;c&&(c=c.toLowerCase());"insertanchor"===c&&(d.plugin=new f)}});return f})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(h,k,m,g){var f=h.declare("dojox.editor.plugins.Blockquote",g,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=h.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new k.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:h.hitch(this,"_toggleQuote")})},setEditor:function(d){this.editor=d;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");d.customUndo=!0},_toggleQuote:function(d){try{var c=this.editor;c.focus();var b=this.button.get("checked"),e=k.range.getSelection(c.window),a,f,g,m;e&&0<e.rangeCount&&(a=e.getRangeAt(0));if(a){c.beginEditing();if(b){var r,t;if(a.startContainer===a.endContainer){if(this._isRootInline(a.startContainer)){for(g=a.startContainer;g&&g.parentNode!==c.editNode;)g=g.parentNode;for(;g&&g.previousSibling&&(this._isTextElement(g)||1===g.nodeType&&this._isInlineFormat(this._getTagName(g)));)g=
g.previousSibling;g&&1===g.nodeType&&!this._isInlineFormat(this._getTagName(g))&&(g=g.nextSibling);if(g)for(r=c.document.createElement("blockquote"),h.place(r,g,"after"),r.appendChild(g),m=r.nextSibling;m&&(this._isTextElement(m)||1===m.nodeType&&this._isInlineFormat(this._getTagName(m)));)r.appendChild(m),m=r.nextSibling}else{for(var v=a.startContainer;(this._isTextElement(v)||this._isInlineFormat(this._getTagName(v))||"li"===this._getTagName(v))&&v!==c.editNode&&v!==c.document.body;)v=v.parentNode;
v!==c.editNode&&v!==v.ownerDocument.documentElement&&(r=c.document.createElement("blockquote"),h.place(r,v,"after"),r.appendChild(v))}r&&(c._sCall("selectElementChildren",[r]),c._sCall("collapse",[!0]))}else{var q;g=a.startContainer;for(m=a.endContainer;g&&this._isTextElement(g)&&g.parentNode!==c.editNode;)g=g.parentNode;for(q=g;q.nextSibling&&c._sCall("inSelection",[q]);)q=q.nextSibling;m=q;if(m===c.editNode||m===c.document.body){r=c.document.createElement("blockquote");h.place(r,g,"after");t=this._getTagName(g);
if(this._isTextElement(g)||this._isInlineFormat(t))for(c=g;c&&(this._isTextElement(c)||1===c.nodeType&&this._isInlineFormat(this._getTagName(c)));)r.appendChild(c),c=r.nextSibling;else r.appendChild(g);return}m=m.nextSibling;for(q=g;q&&q!==m;){if(1===q.nodeType){if(t=this._getTagName(q),"br"!==t){if(!window.getSelection&&"p"===t&&this._isEmpty(q)){q=q.nextSibling;continue}this._isInlineFormat(t)?r||(r=c.document.createElement("blockquote"),h.place(r,q,"after")):(r&&this._isEmpty(r)&&r.parentNode.removeChild(r),
r=c.document.createElement("blockquote"),h.place(r,q,"after"));r.appendChild(q);q=r}}else this._isTextElement(q)&&(r||(r=c.document.createElement("blockquote"),h.place(r,q,"after")),r.appendChild(q),q=r);q=q.nextSibling}r&&(this._isEmpty(r)?r.parentNode.removeChild(r):(c._sCall("selectElementChildren",[r]),c._sCall("collapse",[!0])),r=null)}}else if(r=!1,a.startContainer===a.endContainer){for(f=a.endContainer;f&&f!==c.editNode&&f!==c.document.body;){if("blockquote"===(f.tagName?f.tagName.toLowerCase():
"")){r=!0;break}f=f.parentNode}if(r){for(var B;f.firstChild;)B=f.firstChild,h.place(B,f,"before");f.parentNode.removeChild(f);B&&(c._sCall("selectElementChildren",[B]),c._sCall("collapse",[!0]))}}else{g=a.startContainer;for(m=a.endContainer;g&&this._isTextElement(g)&&g.parentNode!==c.editNode;)g=g.parentNode;for(a=[];g&&g.nextSibling&&c._sCall("inSelection",[g]);)g.parentNode&&"blockquote"===this._getTagName(g.parentNode)&&(g=g.parentNode),a.push(g),g=g.nextSibling;for(var x=this._findBlockQuotes(a);x.length;){var u=
x.pop();if(u.parentNode){for(;u.firstChild;)h.place(u.firstChild,u,"before");u.parentNode.removeChild(u)}}}c.endEditing()}c.onNormalizedDisplayChanged()}catch(C){}},updateState:function(){var d=this.editor,c=this.get("disabled");if(d&&d.isLoaded&&this.button&&(this.button.set("disabled",c),!c)){var b,c=!1,e=k.range.getSelection(d.window);e&&0<e.rangeCount&&(e=e.getRangeAt(0))&&(b=e.endContainer);for(;b&&b!==d.editNode&&b!==d.document;){if("blockquote"===(b.tagName?b.tagName.toLowerCase():"")){c=!0;
break}b=b.parentNode}this.button.set("checked",c)}},_findBlockQuotes:function(d){var c=[];if(d){var b;for(b=0;b<d.length;b++){var e=d[b];1===e.nodeType&&("blockquote"===this._getTagName(e)&&c.push(e),e.childNodes&&0<e.childNodes.length&&(c=c.concat(this._findBlockQuotes(e.childNodes))))}}return c},_getTagName:function(d){var c="";d&&1===d.nodeType&&(c=d.tagName?d.tagName.toLowerCase():"");return c},_isRootInline:function(d){var c=this.editor;if(this._isTextElement(d)&&d.parentNode===c.editNode||1===
d.nodeType&&this._isInlineFormat(d)&&d.parentNode===c.editNode)return!0;if(this._isTextElement(d)&&this._isInlineFormat(this._getTagName(d.parentNode))){for(d=d.parentNode;d&&d!==c.editNode&&this._isInlineFormat(this._getTagName(d));)d=d.parentNode;if(d===c.editNode)return!0}return!1},_isTextElement:function(d){return d&&3===d.nodeType||4===d.nodeType?!0:!1},_isEmpty:function(d){if(d.childNodes){var c=!0,b;for(b=0;b<d.childNodes.length;b++){var e=d.childNodes[b];if(1===e.nodeType){if("p"!==this._getTagName(e)||
h.trim(e.innerHTML)){c=!1;break}}else if(this._isTextElement(e)){if((e=h.trim(e.nodeValue))&&"\x26nbsp;"!==e&&"\u00a0"!==e){c=!1;break}}else{c=!1;break}}return c}return!0},_isInlineFormat:function(d){switch(d){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"blockquote"!==
d.args.name.toLowerCase()||(d.plugin=new f({}))});return f})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(h,k,m,g){h.experimental("dojox.editor.plugins.UploadImage");var f=h.declare("dojox.editor.plugins.UploadImage",g,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,label:"Upload",setToolbar:function(d){this.button.destroy();
this.createFileInput();d.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var d=h.create("span",{innerHTML:"."},document.body);h.style(d,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=new m.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,
uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},d);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(d,c,b){d=d[0];c=h.byId(this.currentImageId,this.editor.document);b=this.downloadPath?this.downloadPath+d.name:d.file;c.src=b;h.attr(c,"_djrealurl",b);d.width&&(c.width=d.width,c.height=
d.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "uploadImage":d.plugin=new f({url:d.args.url})}});return f})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p,r,t,v,q,B,x,u,C,A,z,y,F,D){h.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return k("dojox.form.FileUploader",[C,A,z],{swfPath:v.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(y.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();var a;"flash"==this.uploaderType?a="createFlashUploader":(this.uploaderType="html",a="createHtmlUploader");this[a]();this.fileListId&&this.connect(e.byId(this.fileListId),"click",function(a){a=a.target.parentNode.parentNode.parentNode;a.id&&-1<a.id.indexOf("file_")&&
this.removeFile(a.id.split("file_")[1])});u.addOnUnload(this,this.destroy)},getHiddenNode:function(b){if(!b)return null;var c=null;for(b=b.parentNode;b&&"body"!=b.tagName.toLowerCase();){if("none"==a.get(b,"display")){c=b;break}b=b.parentNode}return c},getButtonStyle:function(){var c=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(c))&&a.set(this._hiddenNode,"display","block");if(!c&&this.button&&this.button.domNode){var d=!0,c=this.button.domNode.className+" dijitButtonNode",e=this.getText(b(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=c=r.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+c+'"\x3e'+e+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(c=this.button);n.get(c,"class")&&(this.baseClass+=" "+n.get(c,"class"));n.set(c,"class",this.baseClass);this.norm=this.getStyle(c);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(c,this.baseClass+" "+this.hoverClass,d),this.down=this.getTempNodeStyle(c,this.baseClass+" "+this.activeClass,d),this.dsbl=this.getTempNodeStyle(c,this.baseClass+" "+this.disabledClass,d),this.fhtml={cn:this.getText(c),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(c),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){a.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&a.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
a.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),a.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):r.destroy(this.progNode);
a.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});p.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&p.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(H){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);d.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var b=f.connect(this,"onReady",this,function(){f.disconnect(b);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&a.set(this._hiddenNode,"display","none")},onChange:function(a){},onProgress:function(a){},onComplete:function(a){},onCancel:function(){},onError:function(a){},onReady:function(a){},onLoad:function(a){},submit:function(a){a=a?t.toObject(a):null;this.upload(a);return!1},upload:function(b){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var c=q.byId(this.progressWidgetId).domNode;"none"==a.get(c,"display")&&(this.restoreProgDisplay="none",a.set(c,"display","block"));"hidden"==a.get(c,"visibility")&&(this.restoreProgDisplay="hidden",a.set(c,"visibility","visible"))}b&&!b.target&&(this.postData=b);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(b=0;b<this.fileList.length;b++)c=
this.fileList[b],c.bytesLoaded=0,c.bytesTotal=c.size||1E5,c.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(a,b){var c;for(c=0;c<this.fileList.length;c++)if(this.fileList[c].name==a){b||this.fileList.splice(c,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(a):b||(r.destroy(this.fileInputs[c]),this.fileInputs.splice(c,1),this._renumberInputs());this.fileListId&&r.destroy("file_"+a)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(g.forEach(this._subs,f.unsubscribe,dojo),g.forEach(this._cons,f.disconnect,dojo),this.scrollConnect&&f.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(r.destroy(this._fileInput),r.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(f.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(b){!0===b?("flash"==this.uploaderType?a.set(this.insideNode,"top","-2500px"):a.set(this.insideNode,"display",
"none"),a.set(this.progNode,"display","")):!1===b?(a.set(this.insideNode,{display:"",top:"0"}),a.set(this.progNode,"display","none")):a.set(this.progNode,"width",b*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var a=!1,b=f.connect(this,"_complete",function(){f.disconnect(b);a=!0}),c=0,d=setInterval(m.hitch(this,function(){c+=5;c>this.fhtml.nr.w&&(c=0,a=!0);this._displayProgress(c/this.fhtml.nr.w);a&&(clearInterval(d),setTimeout(m.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(a){"string"==typeof a&&(a=Error(a));this.onError(a)},_addToFileList:function(){if(this.fileListId){var a="";g.forEach(this.fileList,function(b){a+='\x3ctable id\x3d"file_'+b.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+b.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(b.size?Math.ceil(.001*b.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);e.byId(this.fileListId).innerHTML=
a}},_change:function(a){c("ie")&&g.forEach(a,function(a){a.name=a.name.split("\\")[a.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(a):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=a);this._addToFileList();this.onChange(a);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(b){b=
m.isArray(b)?b:[b];g.forEach(b,function(a){a.ERROR&&this._error(a.ERROR)},this);g.forEach(this.fileList,function(a){a.bytesLoaded=1;a.bytesTotal=1;a.percent=100;this._progress(a)},this);g.forEach(this.fileList,function(a){this.removeFile(a.name,!0)},this);this.onComplete(b);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(m.hitch(this,function(){a.set(q.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(a){for(var b=0,c=0,d=0;d<this.fileList.length;d++){var e=this.fileList[d];e.name==a.name&&(e.bytesLoaded=a.bytesLoaded,e.bytesTotal=a.bytesTotal,e.percent=Math.ceil(e.bytesLoaded/e.bytesTotal*100),this.log(e.name,"percent:",e.percent));c+=Math.ceil(.001*e.bytesLoaded);b+=Math.ceil(.001*e.bytesTotal)}a=Math.ceil(c/b*100);this.progressWidgetId&&q.byId(this.progressWidgetId).update({progress:a+"%"});this.showProgress&&this._displayProgress(.01*a);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(b){if(this._disabled!=b){if("flash"==this.uploaderType){if(!this.flashReady){var c=f.connect(this,"onLoad",this,function(){f.disconnect(c);this._setDisabledAttr(b)});return}this._disabled=b;this.flashMovie.doDisable(b)}else this._disabled=b,a.set(this._fileInput,"display",this._disabled?"none":"");p.toggle(this.domNode,this.disabledClass,b)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var a=
b("[tabIndex]"),c=0;c<a.length;c++)if(a[c].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=a[c];break}this.nextFocusObject.focus()},_disconnect:function(){g.forEach(this._cons,f.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&r.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();B.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:m.hitch(this,function(a){this._error("HTML Upload Error:"+a.message)}),load:m.hitch(this,
function(a,b,c){this._complete(a)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();a.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(f.connect(this._fileInput,"mouseover",this,function(a){p.add(this.domNode,this.hoverClass);this.onMouseOver(a)}));this._cons.push(f.connect(this._fileInput,"mouseout",this,function(a){setTimeout(m.hitch(this,
function(){p.remove(this.domNode,this.activeClass);p.remove(this.domNode,this.hoverClass);this.onMouseOut(a);this._checkHtmlCancel("off")}),0)}));this._cons.push(f.connect(this._fileInput,"mousedown",this,function(a){p.add(this.domNode,this.activeClass);p.remove(this.domNode,this.hoverClass);this.onMouseDown(a)}));this._cons.push(f.connect(this._fileInput,"mouseup",this,function(a){p.remove(this.domNode,this.activeClass);this.onMouseUp(a);this.onClick(a);this._checkHtmlCancel("up")}));this._cons.push(f.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var a=this._fileInput.value;a?this._change([{name:a,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(a){"change"==a&&(this.dialogIsOpen=!1);"up"==a&&(this.dialogIsOpen=!0);if("off"==a){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var b=this.fhtml.nr;a.set(this.insideNode,{width:b.w+"px",height:"middle"==b.va?b.h+"px":"auto",
textAlign:b.ta,paddingTop:b.p[0]+"px",paddingRight:b.p[1]+"px",paddingBottom:b.p[2]+"px",paddingLeft:b.p[3]+"px"});try{a.set(this.insideNode,"lineHeight","inherit")}catch(H){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],b("*",this._formNode).forEach(function(a){r.destroy(a)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>c("ie")||c("ie")&&c("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=q.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=r.create("form",{enctype:"multipart/form-data",method:"post",id:q.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,a.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var b=
this.htmlFieldName;this.selectMultipleFiles&&(b+=this.fileCount,this.fileCount++);n.set(this._fileInput,{id:this.id,name:b,type:"file"});p.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);b=l.getMarginBox(this._fileInput);a.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-b.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var a;this.fileCount=0;g.forEach(this.fileInputs,function(b){a=this.htmlFieldName+this.fileCount;this.fileCount++;
n.set(b,"name",a)},this)}},_setFormStyle:function(){D.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");a.set(this.domNode,{overflow:"hidden",position:"relative"});a.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var a in this.postData)r.create("input",{type:"hidden",name:a,value:this.postData[a]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var a=f.connect(this,"_complete",this,function(){f.disconnect(a);this._displayProgress(!1)})}var b={},c;for(c in this.postData)b[c]=this.postData[c];this.flashMovie.doUpload(b)}catch(E){this._error("FileUploader - Sorry, the SWF failed to initialize."+E)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var b=window.location.href.split("/");b.pop();b=b.join("/")+"/";this.uploadUrl=b+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",b," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");b={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:F.serialize("fh",this.fhtml),fileMask:F.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new y(b,this.insideNode);this.flashObject.onError=m.hitch(function(a){this._error("Flash Error: "+a)});this.flashObject.onReady=m.hitch(this,function(){a.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=m.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(a,b){this._subs.push(f.subscribe(this.id+a,this,b))},urlencode:function(a){return a&&"none"!=a?a.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(a){a=a.tagName.toLowerCase();
return"button"==a||"input"==a},getTextStyle:function(b){var c={};c.ff=a.get(b,"fontFamily");if(c.ff){c.ff=c.ff.replace(", ",",");c.ff=c.ff.replace(/\"|\'/g,"");c.ff="sans-serif"==c.ff?"Arial":c.ff;c.fw=a.get(b,"fontWeight");c.fi=a.get(b,"fontStyle");c.fs=parseInt(a.get(b,"fontSize"),10);if(-1<a.get(b,"fontSize").indexOf("%"))for(var d=b;d.tagName;){if(-1==a.get(d,"fontSize").indexOf("%")){c.fs=parseInt(a.get(d,"fontSize"),10);break}"body"==d.tagName.toLowerCase()&&(c.fs=.16*parseInt(a.get(d,"fontSize"),
10));d=d.parentNode}c.fc=(new x(a.get(b,"color"))).toHex();c.fc=parseInt(c.fc.substring(1,Infinity),16)}c.lh=a.get(b,"lineHeight");c.ta=a.get(b,"textAlign");c.ta="start"!=c.ta&&c.ta?c.ta:"left";c.va=this.isButton(b)?"middle":c.lh==c.h?"middle":a.get(b,"verticalAlign");return c},getText:function(a){a=m.trim(a.innerHTML);-1<a.indexOf("\x3c")&&(a=escape(a));return a},getStyle:function(b){var c={},d=l.getContentBox(b),e=l.getPadExtents(b);c.p=[e.t,e.w-e.l,e.h-e.t,e.l];c.w=d.w+e.w;c.h=d.h+e.h;c.d=a.get(b,
"display");d=new x(a.get(b,"backgroundColor"));c.bc=0==d.a?"#ffffff":d.toHex();c.bc=parseInt(c.bc.substring(1,Infinity),16);if(d=this.urlencode(a.get(b,"backgroundImage")))c.bi={url:d,rp:a.get(b,"backgroundRepeat"),pos:escape(a.get(b,"backgroundPosition"))},c.bi.pos||(d=a.get(b,"backgroundPositionX"),e=a.get(b,"backgroundPositionY"),c.bi.pos=escape(("left"==d?"0%":"right"==d?"100%":d)+" "+("top"==e?"0%":"bottom"==e?"100%":e)));return m.mixin(c,this.getTextStyle(b))},getTempNodeStyle:function(a,b,
c){if(c){c=r.place("\x3c"+a.tagName+"\x3e\x3cspan\x3e"+a.innerHTML+"\x3c/span\x3e\x3c/"+a.tagName+"\x3e",a.parentNode);var d=c.firstChild;p.add(d,a.className);p.add(c,b);a=this.getStyle(d)}else c=r.place("\x3c"+a.tagName+"\x3e"+a.innerHTML+"\x3c/"+a.tagName+"\x3e",a.parentNode),p.add(c,a.className),p.add(c,b),c.id=a.id,a=this.getStyle(c);r.destroy(c);return a}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(h,k,m,g,f,d,c,b,e,a,l,n,p){m.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");d=p._iframeName;d=d.substring(0,d.lastIndexOf("_"));var r=g.delegate(p,{create:function(){return r._frame=p.create.apply(p,arguments)},get:null,post:null,send:function(a){var c,d=f._ioSetArgs(a,function(a){c&&c.cancel()},function(a){var b=null;a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?b=c.response.data:(b=c.response.text,"json"===d?b=k.fromJson(b):"javascript"===d&&(b=m.eval(b)))}catch(F){b=
F}return b},function(a,b){b.ioArgs._hasError=!0;return a}),e=d.ioArgs,g="GET",l=b.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&l&&(g="POST");a={method:g,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:l?null:a.content,data:l?a.content:null,timeout:a.timeout,ioArgs:e};a.method&&(a.method=a.method.toUpperCase());if(h.ioPublish&&m.publish&&!1!==e.args.ioPublish)var r=n.after(p,"_notifyStart",function(a){a.options.ioArgs===e&&(r.remove(),f._ioNotifyStart(d))},
!0);c=p(e.url,a,!0);e._callNext=c._callNext;c.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:c.global[d+"_onload"]});g.setObject("dojo.io.iframe",r);return r})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(h,k,m,g,f,d,c,b,e){function a(a){a=h.delegate(r,a);if(!("path"in a))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in a||(a.id="dojox-embed-flash-"+p++);return a}var l,n,p=0,r={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};f("ie")?(l=function(b){b=a(b);if(!b)return null;var c,d=b.path;if(b.vars){var f=[];for(c in b.vars)f.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(b.vars[c]));b.params.FlashVars=f.join("\x26");delete b.vars}d='\x3cobject id\x3d"'+e.escape(String(b.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
e.escape(String(b.width))+'" height\x3d"'+e.escape(String(b.height))+'"'+(b.style?' style\x3d"'+e.escape(String(b.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+e.escape(String(d))+'" /\x3e';if(b.params)for(c in b.params)d+='\x3cparam name\x3d"'+e.escape(c)+'" value\x3d"'+e.escape(String(b.params[c]))+'" /\x3e';return{id:b.id,markup:d+"\x3c/object\x3e"}},n=function(){for(var a=10,b=null;!b&&7<a;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(B){}return b?(a=b.GetVariable("$version").split(" ")[1].split(","),
{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}(),k.addOnWindowUnload(function(){console.warn("***************UNLOAD");var a=function(){};g("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(x){}})})):(l=function(b){b=a(b);if(!b)return null;var c,d=b.path;if(b.vars){var f=[];for(c in b.vars)f.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(b.vars[c]));
b.params.flashVars=f.join("\x26");delete b.vars}d='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+e.escape(String(d))+'" id\x3d"'+e.escape(String(b.id))+'" width\x3d"'+e.escape(String(b.width))+'" height\x3d"'+e.escape(String(b.height))+'"'+(b.style?' style\x3d"'+e.escape(String(b.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(c in b.params)d+=" "+e.escape(c)+'\x3d"'+e.escape(String(b.params[c]))+'"';return{id:b.id,markup:d+
" /\x3e"}},n=function(){var a=navigator.plugins["Shockwave Flash"];return a&&a.description?(a=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}());var t=function(a,b){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=n.major;this.minimumVersion=a.minimumVersion||9;this.domNode=this.movie=this.id=null;b&&(b=d.byId(b));setTimeout(h.hitch(this,function(){if(a.expressInstall||this.available&&this.available>=this.minimumVersion)if(a&&b)this.init(a,b);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};h.extend(t,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(a,b){this.destroy();b=d.byId(b||this.domNode);if(!b)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var c=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;t.initialized&&(this.id=t.place(a,b),this.domNode=b,setTimeout(h.hitch(this,
function(){this.movie=this.byId(this.id,a.doc);this.onReady(this.movie);this._poller=setInterval(h.hitch(this,function(){try{c=this.movie.PercentLoaded()}catch(x){console.warn("this.movie.PercentLoaded() failed",x,this.movie)}if(100==c)this._onload();else if(0==c&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(v){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=
h.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),b;for(b in this)a[b]||delete this[b];this._poller?c(this,"Load",this,"_destroy"):this._destroy()}},byId:function(a,b){b=b||document;return b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}});h.mixin(t,{minSupported:8,available:n.major,supported:n.major>=n.required,minimumRequired:n.required,version:n,initialized:!1,onInitialize:function(){t.initialized=!0},__ie_markup__:function(a){return l(a)},proxy:function(a,
b){m.forEach(b instanceof Array?b:[b],function(a){this[a]=h.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+a+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+m.map(arguments,function(a){return __flash__toXML(a)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},a)}});t.place=function(a,c){a=l(a);c=d.byId(c);c||(c=b.doc.createElement("div"),c.id=a.id+"-container",b.body().appendChild(c));return a?(c.innerHTML=a.markup,
a.id):null};t.onInitialize();h.setObject("dojox.embed.Flash",t);return t})},"dojox/embed/flashVars":function(){define(["dojo"],function(h){h.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var k={serialize:function(k,g){var f=function(b){"string"==typeof b&&(b=b.replace(/;/g,"_sc_"),b=b.replace(/\./g,"_pr_"),b=b.replace(/\:/g,"_cl_"));return b},d=dojox.embed.flashVars.serialize,c="";if(h.isArray(g)){for(var b=0;b<g.length;b++)c+=d(k+"."+b,f(g[b]))+";";return c.replace(/;{2,}/g,
";")}if(h.isObject(g)){for(b in g)c+=d(k+"."+b,f(g[b]))+";";return c.replace(/;{2,}/g,";")}return k+":"+g}};h.setObject("dojox.embed.flashVars",k);return k})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(h,k,m,g){var f=h.getObject("dojox.html",!0),d={},c={},b=[];f.insertCssRule=function(b,a,c){c=f.getDynamicStyleSheet(c);var d=b+" {"+a+"}";console.log("insertRule:",d);g("ie")?(c.cssText+=d,console.log("ss.cssText:",c.cssText)):
c.sheet?c.sheet.insertRule(d,c._indicies.length):c.appendChild(m.doc.createTextNode(d));c._indicies.push(b+" "+a);return b};f.removeCssRule=function(b,a,c){var e,f=-1,h,l;for(h in d)if(!c||c===h){e=d[h];for(l=0;l<e._indicies.length;l++)if(b+" "+a===e._indicies[l]){f=l;break}if(-1<f)break}if(!e)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===f)return console.warn("The css rule was not found and could not be removed."),!1;e._indicies.splice(f,1);
g("ie")?e.removeRule(f):e.sheet&&e.sheet.deleteRule(f);return!0};f.modifyCssRule=function(b,a,c){};f.getStyleSheet=function(b){if(d[b||"default"])return d[b||"default"];if(!b)return!1;var a=f.getStyleSheets();if(a[b])return f.getStyleSheets()[b];for(var c in a)if(a[c].href&&-1<a[c].href.indexOf(b))return a[c];return!1};f.getDynamicStyleSheet=function(b){b||(b="default");d[b]||(m.doc.createStyleSheet?(d[b]=m.doc.createStyleSheet(),9>g("ie")&&(d[b].title=b)):(d[b]=m.doc.createElement("style"),d[b].setAttribute("type",
"text/css"),m.doc.getElementsByTagName("head")[0].appendChild(d[b]),console.log(b," ss created: ",d[b].sheet)),d[b]._indicies=[]);return d[b]};f.enableStyleSheet=function(b){if(b=f.getStyleSheet(b))b.sheet?b.sheet.disabled=!1:b.disabled=!1};f.disableStyleSheet=function(b){if(b=f.getStyleSheet(b))b.sheet?b.sheet.disabled=!0:b.disabled=!0};f.activeStyleSheet=function(b){var a=f.getToggledStyleSheets(),c;if(1===arguments.length)k.forEach(a,function(a){a.disabled=a.title===b?!1:!0});else for(c=0;c<a.length;c++)if(!1===
a[c].disabled)return a[c];return!0};f.getPreferredStyleSheet=function(){};f.getToggledStyleSheets=function(){var c;if(!b.length){var a=f.getStyleSheets();for(c in a)a[c].title&&b.push(a[c])}return b};f.getStyleSheets=function(){if(c.collected)return c;k.forEach(m.doc.styleSheets,function(b){var a=b.sheet?b.sheet:b;b=a.title||a.href;if(g("ie"))-1===a.cssText.indexOf("#default#VML")&&(a.href?c[b]=a:a.imports.length?k.forEach(a.imports,function(a){c[a.title||a.href]=a}):c[b]=a);else{c[b]=a;c[b].id=a.ownerNode.id;
b=[];try{b=a[a.cssRules?"cssRules":"rules"]}catch(l){console.warn("Reading css rules from stylesheet "+a.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",a)}k.forEach(b,function(b){b.href&&(c[b.href]=b.styleSheet,c[b.href].id=a.ownerNode.id)})}});c.collected=!0;return c};return f})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/sniff dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),
function(h,k,m,g,f,d,c,b){h.experimental("dojox.editor.plugins.ChooseImage");var e=h.declare("dojox.editor.plugins.ChooseImage",m,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var a=b.getLocalization("dijit._editor","commands");this.button=new k.form.Button({label:a.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:d.hitch(this,this._chooseImage)});this.button.set("readOnly",
!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){var a=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===a?(f.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(f.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var a=h.create("span",{innerHTML:"."},document.body);this.imageChooser=new g({showSelfImg:!1,
cropImage:!1,format:[g.GIF,g.JPEG,g.PNG]},a);this.connect(this.imageChooser,"onImageChange","insertTempImage")},_chooseImage:function(){var a=this.imageChooser.mask;if(c("safari")){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);a.dispatchEvent(b)}else a.click()},onComplete:function(a){a=a[0];var b=h.byId(this.currentImageId,this.editor.document),c;c=this.downloadPath?this.downloadPath+a.name:a.file;b.src=c;h.attr(b,"_djrealurl",c);a.width&&(b.width=a.width,b.height=a.height)},
insertTempImage:function(a,b){b=b&&b.fileName?'alt\x3d"'+b.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+a+'" '+b+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});h.subscribe(k._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "chooseImage":a.plugin=new e({url:a.args.url})}});m.registry.chooseImage=function(a){return new e(a)};
return e})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(h,k,m,g,f,d){k.experimental("dijit.editor.plugins.EditorTextColor");var c=g("dijit.editor.plugins.EditorTextColor",f,{buttonClass:d,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var b="",c=!1;this.params.custom&&
(this.params.custom.recordUID&&(b=this.params.custom.recordUID),this.params.custom.forceAttr&&(c=this.params.custom.forceAttr));var a=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(d){function e(e){a.button.dropDown=new e({dir:a.editor.dir,ownerDocument:a.editor.ownerDocument,value:a.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,
showCoustomRecord:!0},recordUID:b,onChange:function(b){a.editor.execCommand("useCSS",c);a.editor.execCommand("styleWithCSS",!c);a.editor.execCommand(a.hackCommand,b)},onClose:function(){a.button.closeDropDown()}});d()}"string"===typeof a.colorPicker?h([a.colorPicker],e):e(a.colorPicker)}},updateState:function(){var b=this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){var a;if(this.button){var d=this.get("disabled");this.button.set("disabled",d);if(d)return;try{a=b.queryCommandValue(c)||""}catch(n){a=
""}}""===a?a="#000000":"transparent"===a&&(a="rgba(0, 0, 0, 0)");this.value=a;(b=this.button.dropDown)&&b.getColor&&a!==b.getColor()&&(b.refreshRecords(),b.setColor(a))}}});k.subscribe(m._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorTextColor":b.plugin=new c}});return c})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(h,k,m,g,f,d){k.experimental("dijit.editor.plugins.EditorBackgroundColor");
var c=g("dijit.editor.plugins.EditorBackgroundColor",f,{buttonClass:d,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var b="";this.params.custom&&this.params.custom.recordUID&&(b=this.params.custom.recordUID);var c=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=
function(a){function d(d){c.button.dropDown=new d({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,value:c.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(a){c.editor.execCommand("useCSS",!1);c.editor.execCommand("styleWithCSS",!0);c.editor.execCommand(c.hackCommand,a)},onExecute:function(){c.editor.execCommand(c.hackCommand,this.get("value"))},onClose:function(){c.button.closeDropDown()}});
a()}"string"===typeof c.colorPicker?h([c.colorPicker],d):d(c.colorPicker)}},updateState:function(){var b=this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){var a;if(this.button){var d=this.get("disabled");this.button.set("disabled",d);if(d)return;try{a=b.queryCommandValue(c)||""}catch(n){a=""}}""===a?a="#000000":"transparent"===a&&(a="rgba(0, 0, 0, 0)");this.value=a;(b=this.button.dropDown)&&b.getColor&&a!==b.getColor()&&(b.refreshRecords(),b.setColor(a))}}});k.subscribe(m._scopeName+".Editor.getPlugin",
null,function(b){if(!b.plugin)switch(b.args.name){case "editorBackgroundColor":b.plugin=new c}});return c})},"widgets/BusinessAnalyst/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/Setting.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"reportInfographicTabContainer" style\x3d"width: 100%; height: 520px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"homeContentPane" title\x3d"${nls.home}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n                \x3cdiv class\x3d"editor-container" data-dojo-attach-point\x3d"editorContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"editor"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n                    \x3cdiv style\x3d"float: left;"\x3e${nls.options}\x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"searchTextBoxOption"\r\n                            data-dojo-attach-point\x3d"searchTextBoxOption"\x3e\r\n                        \x3clabel for\x3d"searchTextBoxOption"\x3e${nls.searchTextBox}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"dropPinOption"\r\n                            data-dojo-attach-point\x3d"dropPinOption"\x3e\r\n                        \x3clabel for\x3d"dropPinOption"\x3e${nls.dropPin}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"drawPolygonOption"\r\n                            data-dojo-attach-point\x3d"drawPolygonOption"\x3e\r\n                        \x3clabel for\x3d"drawPolygonOption"\x3e${nls.drawPolygon}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"drawFreehandPolygonOption"\r\n                            data-dojo-attach-point\x3d"drawFreehandPolygonOption"\x3e\r\n                        \x3clabel for\x3d"drawFreehandPolygonOption"\x3e${nls.drawFreehandPolygon}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledInfographicsOption"\r\n                        data-dojo-attach-point\x3d"disabledInfographicsOption"\x3e\r\n                    \x3clabel for\x3d"disabledInfographicsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cdiv style\x3d"float: left;"\x3e${nls.exportOptions}\x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportPrintOption"\r\n                            data-dojo-attach-point\x3d"exportPrintOption"\x3e\r\n                        \x3clabel for\x3d"exportPrintOption"\x3e${nls.print}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportImageOption"\r\n                            data-dojo-attach-point\x3d"exportImageOption"\x3e\r\n                        \x3clabel for\x3d"exportImageOption"\x3e${nls.image}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportPDFOption"\r\n                            data-dojo-attach-point\x3d"exportPDFOption"\x3e\r\n                        \x3clabel for\x3d"exportPDFOption"\x3e${nls.pdf}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportDynamicHTMLOption"\r\n                            data-dojo-attach-point\x3d"exportDynamicHTMLOption"\x3e\r\n                        \x3clabel for\x3d"exportDynamicHTMLOption"\x3e${nls.dynamicHTML}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerInfographics"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledReportsOption"\r\n                        data-dojo-attach-point\x3d"disabledReportsOption"\x3e\r\n                    \x3clabel for\x3d"disabledReportsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerReports"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.radius}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 1"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 3"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n                    \x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledRingsOption"\r\n                        data-dojo-attach-point\x3d"disabledRingsOption"\x3e\r\n                    \x3clabel for\x3d"disabledRingsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"disabledDriveTimeOption"\r\n                        id\x3d"disabledDriveTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledDriveTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledWalkTimeOption"\r\n                        data-dojo-attach-point\x3d"disabledWalkTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledWalkTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/css/style.css":'.widget-setting-page .esriMapsAnalystXSelectableTreeGrid.dgrid {position: absolute; top: 33px; right: 0; left: -8px; bottom: 0; height: auto; width: auto;}.jimu-widget-business-analyst-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst-setting .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .jimu-widget-business-analyst-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst-setting .tabs .hide{display: none;} .jimu-widget-business-analyst-setting .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst-setting .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;} .jimu-widget-business-analyst-setting .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst-setting .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst-setting .invalidValue {outline: 3px solid #FF0000;} .jimu-widget-business-analyst-setting .makeDefaultLink {cursor: pointer!important; color: #0079c1;} .jimu-widget-business-analyst-setting .makeDefaultLink:hover {text-decoration: underline; text-decoration-color: #0079c1;} .jimu-widget-business-analyst-setting .esriMapsAnalystXSelectableTreeLabel.default {color: #0079c1;} .jimu-widget-business-analyst-setting .editor-container {height: 325px;} .jimu-widget-business-analyst-setting .dijitEditorIFrameContainer {height: 262px;}',
"*now":function(h){h(['dojo/i18n!*preload*widgets/BusinessAnalyst/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/_base/html dojo/dom-class dojo/dom-construct dojo/dom-style dojo/mouse dojo/on dojo/query dojo/sniff jimu/BaseWidgetSetting jimu/utils dijit/_WidgetsInTemplateMixin dijit/Editor esri/dijit/geoenrichment/SelectableTree ../esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid ../utils/GEUtil ../utils/ReportUtil ../utils/ValidationUtil jimu/dijit/formSelect jimu/dijit/TabContainer jimu/dijit/EditorXssFilter dojo/NodeList-manipulate dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor dijit/form/CheckBox dijit/layout/ContentPane".split(" "),function(h,
k,m,g,f,d,c,b,e,a,l,n,p,r,t,v,q,B,x,u,C,A){return k([l,p],{baseClass:"jimu-widget-business-analyst-setting",selectedCountryID:"",currentDefaultInfographicID:"",currentDefaultInfographicDiv:null,currentDefaultReportID:"",currentDefaultReportDiv:null,postCreate:function(){this.inherited(arguments);this.tab=new C({tabs:[{title:this.nls.home,content:this.homeContentPane},{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane},{title:this.nls.rings,
content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.home});this.tab.placeAt(this.reportInfographicTabContainer);this.tab.startup();this.editorXssFilter=A.getInstance()},startup:function(){this._started||(this.inherited(arguments),this.initEditor(),this.setConfig(this.config))},initEditor:function(){var b=document.getElementsByTagName("head")[0],c=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";
e('link[href\x3d"'+c+'"]',b)[0]||n.loadStyleLink("editor_plugins_resources_TextColor",c);c=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";e('link[href\x3d"'+c+'"]',b)[0]||n.loadStyleLink("editor_plugins_resources_editorPlugins",c);c=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";e('link[href\x3d"'+c+'"]',b)[0]||n.loadStyleLink("editor_plugins_resources_PasteFromWord",c);this.editor=new r({plugins:["bold","italic","underline",n.getEditorTextColor("about"),n.getEditorBackgroundColor("about"),
"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent"],extraPlugins:["|","createLink","unlink","pastefromword","|","undo","redo","|","chooseImage","|","viewsource","toolbarlinebreak",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize","formatBlock"],style:"font-family:Verdana;"},this.editor);m.setStyle(this.editor.domNode,
{width:"100%",height:"100%"});this.editor.startup();8!==a("ie")&&this.editor.resize({w:"100%",h:"100%"})},setConfig:function(a){var c=this;this.initializeNewConfigValues(a);q.getAvailableCountries().then(function(a){var d=[];h.forEach(a.countries,function(a){d.push({label:a.name,value:a.id,selected:a.id==c.config.defaultCountryID?"selected":""})});c.countryDropDownInfographics=(new u({options:d})).placeAt(c.countryDropDownContainerInfographics);c.countryDropDownInfographics.startup();c.selectedCountryID=
c.countryDropDownInfographics.get("value");b(c.countryDropDownInfographics,"change",function(){c._countryChangeInfographics()});c.countryDropDownReports=(new u({options:d})).placeAt(c.countryDropDownContainerReports);c.countryDropDownReports.startup();c.selectedCountryID=c.countryDropDownReports.get("value");b(c.countryDropDownReports,"change",function(){c._countryChangeReports()});c._loadConfigForCountry(c.selectedCountryID)});this._loadRingDTWTConfig();this._loadInfographicExportOptions();this._loadFirstPageOptions();
a=this.editorXssFilter.sanitize(a.firstPageText||this.nls.defaultFirstPageText);this.editor.set("value",a)},getConfig:function(){if(!this._validateRingDTWT())return!1;this._setConfigForCountry(this.selectedCountryID);this._setRingDTWTConfig();this._setInfographicExportOptions();this._setFirstPageOptions();this.config.defaultCountryID=this.selectedCountryID;this.config.firstPageText=this.editor.get("value");return this.config},_countryChangeInfographics:function(){this.countryDropDownReports.get("value")!=
this.countryDropDownInfographics.get("value")&&(this.countryDropDownReports.set("value",this.countryDropDownInfographics.get("value")),this._countryChange())},_countryChangeReports:function(){this.countryDropDownInfographics.get("value")!=this.countryDropDownReports.get("value")&&(this.countryDropDownInfographics.set("value",this.countryDropDownReports.get("value")),this._countryChange())},_countryChange:function(){this._setConfigForCountry(this.selectedCountryID);this.selectedCountryID=this.countryDropDownInfographics.get("value");
this._loadConfigForCountry(this.selectedCountryID)},_setConfigForCountry:function(a){var b=null;h.forEach(this.config.countryConfig,function(c){c.countryID==a&&(b=c)});b||(b={countryID:a,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],
enabledEsriInfographics:[],enabledOrgInfographics:[]});b.allowEsriInfographics=0<this.infographicsTreeGrid.tree.data[0].leafCount?0!=this.infographicsTreeGrid.tree.data[0].selectCount:!0;b.allowMyInfographics=0<this.infographicsTreeGrid.tree.data[1].leafCount?0!=this.infographicsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedInfographics=0<this.infographicsTreeGrid.tree.data[2].leafCount?0!=this.infographicsTreeGrid.tree.data[2].selectCount:!0;b.allowAllEsriInfographics=this.infographicsTreeGrid.tree.data[0].leafCount===
this.infographicsTreeGrid.tree.data[0].selectCount;b.allowAllOrgInfographics=this.infographicsTreeGrid.tree.data[1].leafCount===this.infographicsTreeGrid.tree.data[1].selectCount&&this.infographicsTreeGrid.tree.data[2].leafCount===this.infographicsTreeGrid.tree.data[2].selectCount;b.allowAllEsriInfographics||(b.enabledEsriInfographics=this._getEnabledReports(this.infographicsTreeGrid.tree.data[0].children));b.allowAllOrgInfographics||(b.enabledOrgInfographics=this._getEnabledReports(this.infographicsTreeGrid.tree.data[1].children.concat(this.infographicsTreeGrid.tree.data[2].children)));
b.defaultInfographicID=this.currentDefaultInfographicID;b.allowEsriReports=0<this.reportsTreeGrid.tree.data[0].leafCount?0!=this.reportsTreeGrid.tree.data[0].selectCount:!0;b.allowMyReports=0<this.reportsTreeGrid.tree.data[1].leafCount?0!=this.reportsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedReports=0<this.reportsTreeGrid.tree.data[2].leafCount?0!=this.reportsTreeGrid.tree.data[2].selectCount:!0;b.allowAllEsriReports=this.reportsTreeGrid.tree.data[0].leafCount===this.reportsTreeGrid.tree.data[0].selectCount;
b.allowAllOrgReports=this.reportsTreeGrid.tree.data[1].leafCount===this.reportsTreeGrid.tree.data[1].selectCount&&this.reportsTreeGrid.tree.data[2].leafCount===this.reportsTreeGrid.tree.data[2].selectCount;b.allowAllEsriReports||(b.enabledEsriReports=this._getEnabledReports(this.reportsTreeGrid.tree.data[0].children));b.allowAllOrgReports||(b.enabledOrgReports=this._getEnabledReports(this.reportsTreeGrid.tree.data[1].children.concat(this.reportsTreeGrid.tree.data[2].children)));b.defaultReportID=
this.currentDefaultReportID;var c=-1;h.forEach(this.config.countryConfig,function(b,d){b.countryID==a&&(c=d)});-1!=c?this.config.countryConfig[c]=b:this.config.countryConfig.push(b)},_loadConfigForCountry:function(a){var e=this;B.getAvailableInfographicReports(a).then(function(k){h.forEach(k,function(a){h.forEach(a.children,function(a){a.selected=!0})});e.infographicsTreeGrid||(e.infographicsTreeGrid=new v({tree:new t(k),showHeader:!1,_renderLabelNode:function(a,h){var k=f.create("div"),l=f.create("div",
{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a),style:"float: left"},k);if(1===a.deepness){a.value===e.currentDefaultInfographicID&&(g.add(l,"default"),e.currentDefaultInfographicDiv=l);var m=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:e.nls.makeDefault,style:"margin-left: 10px; display: none"},k),n=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:e.nls.removeDefault,style:"margin-left: 10px; display: none"},
k);a.makeDefaultDiv=m;a.unselectDefaultDiv=n;b(m,"click",function(b){b.stopPropagation();e.currentDefaultInfographicDiv&&g.remove(e.currentDefaultInfographicDiv,"default");g.add(l,"default");e.currentDefaultInfographicID=a.value;e.currentDefaultInfographicDiv=l;d.set(m,"display","none");d.set(n,"display","")});b(n,"click",function(a){a.stopPropagation();e.currentDefaultInfographicDiv&&g.remove(e.currentDefaultInfographicDiv,"default");e.currentDefaultInfographicID="";e.currentDefaultInfographicDiv=
null;d.set(n,"display","none");d.set(m,"display","")});b(h,c.enter,function(){a.selected&&(a.value!==e.currentDefaultInfographicID?d.set(m,"display",""):d.set(n,"display",""))});b(h,c.leave,function(){d.set(m,"display","none");d.set(n,"display","none")})}return k}},e.infographicTreeGridContainer));e.own(b(e.infographicsTreeGrid,"SelectionChanged",function(a){a.toggledTreeNode&&0==a.toggledTreeNode.deepness?a.toggledTreeNode.selected||h.forEach(a.toggledTreeNode.children,function(a){a.value===e.currentDefaultInfographicID&&
e.currentDefaultInfographicDiv&&(g.remove(e.currentDefaultInfographicDiv,"default"),e.currentDefaultInfographicID="",e.currentDefaultInfographicDiv=null)}):a.toggledTreeNode&&!a.toggledTreeNode.selected&&a.toggledTreeNode.value===e.currentDefaultInfographicID?e.currentDefaultInfographicDiv&&(g.remove(e.currentDefaultInfographicDiv,"default"),e.currentDefaultInfographicID="",e.currentDefaultInfographicDiv=null,d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"),d.set(a.toggledTreeNode.unselectDefaultDiv,
"display","none")):a.toggledTreeNode&&!a.toggledTreeNode.selected?d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"):a.toggledTreeNode&&a.toggledTreeNode.selected&&d.set(a.toggledTreeNode.makeDefaultDiv,"display","")}));var l=-1;h.forEach(e.config.countryConfig,function(b,c){b.countryID==a&&(l=c)});e.currentDefaultInfographicID="";e.currentDefaultReportID="";-1!=l&&(e.currentDefaultInfographicID=e.config.countryConfig[l].defaultInfographicID,e.currentDefaultReportID=e.config.countryConfig[l].defaultReportID,
e.config.countryConfig[l].allowAllEsriInfographics||h.forEach(k[0].children,function(a){h.some(e.config.countryConfig[l].enabledEsriInfographics,function(b){return a.value===b})||(a.selected=!1)}),e.config.countryConfig[l].allowAllOrgInfographics||h.forEach(k[1].children.concat(k[2].children),function(a){h.some(e.config.countryConfig[l].enabledOrgInfographics,function(b){return a.value===b})||(a.selected=!1)}));e.infographicsTreeGrid.tree.clear();e.infographicsTreeGrid.tree.addNodes(k)});B.getAvailableClassicReports(a).then(function(k){h.forEach(k,
function(a){h.forEach(a.children,function(a){a.selected=!0})});e.reportsTreeGrid||(e.reportsTreeGrid=new v({tree:new t(k),showHeader:!1,_renderLabelNode:function(a,h){var k=f.create("div"),l=f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a),style:"float: left"},k);if(1===a.deepness){a.value===e.currentDefaultReportID&&(g.add(l,"default"),e.currentDefaultReportDiv=l);var m=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",
innerHTML:e.nls.makeDefault,style:"margin-left: 10px; display: none"},k),n=f.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:e.nls.removeDefault,style:"margin-left: 10px; display: none"},k);a.makeDefaultDiv=m;a.unselectDefaultDiv=n;b(m,"click",function(b){b.stopPropagation();e.currentDefaultReportDiv&&g.remove(e.currentDefaultReportDiv,"default");g.add(l,"default");e.currentDefaultReportID=a.value;e.currentDefaultReportDiv=l;d.set(m,"display","none");d.set(n,"display",
"")});b(n,"click",function(a){a.stopPropagation();e.currentDefaultReportDiv&&g.remove(e.currentDefaultReportDiv,"default");e.currentDefaultReportID="";e.currentDefaultReportDiv=null;d.set(n,"display","none");d.set(m,"display","")});b(h,c.enter,function(){a.selected&&(a.value!==e.currentDefaultReportID?d.set(m,"display",""):d.set(n,"display",""))});b(h,c.leave,function(){d.set(m,"display","none");d.set(n,"display","none")})}return k}},e.reportTreeGridContainer));e.own(b(e.reportsTreeGrid,"SelectionChanged",
function(a){a.toggledTreeNode&&0==a.toggledTreeNode.deepness?a.toggledTreeNode.selected||h.forEach(a.toggledTreeNode.children,function(a){a.value===e.currentDefaultReportID&&e.currentDefaultReportDiv&&(g.remove(e.currentDefaultReportDiv,"default"),e.currentDefaultReportID="",e.currentDefaultReportDiv=null)}):a.toggledTreeNode&&!a.toggledTreeNode.selected&&a.toggledTreeNode.value===e.currentDefaultReportID?e.currentDefaultReportDiv&&(g.remove(e.currentDefaultReportDiv,"default"),e.currentDefaultReportID=
"",e.currentDefaultReportDiv=null,d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"),d.set(a.toggledTreeNode.unselectDefaultDiv,"display","none")):a.toggledTreeNode&&!a.toggledTreeNode.selected?d.set(a.toggledTreeNode.makeDefaultDiv,"display","none"):a.toggledTreeNode&&a.toggledTreeNode.selected&&d.set(a.toggledTreeNode.makeDefaultDiv,"display","")}));var l=-1;h.forEach(e.config.countryConfig,function(b,c){b.countryID==a&&(l=c)});-1!=l&&(e.config.countryConfig[l].allowAllEsriReports||h.forEach(k[0].children,
function(a){h.some(e.config.countryConfig[l].enabledEsriReports,function(b){return a.value===b})||(a.selected=!1)}),e.config.countryConfig[l].allowAllEsriInfographics||h.forEach(k[1].children.concat(k[2].children),function(a){h.some(e.config.countryConfig[l].enabledOrgReports,function(b){return a.value===b})||(a.selected=!1)}));e.reportsTreeGrid.tree.clear();e.reportsTreeGrid.tree.addNodes(k)})},_getClassicReportId:function(a){return a.value&&a.value.itemid?a.value.itemid:a.value},_getEnabledReports:function(a){var b=
[];h.forEach(a,function(a){a.selected&&(a.value&&a.value.itemid?b.push(a.value.itemid):b.push(a.value))});return b},_setRingDTWTConfig:function(){this.config.ringDefaults=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.config.driveTimeDefaults=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.config.walkTimeDefaults=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);
this.config.ringUnitDefault=this.ringsBufferUnits.get("value");this.config.driveTimeUnitDefault=this.driveTimeBufferUnits.get("value");this.config.walkTimeUnitDefault=this.walkTimeBufferUnits.get("value");this.config.ringDisabled=this.disabledRingsOption.checked;this.config.driveTimeDisabled=this.disabledDriveTimeOption.checked;this.config.walkTimeDisabled=this.disabledWalkTimeOption.checked;this.config.infographicsDisabled=this.disabledInfographicsOption.checked;this.config.reportsDisabled=this.disabledReportsOption.checked},
_loadRingDTWTConfig:function(){this._setRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.config.ringDefaults);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this.disabledRingsOption.setChecked(this.config.ringDisabled);this._setRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.config.driveTimeDefaults);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this.disabledDriveTimeOption.setChecked(this.config.driveTimeDisabled);
this._setRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.config.walkTimeDefaults);this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault);this.disabledWalkTimeOption.setChecked(this.config.walkTimeDisabled);this.disabledInfographicsOption.setChecked(this.config.infographicsDisabled);this.disabledReportsOption.setChecked(this.config.reportsDisabled)},_setInfographicExportOptions:function(){this.config.exportInfographicsPrintOption=this.exportPrintOption.checked;
this.config.exportInfographicsImageOption=this.exportImageOption.checked;this.config.exportInfographicsPDFOption=this.exportPDFOption.checked;this.config.exportInfographicsDynamicHTMLOption=this.exportDynamicHTMLOption.checked},_loadInfographicExportOptions:function(){this.exportPrintOption.setChecked(this.config.exportInfographicsPrintOption);this.exportImageOption.setChecked(this.config.exportInfographicsImageOption);this.exportPDFOption.setChecked(this.config.exportInfographicsPDFOption);this.exportDynamicHTMLOption.setChecked(this.config.exportInfographicsDynamicHTMLOption)},
_setFirstPageOptions:function(){this.config.searchTextBoxOption=this.searchTextBoxOption.checked;this.config.dropPinOption=this.dropPinOption.checked;this.config.drawPolygonOption=this.drawPolygonOption.checked;this.config.drawFreehandPolygonOption=this.drawFreehandPolygonOption.checked},_loadFirstPageOptions:function(){this.searchTextBoxOption.setChecked(this.config.searchTextBoxOption);this.dropPinOption.setChecked(this.config.dropPinOption);this.drawPolygonOption.setChecked(this.config.drawPolygonOption);
this.drawFreehandPolygonOption.setChecked(this.config.drawFreehandPolygonOption)},_getRadii:function(a,b,c){a=a.get("value");b=b.get("value");c=c.get("value");var d=[];""!=a&&d.push(a);""!=b&&d.push(b);""!=c&&d.push(c);return d},_setRadii:function(a,b,c,d){0<d.length?a.set("value",d[0]):a.set("value","");1<d.length?b.set("value",d[1]):b.set("value","");2<d.length?c.set("value",d[2]):c.set("value","")},_validateRingDTWT:function(){var a=!0,b=!0,c=!1,b=a=x.validateInvalidValues(this.ringsBufferRadii1,
this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid);a||(this.tab.selectTab(this.nls.rings),c=!0);a=x.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=x.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,
this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);if(!b)return b;tabChange=!1;b=a=x.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,x.MIN_RINGS_VALUE,x.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing);a||(this.tab.selectTab(this.nls.rings),c=!0);a=x.validateMinMaxValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,x.MIN_DTWT_VALUE,x.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,
this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=x.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,x.MIN_DTWT_VALUE,x.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);return b},initializeNewConfigValues:function(a){"undefined"===typeof a.exportInfographicsPrintOption&&(a.exportInfographicsPrintOption=!0);"undefined"===typeof a.exportInfographicsImageOption&&
(a.exportInfographicsImageOption=!0);"undefined"===typeof a.exportInfographicsPDFOption&&(a.exportInfographicsPDFOption=!0);"undefined"===typeof a.exportInfographicsDynamicHTMLOption&&(a.exportInfographicsDynamicHTMLOption=!0);"undefined"===typeof a.firstPageText&&(a.firstPageText=this.nls.defaultFirstPageText);"undefined"===typeof a.searchTextBoxOption&&(a.searchTextBoxOption=!0);"undefined"===typeof a.dropPinOption&&(a.dropPinOption=!0);"undefined"===typeof a.drawPolygonOption&&(a.drawPolygonOption=
!0);"undefined"===typeof a.drawFreehandPolygonOption&&(a.drawFreehandPolygonOption=!0)}})});