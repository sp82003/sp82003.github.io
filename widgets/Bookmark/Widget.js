// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Bookmark/HeadBar":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on ./a11y/HeadBar dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./HeadBar.html".split(" "),function(l,q,b,a,y,f,u,B,p,c){l=q([u,B,p,l],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer",templateString:c,nls:null,map:null,bookmarksContainer:null,layout:null,editingName:!1,initMapState:null,postMixInProperties:function(){this.nls=
b.mixin(this.nls,window.jimuNls.common)},startup:function(){this.inherited(arguments);this.refreshUI();this.a11y_initEvents();this.own(y(this.filterInput,"blur",b.hitch(this,this.onFilterChange)));this.own(y(this.filterInput,"keyUp",b.hitch(this,this.onFilterChange)))},refreshUI:function(){this.editable?(a.addClass(this.domNode,"editable"),a.removeClass(this.addBtn,"hide")):(a.removeClass(this.domNode,"editable"),a.addClass(this.addBtn,"hide"));this._toggleLayoutBtnDisplay(this.layout.defaultMode);
!1!==this.editable||!0===this.layout.list&&!0===this.layout.cards?a.removeClass(this.domNode,"hide"):a.addClass(this.domNode,"hide")},_toggleLayoutBtnDisplay:function(c){a.addClass(this.listBtn,"hide");a.addClass(this.cardsBtn,"hide");"list"===c?this.listMode():this.cardsMode();!0===this.layout.list&&!0===this.layout.cards?("list"===c?a.removeClass(this.cardsBtn,"hide"):a.removeClass(this.listBtn,"hide"),a.addClass(this.displayMode,"two-modes")):a.removeClass(this.displayMode,"two-modes")},cardsMode:function(){a.removeClass(this.bookmarksContainer,
"list");a.addClass(this.bookmarksContainer,"cards");a.addClass(this.domNode,"list");a.removeClass(this.domNode,"cards");this.emit("layout-cards")},listMode:function(){a.removeClass(this.bookmarksContainer,"cards");a.addClass(this.bookmarksContainer,"list");a.addClass(this.domNode,"cards");a.removeClass(this.domNode,"list");this.emit("layout-list")},addingBookmark:function(){this.emit("add")},onFilterChange:function(){var c=this.filterInput.getValue();this.emit("filter-change",c)},onFilterBlur:function(){var c=
this.filterInput.getValue();this.emit("filter-blur",c)}});l.extend(f);return l})},"widgets/Bookmark/a11y/HeadBar":function(){define(["dojo/_base/lang","dojo/on","dijit/a11yclick"],function(l,q,b){return{a11y_initEvents:function(){this.own(q(this.addBtn,b,l.hitch(this,function(){this.addingBookmark()})));this.own(q(this.cardsBtn,b,l.hitch(this,function(a){this._toggleLayoutBtnDisplay("cards");this._isKeyEvent(a)&&this.listBtn&&this.listBtn.focus()})));this.own(q(this.listBtn,b,l.hitch(this,function(a){this._toggleLayoutBtnDisplay("list");
this._isKeyEvent(a)&&this.cardsBtn&&this.cardsBtn.focus()})))},_isKeyEvent:function(a){return a&&a._origType?!0:!1}}})},"widgets/Bookmark/WebmapBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils libs/Sortable".split(" "),function(l,q,b,a,y,f,u,B,p,c,z){return q([B,p,l],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=a.create("div",{"class":"drawer-handle"},this.domNode);this.bookMarkerContainer=a.create("div",{"class":"webmap"},this.domNode)},startup:function(){this.inherited(arguments);this.config.syncMode&&(!1===this.config.syncMode.webmap&&!1===this.config.syncMode.custom?a.addClass(this.domNode,"hide"):a.removeClass(this.domNode,"hide"));this.sortableBookMarkerNodes=z.create(this.bookMarkerContainer,{sort:!1,disabled:!0,animation:100})},
refresh:function(){c.empty(this.bookmarks);this.bookmarks=[];this.config.syncMode&&!0===this.config.syncMode.webmap&&(this.bookmarks=c.readBookmarksInWebmap(this.map));var a=b.clone(this.config.bookmarks2D);y.forEach(a,function(c){c&&!0===this.config.syncMode.custom&&this.bookmarks.push(c)},this);c.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks)},_onBookmarkClick:function(a){require(["esri/geometry/Extent"],b.hitch(this,function(n){if(!1!==a.isSaveExtent){var h=a.extent;h.spatialReference?
new u(h.spatialReference):new u({wkid:4326});this.map.setExtent(new n(h))}c.layerInfosRestoreState(a.isSaveLayers,a.layerOptions)}))},filter:function(a){c.filter(a,this.bookmarks)},displayBookmarks:function(n){c.empty(n,this.bookMarkerContainer);y.forEach(n,function(a){if(a){var h={editBtn:!1,changeImgBtn:!0,layerInfosIcon:c.isWithLayerInfos(a)},h=c.createBookMarkNode(a,this.nls,this.folderUrl,h,{editBtn:!1,deleteBtn:!1,renameBtn:!1,changeImgBtn:!1});a.itemNode=h;this.own(f(h,"thumbnail-click",b.hitch(this,
b.partial(this._onBookmarkClick,a))))}},this);n.forEach(b.hitch(this,function(c){c&&c.itemNode&&c.itemNode.domNode&&a.place(c.itemNode.domNode,this.bookMarkerContainer,"last")}))}})})},"widgets/Bookmark/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html dojox/html/entities jimu/utils ./ItemNode libs/storejs/store jimu/LayerInfos/LayerInfos".split(" "),function(l,q,b,a,y,f,u,B){var p={_uID:0,getUID:function(){return p._uID++},findBookMark:function(c,a){var n=-1,b=null;q.some(a,
function(h,d){if(parseInt(h._uID,10)===parseInt(c._uID,10))return n=d,b=h,!0},this);return-1!==n?{bookmark:b,idx:n}:null},findBookMarkByUID:function(c,a){var n=-1,b=null;q.some(a,function(h,d){if(parseInt(h._uID,10)===parseInt(c,10))return n=d,b=h,!0},this);return-1!==n?{bookmark:b,idx:n}:null},findNextBookMarkByIdx:function(c,a){var n=null;c+1<=a.length-1&&(n=a[c+1]);return n},findBookMarkByNameAndExtent:function(c,a){var n=-1,b=null;q.some(a,function(h,d){if(h.name===c.name&&h.extent&&c.extent&&
h.extent.xmax===c.extent.xmax&&h.extent.xmin===c.extent.xmin&&h.extent.ymax===c.extent.ymax&&h.extent.ymin===c.extent.ymin)return n=d,b=h,!0},this);return-1!==n?{bookmark:b,idx:n}:null},isBookmarksDataEmpty:function(c){return Array.isArray(c)&&0===c.length?!0:!1},empty:function(c,a){var n=c;q.forEach(c,function(c){c&&c.itemNode&&c.itemNode.destroy()},this);c=[];c=n;a&&b.empty(a)},createBookMarkNode:function(c,a,n,b,h){n=c.thumbnail||"undefined"!==typeof c.thumbnail&&""!==c.thumbnail?y.processUrlInWidgetConfig(c.thumbnail,
n):y.processUrlInWidgetConfig("images/thumbnail_default.png",n);var d=p.getUID();c._uID=d;return new f({dataId:d,img:n,label:c.displayName||c.name,display:b,nls:a,a11y:h})},cloneBookmarksDataWithOutDom:function(c){var a=[];if("undefined"===typeof c)return a;c.forEach(l.hitch(this,function(c){c.itemNode&&c.itemNode.domNode&&(c=l.clone(c),delete c.itemNode,a.push(c))}));return a},readBookmarksInWebmap:function(c){var b=[];if(!c.itemInfo||!c.itemInfo.itemData||!c.itemInfo.itemData.bookmarks)return b;
q.forEach(c.itemInfo.itemData.bookmarks,function(c){c=l.mixin({},c);c.isInWebmap=!0;c.name=a.decode(c.name);b.push(c)},this);return b},filterBookmarkFromTarget:function(c,a){for(var b=[],f=0,h=c.length;f<h;f++){var d=c[f];p.findBookmarkByNameOrExtent(d,a)||b.push(d)}return b},findBookmarkByNameOrExtent:function(c,a){var b=-1,f=null;q.some(a,function(h,d){if((h.displayName||h.name)===(c.displayName||c.name)||h.extent&&c.extent&&h.extent.xmax===c.extent.xmax&&h.extent.xmin===c.extent.xmin&&h.extent.ymax===
c.extent.ymax&&h.extent.ymin===c.extent.ymin)return b=d,f=h,!0},this);return-1!==b?{bookmark:f,idx:b}:null},filter:function(c,a){a.forEach(function(a){"undefined"!==typeof c&&""!==c?-1!==(a.displayName||a.name).indexOf(c)?f.show(a):f.hide(a):f.show(a)})},getKeysKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"},getAutoRenameBeforeAdd:function(c,a,b){var f=0,h=new RegExp(/\((\d+)\){1}$/g);q.forEach(a,function(a){a&&"undefined"!==typeof a.name&&-1!==a.name.indexOf(c)&&("undefined"===
typeof b||!0===b&&c.length===a.name.length)&&(a=h.exec(a.displayName),null===a&&0===f?f=1:a&&"undefined"!==typeof a[1]&&a[1]>=f&&(f=parseInt(a[1],10)+1))});return 0===f?c:c+"("+f+")"},processDuplicateName:function(a){for(var c=[],b={},f=a.length-1;0<=f;f--){var h=a[f];if(!h||"undefined"===typeof h.name)return;var d=h.name;d in b?b[d]++:b[d]=0;if(0<b[d]){var t=d+"("+b[d]+")";t in b?(b[t]++,b[d]++):b[t]=0;h.displayName=0<b[t]?d+"("+b[d]+")":t;h._autoRename=!0}else h.displayName=d;c.push(h)}a=c},toogleCheckboxChecked:function(a){a&&
a.setValue&&a.setValue(!a.checked)},setCheckboxWithoutEvent:function(a,b){a&&a.check&&a.uncheck&&(!0===b?a.check(!0):a.uncheck(!0))},layerInfosRestoreState:function(a,b){var c=B.getInstanceSync(),f={};if(b&&a){for(var h in b)if(b.hasOwnProperty(h)){a=b[h];var d=!1,d="undefined"===typeof a.visible?a.selected:a.visible;f[h]={visible:d}}c.restoreState({layerOptions:f})}},getlayerInfos:function(){var a={},b=B.getInstanceSync();b&&b.traversal&&b.traversal(l.hitch(this,function(c){a[c.id]={visible:c.isVisible()}}));
return a},isWithLayerInfos:function(a){return a.layerOptions&&!1!==a.isSaveLayers?!0:!1},stringifyBookmarks:function(a){var c=[];q.forEach(a,function(a){a=l.mixin({},a);a.itemNode&&delete a.itemNode;c.push(a)},this);return c},parseBookmarks:function(a){return l.clone(a)},getKey:function(a){return"Bookmark.2D."+encodeURIComponent(y.getAppIdFromUrl())+"."+a},isConfigBefore5_3:function(a){return"undefined"===typeof a.syncMode||!0===a.needToUpdateFlag?!0:!1},getUpdateCacheKey:function(a){return"bookmark_cache_updated_"+
encodeURIComponent(p.getKey(a))},setUpdateCacheKey:function(a){u.set(p.getUpdateCacheKey(a),!0)},isCacheKeyUpdatedy:function(a){return u.get(p.getUpdateCacheKey(a))},setDefaultConfigForUpdate:function(a){a.needToUpdateFlag=!0;a.layout={cards:!0,list:!1,defaultMode:"cards"};a.editable=!0;Array.isArray(a.bookmarks2D)&&0<a.bookmarks2D.length?a.syncMode={webmap:!1,custom:!0}:a.syncMode={webmap:!0,custom:!0}},completeUpdateConfig:function(a){a.needToUpdateFlag&&delete a.needToUpdateFlag},updateBookmarks:function(a){for(var b=
0;b<a.length;b++)"undefined"===typeof a[b]&&(a.splice(b,1),b--);var c=/\/widgets\/Bookmark\/images\/thumbnail_default.png$/;q.forEach(a,function(a){"undefined"===typeof a.isSaveExtent&&(a.isSaveExtent=!0);a.thumbnail&&c.test(a.thumbnail)&&delete a.thumbnail},this)},getLayoutRecorderKey:function(){return"bookMarkLayout_"+encodeURIComponent(y.getAppIdFromUrl())},cleanLayoutRecorder:function(a){u.remove(p.getLayoutRecorderKey(a))},setLastLayout:function(a){u.set(p.getLayoutRecorderKey(),a)},getLastLayout:function(){return u.get(p.getLayoutRecorderKey())},
oldBookmarksBackup:'[{"displayName":"Greater Manchester or Greater Lincolnshire HAHAHAHA","name":"Greater Manchester or Greater Lincolnshire HAHAHAHA","extent":{"type":"extent","xmin":8997982.70263581,"ymin":2110475.6293307655,"xmax":14672667.682525788,"ymax":6024051.4775307495,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Peterborough and Cambridgeshire HEHEHEHEHEH","name":"Peterborough and Cambridgeshire HEHEHEHEHEH","extent":{"type":"extent","xmin":9055621.33977054,"ymin":445965.34674161975,"xmax":14730306.319660518,"ymax":4359541.194941604,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"mentougou biejing china","name":"mentougou biejing china","extent":{"type":"extent","xmin":9502343.119353313,"ymin":3151483.465165457,"xmax":15177028.09924329,"ymax":7065059.313365442,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","name":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u77ed\u4e2d\u6587","name":"\u77ed\u4e2d\u6587","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"short","name":"short","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587 English","name":"\u4e2d\u6587 English","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Underneath the icons","name":"Underneath the icons","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","name":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"eee RTL","name":"eee RTL","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false}]',
_testUpdateOldConfig:function(){return{bookmarks2D:[{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1"},{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1(1)"},{extent:{spatialReference:{wkid:102100},xmax:-3197863.7584074493,xmin:-1.3112899816301128E7,
ymax:1.1466459916526379E7,ymin:-4859686.568575533},name:"bm2",isInWebmap:!0,displayName:"bm2"},{extent:{spatialReference:{wkid:102100},xmax:-3767577.3201611056,xmin:-1.430429896767071E7,ymax:1.5120033300894285E7,ymin:-4622246.062418217},name:"Untitled",isInWebmap:!0,displayName:"Untitled"},{extent:{spatialReference:{wkid:102100},xmax:-4334684.982862408,xmin:-1.6556089386187213E7,ymax:1.6750523655935397E7,ymin:-5666212.383958025},name:"Untitled",isInWebmap:!0,displayName:"Untitled(1)"}],bookmarks3D:[],
flyTime:3E3}},_testSetOldCache:function(a){var b=[];q.forEach(a,function(a){var c="Bookmark.2D."+a.displayName;b.push(c);a=l.mixin({},a);a.itemNode&&delete a.itemNode;a._uID&&delete a._uID;try{u.set(c,a)}catch(h){alert("store error\x3d\x3d\x3e")}},this);u.set("Bookmark.2D",b)},_testSetOldCacheBookmark:function(){return JSON.parse('[{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8273877.24778316,"xmin":-14295892.084200885,"ymax":6466269.8495007465,"ymin":2983187.344602761},"name":"bm1","isInWebmap":true,"displayName":"bm1"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8004818.908219411,"xmin":-11015826.326428276,"ymax":5527011.645932751,"ymin":3785470.393483758},"name":"bm1","isInWebmap":true,"displayName":"bm1(1)"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-12874774.854323175,"xmin":-13627526.708875552,"ymax":4655629.523482032,"ymin":4220244.210369689},"name":"bm2","isInWebmap":true,"displayName":"bm2"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-11618761.605541585,"xmin":-14629769.023750449,"ymax":6691911.956998556,"ymin":4950370.704549563},"name":"bm3","isInWebmap":true,"displayName":"bm3"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-4317189.3003047705,"xmin":-16361218.973140221,"ymax":10449906.504800193,"ymin":3483741.495004222},"name":"bm4","isInWebmap":true,"displayName":"bm4"},{"name":"add-inRT-1","displayName":"add-inRT-1","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}},{"name":"add-inRT-2","displayName":"add-inRT-2","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}}]')}};
return p})},"widgets/Bookmark/ItemNode":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/a11yclick jimu/BaseWidget dijit/_WidgetsInTemplateMixin ./a11y/ItemNode dojo/on dojo/query jimu/utils dojo/text!./ItemNode.html dojo/mouse dijit/form/ValidationTextBox".split(" "),function(l,q,b,a,y,f,u,B,p,c,z,n){var m={},m=q([f,u,l],{templateString:n,isSelected:!1,postMixInProperties:function(){this.nls=b.mixin(this.nls,window.jimuNls.common)},postCreate:function(){a.setAttr(this.domNode,
"data-id",z.sanitizeHTML(this.dataId));this.img&&a.setAttr(this.thumbnail,"src",this.img);this.nls&&(a.setAttr(this.deleteBtn,"title",this.nls.deleteBtnTip),a.setAttr(this.editBtn,"title",this.nls.editBtnTip),a.setAttr(this.changeImgBtn,"title",this.nls.changeThumbnailTip),a.setAttr(this.renameBtn,"title",this.nls.editBtnTip),a.setAttr(this.thumbnail,"title",this.nls.dragReorderTip),a.setAttr(this.layerInfosIcon,"title",this.nls.withVisibility));this.display&&(!1===this.display.selectedBtn&&a.addClass(this.selectedBtn,
"hide"),!1===this.display.editBtn&&a.addClass(this.editBtn,"hide"),!1===this.display.deleteBtn&&a.addClass(this.deleteBtn,"hide"),!1===this.display.renameBtn&&a.addClass(this.renameBtn,"hide"),!0===this.display.selectedBtn&&a.removeClass(this.selectedBtn,"hide"),!0===this.display.changeImgBtn&&a.removeClass(this.changeImgBtn,"hide"),!0===this.display.layerInfosIcon&&(a.removeClass(this.layerInfosIcon,"hide"),a.addClass(this.nodeBox,"with-layer-visibility")));this.a11y_display();this.nodeLabel.setValue(this.label);
this._updateLabelTooltips(this.label);this.own(p(this.selectedBtn,y,b.hitch(this,this.onSelected)));this.own(p(this.deleteBtn,y,b.hitch(this,this.onDelete)));this.own(p(this.editBtn,y,b.hitch(this,this.onEdit)));this.own(p(this.changeImgBtn,y,b.hitch(this,this.onChangeImg)));this.own(p(this.renameBtn,y,b.hitch(this,this.onRenameClick)));this.own(p(this.nodeBox,y,b.hitch(this,this.onNodeBoxClick)));this.own(p(this.dragMasker,"click",b.hitch(this,this.onNodeBoxClick)));!0===this.display.enableEditLabel?
(this.own(p(this.nodeLabel,y,b.hitch(this,this.onLabelClick))),this.own(p(this.nodeLabel,"change",b.hitch(this,this.onLabelChange))),this.own(p(this.nodeLabel,"blur",b.hitch(this,this.onLabelBlur)))):this.nodeLabel.setDisabled(!0);this.own(p(this.nodeLabel,"contextmenu",b.hitch(this,function(a){a.preventDefault()})));this.own(p(this.nodeBox,"contextmenu",b.hitch(this,function(a){a.preventDefault()})));this.a11y_initEvents()},onClick:function(){c(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
c(this.domNode).addClass("jimu-state-selected");this.emit("click")},onNodeBoxClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("thumbnail-click")},onLabelClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("label-click")},onLabelChange:function(a){this._updateLabelTooltips(a)},onLabelBlur:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());a=
this.nodeLabel.get("value");this._updateLabelTooltips(a);this.emit("label-blur")},onSelected:function(b){b&&b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault());a.hasClass(this.domNode,"selected")?(a.removeClass(this.domNode,"selected"),this.isSelected=!1,!1!==b&&this.emit("unselected")):(a.addClass(this.domNode,"selected"),this.isSelected=!0,!1!==b&&this.emit("selected"))},onDelete:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());
this.emit("delete")},onEdit:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("edit")},onChangeImg:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("change-img")},changeImg:function(b){a.setAttr(this.thumbnail,"src",b)},onRenameClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("rename")},highLight:function(){c(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
c(this.domNode).addClass("jimu-state-selected")},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments);a.destroy(this.domNode)},_updateLabelTooltips:function(b){b&&(a.setAttr(this.nodeLabel,"title",b),this.dragMasker&&a.setAttr(this.dragMasker,"title",b),this.a11y_updateItemLabel(b))}});m.addFloatLeading=function(b){b.itemNode&&b.itemNode.domNode&&(c(".selected-btn",b.itemNode.domNode).forEach(function(b){a.addClass(b,"jimu-float-leading")}),c(".node-box",b.itemNode.domNode).forEach(function(b){a.addClass(b,
"jimu-float-leading")}),c(".node-label",b.itemNode.domNode).forEach(function(b){a.addClass(b,"jimu-float-leading")}),c(".close-btn",b.itemNode.domNode).forEach(function(b){a.addClass(b,"jimu-float-leading")}))};m.removeFloatLeading=function(b){b.itemNode&&b.itemNode.domNode&&(c(".selected-btn",b.itemNode.domNode).forEach(function(b){a.removeClass(b,"jimu-float-leading")}),c(".node-box",b.itemNode.domNode).forEach(function(b){a.removeClass(b,"jimu-float-leading")}),c(".node-label",b.itemNode.domNode).forEach(function(b){a.removeClass(b,
"jimu-float-leading")}),c(".close-btn",b.itemNode.domNode).forEach(function(b){a.removeClass(b,"jimu-float-leading")}))};m.toggleEditable=function(a){a.itemNode&&a.itemNode.nodeLabel&&(a.itemNode.nodeLabel.disabled?m.enableEditable(a):m.disableEditable(a))};m.disableEditable=function(){};m.enableEditable=function(){};m.focusLabel=function(b){b.itemNode&&b.itemNode.nodeLabel&&(b.itemNode.nodeLabel.focus(),b.itemNode.domNode&&a.addClass(b.itemNode.domNode,"a11y_hover"))};m.focusItem=function(a){a&&
a.itemNode&&a.itemNode.domNode&&a.itemNode.domNode.focus()};m.unSelected=function(b){b.itemNode&&b.itemNode&&(b=b.itemNode,a.removeClass(b.domNode,"selected"),b.isSelected=!1)};m.show=function(b){b&&b.itemNode&&(b=b.itemNode,a.removeClass(b.domNode,"hide"),b.isShow=!0)};m.hide=function(b){b&&b.itemNode&&(b=b.itemNode,a.addClass(b.domNode,"hide"),b.isShow=!1)};m.extend(B);return m})},"widgets/Bookmark/a11y/ItemNode":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","dojo/keys"],function(l,
q,b,a){return{a11y_removeTabindex:function(a){b.removeAttr(a,"tabindex")},a11y_setTabindex:function(a,f){b.setAttr(a,"tabindex",f||0)},a11y_display:function(){this.a11y&&(!1===this.a11y.selectedBtn&&this.a11y_removeTabindex(this.selectedBtn),!1===this.a11y.editBtn&&this.a11y_removeTabindex(this.editBtn),!1===this.a11y.deleteBtn&&this.a11y_removeTabindex(this.deleteBtn),!1===this.a11y.renameBtn&&this.a11y_removeTabindex(this.renameBtn),!1===this.a11y.changeImgBtn&&this.a11y_removeTabindex(this.changeImgBtn))},
a11y_updateItemLabel:function(a){b.setAttr(this.domNode,"aria-label",a)},a11y_initEvents:function(){this.own(q(this.domNode,"keydown",l.hitch(this,function(l){var f=b.hasClass(l.target,"jimu-img-node");if(l.keyCode===a.ENTER&&f)this.onNodeBoxClick();this.a11y_checkFocus()})));this.own(q(this.domNode,"mouseout",l.hitch(this,function(){b.removeClass(this.domNode,"a11y_hover")})));this.own(q(this.domNode,"focus",l.hitch(this,function(){b.addClass(this.domNode,"a11y_hover")})))},a11y_focusToLabel:function(a){setTimeout(function(){a.focus()},
0)},a11y_focusToBtns:function(a){setTimeout(function(){a.focus()},0)},a11y_checkFocus:function(){setTimeout(l.hitch(this,function(){b.isDescendant(document.activeElement,this.domNode)||b.removeClass(this.domNode,"a11y_hover")}),50)}}})},"libs/Sortable":function(){!function(l){"function"==typeof define&&define.amd?define(l):"undefined"!=typeof module&&void 0!==module.exports?module.exports=l():window.Sortable=l()}(function(){function l(e,a){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+
{}.toString.call(e);this.el=e;this.options=a=fa({},a);e[O]=this;var k={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ma(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,
easing:null,setData:function(e,a){e.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:I(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==l.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5},d;for(d in k)d in a||(a[d]=k[d]);for(var c in Na(a),this)"_"===
c.charAt(0)&&"function"==typeof this[c]&&(this[c]=this[c].bind(this));(this.nativeDraggable=!a.forceFallback&&bb)&&(this.options.touchStartThreshold=1);a.supportPointer?b(e,"pointerdown",this._onTapStart):(b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart));this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this));Q.push(this.el);a.store&&a.store.get&&this.sort(a.store.get(this)||[])}function q(e,a,b,d){if(e){b=b||r;do{if(null!=a&&("\x3e"===a[0]&&e.parentNode===b&&G(e,a.substring(1))||
G(e,a))||d&&e===b)return e;if(e===b)break}while(e=(k=e).host&&k!==r&&k.host.nodeType?k.host:k.parentNode)}var k;return null}function b(e,a,b){e.addEventListener(a,b,Oa)}function a(e,a,b){e.removeEventListener(a,b,Oa)}function y(e,a,b){if(e&&a)if(e.classList)e.classList[b?"add":"remove"](a);else{var k=(" "+e.className+" ").replace(Pa," ").replace(" "+a+" "," ");e.className=(k+(b?" "+a:"")).replace(Pa," ")}}function f(e,a,b){var k=e&&e.style;if(k){if(void 0===b)return r.defaultView&&r.defaultView.getComputedStyle?
b=r.defaultView.getComputedStyle(e,""):e.currentStyle&&(b=e.currentStyle),void 0===a?b:b[a];a in k||-1!==a.indexOf("webkit")||(a="-webkit-"+a);k[a]=b+("string"==typeof b?"":"px")}}function u(e){var a="";do{var b=f(e,"transform");b&&"none"!==b&&(a=b+" "+a)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(a):window.WebKitCSSMatrix?new WebKitCSSMatrix(a):window.CSSMatrix?new CSSMatrix(a):void 0}function B(e,a,b){if(e){e=e.getElementsByTagName(a);a=0;var k=e.length;if(b)for(;a<k;a++)b(e[a],
a);return e}return[]}function p(e,a,b,d,c,f,g,t,cb){var k,A=(e=e||a[O]).options,ma="on"+b.charAt(0).toUpperCase()+b.substr(1);!window.CustomEvent||U||X?(k=r.createEvent("Event")).initEvent(b,!0,!0):k=new CustomEvent(b,{bubbles:!0,cancelable:!0});k.to=c||a;k.from=f||a;k.item=d||a;k.clone=v;k.oldIndex=g;k.newIndex=t;k.originalEvent=cb;k.pullMode=P?P.lastPutMode:void 0;a&&a.dispatchEvent(k);A[ma]&&A[ma].call(e,k)}function c(a,b,A,d,c,f,g,t){var e,k,ma=a[O],W=ma.options.onMove;return!window.CustomEvent||
U||X?(e=r.createEvent("Event")).initEvent("move",!0,!0):e=new CustomEvent("move",{bubbles:!0,cancelable:!0}),e.to=b,e.from=a,e.dragged=A,e.draggedRect=d,e.related=c||b,e.relatedRect=f||D(b),e.willInsertAfter=t,e.originalEvent=g,a.dispatchEvent(e),W&&(k=W.call(ma,e,g)),k}function z(e){e.draggable=!1}function n(){ya=!1}function m(e,a,b){for(var k=0,A=0,d=e.children;A<d.length;){if("none"!==d[A].style.display&&d[A]!==x&&d[A]!==g&&q(d[A],b.draggable,e,!1)){if(k===a)return d[A];k++}A++}return null}function h(e){for(e=
e.lastElementChild;e&&(e===x||"none"===e.style.display);)e=e.previousElementSibling;return e||null}function d(e){return M(g)<M(e)?1:-1}function t(e){e=e.tagName+e.className+e.src+e.href+e.textContent;for(var a=e.length,b=0;a--;)b+=e.charCodeAt(a);return b.toString(36)}function M(a,b){b=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&a!==v&&b++;return b}function G(a,b){if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(A){}return!1}function R(a,b){return function(){if(!da){var e=arguments,k=this;da=ja(function(){1===e.length?a.call(k,e[0]):a.apply(k,e);da=void 0},b)}}}function fa(a,b){if(a&&b)for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a}function Qa(a){return za&&za.dom?za.dom(a).cloneNode(!0):Ra?Ra(a).clone(!0)[0]:a.cloneNode(!0)}function Y(a){return ja(a,0)}function D(a,b,d,c){if(a.getBoundingClientRect||a===K){var e,k,A,g,t,W,l;if(l=
a!==K&&a!==L()?(k=(e=a.getBoundingClientRect()).top,A=e.left,g=e.bottom,t=e.right,W=e.height,e.width):(A=k=0,g=window.innerHeight,t=window.innerWidth,W=window.innerHeight,window.innerWidth),c&&a!==K&&(d=d||a.parentNode,!U)){do if(d&&d.getBoundingClientRect&&"none"!==f(d,"transform")){g=d.getBoundingClientRect();k-=g.top+I(f(d,"border-top-width"));A-=g.left+I(f(d,"border-left-width"));g=k+e.height;t=A+e.width;break}while(d=d.parentNode)}b&&a!==K&&(b=(a=u(d||a))&&a.a,d=a&&a.d,a&&(g=(k/=d)+(W/=d),t=
(A/=b)+(l/=b)));return{top:k,left:A,bottom:g,right:t,width:l,height:W}}}function Sa(a,b){var e=N(a,!0);for(a=D(a)[b];e;){var k=D(e)[b];if(!("top"===b||"left"===b?k<=a:a<=k))return e;if(e===L())break;e=N(e,!1)}return!1}function Ta(a){var e=0,b=0,d=L();if(a){do var c=u(a),g=c.d,e=e+a.scrollLeft*c.a,b=b+a.scrollTop*g;while(a!==d&&(a=a.parentNode))}return[e,b]}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var g,H,x,v,w,
ga,Aa,Z,Ba,Ca,S,E,qa,P,aa,Da,Ea,ea,J,ra,ka,na,oa,sa,C,la,F=[],Fa=!1,ba=!1,ta=!1,Q=[],pa=!1,ua=!1,Ga=[],Pa=/\s+/g,O="Sortable"+(new Date).getTime(),K=window,r=K.document,I=K.parseInt,ja=K.setTimeout,Ra=K.jQuery||K.Zepto,za=K.Polymer,Oa={capture:!1,passive:!1},U=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),X=!!navigator.userAgent.match(/Edge/i),Ua=!!navigator.userAgent.match(/firefox/i),Ha=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),
va=!!navigator.userAgent.match(/iP(ad|od|hone)/i),Va=X||U?"cssFloat":"float",bb="draggable"in r.createElement("div"),Ia=function(){if(U)return!1;var a=r.createElement("x");return a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents}(),ya=!1,Ja=!1,ca=Math.abs,db=Math.min,eb=Math.max,wa=[],Ma=function(a,b){var e=f(a),d=I(e.width)-I(e.paddingLeft)-I(e.paddingRight)-I(e.borderLeftWidth)-I(e.borderRightWidth),k=m(a,0,b);a=m(a,1,b);var c=k&&f(k);b=a&&f(a);var g=c&&I(c.marginLeft)+I(c.marginRight)+
D(k).width,t=b&&I(b.marginLeft)+I(b.marginRight)+D(a).width;return"flex"===e.display?"column"===e.flexDirection||"column-reverse"===e.flexDirection?"vertical":"horizontal":"grid"===e.display?1>=e.gridTemplateColumns.split(" ").length?"vertical":"horizontal":k&&"none"!==c.float?(e="left"===c.float?"left":"right",!a||"both"!==b.clear&&b.clear!==e?"horizontal":"vertical"):k&&("block"===c.display||"flex"===c.display||"table"===c.display||"grid"===c.display||d<=g&&"none"===e[Va]||a&&"none"===e[Va]&&d<
g+t)?"vertical":"horizontal"},N=function(a,b){if(!a||!a.getBoundingClientRect)return L();var e=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var k=f(a);if(a.clientWidth<a.scrollWidth&&("auto"==k.overflowX||"scroll"==k.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==k.overflowY||"scroll"==k.overflowY)){if(!a||!a.getBoundingClientRect||a===r.body)break;if(e||b)return a;e=!0}}while(a=a.parentNode);return L()},L=function(){return U?r.documentElement:r.scrollingElement},Wa=function(a,
b,d){a.scrollLeft+=b;a.scrollTop+=d},Ka=R(function(a,b,d,c){if(b.scroll){var e=d?d[O]:window,k=b.scrollSensitivity,g=b.scrollSpeed,A=a.clientX,t=a.clientY,W=L(),M=!1;Ba!==d&&(xa(),Z=b.scroll,Ca=b.scrollFn,!0===Z&&(Z=N(d,!0),Ba=Z));d=0;var h=Z;do{var q,r,p,n,w,y,x,u,m,v=h,z=D(v);w=z.top;var G=z.bottom;n=z.left;var C=z.right,H=z.width,z=z.height;if(q=v.scrollWidth,r=v.scrollHeight,p=f(v),u=v.scrollLeft,m=v.scrollTop,x=v===W?(y=H<q&&("auto"===p.overflowX||"scroll"===p.overflowX||"visible"===p.overflowX),
z<r&&("auto"===p.overflowY||"scroll"===p.overflowY||"visible"===p.overflowY)):(y=H<q&&("auto"===p.overflowX||"scroll"===p.overflowX),z<r&&("auto"===p.overflowY||"scroll"===p.overflowY)),n=y&&(ca(C-A)<=k&&u+H<q)-(ca(n-A)<=k&&!!u),w=x&&(ca(G-t)<=k&&m+z<r)-(ca(w-t)<=k&&!!m),!F[d])for(G=0;G<=d;G++)F[G]||(F[G]={});F[d].vx==n&&F[d].vy==w&&F[d].el===v||(F[d].el=v,F[d].vx=n,F[d].vy=w,clearInterval(F[d].pid),!v||0==n&&0==w||(M=!0,F[d].pid=setInterval(function(){c&&0===this.layer&&(l.active._emulateDragOver(!0),
l.active._onTouchMove(J,!0));var b=F[this.layer].vy?F[this.layer].vy*g:0,d=F[this.layer].vx?F[this.layer].vx*g:0;"function"==typeof Ca&&"continue"!==Ca.call(e,d,b,a,J,F[this.layer].el)||Wa(F[this.layer].el,d,b)}.bind({layer:d}),24)));d++}while(b.bubbleScroll&&h!==W&&(h=N(h,!1)));Fa=M}},30),xa=function(){F.forEach(function(a){clearInterval(a.pid)});F=[]},Na=function(a){function e(a,b){return function(d,k,c,g){var f=d.options.group.name&&k.options.group.name&&d.options.group.name===k.options.group.name;
if(null==a&&(b||f))return!0;if(null==a||!1===a)return!1;if(b&&"clone"===a)return a;if("function"==typeof a)return e(a(d,k,c,g),b)(d,k,c,g);d=(b?d:k).options.group.name;return!0===a||"string"==typeof a&&a===d||a.join&&-1<a.indexOf(d)}}var b={},d=a.group;d&&"object"==typeof d||(d={name:d});b.name=d.name;b.checkPull=e(d.pull,!0);b.checkPut=e(d.put);b.revertClone=d.revertClone;a.group=b},Xa=function(a){g&&g.parentNode&&g.parentNode[O]&&g.parentNode[O]._computeIsAligned(a)},Ya=function(a,b){for(;!b[O];)b=
b.parentNode;return a===b},Za=function(a,b,d){for(a=a.parentNode;a&&!a[O];)a=a.parentNode;a&&a[O][d](fa(b,{artificialBubble:!0}))},$a=function(){!Ia&&x&&f(x,"display","none")},ab=function(){!Ia&&x&&f(x,"display","")};r.addEventListener("click",function(a){if(ta)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),ta=!1},!0);var da,La=function(a){if(a=a.touches?a.touches[0]:a,g){var b;a:{b=a.clientX;for(var e=a.clientY,d=0;d<Q.length;d++)if(!h(Q[d])){var c=
D(Q[d]),f=Q[d][O].options.emptyInsertThreshold,t=e>=c.top-f&&e<=c.bottom+f;if(b>=c.left-f&&b<=c.right+f&&t){b=Q[d];break a}}b=void 0}b&&b[O]._onDragOver({clientX:a.clientX,clientY:a.clientY,target:b,rootEl:b})}};return b(r,"dragover",La),b(r,"mousemove",La),b(r,"touchmove",La),l.prototype={constructor:l,_computeIsAligned:function(a){var b;if(x&&!Ia?($a(),b=r.elementFromPoint(a.clientX,a.clientY),ab()):b=a.target,b=q(b,this.options.draggable,this.el,!1),!Ja&&g&&g.parentNode===this.el){for(var e,d,
c,f,t,l,M,h,p=this.el.children,n=0;n<p.length;n++)q(p[n],this.options.draggable,this.el,!1)&&p[n]!==b&&(p[n].sortableMouseAligned=(e=a.clientX,d=a.clientY,c=p[n],f=this._getDirection(a,null),this.options,void 0,t=D(c),l="vertical"===f?t.left:t.top,M="vertical"===f?t.right:t.bottom,l<(h="vertical"===f?e:d)&&h<M));q(b,this.options.draggable,this.el,!0)||(ka=null);Ja=!0;ja(function(){Ja=!1},30)}},_getDirection:function(a,b){return"function"==typeof this.options.direction?this.options.direction.call(this,
a,b,g):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b,e=this,d=this.el,c=this.options,f=c.preventOnFilter,t=a.type,l=a.touches&&a.touches[0],h=(l||a).target,n=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,r=c.filter;if(function(a){wa.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var e=a[b];e.checked&&wa.push(e)}}(d),!(U&&!a.artificialBubble&&!Ya(d,h)||g||/mousedown|pointerdown/.test(t)&&0!==a.button||c.disabled||n.isContentEditable))if(h=
q(h,c.draggable,d,!1)){if(Aa!==h){if(b=M(h,c.draggable),"function"==typeof r){if(r.call(this,a,h,this))return p(e,n,"filter",h,d,d,b),void(f&&a.cancelable&&a.preventDefault())}else if(r&&(r=r.split(",").some(function(a){if(a=q(n,a.trim(),d,!1))return p(e,a,"filter",h,d,d,b),!0})))return void(f&&a.cancelable&&a.preventDefault());c.handle&&!q(n,c.handle,d,!1)||this._prepareDragStart(a,l,h,b)}}else U&&Za(d,a,"_onTapStart")}},_handleAutoScroll:function(a,b){if(g&&this.options.scroll){var e=a.clientX,
d=a.clientY,c=r.elementFromPoint(e,d),k=this;if(b||X||U||Ha){Ka(a,k.options,c,b);var f=N(c,!0);!Fa||aa&&e===Da&&d===Ea||(aa&&clearInterval(aa),aa=setInterval(function(){if(g){var c=N(r.elementFromPoint(e,d),!0);c!==f&&(f=c,xa(),Ka(a,k.options,f,b))}},10),Da=e,Ea=d)}else{if(!k.options.bubbleScroll||N(c,!0)===L())return void xa();Ka(a,k.options,N(c,!1),!1)}}},_prepareDragStart:function(a,d,c,f){var e,k=this,t=k.el,A=k.options,h=t.ownerDocument;c&&!g&&c.parentNode===t&&(w=t,H=(g=c).parentNode,ga=g.nextSibling,
Aa=c,qa=A.group,S=f,ea={target:g,clientX:(d||a).clientX,clientY:(d||a).clientY},this._lastX=(d||a).clientX,this._lastY=(d||a).clientY,g.style["will-change"]="all",g.style.transition="",g.style.transform="",e=function(){k._disableDelayedDragEvents();!Ua&&k.nativeDraggable&&(g.draggable=!0);k._triggerDragStart(a,d);p(k,w,"choose",g,w,w,S);y(g,A.chosenClass,!0)},A.ignore.split(",").forEach(function(a){B(g,a.trim(),z)}),A.supportPointer?b(h,"pointerup",k._onDrop):(b(h,"mouseup",k._onDrop),b(h,"touchend",
k._onDrop),b(h,"touchcancel",k._onDrop)),Ua&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),!A.delay||this.nativeDraggable&&(X||U)?e():(b(h,"mouseup",k._disableDelayedDrag),b(h,"touchend",k._disableDelayedDrag),b(h,"touchcancel",k._disableDelayedDrag),b(h,"mousemove",k._delayedDragTouchMoveHandler),b(h,"touchmove",k._delayedDragTouchMoveHandler),A.supportPointer&&b(h,"pointermove",k._delayedDragTouchMoveHandler),k._dragStartTimer=ja(e,A.delay)))},_delayedDragTouchMoveHandler:function(a){a=
a.touches?a.touches[0]:a;eb(ca(a.clientX-this._lastX),ca(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&z(g);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var b=this.el.ownerDocument;a(b,"mouseup",this._disableDelayedDrag);a(b,"touchend",this._disableDelayedDrag);a(b,"touchcancel",this._disableDelayedDrag);
a(b,"mousemove",this._delayedDragTouchMoveHandler);a(b,"touchmove",this._delayedDragTouchMoveHandler);a(b,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,d){d=d||("touch"==a.pointerType?a:null);!this.nativeDraggable||d?this.options.supportPointer?b(r,"pointermove",this._onTouchMove):b(r,d?"touchmove":"mousemove",this._onTouchMove):(b(g,"dragend",this),b(w,"dragstart",this._onDragStart));try{r.selection?Y(function(){r.selection.empty()}):window.getSelection().removeAllRanges()}catch(A){}},
_dragStarted:function(a,d){if(ba=!1,w&&g){this.nativeDraggable&&(b(r,"dragover",this._handleAutoScroll),b(r,"dragover",Xa));var e=this.options;!a&&y(g,e.dragClass,!1);y(g,e.ghostClass,!0);f(g,"transform","");l.active=this;a&&this._appendGhost();p(this,w,"start",g,w,w,S,void 0,d)}else this._nulling()},_emulateDragOver:function(a){if(J&&(this._lastX!==J.clientX||this._lastY!==J.clientY||a)){this._lastX=J.clientX;this._lastY=J.clientY;$a();for(var b=a=r.elementFromPoint(J.clientX,J.clientY);a&&a.shadowRoot;)b=
a=a.shadowRoot.elementFromPoint(J.clientX,J.clientY);if(b){do{if(b[O]&&b[O]._onDragOver({clientX:J.clientX,clientY:J.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}g.parentNode[O]._computeIsAligned(J);ab()}},_onTouchMove:function(a,b){if(ea){var e=this.options,d=e.fallbackTolerance,c=e.fallbackOffset,e=a.touches?a.touches[0]:a,k=x&&u(x),g=x&&k&&k.a,k=x&&k&&k.d,t=va&&C&&Ta(C),g=(e.clientX-ea.clientX+c.x)/(g||1)+(t?t[0]-Ga[0]:0)/(g||1),c=(e.clientY-ea.clientY+
c.y)/(k||1)+(t?t[1]-Ga[1]:0)/(k||1),c=a.touches?"translate3d("+g+"px,"+c+"px,0)":"translate("+g+"px,"+c+"px)";if(!l.active&&!ba){if(d&&db(ca(e.clientX-this._lastX),ca(e.clientY-this._lastY))<d)return;this._onDragStart(a,!0)}!b&&this._handleAutoScroll(e,!0);ra=!0;J=e;f(x,"webkitTransform",c);f(x,"mozTransform",c);f(x,"msTransform",c);f(x,"transform",c);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!x){var a=this.options.fallbackOnBody?r.body:w,b=D(g,!0,a,!va),d=(f(g),this.options);
if(va){for(C=a;"static"===f(C,"position")&&"none"===f(C,"transform")&&C!==r;)C=C.parentNode;if(C!==r){var c=D(C,!0);b.top-=c.top;b.left-=c.left}C!==r.body&&C!==r.documentElement?(C===r&&(C=L()),b.top+=C.scrollTop,b.left+=C.scrollLeft):C=L();Ga=Ta(C)}y(x=g.cloneNode(!0),d.ghostClass,!1);y(x,d.fallbackClass,!0);y(x,d.dragClass,!0);f(x,"box-sizing","border-box");f(x,"margin",0);f(x,"top",b.top);f(x,"left",b.left);f(x,"width",b.width);f(x,"height",b.height);f(x,"opacity","0.8");f(x,"position",va?"absolute":
"fixed");f(x,"zIndex","100000");f(x,"pointerEvents","none");a.appendChild(x)}},_onDragStart:function(e,d){var c=this,k=e.dataTransfer,t=c.options;(v=Qa(g)).draggable=!1;v.style["will-change"]="";this._hideClone();y(v,c.options.chosenClass,!1);c._cloneId=Y(function(){c.options.removeCloneOnHide||w.insertBefore(v,g);p(c,w,"clone",g)});!d&&y(g,t.dragClass,!0);d?(ta=!0,c._loopId=setInterval(c._emulateDragOver,50)):(a(r,"mouseup",c._onDrop),a(r,"touchend",c._onDrop),a(r,"touchcancel",c._onDrop),k&&(k.effectAllowed=
"move",t.setData&&t.setData.call(c,k,g)),b(r,"drop",c),f(g,"transform","translateZ(0)"));ba=!0;c._dragStartId=Y(c._dragStarted.bind(c,d,e));b(r,"selectstart",c);Ha&&f(r.body,"user-select","none")},_onDragOver:function(a){function b(b){return b&&(C?G._hideClone():G._showClone(B),G&&(y(g,P?P.options.ghostClass:G.options.ghostClass,!1),y(g,v.ghostClass,!0)),P!==B&&B!==l.active?P=B:B===l.active&&(P=null),f&&B._animate(f,g),m&&t&&B._animate(t,m)),(m===g&&!g.animated||m===u&&!m.animated)&&(ka=null),v.dragoverBubble||
a.rootEl||m===r||(B._handleAutoScroll(a),g.parentNode[O]._computeIsAligned(a)),!v.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),!0}function e(){p(B,w,"change",m,u,w,S,M(g,v.draggable),a)}var f,t,x,u=this.el,m=a.target,v=this.options,z=v.group,G=l.active,C=qa===z,F=v.sort,B=this;if(!ya&&(!U||a.rootEl||a.artificialBubble||Ya(u,m))){if(void 0!==a.preventDefault&&a.cancelable&&a.preventDefault(),ra=!0,m=q(m,v.draggable,u,!0),q(a.target,null,g,!0)||m.animated)return b(!1);if(m!==g&&(ta=!1),G&&
!v.disabled&&(C?F||(x=!w.contains(g)):P===this||(this.lastPutMode=qa.checkPull(this,G,g,a))&&z.checkPut(this,G,g,a))){z=this._getDirection(a,m);if(f=D(g),x)return this._hideClone(),H=w,ga?w.insertBefore(g,ga):w.appendChild(g),b(!0);if((x=h(u))&&(K=a,T=z,L=D(h(u)),R="vertical"===T?K.clientY:K.clientX,E="vertical"===T?K.clientX:K.clientY,I="vertical"===T?L.bottom:L.right,ba="vertical"===T?L.left:L.top,Y="vertical"===T?L.right:L.bottom,!("vertical"===T?Y+10<E||E<=Y&&I<R&&ba<=E:I<R&&ba<E||R<=I&&Y+10<
E)||x.animated)){if(m&&m!==g&&m.parentNode===u){var J,R=0,E=m.sortableMouseAligned,I=g.parentNode!==u,K="vertical"===z?"top":"left",L=(T=Sa(m,"top")||Sa(g,"top"))?T.scrollTop:void 0;if(ka!==m&&(oa=null,J=D(m)[K],pa=!1),N=m,V=z,ha=(Q=g)===g&&la||D(Q),ia=N===g&&la||D(N),fa="vertical"===V?ha.left:ha.top,Z="vertical"===V?ha.right:ha.bottom,aa="vertical"===V?ha.width:ha.height,X="vertical"===V?ia.left:ia.top,da="vertical"===V?ia.right:ia.bottom,ea="vertical"===V?ia.width:ia.height,oa=(fa===X||Z===da||
fa+aa/2===X+ea/2)&&E||I||T||v.invertSwap||"insert"===oa||"swap"===oa?("swap"!==oa&&(ua=v.invertSwap||I),R=function(a,b,e,c,k,f,t){var h=D(b);a="vertical"===e?a.clientY:a.clientX;var l="vertical"===e?h.height:h.width,m="vertical"===e?h.top:h.left,h="vertical"===e?h.bottom:h.right,M=D(g),n=!1;if(!f)if(t&&sa<l*c)if(!pa&&(1===na?m+l*k/2<a:a<h-l*k/2)&&(pa=!0),pa)n=!0;else{if("vertical"===e?M.top:M.left,"vertical"===e?M.bottom:M.right,1===na?a<m+sa:h-sa<a)return-1*na}else if(m+l*(1-c)/2<a&&a<h-l*(1-c)/
2)return d(b);return(n=n||f)&&(a<m+l*k/2||h-l*k/2<a)?m+l/2<a?1:-1:0}(a,m,z,v.swapThreshold,null==v.invertedSwapThreshold?v.swapThreshold:v.invertedSwapThreshold,ua,ka===m),"swap"):(R=d(m),"insert"),0===R)return b(!1);la=null;na=R;t=D(ka=m);Q=m.nextElementSibling;N=!1;V=c(w,u,g,f,m,t,a,N=1===R);if(!1!==V)return 1!==V&&-1!==V||(N=1===V),ya=!0,ja(n,30),C?G._hideClone():G._showClone(this),N&&!Q?u.appendChild(g):m.parentNode.insertBefore(g,N?Q:m),T&&Wa(T,0,L-T.scrollTop),H=g.parentNode,void 0===J||ua||
(sa=ca(J-D(m)[K])),e(),b(!0)}}else if(x&&u===a.target&&(m=x),m&&(t=D(m)),C?G._hideClone():G._showClone(this),!1!==c(w,u,g,f,m,t,a,!!m))return u.appendChild(g),H=u,la=null,e(),b(!0);if(u.contains(g))return b(!1)}var Q,N,V,ha,ia,fa,Z,aa,X,da,ea,K,T,L,R,E,I,ba,Y;return U&&!a.rootEl&&Za(u,a,"_onDragOver"),!1}},_animate:function(a,b){var d=this.options.animation;if(d){var e=D(b);if(b===g&&(la=e),1===a.nodeType&&(a=D(a)),a.left+a.width/2!==e.left+e.width/2||a.top+a.height/2!==e.top+e.height/2){var c=u(this.el),
t=c&&c.a,c=c&&c.d;f(b,"transition","none");f(b,"transform","translate3d("+(a.left-e.left)/(t||1)+"px,"+(a.top-e.top)/(c||1)+"px,0)");b.offsetWidth;f(b,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:""));f(b,"transform","translate3d(0,0,0)")}"number"==typeof b.animated&&clearTimeout(b.animated);b.animated=ja(function(){f(b,"transition","");f(b,"transform","");b.animated=!1},d)}},_offUpEvents:function(){var b=this.el.ownerDocument;a(r,"touchmove",this._onTouchMove);a(r,
"pointermove",this._onTouchMove);a(b,"mouseup",this._onDrop);a(b,"touchend",this._onDrop);a(b,"pointerup",this._onDrop);a(b,"touchcancel",this._onDrop);a(r,"selectstart",this)},_onDrop:function(b){var d=this.el,e=this.options;pa=ua=Fa=ba=!1;clearInterval(this._loopId);clearInterval(aa);xa();clearTimeout(da);da=void 0;clearTimeout(this._dragStartTimer);clearTimeout(this._cloneId);clearTimeout(this._dragStartId);a(r,"mousemove",this._onTouchMove);this.nativeDraggable&&(a(r,"drop",this),a(d,"dragstart",
this._onDragStart),a(r,"dragover",this._handleAutoScroll),a(r,"dragover",Xa));Ha&&f(r.body,"user-select","");this._offUpEvents();b&&(ra&&(b.cancelable&&b.preventDefault(),!e.dropBubble&&b.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(w===H||P&&"clone"!==P.lastPutMode)&&v&&v.parentNode&&v.parentNode.removeChild(v),g&&(this.nativeDraggable&&a(g,"dragend",this),z(g),g.style["will-change"]="",y(g,P?P.options.ghostClass:this.options.ghostClass,!1),y(g,this.options.chosenClass,!1),p(this,
w,"unchoose",g,H,w,S,null,b),w!==H?(0<=(E=M(g,e.draggable))&&(p(null,H,"add",g,H,w,S,E,b),p(this,w,"remove",g,H,w,S,E,b),p(null,H,"sort",g,H,w,S,E,b),p(this,w,"sort",g,H,w,S,E,b)),P&&P.save()):g.nextSibling!==ga&&0<=(E=M(g,e.draggable))&&(p(this,w,"update",g,H,w,S,E,b),p(this,w,"sort",g,H,w,S,E,b)),l.active&&(null!=E&&-1!==E||(E=S),p(this,w,"end",g,H,w,S,E,b),this.save())));this._nulling()},_nulling:function(){w=g=H=x=ga=v=Aa=Z=Ba=F.length=aa=Da=Ea=ea=J=ra=E=S=ka=na=la=P=qa=l.active=null;wa.forEach(function(a){a.checked=
!0});wa.length=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":g&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a,b=[],d=this.el.children,c=0,f=d.length,g=this.options;c<f;c++)q(a=d[c],g.draggable,this.el,!1)&&b.push(a.getAttribute(g.dataIdAttr)||t(a));return b},sort:function(a){var b={},d=this.el;
this.toArray().forEach(function(a,c){c=d.children[c];q(c,this.options.draggable,d,!1)&&(b[a]=c)},this);a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return q(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var d=this.options;if(void 0===b)return d[a];d[a]=b;"group"===a&&Na(d)},destroy:function(){var b=this.el;b[O]=null;a(b,"mousedown",this._onTapStart);a(b,"touchstart",this._onTapStart);
a(b,"pointerdown",this._onTapStart);this.nativeDraggable&&(a(b,"dragover",this),a(b,"dragenter",this));Array.prototype.forEach.call(b.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();Q.splice(Q.indexOf(this.el),1);this.el=b=null},_hideClone:function(){v.cloneHidden||(f(v,"display","none"),v.cloneHidden=!0,v.parentNode&&this.options.removeCloneOnHide&&v.parentNode.removeChild(v))},_showClone:function(a){"clone"===a.lastPutMode?v.cloneHidden&&(w.contains(g)&&
!this.options.group.revertClone?w.insertBefore(v,g):ga?w.insertBefore(v,ga):w.appendChild(v),this.options.group.revertClone&&this._animate(g,v),f(v,"display",""),v.cloneHidden=!1):this._hideClone()}},b(r,"touchmove",function(a){(l.active||ba)&&a.cancelable&&a.preventDefault()}),l.utils={on:b,off:a,css:f,find:B,is:function(a,b){return!!q(a,b,a,!1)},extend:fa,throttle:R,closest:q,toggleClass:y,clone:Qa,index:M,nextTick:Y,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Ma,getChild:m},
l.create=function(a,b){return new l(a,b)},l.version="1.8.4",l})},"widgets/Bookmark/CustomBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/sniff esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils ./ItemNode jimu/dijit/ImageChooser libs/Sortable".split(" "),function(l,q,b,a,y,f,u,B,p,c,z,n,m,h){return q([p,c,l],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,_CHANGING_IMG_BM:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=a.create("div",{"class":"drawer-handle hide",innerHTML:"\x3cdiv class\x3d'separate-line'\x3e\x3c/div\x3e"},this.domNode);this.bookMarkerContainer=a.create("div",{"class":"custom editing"},this.domNode);this.imageChooserContainer=a.create("div",{"class":"hide"},this.domNode)},startup:function(){this.inherited(arguments);var d=z.readBookmarksInWebmap(this.map);(!0===this.config.syncMode.webmap&&0<d.length||
!0===this.config.syncMode.custom&&0<this.config.bookmarks2D.length)&&a.removeClass(this.drawerHandle,"hide");this.sortableBookMarkerNodes=h.create(this.bookMarkerContainer,{handle:".drag-masker",filter:".disable-drag .hide",sort:!0,disabled:!1,animation:100,onSort:b.hitch(this,function(){this.saveBookMarkersBySortable();this.emit("sort",this.bookmarks)})});this.imageChooser=new m({cropImage:!1,showSelfImg:!0,goldenWidth:108,goldenHeight:71,maxSize:100,label:this.nls.selectFile,format:["image/gif",
"image/png","image/jpeg"]},this.imageChooserContainer);this.imageChooser.startup();this.own(f(this.imageChooser,"imageChange",b.hitch(this,"_onImageChange")))},toggleMobile:function(a){(this._IS_MOBILE=a)?this.sortableBookMarkerNodes.option("disabled",!0):this.sortableBookMarkerNodes.option("disabled",!1)},refresh:function(a){this.bookmarks=a;z.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks);this.toggleDrawer()},add:function(){var d=z.getAutoRenameBeforeAdd("bookmark",this.bookmarks),
c={name:"bookmark",displayName:d,extent:this.map.extent.toJson(),isSaveLayers:this.config.isSaveLayerVisibility,isSaveExtent:!0};!0===this.config.isSaveLayerVisibility&&(c.layerOptions=z.getlayerInfos());"bookmark"!==d&&(c._autoRename=!0);this._doAddBookmark(c);this.bookmarks.unshift(c);c.itemNode&&c.itemNode.domNode&&a.place(c.itemNode.domNode,this.bookMarkerContainer,"first");this.displayBookmarks(this.bookmarks);this.toggleDrawer();this.bookmarks.forEach(b.hitch(this,function(a,b){0===b?(n.enableEditable(a),
n.focusLabel(a)):n.disableEditable(a)}));this.emit("added",this.bookmarks)},_doAddBookmark:function(a){var d={enableEditLabel:!0,editBtn:!1,changeImgBtn:!0,layerInfosIcon:z.isWithLayerInfos(a)},d=z.createBookMarkNode(a,this.nls,this.folderUrl,d);a.itemNode=d;this.own(f(d,"thumbnail-click",b.hitch(this,b.partial(this._onNodeBoxClick,a))));this.own(f(d,"label-click",b.hitch(this,b.partial(this._onLebelClick,a))));this.own(f(d,"label-blur",b.hitch(this,b.partial(this._onLabelBlur,a))));this.own(f(d,
"delete",b.hitch(this,b.partial(this._onBookmarkDeleteImmediately,a))));this.own(f(d,"change-img",b.hitch(this,b.partial(this._onBookmarkChangeImg,a))));this.own(f(d,"rename",b.hitch(this,b.partial(this._onRename,a))));return d},filter:function(a){this._LAST_FILTER_STR=a;z.filter(a,this.bookmarks)},displayBookmarks:function(d){z.empty(d,this.bookMarkerContainer);y.forEach(d,function(a){a&&this._doAddBookmark(a)},this);d.forEach(b.hitch(this,function(b){b&&b.itemNode&&b.itemNode.domNode&&a.place(b.itemNode.domNode,
this.bookMarkerContainer,"last")}))},saveBookMarkersBySortable:function(a){for(var b=this.sortableBookMarkerNodes.toArray(),d=[],c=0,f=b.length;c<f;c++){var h=z.findBookMarkByUID(b[c],this.bookmarks);h&&d.push(h.bookmark)}this.bookmarks=d;a&&a.isRefresh&&this.displayBookmarks(this.bookmarks)},_isListMode:function(){if(this.domNode){var b=this.domNode.parentElement||this.domNode.parentNode;if(b)return a.hasClass(b,"list")}return!1},_onNodeBoxClick:function(a){require(["esri/geometry/Extent"],b.hitch(this,
function(b){if(!1!==a.isSaveExtent){var d=a.extent;d.spatialReference?new B(d.spatialReference):new B({wkid:4326});this.map.setExtent(new b(d))}z.layerInfosRestoreState(a.isSaveLayers,a.layerOptions)}))},_onLebelClick:function(a){this._isListMode()||!0===this._IS_MOBILE?this._onNodeBoxClick(a):n.focusLabel(a)},_onLabelBlur:function(a){var b=a.itemNode.nodeLabel.get("value");a.displayName=b;a.name=b;this.emit("label-blur",this.bookmarks);this.filter(this._LAST_FILTER_STR)},_onBookmarkDeleteImmediately:function(a){this.removeBookMarks([a])},
removeBookMarks:function(a){for(var b=null,d=0,c=a.length;d<c;d++){var f=z.findBookMark(a[d],this.bookmarks);f&&f.bookmark&&(f.bookmark.itemNode&&f.bookmark.itemNode.destroy(),b=z.findNextBookMarkByIdx(f.idx,this.bookmarks),this.bookmarks.splice(f.idx,1))}this.emit("delete",{bookmarks:this.bookmarks,nextBookmark:b});this.toggleDrawer()},_onBookmarkChangeImg:function(a){this._CHANGING_IMG_BM=a;a=this.imageChooser.mask;if(u("safari")){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,
!0);a.dispatchEvent(b)}else a.click()},_onImageChange:function(a){this._CHANGING_IMG_BM&&this._CHANGING_IMG_BM.itemNode&&(""!==a&&(this._CHANGING_IMG_BM.itemNode.changeImg(a),this._CHANGING_IMG_BM.thumbnail=a),this.emit("change-img",this.bookmarks))},_onRename:function(a){n.focusLabel(a)},toggleDrawer:function(){!0===z.isBookmarksDataEmpty(this.bookmarks)?a.addClass(this.domNode,"hide"):a.removeClass(this.domNode,"hide")},hideDrawer:function(){a.addClass(this.bookMarkerContainer,"hide")},showDrawer:function(){a.removeClass(this.bookMarkerContainer,
"hide")}})})},"widgets/Bookmark/a11y/Widget":function(){define(["dojo/query","dojo/_base/array","dojo/_base/html","jimu/utils","../ItemNode"],function(l,q,b,a,y){return{a11y_initFocusNodes:function(){var b=this._getFocusableNodes();b&&b.length&&(this._508_FIRST_FOCUS_NODE=b[0],a.initFirstFocusNode(this.domNode,this._508_FIRST_FOCUS_NODE),0<b.length&&a.initLastFocusNode(this.domNode,b[b.length-1]))},a11y_focusAfterDelete:function(a){a&&a.itemNode&&a.itemNode.domNode?y.focusItem(a):this._508_FIRST_FOCUS_NODE.focus()},
_getFocusableNodes:function(){var a=l('[tabindex $\x3d"0"]',this.domNode);return a=q.filter(a,function(a){return!b.hasClass(a,"dijitInputInner")&&(b.hasClass(a,"delete-btn")||"none"!==b.getStyle(a,"display"))},this)}}})},"widgets/Bookmark/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Bookmark/HeadBar.html":'\x3cdiv class\x3d"header"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editableBtns" class\x3d"editable-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"addBtn" class\x3d"add hide" title\x3d"${nls.labelBookmarkName}" tabindex\x3d"0" role\x3d"button"\x3e${nls.addBtn}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"oper-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filter" class\x3d"filter-container hide"\x3e\r\n\t\t\t\x3cdiv class\x3d"filter-input"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filterInput" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tplaceHolder\x3d"${nls.searchBookmark}" required\x3d"false"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"search" data-dojo-attach-point\x3d"filterBtn" title\x3d"${nls.searchBookmark}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"commonFunBtns" class\x3d"common-fun-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"syncBtn" class\x3d"head-btns sync-btn" title\x3d"${nls.syncTip}"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"backToInitBtn" class\x3d"head-btns back-to-init hide" title\x3d""\x3e\x3c/div\x3e--\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayMode" class\x3d"display-mode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cardsBtn" class\x3d"head-btns cards hide" title\x3d"${nls.cardsTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"listBtn" class\x3d"head-btns list hide" title\x3d"${nls.listTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"editBtns" class\x3d"edit-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"head-btns rename" title\x3d"rename"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"head-btns delete" title\x3d"delete"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/ItemNode.html":'\x3cdiv class\x3d"jimu-img-node jimu-float-leading clearFix" data-id\x3d"" tabindex\x3d"0" aria-label\x3d"" role\x3d"button"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeBox" class\x3d"node-box verticalCenter no-user-select"\x3e\r\n\t\t\x3cimg data-dojo-attach-point\x3d"thumbnail" class\x3d"thumbnail" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"changeImgBtn" class\x3d"change-img-btn oper-btns no-user-select hide" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editBtn" class\x3d"edit-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"rename-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"delete-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"dragMasker" class\x3d"drag-masker" tabindex\x3d"-1"\x3e\x3c/div\x3e\x3c!--for different browsers drag behavior--\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerInfosIcon" class\x3d"layer-info-icon icons no-user-select hide"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"selectedBtn" class\x3d"selected-btn oper-btns no-user-select hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/Widget.html":'\x3cdiv class\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"headBarContainer" class\x3d"head-bar"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookmarksContainer" class\x3d"bookmarks-container cards"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"webmapBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"customBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c!--\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookMarkerContainer" class\x3d"bookmarker-nodes cards"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editMenuContainer" class\x3d"edit-menu"\x3e\r\n\t\t\x3cdiv class\x3d"delete-btn edit-menu-btns" data-dojo-attach-point\x3d"deleteBtn" data-dojo-attach-event\x3d"onclick:_onEditMenuDelete"\x3e${nls.labelDelete}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"imageChooserContainer" class\x3d"hide"\x3e\x3c/div\x3e\r\n--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/css/style.css":'.jimu-img-node{font-size: 12px; position: relative; float: left; color: #666; overflow: hidden;}.jimu-img-node .node-box{position: relative; border-radius: 4px; overflow: hidden;}.jimu-img-node img{width: 100%; height: 100%; cursor: pointer;}.jimu-img-node .node-label{height: 30px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled{opacity: 1;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #000; opacity: 0.9;}.jimu-widget-bookmark .no-user-select{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.jimu-widget-bookmark .hide {display: none !important;}.jimu-widget-bookmark .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-bookmark .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-bookmark .verticalCenter{display: flex; align-items: center;}.jimu-widget-bookmark .jimu-img-node .node-box{margin: 0 auto; width: 100px; height: 60px;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{width: 100px; height: 60px;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox {border: none; width: 100%; background-color: transparent;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{background-color: transparent; width: 100%; overflow: hidden;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{white-space: nowrap; text-overflow: ellipsis; text-align: center;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused{border:none !important; box-shadow: none; background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused .dijitInputInner{box-shadow: none; background: rgba(36, 181, 204, 0.2) !important;}.jimu-img-node .oper-btns{display: none; position: absolute; z-index: 10;}.jimu-img-node .icons{position: absolute; width: 20px; height: 20px; z-index: 10; background-color: #FFF;}.list .jimu-img-node .icons{display: none;}.editing .jimu-img-node .thumbnail{}.jimu-img-node .drag-masker{position: absolute; z-index: 5; top: 0; width: 100%; height: 60px; cursor: pointer;}.jimu-img-node .drag-masker:hover{background-color: transparent}.editing .jimu-img-node .oper-btns{width:20px; height:20px; cursor: pointer; background-color: rgba(0,0,0,0.5);}.editing .jimu-img-node .oper-btns:hover{background-color: rgba(0,0,0,0.7);}.editing .jimu-img-node .selected-btn{background: url("../images/btns/unselected.svg") no-repeat; left:0; top:0;}.editing .jimu-img-node.selected .selected-btn{background: url("../images/btns/selected.svg") no-repeat;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn{cursor: pointer; top:0;}.jimu-rtl .jimu-widget-bookmark:not(.mobile) .jimu-img-node .delete-btn{right: auto;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn::before{position: absolute; background-image: url("../images/btns/x.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .edit-btn{right: 0; bottom: 30px;}.jimu-rtl .jimu-img-node .edit-btn{right: auto; left: 0;}.editing .jimu-img-node .edit-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn{display: none; top: 0px; left: 0px;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .change-img-btn{right: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .change-img-btn{right: auto; left: calc((100% - 100px)/2);}.editing .jimu-img-node .change-img-btn::before{position: absolute; background-image: url("../images/btns/change.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-img-node .layer-info-icon{left: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .layer-info-icon{right: auto; right: calc((100% - 100px)/2);}.jimu-img-node .layer-info-icon::before{position: absolute; background-image: url("../images/btns/layer_infos.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark .header {display: flex; align-items: center; justify-content: space-between; height: 30px; margin: 2px; margin-bottom: 15px;}.jimu-widget-bookmark .header .editable-btns,.jimu-widget-bookmark .header .common-fun-btns,.jimu-widget-bookmark .header .edit-btns,.jimu-widget-bookmark .header .common-fun-btns .display-mode{display: flex; align-items: center;}.jimu-widget-bookmark .header .common-fun-btns .display-mode {margin: 0 5px;}.jimu-widget-bookmark .header .two-modes .list{background: url("../images/btns/list.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .list:hover{background: url("../images/btns/list_selected.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards{background: url("../images/btns/cards.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards:hover{background: url("../images/btns/cards_selected.svg") no-repeat;}.jimu-widget-bookmark .adding .header .add{background: url("../images/btns/add_selected.svg") no-repeat;}.jimu-widget-bookmark .header .edit{background: url("../images/btns/edit.svg") no-repeat;}.jimu-widget-bookmark .editing .header .edit{background: url("../images/btns/edit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn{background: url("../images/btns/sync.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn.marked{background: url("../images/btns/sync.svg") no-repeat; background-color: red;}.jimu-widget-bookmark .header .back-to-init{background: url("../images/btns/backtoinit.svg") no-repeat;}.jimu-widget-bookmark .header .back-to-init.marked{background: url("../images/btns/backtoinit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename{background: url("../images/btns/rename_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename.disable{background: url("../images/btns/rename.svg") no-repeat;}.jimu-widget-bookmark .header .delete{background: url("../images/btns/delete_selected.svg") no-repeat;}.jimu-widget-bookmark .header .delete.disable{background: url("../images/btns/delete.svg") no-repeat;}.jimu-widget-bookmark .header .edit-btns{display: none;}.jimu-widget-bookmark .editing .header .edit-btns{display: flex;}.jimu-widget-bookmark .header .common-fun-btns{display: flex;}.jimu-widget-bookmark .editing .header .common-fun-btns{display: none;}.bookmark-notice-popup{font-family: "Avenir Medium"; font-size: 12px;}.bookmark-notice-popup .tips{color: #000000; letter-spacing: 0;}.bookmark-notice-popup .check-box{position: absolute; bottom: 20px;}.bookmark-notice-popup .check-box .jimu-checkbox .label{font-size: 12px; color: #353535; letter-spacing: 0.3px;}.DartTheme .jimu-widget-bookmark .dijitTextBox{border: none !important;}.DartTheme .jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #FFF !important;}.jimu-widget-bookmark{width: 100%; height: 100%; overflow: hidden; position: relative;}.jimu-widget-bookmark .add-section{position: relative; height: 30px; margin-top: 7px; overflow: visible;}.jimu-widget-bookmark .input-bookmark-name{border-top-right-radius: 0; border-bottom-right-radius: 0; position: absolute; left: 0; top: 0; width: 100%;}.jimu-widget-bookmark .jimu-state-error{margin-top: 4px; visibility: hidden;}.jimu-widget-bookmark .bookmark-list{margin-bottom: 35px; width: 100%;}.jimu-widget-bookmark .play-section{overflow: hidden; margin-top: 20px; position: absolute; bottom: 0;}.jimu-widget-bookmark .jimu-btn{float: none; margin: auto; width: 100%;}.jimu-widget-bookmark .jimu-img-node{margin: 3px 0 8px 3px;}.jimu-rtl .jimu-widget-bookmark .jimu-img-node{margin: 3px 3px 8px 0;}.jimu-widget-bookmark .jimu-img-node .node-label{height: 2.7em; line-height: 16px; vertical-align: middle; padding: 0 5px; margin: 0 auto; width: 100px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}.jimu-widget-bookmark .jimu-img-node .node-box{border-radius: 0; position: relative;}.jimu-widget-bookmark .jimu-img-node img{display: flex; width: 100%; height: 60px; opacity: 1; min-width: 80px;}.jimu-widget-bookmark .jimu-img-node.selected img{opacity: 0.4; transition: opacity .5s;}.jimu-widget-bookmark .cards .jimu-img-node:hover .dijitTextBox .dijitInputInner{color: #51B1FE !important;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{left: 50%; transform: translate(-50%, 0%);}.jimu-widget-bookmark .cards .jimu-img-node .delete-btn{display: none; right:calc((100% - 100px)/2); justify-content: center; align-items: center;}.jimu-rtl .jimu-widget-bookmark .cards .jimu-img-node .delete-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .delete-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .delete-btn{display: flex;}.jimu-widget-bookmark .cards .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .change-img-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .change-img-btn{display: block;}.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{max-width: 104px; width: 100%; margin: 0 auto; display: flex;}.jimu-widget-bookmark .list{}.jimu-widget-bookmark .list .jimu-img-node{width: calc(100% - 10px) !important; display: flex; height: 36px; margin-bottom: 8px;}.jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #E2E2E2;}.DartTheme .jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #444;}.jimu-widget-bookmark .list .node-box{height: 36px; width: 20px; margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{z-index: 99;}.jimu-widget-bookmark .list .node-box img{display: none;}.jimu-widget-bookmark .node-box:after{display: none;}.jimu-widget-bookmark .list .node-box:after{position: absolute; content: url(../images/btns/place.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .with-layer-visibility.node-box:after{position: absolute; content: url(../images/btns/place_with_layer_visibility.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .editing .node-box:after{top: 10px;}.jimu-rtl .jimu-widget-bookmark .list .node-box:after{left: auto; right: 3px;}.jimu-widget-bookmark .list.editing .node-box{display: none;}.jimu-widget-bookmark .list.editing .node-box:after{display: none;}.jimu-widget-bookmark .list.editing .jimu-img-node .node-box{margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox{height: 36px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputField{width: calc(100% - 70px); height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.jimu-widget-bookmark .list.editing .head-btns{}.jimu-widget-bookmark .list .jimu-img-node .oper-btns{top: 8px;}.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .oper-btns{top: 8px;}.mobile .jimu-img-node .oper-btns{display: none;}.mobile .editing .jimu-img-node .oper-btns,.mobile .editing .jimu-img-node .oper-btns:hover,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns:hover{background-color: transparent;}.mobile .editing .jimu-img-node .rename-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:before{position: absolute; display: block; background-image: url(images/pencil.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .rename-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:hover:before{background-image: url(images/pencil_hover.svg);}.mobile .editing .jimu-img-node .delete-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:before{position: absolute; display: block; background-image: url(images/clear.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .delete-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:hover:before{background-image: url(images/clear_hover.svg);}.mobile .editing .jimu-img-node .change-img-btn:before{position: absolute; display: block; background-image: url(images/change_img.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .change-img-btn:hover:before{background-image: url(images/change_img_hover.svg);}.jimu-widget-bookmark .list.editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.jimu-widget-bookmark .list.editing .jimu-img-node .close-btn{position: relative; background-color: green;}.jimu-widget-bookmark .list .jimu-img-node .delete-btn{left: auto; right: 15px; display: block;}.jimu-rtl .list .jimu-img-node .delete-btn{left: 15px; right: auto;}.jimu-widget-bookmark .list .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{display: block; left: auto; right: 50px;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{left: 50px; right: auto;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .change-img-btn{left: 85px; right: auto;}.jimu-widget-bookmark {position: relative; overflow: hidden;}.jimu-widget-bookmark .drawer-handle{width: 100%; display: flex; align-items: center; font-family: "Avenir Medium"; font-size: 14px; color: #000000; letter-spacing: 0.39px;}.jimu-widget-bookmark .drawer-handle .separate-line{margin: 10px 0 25px 0; border-top: 1px solid #eee; width: 100%;}.DartTheme .jimu-widget-bookmark .drawer-handle .separate-line{border-top: 1px solid #666;}.jimu-widget-bookmark .drop-down{display: flex; align-items: center; background: url(images/dropDown.svg) no-repeat; background-size: 6px 6px; width: 6px; height: 6px; cursor: pointer;}.jimu-widget-bookmark .drop-down.open{transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg);}.jimu-widget-bookmark .drop-down{margin: 0 10px; transform: rotate(90deg); -ms-transform: rotate(90deg); -moz-transform: rotate(90deg); -webkit-transform: rotate(90deg); -o-transform: rotate(90deg);}.jimu-widget-bookmark .bookmarks-container{overflow-x: hidden; overflow-y: auto;}.jimu-widget-bookmark .bookmarker-nodes{overflow: inherit;}.jimu-widget-bookmark .dojoDndItemAnchor{padding: 0; border: none;}.jimu-widget-bookmark .header .oper-btns{width: 100%; height: 100%; display: flex; align-items: center; justify-content: flex-end;}.jimu-widget-bookmark .header .head-btns{width:16px; height:16px; margin: 4px; overflow: hidden; cursor: pointer;}.jimu-widget-bookmark .header .add{display: flex; align-items: center; justify-content: center; height:30px; min-width: 65px; padding: 0 10px; border: 1px solid #c7c7c7; color: #000; font-family: Avenir-Medium; font-size: 12px; cursor: pointer;}.jimu-widget-bookmark .header .add:hover{border: 1px solid #000;}.DartTheme .jimu-widget-bookmark .header .add{border: 1px solid #666; color: #FFF;}.DartTheme .jimu-widget-bookmark .header .add:hover{border: 1px solid #FFF;}.jimu-widget-bookmark .editable .header .filter-container{margin-left:20px;}.jimu-rtl .jimu-widget-bookmark .editable .header .filter-container{margin-left: auto; margin-right: 20px;}.jimu-widget-bookmark .header .filter-container{display: flex; position: relative; width: 100%; height: 100%; overflow: hidden;}.jimu-widget-bookmark .header .filter-container .filter-input{position: absolute; height: 30px; width: 100%;}.jimu-widget-bookmark .header .filter-container .dijitTextBox {width: 100%;}.jimu-widget-bookmark .header .filter-container .search{position: absolute; background: url(images/search.svg) no-repeat; background-size: contain; width: 16px; height: 16px; margin: 7px; right: 0; top: 0;}.jimu-rtl .jimu-widget-bookmark .header .filter-container .search{right: auto; left: 0;}.jimu-widget-bookmark .header .display-mode{margin: 0 10px;}.jimu-widget-bookmark:not(.mobile) .cards .header{margin-bottom: 25px;}.mobile.jimu-widget-bookmark {}.mobile.jimu-widget-bookmark .dojoDndSource:not(.editable) .header{height: 20px; margin-bottom: 5px;}.mobile.jimu-widget-bookmark .jimu-img-node{width:calc(100% - 10px) !important; display: flex; align-items: center; border-top: 1px solid rgba(230,230,230,0.5); margin-top: 0; margin-bottom: 0; padding: 4px 0;}.mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: 0px; bottom: 9px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: auto; right: 0;}.DartTheme .mobile.jimu-widget-bookmark .jimu-img-node{border-top: 1px solid #333333}.mobile.jimu-widget-bookmark .jimu-img-node .drag-masker{width: 100%;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{margin: 0; max-width: 100%;}.mobile.jimu-widget-bookmark .node-box{}.mobile.jimu-widget-bookmark .list.editing .node-box{display: flex;}.mobile.jimu-widget-bookmark .node-box img{max-height: 50px; max-width: 75px;}.mobile.jimu-widget-bookmark .editing .node-box{}.mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 0; margin-right:10px;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .node-box{min-width: 80px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 10px; margin-right:0;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{max-width: 300px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.mobile.jimu-widget-bookmark .drawer-handle .separate-line{margin-bottom: 0; border-top: 4px solid #F2F2F2;}.mobile.jimu-widget-bookmark {-webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;}.mobile.jimu-widget-bookmark .jimu-img-node .node-label{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .close-btn{position: relative;}.mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {display: block; left: auto; right: 85px; bottom: auto;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {left: 85px; right: auto;}.mobile.jimu-widget-bookmark .list .jimu-img-node .change-img-btn {display: none;}.mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {display: block; left: auto; right: 50px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {left: 50px; right: auto;}.mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {display: block; right: 15px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {left: 15px; right: auto;}',
"*now":function(l){l(['dojo/i18n!*preload*widgets/Bookmark/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html jimu/BaseWidget dojo/query dojo/on dojo/Deferred ./HeadBar ./WebmapBookmarks ./CustomBookmarks ./utils libs/storejs/store ./a11y/Widget".split(" "),function(l,q,b,a,y,f,u,B,p,c,z,n,m,h){l=l([y],{baseClass:"jimu-widget-bookmark dojoDndSource dojoDndTarget dojoDndContainer",name:"Bookmark",bookmarks:[],jimuNls:null,postMixInProperties:function(){this.jimuNls=window.jimuNls},startup:function(){this.inherited(arguments);n.isConfigBefore5_3(this.config)&&
n.setDefaultConfigForUpdate(this.config);this.headBar=new p({map:this.map,nls:this.nls,bookmarksContainer:this.bookmarksContainer,editMenuContainer:this.editMenuContainer,editable:this.config.editable,layout:this.config.layout},this.headBarContainer);this.headBar.startup();this.own(u(this.headBar,"add",q.hitch(this,function(){this.customBookmarks.add()})));this.own(u(this.headBar,"filter-change",q.hitch(this,function(a){this.webmapBookmarks.filter(a);this.customBookmarks.filter(a)})));this.webmapBookmarks=
new c({nls:this.nls,map:this.map,folderUrl:this.folderUrl,config:this.config},this.webmapBookmarksContainer);this.webmapBookmarks.startup();this.customBookmarks=new z({nls:this.nls,map:this.map,folderUrl:this.folderUrl,widgetId:this.id,config:this.config},this.customBookmarksContainer);this.customBookmarks.startup();this.own(u(this.customBookmarks,"sort",q.hitch(this,"_onSort")));this.own(u(this.customBookmarks,"change-img",q.hitch(this,"_onChangeImg")));this.own(u(this.customBookmarks,"delete",q.hitch(this,
"_onDelete")));this.own(u(this.customBookmarks,"label-blur",q.hitch(this,"_onLabelBlur")));this.own(u(this.customBookmarks,"added",q.hitch(this,"_onAdded")));this.resize()},_onLabelBlur:function(a){this.onBookmarksChange(a)},_onSort:function(a){this.onBookmarksChange(a)},_onChangeImg:function(a){this.onBookmarksChange(a)},_onDelete:function(a){var b=a.nextBookmark;this.onBookmarksChange(a.bookmarks);this.a11y_initFocusNodes();this.a11y_focusAfterDelete(b)},_onAdded:function(a){this.onBookmarksChange(a);
this.a11y_initFocusNodes()},onBookmarksChange:function(a){this._saveAllToLocalCache(a);this.resize()},onOpen:function(){this.webmapBookmarks.refresh();var a=this._getLocalCache();this.customBookmarks.refresh(a);this.resize();this.a11y_initFocusNodes()},destroy:function(){this.headBar&&(this.headBar.destroy(),this.headBar=null);this.webmapBookmarks&&(this.webmapBookmarks.destroy(),this.webmapBookmarks=null);this.customBookmarks&&(this.customBookmarks.destroy(),this.customBookmarks=null);this.inherited(arguments)},
onMinimize:function(){this.resize()},onMaximize:function(){this.resize()},resize:function(){window.appInfo.isRunInMobile?a.addClass(this.domNode,"mobile"):a.removeClass(this.domNode,"mobile");this.customBookmarks.toggleMobile(window.appInfo.isRunInMobile);var b=this.domNode.parentElement||this.domNode.parentNode;b&&(window.isRTL?a.setStyle(b,"padding-left","0"):a.setStyle(b,"padding-right","0"));this._getParentSize(b).then(q.hitch(this,function(c){var d=this.domNode;if(d){if(279<=c.w&&329>c.w)this._setNodeWidths(d,
130,100);else if(1>=Math.abs(c.w-330))this._setNodeWidths(d,100,100);else{var f=a.getMarginBox(d).w-20,h=parseInt(f/100,10);0<h&&(f=parseInt(f%100/h,10),this._setNodeWidths(d,100+f,100))}this.setContainerHeight(c,b)}}))},_setNodeWidths:function(b,c,h){h+=4;c<h&&(c=h);f(".jimu-img-node",b).forEach(function(b){a.setStyle(b,"width",c+"px")})},getItemSize:function(){var a={};a.width=this.itemSize.width;a.height=this.itemSize.height;return a},setContainerWidth:function(b,c){a.setStyle(this.domNode,{width:(c.width+
2*this.hmargin)*Math.floor(b.w/(c.width+2*this.hmargin))+20+"px",margin:"0px auto"})},setContainerHeight:function(b,c){c=this._getDomHeight(".header",c);a.setStyle(this.bookmarksContainer,{height:b.h-c+"px"})},setItemPosition:function(b,c){var d={position:"relative",margin:this.vmargin+"px "+this.hmargin+"px"};0<=c.width&&(d.width=c.width+"px");0<=c.height&&(d.height=c.height+"px");a.setStyle(b.domNode,d);a.addClass(b.domNode,"jimu-float-leading")},_getDomHeight:function(b,c){var d=0;(b=f(b,c)[0])&&
(b=a.getMarginBox(b))&&b.h&&(d=b.h);return d},_getParentSize:function(b){var c=new B;setTimeout(q.hitch(this,function(){var d=a.getMarginBox(b),f=a.getPadExtents(b);d.h-=f.h;c.resolve(d)}),10);return c},_saveAllToLocalCache:function(a){var c=[];b.forEach(m.get(n.getKey(this.id)),function(a){m.remove(a)},this);b.forEach(a,function(a){var b=n.getKey(this.id)+"."+a.displayName;c.push(b);a=q.mixin({},a);a.itemNode&&delete a.itemNode;a._uID&&delete a._uID;try{m.set(b,a)}catch(R){alert("localcache store error")}},
this);m.set(n.getKey(this.id),c)},_getLocalCache:function(){var a=this._getCacheByKeys(this._getOldKey()),b=this._getCacheByKeys(n.getKey(this.id)),c=this._getCacheUpdatedKey();0===b.length&&0<a.length&&!0!==m.get(c)&&(b=n.filterBookmarkFromTarget(a,this.config.bookmarks2D),this._saveAllToLocalCache(b),m.set(c,!0));return b},_getCacheUpdatedKey:function(){return n.getKey(this.id)+".BookmarkCacheUpdated"},_getCacheByKeys:function(a){var c=[];m.get(a)&&b.forEach(m.get(a),function(b){b.startWith(a)&&
(b=m.get(b),c.push(b))},this);return c},_getOldKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"}});l.extend(h);return l});