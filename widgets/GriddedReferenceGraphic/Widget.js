// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/CoordinateControl":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/has dojo/query dojo/dom-attr dojo/dom-class dojo/dom-style dojo/string dojo/topic dojo/keys dojo/Deferred dojo/Evented dojo/dom dojo/dom-construct dojo/aspect jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Tooltip dijit/TooltipDialog dijit/popup dojo/text!./templates/CoordinateControl.html esri/geometry/webMercatorUtils esri/graphic esri/geometry/Point esri/request esri/SpatialReference esri/tasks/GeometryService esri/tasks/ProjectParameters esri/toolbars/draw jimu/dijit/Message ./_CoordinateControlFormatNotation ./_CoordinateControlConfirmNotation dojo/_base/sniff dijit/form/TextBox dijit/form/Textarea dijit/form/Select dijit/InlineEditBox".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t,f,x,D,L,w,u,C,A,I,F,y,B,E,M,N,Q,K,W,X){return r([f,x,D,b],{templateString:A,baseClass:"jimu-coordinate-control",parentWidget:null,input:!0,label:null,showCopyButton:!1,showFormatButton:!1,zoomScale:null,showDeleteButton:!0,showExpandButton:!0,showDrawPoint:!0,drawButtonLabel:null,drawToolTip:null,graphicsLayer:null,type:"DD",inputFromText:!0,addSign:!1,hasCustomLabel:!1,postMixInProperties:function(){this.nls=window.jimuNls.coordinateControl;this.isRenderIdForAttrs=
!0},constructor:function(b){r.safeMixin(this,b);this.uid=b.id||L.getUniqueId("cc");null===this.parentWidget&&console.error("No parentWidget parameter supplied: Parameter is mandatory");null===this.label&&console.info("No label parameter supplied (optional): Coordinate Control will have no label");null===this.zoomScale&&console.info("No zoomScale parameter supplied (optional): Coordinate Control will have no zoom button");null===this.drawButtonLabel&&console.info("No drawButtonLabel parameter supplied (optional): Coordinate Control will have no draw button");
null===this.graphicsLayer&&console.info("No graphicsLayer parameter supplied: Input graphics will not be shown on map")},postCreate:function(){this._frmtdlg=new u({id:this.uid+"_formatCoordinateTooltip",content:new W({nls:this.nls,ct:this.type}),style:"width: 400px",onClose:g.hitch(this,this.popupDidClose)});t.after(this._frmtdlg,"onShow",g.hitch(this,function(){this._frmtdlg.content.frmtSelect.focus()}));t.after(this._frmtdlg,"onClose",g.hitch(this,function(){this.formatButton.focus()}));this.own(m(this._frmtdlg,
"keydown",g.hitch(this,function(b){b.keyCode===d.ESCAPE&&C.close(this._frmtdlg)})));"DartTheme"===this.parentWidget.appConfig.theme.name&&l.add(this._frmtdlg.domNode,"coordinateControlDialog");this.defaultFormat&&(this._frmtdlg.content.formats[this.type].defaultFormat=this.defaultFormat);this.geomsrvc=new M(this.parentWidget.appConfig.geometryService);this.dt=new Q(this.parentWidget.map);this.initUI();this.setUIListeners()},initUI:function(){null===this.label?this.setHidden(this.coordNameContainer,
!1):this.coordName.setValue(this.label);this.input?(this.zoomButton.parentNode.style.display="none",this.setHidden(this.expandButton,!0),this.setHidden(this.removeControlBtn,!0),this.coordName.set("disabled","disabled"),this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"),this.showDrawPoint?(this.drawPointButton.title=this.drawButtonLabel,null===this.drawToolTip&&(this.drawToolTip=this.nls.tooltip)):this.setHidden(this.drawPointButton,!0)):(this.coordtext.disabled=!0,this.coordtext.placeholder=
"",this.setHidden(this.drawPointButton,!0),this.showExpandButton||(this.setHidden(this.expandButton,!0),l.remove(this.domNode,"coordinateContainer"),l.add(this.domNode,"outputCoordinateContainer"),l.add(this.cpbtn,"outputCopyBtn"),this.coordtext.readOnly=!0),this.showDeleteButton||this.setHidden(this.removeControlBtn,!0));this.showCopyButton||(this.setHidden(this.cpbtn,!0),l.add(this.cpbtn,"inputCopyBtn"),h.set(this.cpbtn,"title",this.nls.copyAll));this.showFormatButton||this.setHidden(this.formatButton,
!0);null===this.zoomScale&&this.setHidden(this.zoomButton,!0);this.formatButton.title=this.input?this.nls.formatInput:this.nls.formatOutput;h.set(this.formatButton,"aria-label",this.formatButton.title)},setUIListeners:function(){this.input||n.subscribe("INPUTPOINTDIDCHANGE",g.hitch(this,this.mapWasClicked));n.subscribe("INPUTERROR",g.hitch(this,this.inputError));this.own(m(this.expandButton,"click",g.hitch(this,this.expandButtonWasClicked)));this.own(m(this.expandButton,"keydown",g.hitch(this,function(b){if(b.keyCode===
d.ENTER||b.keyCode===d.SPACE)this.expandButtonWasClicked(b),b.preventDefault()})));this.own(m(this.zoomButton,"click",g.hitch(this,this.zoomButtonWasClicked)));this.own(m(this.zoomButton,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.zoomButtonWasClicked(b)})));this.own(m(this.coordName,"change",g.hitch(this,this.coordNameDidChange)));this.cpbtn.addEventListener("click",g.hitch(this,this.cpBtnWasClicked));this.own(m(this.cpbtn,"keydown",g.hitch(this,function(b){b.keyCode!==
d.ENTER&&b.keyCode!==d.SPACE||this.cpBtnWasClicked(b)})));this.subVal1CpBtn.addEventListener("click",g.hitch(this,this.cpSubBtnWasClicked));this.own(m(this.subVal1CpBtn,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.cpSubBtnWasClicked(b)})));this.subVal2CpBtn.addEventListener("click",g.hitch(this,this.cpSubBtnWasClicked));this.own(m(this.subVal2CpBtn,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.cpSubBtnWasClicked(b)})));this.subVal3CpBtn.addEventListener("click",
g.hitch(this,this.cpSubBtnWasClicked));this.own(m(this.subVal3CpBtn,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.cpSubBtnWasClicked(b)})));this.subVal4CpBtn.addEventListener("click",g.hitch(this,this.cpSubBtnWasClicked));this.own(m(this.subVal4CpBtn,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.cpSubBtnWasClicked(b)})));this.own(m(this.formatButton,"click",g.hitch(this,this.formatButtonWasClicked)));this.own(m(this.formatButton,
"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.formatButtonWasClicked(b)})));this.own(m(this.drawPointButton,"click",g.hitch(this,this.drawPointButtonWasClicked)));this.own(m(this.drawPointButton,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.drawPointButtonWasClicked(b)})));this.own(m(this.removeControlBtn,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.remove()})));this.own(m(this._frmtdlg.content.applyButton,
"click",g.hitch(this,this.formatDialogApplyButtonClicked)));this.own(m(this._frmtdlg.content.applyButton,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||this.formatDialogApplyButtonClicked()})));this.own(m(this._frmtdlg.content.cancelButton,"click",g.hitch(this,function(){C.close(this._frmtdlg)})));this.own(m(this._frmtdlg.content.cancelButton,"keydown",g.hitch(this,function(b){b.keyCode!==d.ENTER&&b.keyCode!==d.SPACE||C.close(this._frmtdlg)})));this.own(m(this.coordtext,
"keydown",g.hitch(this,this.coordTextInputKeyWasPressed)));this.own(m(this.coordtext,"input",g.hitch(this,function(){this.currentClickPointDD=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none");this.emit("coordinates-deleted",{})})));this.own(this.geomsrvc.on("error",g.hitch(this,this.geomSrvcDidFail)));this.own(m(this.dt,"draw-complete",g.hitch(this,this.drawComplete)));this.own(t.after(this.parentWidget,"onClose",g.hitch(this,function(){this.input&&l.contains(this.drawPointButton,
"drawPointBtn-active")&&this.deactivateDrawTool();this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"closed"===this.parentWidget.state&&C.close(this._frmtdlg)})));this.own(t.after(this.parentWidget,"onOpen",g.hitch(this,function(){var b=this.parentWidget.getParent().getParent().domNode;this.own(m(b,"click",g.hitch(this,function(b){"settingBtn"!==b.target.className&&this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"active"===this.parentWidget.state&&C.close(this._frmtdlg)})))})))},formatDialogApplyButtonClicked:function(){this.type=
this._frmtdlg.content.ct;this.updateDisplay();this.input?this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"):this.hasCustomLabel&&this.coordName.set("value",this.label);C.close(this._frmtdlg)},popupDidClose:function(){if(this._frmtdlg.content.isCanceled)this.addSign!==this._frmtdlg.content.addSignChkBox.checked&&(this._frmtdlg.content.addSignChkBox.checked=this.addSign);else{this.addSign=this._frmtdlg.content.addSignChkBox.checked;var b=this._frmtdlg.content.ct;this.type!==b&&
(this.type=b,this.updateDisplay())}},coordNameDidChange:function(){this.hasCustomLabel=!0},cpSubBtnWasClicked:function(b){var d;this[b.currentTarget.id.split("~")[0]].select();try{d=document.execCommand("copy")}catch(T){d=!1}this.showToolTip(b.currentTarget.id,d?this.nls.copySuccessful:this.nls.copyFailed)},cpBtnWasClicked:function(b){b.preventDefault();var d,a;if(this.input){b=L.toArray().filter(function(b){return"jimu-coordinate-control"===b.baseClass&&!b.input});a=b.map(function(b){if(b.coordtext)return b.coordtext.value}).join("\r\n");
b=this.coordtext.value;this.coordtext.value=b+"\r\n"+a;this.selectText(this.coordtext);try{d=document.execCommand("copy")}catch(U){d=!1}this.coordtext.value=b}else{this.selectText(this.coordtext);try{d=document.execCommand("copy")}catch(U){d=!1}}this.showToolTip(this.cpbtn.id,d?this.nls.copySuccessful:this.nls.copyFailed)},selectText:function(b){var d=document.getSelection();d.removeAllRanges();b.focus();var f=/Edge/.test(navigator.userAgent),x=!!window.MSInputMethodContext&&!!document.documentMode;
if(a("ff")||a("chrome")||a("safari"))!this.input&&this.coordtext.disabled?(this.coordtext.disabled=!1,b.select(),this.coordtext.disabled=!0):b.select();f&&b.select();x&&(f=document.createRange(),f.selectNode(b),d.addRange(f))},showToolTip:function(b,d){var a=v.byId(b);w.show(d,a);setTimeout(function(){w.hide(a)},1E3)},geomSrvcDidComplete:function(b){0>=b[0].length?(new K({message:this.nls.parseCoordinatesError}),n.publish("INPUTERROR")):(this.currentClickPointDD=this.currentClickPoint=new y(b[0][0],
b[0][1],new E({wkid:4326})),this.input&&(this.parentWidget.map.centerAt(this.currentClickPointDD),this.updateDisplay(),n.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0})))},geomSrvcDidFail:function(){new K({message:this.nls.parseCoordinatesError});n.publish("INPUTERROR")},coordTextInputKeyWasPressed:function(b){if(b.keyCode===d.ENTER){b.preventDefault();var a=this.getCleanInput(b.currentTarget.value);this.getCoordinateType(a).then(g.hitch(this,function(b){if(b)if(1===
b.length){var d=this.processCoordTextInput(a,b[0],!1);this.getXYNotation(d,b[0].conversionType).then(g.hitch(this,function(b){0<b[0].length?this.geomSrvcDidComplete(b):this.geomSrvcDidFail()}))}else this.confirmNotationDialog||(this.confirmNotationDialog=new X({title:this.nls.comfirmInputNotation,nls:this.nls,options:b,style:"width: 400px",hasSkipCheckBox:!1,theme:this.parentWidget.appConfig.theme.name})),this.confirmNotationDialog.show().then(g.hitch(this,function(){var d=c.filter(b,function(b){return b.name===
this.confirmNotationDialog.comboOptions.get("value")},this),f=this.processCoordTextInput(a,d[0],!1);this.getXYNotation(f,d[0].conversionType).then(g.hitch(this,function(b){0<b[0].length?this.geomSrvcDidComplete(b):this.geomSrvcDidFail()}))},function(){}));else new K({message:this.nls.parseCoordinatesError}),n.publish("INPUTERROR")}));h.set(this.coordtext,"value",a);this.emit("get-coordinate-complete",a);this.currentClickPoint=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=
"inline-block")}if(b.keyCode===d.BACKSPACE||b.keyCode===d.DELETE)this.clear(),this.currentClickPointDD=null,this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none"),this.emit("coordinates-deleted",{})},getFormattedCoordinateText:function(){return this.coordtext.value},getCurrentMapCoordinate:function(){return this.currentClickPoint},getMapCoordinateDD:function(){return this.currentClickPointDD},deactivateDrawTool:function(){this.dt.deactivate();l.remove(this.drawPointButton,
"drawPointBtn-active")},processCoordTextInput:function(b,d,a){var f=d.pattern.exec(b),x,c,e,t,h,D,u,w,L,v,g=!1,p=d.name;switch(d.name){case "DD":x=f[2];c=f[7];e=f[10];t=f[16];h=f[3].replace(/[,:]/,".");D=f[11].replace(/[,:]/,".");p="DD";break;case "DDrev":x=f[11];c=f[16];e=f[2];t=f[8];h=f[12].replace(/[,:]/,".");D=f[3].replace(/[,:]/,".");p="DD";break;case "DDM":x=f[2];c=f[7];e=f[10];t=f[15];h=f[3];u=f[4].replace(/[,:]/,".");D=f[11];w=f[12].replace(/[,:]/,".");p="DDM";break;case "DDMrev":x=f[10];
c=f[15];e=f[2];t=f[7];h=f[11];u=f[12].replace(/[,:]/,".");D=f[3];w=f[4].replace(/[,:]/,".");p="DDM";break;case "DMS":x=f[2];c=f[8];e=f[11];t=f[17];h=f[3];u=f[4];L=f[5].replace(/[,:]/,".");D=f[12];w=f[13];v=f[14].replace(/[,:]/,".");p="DMS";break;case "DMSrev":x=f[11],c=f[17],e=f[2],t=f[8],h=f[12],u=f[13],L=f[14].replace(/[,:]/,"."),D=f[3],w=f[4],v=f[5].replace(/[,:]/,"."),p="DMS"}x&&c?(g=!0,x=(new RegExp(/[Ss-]/)).test(x)?"-":"+"):x=x&&(new RegExp(/[Ss-]/)).test(x)?"-":c&&(new RegExp(/[Ss-]/)).test(c)?
"-":"+";e&&t?(g=!0,e=(new RegExp(/[Ww-]/)).test(e)?"-":"+"):e=e&&(new RegExp(/[Ww-]/)).test(e)?"-":t&&(new RegExp(/[Ww-]/)).test(t)?"-":"+";g&&(a||new K({message:this.nls.latLongWarningMessage}));switch(p){case "DD":b=x+h+","+e+D;break;case "DDM":b=x+h+" "+u+","+e+D+" "+w;break;case "DMS":b=x+h+" "+u+" "+L+","+e+D+" "+w+" "+v}return b},zoomButtonWasClicked:function(){this.currentClickPointDD&&(this.parentWidget.map.getZoom()<this.zoomScale?this.parentWidget.map.centerAt(this.currentClickPointDD).then(g.hitch(this,
function(){this.parentWidget.map.setScale(this.zoomScale)})):this.parentWidget.map.centerAt(this.currentClickPointDD))},setHidden:function(b,d){q.set(b,"display","none");d&&H.destroy(b.parentNode)},setVisible:function(b){q.set(b,"display","inline-flex")},remove:function(){this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&C.close(this._frmtdlg);this.destroyRecursive();this.emit("removeCoordsControl")},mapWasClicked:function(b){this.currentClickPoint=b.mapPoint;this.getDDPoint(b.mapPoint).then(g.hitch(this,
function(d){this.currentClickPointDDDD=this.currentClickPointDD=d;this.inputFromText=b.inputFromText?!0:!1;this.updateDisplay()}),g.hitch(this,function(b){console.error(b)}))},getDDPoint:function(b){var d=new p,f=new E(3857);I.canProject(b,f)?d.resolve(I.webMercatorToGeographic(I.project(b,f))):(f={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:b.spatialReference.wkid,outSR:4326,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"},
(new B(f,{usePost:!1})).then(g.hitch(this,function(f){f=(f=f&&f.transformations?f.transformations:void 0)&&0<f.length?f[0].wkid:void 0;var a=new N;a.outSR=new E(this.parentWidget.map.spatialReference.toJson());a.geometries=[b];a.transformForward=!0;a.transformation=f;this.geomsrvc.project(a,g.hitch(this,function(b){d.resolve(b[0])}),function(b){d.reject(b)})}),g.hitch(this,function(b){d.reject(b)})));return d},getProjectedPoint:function(b){var d=new p;if(I.canProject(b,this.parentWidget.map))d.resolve(I.geographicToWebMercator(b));
else{var f={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:4326,outSR:this.parentWidget.map.spatialReference.wkid,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"};(new B(f,{usePost:!1})).then(g.hitch(this,function(f){f=(f=f&&f.transformations?f.transformations:void 0)&&0<f.length?f[0].geoTransforms[0].wkid:void 0;var a=new N;a.outSR=new E(this.parentWidget.map.spatialReference);a.geometries=[b];a.transformForward=!0;
a.transformation=f;this.geomsrvc.project(a,g.hitch(this,function(b){d.resolve(b[0])}),function(b){d.reject(b)})}),g.hitch(this,function(b){d.reject(b)}))}return d},expandButtonWasClicked:function(){l.toggle(this.coordcontrols,"expanded");l.contains(this.coordcontrols,"expanded")?(l.remove(this.expandButton,"expandBtn"),l.add(this.expandButton,"collapseBtn"),h.set(this.expandButton,"aria-expanded","true")):(l.remove(this.expandButton,"collapseBtn"),l.add(this.expandButton,"expandBtn"),h.set(this.expandButton,
"aria-expanded","false"));this.setSubCoordUI(l.contains(this.coordcontrols,"expanded"));this._setCoordControlsTabindex(l.contains(this.coordcontrols,"expanded"));this.emit("expandButtonClicked",l.contains(this.coordcontrols,"expanded"))},_setCoordControlsTabindex:function(b){var d,f=[];b?(d=0,b=-1):(d=-1,b=0);f=e("input[tabindex\x3d'"+b+"']",this.coordcontrols);f=f.concat(e("span[tabindex\x3d'"+b+"']",this.coordcontrols));c.forEach(f,g.hitch(this,function(b){h.set(b,"tabindex",d)}))},formatButtonWasClicked:function(){this._frmtdlg.content.setCt(this.type);
C.open({popup:this._frmtdlg,around:this.formatButton})},drawPointButtonWasClicked:function(){if(l.contains(this.drawPointButton,"drawPointBtn-active"))this.dt.deactivate(),this.parentWidget.map.enableMapNavigation();else{this.parentWidget.map.disableMapNavigation();this.dt.activate(Q.POINT);var b=this.dt._tooltip;b&&(b.innerHTML=this.drawToolTip)}l.toggle(this.drawPointButton,"drawPointBtn-active")},drawComplete:function(b){var d={};d.mapPoint=b.geometry;this.parentWidget.map.enableMapNavigation();
this.mapWasClicked(d)},setSubCoordUI:function(b){if(b){b="165px";switch(this.type){case "DD":case "DMS":case "DDM":this.sub1label.innerHTML="Lat";this.sub2label.innerHTML="Lon";this.setHidden(this.sub3,!1);this.setHidden(this.sub4,!1);b="90px";break;case "GARS":this.sub1label.innerHTML="Lon";this.sub2label.innerHTML="Lat";this.sub3label.innerHTML="Quadrant";this.sub4label.innerHTML="Key";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "GEOREF":this.sub1label.innerHTML="15\u00b0 Quad";
this.sub2label.innerHTML="1\u00b0 Quad";this.sub3label.innerHTML="Easting";this.setVisible(this.sub3);this.sub4label.innerHTML="Northing";this.setVisible(this.sub4);break;case "USNG":case "MGRS":this.sub1label.innerHTML="GZD";this.sub2label.innerHTML="Grid Sq";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM":this.sub1label.innerHTML="Zone";this.sub2label.innerHTML="Band";this.sub3label.innerHTML="Easting";
this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM_H":this.sub1label.innerHTML="Zone",this.sub2label.innerHTML="Hemisphere",this.sub3label.innerHTML="Easting",this.sub4label.innerHTML="Northing",this.setVisible(this.sub3),this.setVisible(this.sub4)}q.set(this.coordcontrols,"display","block");q.set(this.coordcontrols,"height",b);q.set(this.coordcontrols,"width","300px")}else q.set(this.coordcontrols,"display","none"),q.set(this.coordcontrols,"height",
"0px");b=this.uid.split("_")[1];h.set(this["cc_"+b+"sub1val"],"aria-label",this.sub1label.innerHTML);h.set(this["cc_"+b+"sub2val"],"aria-label",this.sub2label.innerHTML);h.set(this["cc_"+b+"sub3val"],"aria-label",this.sub3label.innerHTML);h.set(this["cc_"+b+"sub4val"],"aria-label",this.sub4label.innerHTML)},setCoordUI:function(b){var d;if(b){var f=this.uid.split("_")[1];if(!this["cc_"+f+"sub1val"]||this.input&&this.inputFromText)return;var a;a=this._frmtdlg.content.formats[this.type];a=a.useCustom?
a.customFormat:a.defaultFormat;switch(this.type){case "DD":b=this.getFormattedDDStr(b,a,this.addSign);this["cc_"+f+"sub1val"].value=k.substitute("${xcrd}",{xcrd:b.latdeg});this["cc_"+f+"sub2val"].value=k.substitute("${ycrd}",{ycrd:b.londeg});d=b.formatResult;break;case "DDM":b=this.getFormattedDDMStr(b,a,this.addSign);this["cc_"+f+"sub1val"].value=k.substitute("${latd} ${latm}",{latd:b.latdeg,latm:b.latmin});this["cc_"+f+"sub2val"].value=k.substitute("${lond} ${lonm}",{lond:b.londeg,lonm:b.lonmin});
d=b.formatResult;break;case "DMS":b=this.getFormattedDMSStr(b,a,this.addSign);this["cc_"+f+"sub1val"].value=k.substitute("${latd} ${latm} ${lats}",{latd:b.latdeg,latm:b.latmin,lats:b.latsec});this["cc_"+f+"sub2val"].value=k.substitute("${lond} ${lonm} ${lons}",{lond:b.londeg,lonm:b.lonmin,lons:b.lonsec});d=b.formatResult;break;case "USNG":b=this.getFormattedUSNGStr(b,a,!1);this["cc_"+f+"sub1val"].value=b.gzd;this["cc_"+f+"sub2val"].value=b.grdsq;this["cc_"+f+"sub3val"].value=b.easting;this["cc_"+
f+"sub4val"].value=b.northing;d=b.formatResult;break;case "MGRS":b=this.getFormattedMGRSStr(b,a,!1);this["cc_"+f+"sub1val"].value=b.gzd;this["cc_"+f+"sub2val"].value=b.grdsq;this["cc_"+f+"sub3val"].value=b.easting;this["cc_"+f+"sub4val"].value=b.northing;d=b.formatResult;break;case "GARS":b=this.getFormattedGARSStr(b,a,!1);this["cc_"+f+"sub1val"].value=b.lon;this["cc_"+f+"sub2val"].value=b.lat;this["cc_"+f+"sub3val"].value=b.quadrant;this["cc_"+f+"sub4val"].value=b.key;d=b.formatResult;break;case "GEOREF":b=
this.getFormattedGEOREFStr(b,a,!1);this["cc_"+f+"sub1val"].value=b.lon+b.lat;this["cc_"+f+"sub2val"].value=b.quadrant15lon+b.quadrant15lat;this["cc_"+f+"sub3val"].value=b.quadrant1lon;this["cc_"+f+"sub4val"].value=b.quadrant1lat;d=b.formatResult;break;case "UTM":b=this.getFormattedUTMStr(b,a,!1);b.bandLetter.match(/^[AaBbYyZz]/)?(this["cc_"+f+"sub1val"].value="",this["cc_"+f+"sub2val"].value="",this["cc_"+f+"sub3val"].value="",this["cc_"+f+"sub4val"].value="",b.formatResult=""):(this["cc_"+f+"sub1val"].value=
b.zone,this["cc_"+f+"sub2val"].value=b.bandLetter,this["cc_"+f+"sub3val"].value=b.easting,this["cc_"+f+"sub4val"].value=b.westing);d=b.formatResult;break;case "UTM_H":b=this.getFormattedUTMHStr(b,a,!1),b.hemisphere.match(/^[AaBbYyZz]/)?(this["cc_"+f+"sub1val"].value="",this["cc_"+f+"sub2val"].value="",this["cc_"+f+"sub3val"].value="",this["cc_"+f+"sub4val"].value="",b.formatResult=""):(this["cc_"+f+"sub1val"].value=b.zone,this["cc_"+f+"sub2val"].value=b.hemisphere,this["cc_"+f+"sub3val"].value=b.easting,
this["cc_"+f+"sub4val"].value=b.westing),d=b.formatResult}}else d="";this.coordcontrols&&this.setSubCoordUI(l.contains(this.coordcontrols,"expanded"));this.coordtext&&(h.set(this.coordtext,"value",d),this.emit("get-coordinate-complete",d))},getFormattedCoordinates:function(){this.getCoordValues(this.currentClickPointDD,this.type,4).then(g.hitch(this,function(b){this.setCoordUI(b)}),g.hitch(this,function(b){console.log(b)}))},updateDisplay:function(){this.currentClickPoint&&(this.currentClickPointDD||
(this.currentClickPointDD=this.currentClickPoint),this.getFormattedCoordinates(this.currentClickPointDD),this.input&&(null!==this.graphicsLayer&&(this.graphicsLayer.clear(),this.currentClickPoint.spatialReference.wkid===this.parentWidget.map.spatialReference.wkid?this.graphicsLayer.add(new F(this.currentClickPoint)):this.getProjectedPoint(this.currentClickPointDD).then(g.hitch(this,function(b){this.graphicsLayer.add(new F(b))}),g.hitch(this,function(b){console.error(b)}))),n.publish("INPUTPOINTDIDCHANGE",
{mapPoint:this.currentClickPointDD,inputFromText:!0}),this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="inline-block")))},clear:function(){this.coordtext.value="";this.currentClickPointDDDD=this.currentClickPointDD=this.currentClickPoint=null;this.graphicsLayer.clear()},inputError:function(){this.setCoordUI()},getCleanInput:function(b){b=b.replace(/\n/g,"");b=b.replace(/\s+/g," ").trim();return b.toUpperCase()},getCoordValues:function(b,f,d){var a=new p;b={sr:4326,coordinates:[[b.x,
b.y]],conversionType:f.name?f.name:f,numOfDigits:d||6,rounding:!0,addSpaces:!1};switch(f){case "DD":b.numOfDigits=6;break;case "USNG":b.numOfDigits=5;break;case "MGRS":b.conversionMode="mgrsDefault";b.numOfDigits=5;break;case "UTM_H":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.addSpaces=!0;break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.addSpaces=!0;break;case "GARS":b.conversionMode="garsDefault"}this.geomsrvc.toGeoCoordinateString(b).then(function(b){a.resolve(b)},
function(){a.resolve(null)});return a.promise},getXYNotation:function(b,f){var d=new p,a;a=f.name?f.name:f;f={sr:4326,conversionType:a,strings:[]};switch(a){case "DD":case "DDM":case "DMS":f.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(b);break;case "DDrev":f.conversionType="DD";f.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(b);break;case "DDMrev":f.conversionType="DDM";f.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,
"");f.strings.push(b);break;case "DMSrev":f.conversionType="DMS";f.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(b);break;case "USNG":f.strings.push(b);f.addSpaces="false";break;case "MGRS":f.conversionMode="mgrsNewStyle";f.strings.push(b);f.addSpaces="false";break;case "UTM_H":f.conversionType="utm";f.conversionMode="utmNorthSouth";f.strings.push(b);break;case "UTM":f.conversionType="utm";f.conversionMode="utmDefault";f.strings.push(b);break;case "GARS":f.conversionMode=
"garsCenter";f.strings.push(b);break;case "GEOREF":f.strings.push(b)}this.geomsrvc.fromGeoCoordinateString(f).then(function(b){d.resolve(b)},function(){d.resolve(null)});return d.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(b){return b.source}).join("")),
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),
notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DMSLatLongNotation,
conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(b){return b.source}).join("")),notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",
pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,
/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(b){return b.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(b){return b.source}).join("")),notationType:this.nls.UTMBandNotation,conversionType:"UTM"},
{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(b){return b.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM_H"}]},getCoordinateType:function(b){var f=this.getCleanInput(b);b=new p;var d=this.getNotations(),f=c.filter(d,function(b){return b.pattern.test(this.v)},{v:f});0<f.length?b.resolve(f):b.resolve(null);return b.promise},getFormattedDDStr:function(b,f,d){var a={};a.sourceValue=b;a.sourceFormatString=
f;b=b[0].split(/[ ,]+/);a.latdeg=b[0].replace(/[nNsS]/,"");a.londeg=b[1].replace(/[eEwW]/,"");d&&("N"===b[0].slice(-1)?a.latdeg="+"+a.latdeg:a.latdeg="-"+a.latdeg,"W"===b[1].slice(-1)?a.londeg="-"+a.londeg:a.londeg="+"+a.londeg);f=f.replace(/X/,a.londeg);f=f.replace(/[eEwW]/,b[1].slice(-1));f=f.replace(/[nNsS]/,b[0].slice(-1));f=f.replace(/Y/,a.latdeg);a.formatResult=f;return a},getFormattedDDMStr:function(b,f,d){var a={};a.sourceValue=b;a.sourceFormatString=f;a.parts=b[0].split(/[ ,]+/);a.latdeg=
a.parts[0];a.latmin=a.parts[1].replace(/[nNsS]/,"");a.londeg=a.parts[2];a.lonmin=a.parts[3].replace(/[eEwW]/,"");d&&("N"===a.parts[1].slice(-1)?a.latdeg="+"+a.latdeg:a.latdeg="-"+a.latdeg,"W"===a.parts[3].slice(-1)?a.londeg="-"+a.londeg:a.londeg="+"+a.londeg);b=f.replace(/[EeWw]/,a.parts[3].slice(-1));b=b.replace(/Y/,a.lonmin);b=b.replace(/X/,a.londeg);b=b.replace(/[NnSs]/,a.parts[1].slice(-1));b=b.replace(/B/,a.latmin);b=b.replace(/A/,a.latdeg);a.formatResult=b;return a},getFormattedDMSStr:function(b,
f,d){var a={};a.sourceValue=b;a.sourceFormatString=f;a.parts=b[0].split(/[ ,]+/);a.latdeg=a.parts[0];a.latmin=a.parts[1];a.latsec=a.parts[2].replace(/[NnSs]/,"");a.londeg=a.parts[3];a.lonmin=a.parts[4];a.parts[5]&&(a.lonsec=a.parts[5].replace(/[EWew]/,""));d&&("N"===a.parts[2].slice(-1)?a.latdeg="+"+a.latdeg:a.latdeg="-"+a.latdeg,"W"===a.parts[5].slice(-1)?a.londeg="-"+a.londeg:a.londeg="+"+a.londeg);b=f.replace(/A/,a.latdeg);b=b.replace(/B/,a.latmin);b=b.replace(/C/,a.latsec);b=b.replace(/X/,a.londeg);
b=b.replace(/Y/,a.lonmin);b=b.replace(/Z/,a.lonsec);b=b.replace(/[NnSs]/,a.parts[2].slice(-1));a.parts[5]&&(b=b.replace(/[EeWw]/,a.parts[5].slice(-1)));a.formatResult=b;return a},getFormattedUSNGStr:function(b,f){var a={};a.sourceValue=b;a.sourceFormatString=f;b[0].match(/^[ABYZ]/)?a.gzd=b[0].match(/[ABYZ]/)[0].trim():a.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();b[0].replace(a.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)&&(a.grdsq=b[0].replace(a.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim());b[0].replace(a.gzd+
a.grdsq,"").match(/^\d{1,5}/)&&(a.easting=b[0].replace(a.gzd+a.grdsq,"").match(/^\d{1,5}/)[0].trim());b[0].replace(a.gzd+a.grdsq,"").match(/\d{1,5}$/)&&(a.northing=b[0].replace(a.gzd+a.grdsq,"").match(/\d{1,5}$/)[0].trim());b=f.replace(/Y/,a.northing);b=b.replace(/X/,a.easting);b=b.replace(/S/,a.grdsq);b=b.replace(/Z/,a.gzd);a.formatResult=b;return a},getFormattedMGRSStr:function(b,a){var f={};f.sourceValue=b;f.sourceFormatString=a;b[0].match(/^[ABYZ]/)?f.gzd=b[0].match(/[ABYZ]/)[0].trim():f.gzd=
b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();f.grdsq=b[0].replace(f.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();f.easting=b[0].replace(f.gzd+f.grdsq,"").match(/^\d{1,5}/)[0].trim();f.northing=b[0].replace(f.gzd+f.grdsq,"").match(/\d{1,5}$/)[0].trim();b=a.replace(/Y/,f.northing);b=b.replace(/X/,f.easting);b=b.replace(/S/,f.grdsq);b=b.replace(/Z/,f.gzd);f.formatResult=b;return f},getFormattedGARSStr:function(b,f){var a={};a.sourceValue=b;a.sourceFormatString=f;a.lon=b[0].match(/\d{3}/);a.lat=b[0].match(/[a-zA-Z]{2}/);
b=b[0].match(/\d*$/);a.quadrant=b[0][0];a.key=b[0][1];f=f.replace(/K/,a.key);f=f.replace(/Q/,a.quadrant);f=f.replace(/Y/,a.lat);f=f.replace(/X/,a.lon);a.formatResult=f;return a},getFormattedGEOREFStr:function(b,f){var a={};a.sourceValue=b;a.sourceFormatString=f;a.lon=b[0].match(/[a-zA-Z]{1}/)[0].trim();a.lat=b[0].replace(a.lon,"").match(/[a-zA-Z]{1}/)[0].trim();a.quadrant15lon=b[0].replace(a.lon+a.lat,"").match(/[a-zA-Z]{1}/)[0].trim();a.quadrant15lat=b[0].replace(a.lon+a.lat+a.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();
b=b[0].replace(a.lon+a.lat+a.quadrant15lon+a.quadrant15lat,"");a.quadrant1lon=b.substr(0,b.length/2);a.quadrant1lat=b.substr(b.length/2,b.length);f=f.replace(/Y/,a.quadrant1lat);f=f.replace(/X/,a.quadrant1lon);f=f.replace(/D/,a.quadrant15lat);f=f.replace(/C/,a.quadrant15lon);f=f.replace(/B/,a.lat);f=f.replace(/A/,a.lon);a.formatResult=f;return a},getFormattedUTMStr:function(b,a){var f={};f.sourceValue=b;f.sourceFormatString=a;f.parts=b[0].split(/[ ,]+/);f.zone=f.parts[0].replace(/[A-Z]/,"");f.bandLetter=
f.parts[0].slice(-1);f.easting=f.parts[1];f.westing=f.parts[2];b=a.replace(/Y/,f.westing);b=b.replace(/X/,f.easting);b=b.replace(/B/,f.bandLetter);b=b.replace(/Z/,f.zone);f.formatResult=b;return f},getFormattedUTMHStr:function(b,f){var a={};a.sourceValue=b;a.sourceFormatString=f;a.parts=b[0].split(/[ ,]+/);a.zone=a.parts[0].replace(/[A-Z]/,"");a.hemisphere=a.parts[0].slice(-1);a.easting=a.parts[1];a.westing=a.parts[2];b=f.replace(/Y/,a.westing);b=b.replace(/X/,a.easting);b=b.replace(/H/,a.hemisphere);
b=b.replace(/Z/,a.zone);a.formatResult=b;return a}})})},"jimu/dijit/_CoordinateControlFormatNotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(r,c,g,m,a,e,h,l){return r([e,h,l],{baseClass:"jimu-coordinate-control",templateString:'\x3cdiv\x3e\x3cspan class\x3d"formatText"\x3e${nls.editCoordinateDialogTitle}\x3c/span\x3e\x3cdiv class\x3d"controlContainer"\x3e\x3cselect tabindex\x3d"0" class\x3d"selectFormat" data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.editCoordinateDialogTitle}" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\x3c/select\x3e\x3cinput tabindex\x3d"0" type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput"\x3e\x3c/input\x3e\x3cdiv class\x3d"settingsContainer" data-dojo-attach-point\x3d"prefixContainer"\x3e\x3cdiv class\x3d"formatText" data-dojo-attach-point\x3d"addSignChkBox" label\x3d"${nls.posNegPrefixLabel}" data-dojo-type\x3d"jimu/dijit/CheckBox"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btnContainer"\x3e\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.applyButtonLabel}" data-dojo-attach-point\x3d"applyButton" class\x3d"jimu-btn"\x3e${nls.applyButtonLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.cancelButtonLabel}" class\x3d"jimu-btn formatCoordCancelButton"\x3e${nls.cancelButtonLabel}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isCanceled:!1,formats:{},setCt:function(a){this.ct=a;this.frmtSelect.set("value",this.ct)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,
useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},UTM_H:{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};var e=[],h,g;for(g in this.formats)h={value:g,label:this.nls.notations[g]},e.push(h);this.frmtSelect.addOption(e);a.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(m(this.frmtSelect,"change",c.hitch(this,this.frmtSelectValueDidChange)));this.own(m(this.frmtVal,"change",c.hitch(this,
this.formatValDidChange)));this.own(m(this.cancelButton,"click",c.hitch(this,function(){this.isCanceled=!0})));this.own(m(this.applyButton,"click",c.hitch(this,function(){this.isCanceled=!1})));this.displayPrefixContainer()},formatValDidChange:function(){var c=a.get(this.frmtVal,"value"),e=this.frmtSelect.get("value");this.formats[e].customFormat=c;this.formats[e].useCustom=!0},frmtSelectValueDidChange:function(c){var e=this.formats[c].useCustom?this.formats[c].customFormat:this.formats[c].defaultFormat;
this.ct=c;a.set(this.frmtVal,"value",e);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.ct){case "DD":case "DDM":case "DMS":g.set(this.prefixContainer,{display:""});break;default:g.set(this.prefixContainer,{display:"none"})}}})})},"jimu/dijit/_CoordinateControlConfirmNotation":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/aspect dojo/keys dojo/query dijit/Dialog dijit/form/Select dojo/_base/lang".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n){return r([q],{baseClass:"jimu-coordinate-control",numberOfInputs:0,selectOptions:{},comboOptions:{},dfd:null,constructor:function(a){n.mixin(this,a);this.numberOfInputs=a.options.length;this.selectOptions=a.options},postCreate:function(){this.inherited("postCreate",arguments);this.closable=!1;this.closeButtonNode.style.display="none";"DartTheme"===this.theme&&a.add(this.containerNode,"coordinateControlDialog");this.message=m.create("div",{style:"margin-bottom: 5px"},
this.containerNode,"first");this.message.innerHTML=this.numberOfInputs+" "+this.nls.multipleNotationLabel;this.comboOptions=new k({style:{width:"99%"},"aria-label":this.numberOfInputs+" "+this.nls.multipleNotationLabel},m.create("div",{},this.containerNode,"last"));this.own(e.after(this.comboOptions,"onChange",g.hitch(this,this._onComboOptionsChanged)));for(var d=0;d<this.selectOptions.length;d++)this.comboOptions.addOption({value:this.selectOptions[d].name,label:this.selectOptions[d].notationType});
this.buttonDiv=m.create("div",{"class":"buttonContainer",style:"margin-top:10px;"+(window.isRTL?"text-align:left":"text-align:right")},this.containerNode,"last");this.okButton=m.create("div",{innerHTML:this.nls.applyButtonLabel,"class":"jimu-btn",role:"button",tabindex:"0","aria-label":this.nls.applyButtonLabel,onclick:n.hitch(this,function(){this.hide();this.dfd.resolve()}),onkeypress:n.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)this.hide(),this.dfd.resolve()})},this.buttonDiv,
"first");this.cancelButton=m.create("div",{innerHTML:this.nls.cancelButtonLabel,"class":"jimu-btn",style:"margin: 0 5px 0 5px",role:"button",tabindex:"0","aria-label":this.nls.cancelButtonLabel,onclick:n.hitch(this,function(){this.hide();this.dfd.cancel()}),onkeypress:n.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)this.hide(),this.dfd.cancel()})},this.buttonDiv,"last")},show:function(){this.inherited("show",arguments);this.dfd=new c;var d=this._getDOMElement(".dijitSelectLabel",
this.comboOptions.domNode);d&&a.add(d,"dijitSelectLabelConfirmNotation");return this.dfd},_onComboOptionsChanged:function(){var d=this._getDOMElement(".dijitSelectLabel",this.comboOptions.domNode);d&&a.add(d,"dijitSelectLabelConfirmNotation")},_getDOMElement:function(a,c){return(a=l(a,c))&&1===a.length?a[0]:null}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(r,c,g,m){return r("dijit.form.Textarea",[m,g],
{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);c.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(r,c,g,m,a,e,h){g.add("textarea-needs-help-shrinking",
function(){var a=e.body(),h=c.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},a,"last"),g=h.scrollHeight>=h.clientHeight;a.removeChild(h);return g});return r("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);
this.resize()},postCreate:function(){this.inherited(arguments);var c=this.textbox;c.style.overflowY="hidden";this.own(a(c,"focus, resize",m.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(h.on("resize",m.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(a){this.inherited(arguments);this.resize()},_estimateHeight:function(){var a=this.textbox;a.rows=(a.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function a(){var b=
!1;""===c.value&&(c.value=" ",b=!0);var a=c.scrollHeight;b&&(c.value="");return a}var c=this.textbox;"hidden"==c.style.overflowY&&(c.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(a()||c.offsetHeight){var e=a()+Math.max(c.offsetHeight-c.clientHeight,0),h=e+"px";h!=c.style.height&&(c.style.height=h,c.rows=1);if(g("textarea-needs-help-shrinking")){var d=a(),p=c.style.minHeight,b=4,v=c.scrollTop;c.style.minHeight=h;for(c.style.height="auto";0<e;){c.style.minHeight=Math.max(e-b,4)+"px";h=
a();d-=h;e-=d;if(d<b)break;d=h;b<<=1}c.style.height=e+"px";c.style.minHeight=p;c.scrollTop=v}c.style.overflowY=a()>c.clientHeight?"auto":"hidden";"hidden"==c.style.overflowY&&(c.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t,f,x,D,L,w,u,C,A){x=m("dijit._InlineEditor",[f,x,D],{templateString:A,contextRequire:r,postMixInProperties:function(){this.inherited(arguments);this.messages=q.getLocalization("dijit","common",this.lang);c.forEach(["buttonSave","buttonCancel"],function(b){this[b]||(this[b]=this.messages[b])},this)},buildRendering:function(){this.inherited(arguments);var b="string"==typeof this.editor?d.getObject(this.editor)||r(this.editor):this.editor,a=this.sourceStyle,
f="line-height:"+a.lineHeight+";",x=l.getComputedStyle(this.domNode);c.forEach(["Weight","Family","Size","Style"],function(b){x["font"+b]!=a["font"+b]&&(f+="font-"+b+":"+a["font"+b]+";")},this);c.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(b){this.domNode.style[b]=a[b]},this);var e=this.inlineEditBox.width;"100%"==e?(f+="width:100%;",this.domNode.style.display="block"):f+="width:"+(e+(Number(e)==e?"px":""))+";";e=d.delegate(this.inlineEditBox.editorParams,
{style:f,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new b(e,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,h.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var b=this.editWidget;this.inlineEditBox.autoSave?this.own(g.after(b,"onChange",d.hitch(this,"_onChange"),!0),p(b,"keydown",d.hitch(this,"_onKeyDown"))):"intermediateChanges"in b&&(b.set("intermediateChanges",
!0),this.own(g.after(b,"onChange",d.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var b=this.editWidget;return String(b.get("displayedValue"in b||"_getDisplayedValueAttr"in b?"displayedValue":
"value"))},_onKeyDown:function(b){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!b.altKey&&!b.ctrlKey&&(b.keyCode==n.ESCAPE?(b.stopPropagation(),b.preventDefault(),this.cancel(!0)):b.keyCode==n.ENTER&&"INPUT"==b.target.tagName&&(b.stopPropagation(),b.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&t.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(t._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){u.selectInputText(this.editWidget.focusNode)}))}});f=m("dijit.InlineEditBox"+(b("dojo-bidi")?"_NoBidi":""),f,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:C,editorWrapper:x,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=b("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(p(this.displayNode,H,d.hitch(this,"_onClick")),p(this.displayNode,"mouseover, focus",d.hitch(this,"_onMouseOver")),p(this.displayNode,"mouseout, blur",d.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=d.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);e.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(b){k.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.domNode.setAttribute("aria-disabled",b?"true":"false");b?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);e.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",b);this._set("disabled",b)},_onMouseOver:function(){this.disabled||e.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){e.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(b){this.disabled||(b&&(b.stopPropagation(),b.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
a.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var b=h.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?d.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:l.getComputedStyle(this.displayNode),save:d.hitch(this,"save"),cancel:d.hitch(this,"cancel"),
textDir:this.textDir},b);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var f=this.wrapperWidget;e.add(this.displayNode,"dijitOffScreen");e.remove(f.domNode,"dijitOffScreen");l.set(f.domNode,{visibility:"visible"});a.set(this.displayNode,"tabIndex","-1");var x=f.editWidget,c=this;v(x.onLoadDeferred,d.hitch(f,function(){x.set("displayedValue"in x||"_setDisplayedValueAttr"in x?"displayedValue":"value",c.value);this.defer(function(){f.saveButton&&f.saveButton.set("disabled",
"intermediateChanges"in x);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(b){var f=this.wrapperWidget;l.set(f.domNode,{visibility:"hidden"});e.add(f.domNode,"dijitOffScreen");e.remove(this.displayNode,"dijitOffScreen");a.set(this.displayNode,"tabIndex",this._savedTabIndex);b&&
t.focus(this.displayNode)},save:function(b){if(!this.disabled&&this.editing){this._set("editing",!1);var a=this.wrapperWidget.getValue();this.set("value",a);this._showText(b)}},setValue:function(b){k.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){b=d.trim(b);var a=this.renderAsHtml?b:b.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":a||this.noValueIndicator;this._set("value",b);this._started&&this.defer(function(){this.onChange(b)})},getValue:function(){k.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(b){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(b))}});b("dojo-bidi")&&(f=m("dijit.InlineEditBox",
f,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));f._InlineEditor=x;return f})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(r,c,g,m,a,e,h){var l={_defaultStandbyParams:{image:h.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(c){if(c=this._normalizeParams(c))return c=new e(l._toStandbyParams(c)),
a.place(c.domNode,g.doc.body),l._createHandle(c)},_normalizeParams:function(a){if(a){if(a.target)return a;if("string"===typeof a){var c=r.byId(a);a=c?c.domNode:m.byId(a)}else a=a.domNode?a.domNode:m.byId(a);if(a)return{target:a}}},_toStandbyParams:function(a){a.imageUrl&&(a.image=a.imageUrl);a.backgroundColor&&(a.color=a.backgroundColor);a.backgroundOpacity&&(a.opacity=a.backgroundOpacity);a.fadeDuration&&(a.duration=a.fadeDuration);return c.mixin({},l._defaultStandbyParams,a)},_createHandle:function(a){return{show:function(){a&&
a.show()},hide:function(){a&&a.hide()},destroy:function(){a&&(a.destroy(),a=null)}}}};return l})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t){r.experimental("dojox.widget.Standby");
return c("dojox.widget.Standby",[v,H],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(b){if(!this._started){if("string"===typeof this.target){var f=t.byId(this.target);this.target=f?f.domNode:e.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,h.set(this._imageNode,"src",this.image),h.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;k.set(this._underlayNode,
{display:"none",backgroundColor:this.color});k.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=d.body()&&d.body().appendChild(this.domNode);7==a("ie")&&(this._ieFixNode=l.create("div"),k.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),d.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(f){console.error(f)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
k.set(this._centerNode,"display","none");k.set(this._underlayNode,"display","none");7==a("ie")&&this._ieFixNode&&(d.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var b=h.get(d.body(),"dir");b&&(b=b.toLowerCase());var x,c=this._scrollerWidths(),e=this.target,t=k.get(this._centerNode,"display");k.set(this._centerNode,
"display","block");var u=q.position(e,!0);if(e===d.body()||e===d.doc)u=n.getBox(),u.x=u.l,u.y=u.t;var v=q.getMarginBox(this._centerNode);k.set(this._centerNode,"display",t);this._ieFixNode&&(x=-this._ieFixNode.offsetTop/1E3,u.x=Math.floor((u.x+.9)/x),u.y=Math.floor((u.y+.9)/x),u.w=Math.floor((u.w+.9)/x),u.h=Math.floor((u.h+.9)/x));var g=k.get(e,"zIndex"),p=t=g;if("auto"===this.zIndex)if("auto"!=g)t=parseInt(t,10),p=parseInt(p,10);else{var l=e;if(l&&l!==d.body()&&l!==d.doc)for(l=e.parentNode,x=-1E5;l&&
l!==d.body();)(g=k.get(l,"zIndex"))&&"auto"!==g&&(g=parseInt(g,10),x<g&&(x=g,t=g+1,p=g+1)),l=l.parentNode}else t=parseInt(this.zIndex,10),p=parseInt(this.zIndex,10);k.set(this._centerNode,"zIndex",p);k.set(this._underlayNode,"zIndex",t);if((t=e.parentNode)&&t!==d.body()&&e!==d.body()&&e!==d.doc){l=u.h;p=u.w;e=q.position(t,!0);this._ieFixNode&&(x=-this._ieFixNode.offsetTop/1E3,e.x=Math.floor((e.x+.9)/x),e.y=Math.floor((e.y+.9)/x),e.w=Math.floor((e.w+.9)/x),e.h=Math.floor((e.h+.9)/x));e.w-=t.scrollHeight>
t.clientHeight&&0<t.clientHeight?c.v:0;e.h-=t.scrollWidth>t.clientWidth&&0<t.clientWidth?c.h:0;"rtl"===b&&(a("opera")?(u.x+=t.scrollHeight>t.clientHeight&&0<t.clientHeight?c.v:0,e.x+=t.scrollHeight>t.clientHeight&&0<t.clientHeight?c.v:0):a("ie")?e.x+=t.scrollHeight>t.clientHeight&&0<t.clientHeight?c.v:0:a("webkit"));e.w<u.w&&(u.w-=e.w);e.h<u.h&&(u.h-=e.h);var H=e.y,m=e.y+e.h,r=u.y,M=u.y+l,b=e.x;x=e.x+e.w;var g=u.x,N=u.x+p;if(M>H&&r<H)u.y=e.y,l-=H-r,u.h=l<e.h?l:u.h-2*(t.scrollWidth>t.clientWidth&&
0<t.clientWidth?c.h:0);else if(r<m&&M>m)u.h=m-r;else if(M<=H||r>=m)u.h=0;if(N>b&&g<b)u.x=e.x,p-=b-g,u.w=p<e.w?p:u.w-2*(t.scrollHeight>t.clientHeight&&0<t.clientHeight?c.w:0);else if(g<x&&N>x)u.w=x-g;else if(N<=b||g>=x)u.w=0}0<u.h&&0<u.w?(k.set(this._underlayNode,{display:"block",width:u.w+"px",height:u.h+"px",top:u.y+"px",left:u.x+"px"}),c=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(c),a("ie")||(c="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(c,this)),c=u.h/2-v.h/2,t=u.w/2-v.w/2,u.h>=v.h&&u.w>=v.w?k.set(this._centerNode,{top:c+u.y+"px",left:t+u.x+"px",display:"block"}):k.set(this._centerNode,"display","none")):(k.set(this._underlayNode,"display","none"),k.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var Q=this;this._resizeCheck=setInterval(function(){Q._size()},100)}}},_cloneStyles:function(b){g.forEach(b,function(b){k.set(this._underlayNode,b,k.get(this.target,b))},this)},_fadeIn:function(){var a=
this,d=p.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:a.opacity}}}),c=p.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){a.onShow();delete a._anim}});this._anim=b.combine([d,c]);this._anim.play()},_fadeOut:function(){var a=this,d=p.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:a.opacity,end:0}},onEnd:function(){k.set(this.node,{display:"none",zIndex:"-1000"})}}),
c=p.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){k.set(this.node,{display:"none",zIndex:"-1000"});a.onHide();a._enableOverflow();delete a._anim}});this._anim=b.combine([d,c]);this._anim.play()},_ignore:function(b){b&&m.stop(b)},_scrollerWidths:function(){var b=l.create("div");k.set(b,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var a=l.create("div");
k.set(a,{width:"200px",height:"10px"});b.appendChild(a);d.body().appendChild(b);a=q.getContentBox(b);k.set(b,"overflow","scroll");var c=q.getContentBox(b);d.body().removeChild(b);return{v:a.w-c.w,h:a.h-c.h}},_setTextAttr:function(b){this.text=this._textNode.innerHTML=b},_setColorAttr:function(b){k.set(this._underlayNode,"backgroundColor",b);this.color=b},_setImageTextAttr:function(b){h.set(this._imageNode,"alt",b);this.imageText=b},_setImageAttr:function(b){h.set(this._imageNode,"src",b);this.image=
b},_setCenterIndicatorAttr:function(b){this.centerIndicator=b;"image"===b?(this._centerNode=this._imageNode,k.set(this._textNode,"display","none")):(this._centerNode=this._textNode,k.set(this._imageNode,"display","none"))},_setTargetAttr:function(b){if("string"===typeof b){var a=t.byId(b);this._set("target",a?a.domNode:e.byId(b))}else this._set("target",b)},_disableOverflow:function(){if(this.target===d.body()||this.target===d.doc){this._overflowDisabled=!0;var b=d.body();this._oldOverflow=b.style&&
b.style.overflow?k.get(b,"overflow"):"";if(a("ie")&&!a("quirks")){if(b.parentNode&&b.parentNode.style&&b.parentNode.style.overflow)this._oldBodyParentOverflow=b.parentNode.style.overflow;else try{this._oldBodyParentOverflow=k.get(b.parentNode,"overflow")}catch(x){this._oldBodyParentOverflow="scroll"}k.set(b.parentNode,"overflow","hidden")}k.set(b,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var b=d.body();a("ie")&&!a("quirks")&&(b.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);k.set(b,"overflow",this._oldOverflow);if(a("webkit")){var c=l.create("div",{style:{height:"2px"}});b.appendChild(c);setTimeout(function(){b.removeChild(c)},0)}delete this._oldOverflow}}})})},"esri/toolbars/edit":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/has dojo/dom-construct dojo/dom-style ../kernel ../lang ../sniff ./_toolbar ./_Box ./_GraphicMover ./_VertexEditor ./TextEditor ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/TextSymbol ../graphic".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t,f,x,D,L){var w=c(p,{declaredClass:"esri.toolbars.Edit",constructor:function(b,a){this._map=b;this._tool=0;if(this._map.loaded)this._scratchGL=b.graphics;else var d=m.connect(this._map,"onLoad",this,function(){m.disconnect(d);d=null;this._scratchGL=this._map.graphics});b=h("esri-mobile");this._defaultOptions=g.mixin({vertexSymbol:new f(f.STYLE_CIRCLE,b?20:12,new x(x.STYLE_SOLID,new e([0,0,0,.5]),1),new e([128,128,128])),ghostVertexSymbol:new f(f.STYLE_CIRCLE,
b?18:10,new x(x.STYLE_SOLID,new e([0,0,0,.5]),1),new e([255,255,255,.75])),ghostLineSymbol:new x(x.STYLE_DOT,new e([128,128,128]),2),allowDeleteVertices:!0,allowAddVertices:!0,rotateHandleOffset:b?24:16,boxLineSymbol:new x(x.STYLE_DASH,new e([64,64,64]),1),boxHandleSymbol:new f(f.STYLE_SQUARE,b?16:9,new x(x.STYLE_SOLID,new e([0,0,0,.5]),1),new e([255,255,255,.75])),textAnchorSymbol:new f(f.STYLE_CIRCLE,10,null,new e([255,0,0]))},a||{})},activate:function(b,a,f){this.deactivate();this._graphic=a;this._options=
g.mixin(g.mixin({},this._defaultOptions),f||{});var d=w.MOVE;f=w.EDIT_VERTICES;var c=w.SCALE,e=w.ROTATE,x=w.EDIT_TEXT,t=!1,h=!1,D=!1,v=this._map,u=v.spatialReference,p=a.geometry.spatialReference;this._geo=!(!u||!p||u.equals(p)||!u.isWebMercator()||4326!==p.wkid);this._isTextPoint=this._prepareTextSymbolEditing(a,b);(b&d)===d&&(t=this._enableMove(a));d=(b&c)===c;e=(b&e)===e;if(d||e)D=this._enableBoxEditing(a,d,e);(b&f)===f&&(h=this._enableVertexEditing(a));(b&x)===x&&this._enableTextEditing(a);if(!(t||
h||D))throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");if(this._tool=b)this._mapPanEndHandle=m.connect(v,"onPanEnd",this,this._mapPanEndHandler),this._mapExtChgHandle=m.connect(v,"onExtentChange",this,this._mapExtentChangeHandler),this.onActivate(this._tool,a);v.snappingManager&&(t||h)&&v.snappingManager._startSelectionLayerQuery()},deactivate:function(){this._isTextPoint=null;var b=this._tool,a=this._graphic;if(b){var f=
!!this._modified;this._clear();m.disconnect(this._mapPanEndHandle);m.disconnect(this._mapExtChgHandle);this._graphic=this._geo=this._mapPanEndHandle=this._mapExtChgHandle=null;this.onDeactivate(b,a,{isModified:f});this._map.snappingManager&&this._map.snappingManager._stopSelectionLayerQuery()}},refresh:function(){this._refreshMoveables(!0)},getCurrentState:function(){return{tool:this._tool,graphic:this._graphic,isModified:!!this._modified}},onActivate:function(b,a){},onDeactivate:function(b,a,f){},
onGraphicMoveStart:function(b){},onGraphicFirstMove:function(b){this._modified=!0},onGraphicMove:function(b,a){},onGraphicMoveStop:function(b,a){},onGraphicClick:function(b,a){},onVertexMoveStart:function(b,a){},onVertexFirstMove:function(b,a){this._modified=!0},onVertexMove:function(b,a,f){},onVertexMoveStop:function(b,a,f){},onVertexAdd:function(b,a){this._modified=!0},onVertexClick:function(b,a){},onVertexMouseOver:function(b,a){},onVertexMouseOut:function(b,a){},onVertexDelete:function(b,a){this._modified=
!0},onTextEditStart:function(b,a){},onTextEditEnd:function(b){},onScaleStart:function(b){},onScaleFirstMove:function(b){this._modified=!0},onScale:function(b,a){},onScaleStop:function(b,a){},onRotateStart:function(b){},onRotateFirstMove:function(b){this._modified=!0},onRotate:function(b,a){},onRotateStop:function(b,a){},_eventMap:{activate:["tool","graphic"],deactivate:["tool","graphic","info"],"graphic-move-start":["graphic"],"graphic-first-move":["graphic"],"graphic-move":["graphic","transform"],
"graphic-move-stop":["graphic","transform"],"graphic-click":["graphic","info"],"vertex-move-start":["graphic","vertexinfo"],"vertex-first-move":["graphic","vertexinfo"],"vertex-move":["graphic","vertexinfo","transform"],"vertex-move-stop":["graphic","vertexinfo","transform"],"vertex-add":["graphic","vertexinfo"],"vertex-click":["graphic","vertexinfo"],"vertex-mouse-over":["graphic","vertexinfo"],"vertex-mouse-out":["graphic","vertexinfo"],"vertex-delete":["graphic","vertexinfo"],"scale-start":["graphic"],
"scale-first-move":["graphic"],scale:["graphic","info"],"scale-stop":["graphic","info"],"rotate-start":["graphic"],"rotate-first-move":["graphic"],rotate:["graphic","info"],"rotate-stop":["graphic","info"]},_prepareTextSymbolEditing:function(b,a){if("point"===b.geometry.type||"multipoint"===b.geometry.type){var f=b.getLayer(),d=f.renderer,f=b.symbol||f._getSymbol(b);!f&&(d.hasVisualVariables("sizeInfo",!1)||d.hasVisualVariables("colorInfo",!1)||d.hasVisualVariables("opacityInfo",!1))&&d.addBreak&&
d.infos&&1===d.infos.length&&(f=d.infos[0].symbol||d.defaultSymbol);if(f&&"textsymbol"===f.type){if((a&w.SCALE)===w.SCALE||(a&w.ROTATE)===w.ROTATE||(a&w.EDIT_TEXT)===w.EDIT_TEXT){b.setSymbol(new D(f.toJson()));var c=this;this._textSymbolEditor?(this._textSymbolEditor.createForm(b),this._textSymbolEditor.show()):this._options&&this._options.textSymbolEditor?(this._textSymbolEditor=this._options.textSymbolEditor,this._textSymbolEditor.on("symbol-change",function(){c._boxEditor&&c._boxEditor.refresh()})):
r(["../dijit/SymbolEditor"],function(a){if(!c._textSymbolEditor){var f;f=c._options.textSymbolEditorHolder?l.create("div",null,c._options.textSymbolEditorHolder):l.create("div",null,c._map.root);c._textSymbolEditor=new a({graphic:b},f);a=c._textSymbolEditor.domNode.parentNode.id;q.set(c._textSymbolEditor.domNode,{position:"map_root"===a?"absolute":"relative",left:"map_root"===a?c._map.width/2-100+"px":"5px",top:"20px","z-index":50});c._textSymbolEditor.startup();c._textSymbolEditor.createForm(b);
c._textSymbolEditor.show();c._textSymbolEditor.on("symbol-change",function(){c._boxEditor&&c._boxEditor.refresh()})}})}if((a&w.MOVE)===w.MOVE||(a&w.ROTATE)===w.ROTATE||(a&w.SCALE)===w.SCALE)this._textAnchor=new L(b.geometry,this._options.textAnchorSymbol),this._scratchGL.add(this._textAnchor);return!0}}return!1},_enableMove:function(b){var a=this._map;switch(b.geometry.type){case "point":case "polyline":case "polygon":return this._graphicMover=new v(b,a,this,this._textAnchor),!0}return!1},_enableVertexEditing:function(b){var a=
this._map;switch(b.geometry.type){case "multipoint":case "polyline":case "polygon":return this._vertexEditor=H.create(b,a,this),!0}return!1},_enableBoxEditing:function(a,f,d){var c=this._map,e=a.geometry.type;return"polyline"===e||"polygon"===e||this._isTextPoint?(this._boxEditor=new b(a,c,this,f,d,this._options.uniformScaling,this._isTextPoint),!0):!1},_enableTextEditing:function(b){return this._isTextPoint?(this._textEditor=new t(b,this._map,this),m.connect(this._textEditor,"onEditStart",g.hitch(this,
function(){this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._map.disableKeyboardNavigation();this._disableMove();this._disableBoxEditing()})),!0):!1},_disableMove:function(){var b=this._graphicMover;b&&(b.destroy(),this._graphicMover=null)},_disableVertexEditing:function(){var b=this._vertexEditor;b&&(b.destroy(),this._vertexEditor=null)},_disableBoxEditing:function(){var b=this._boxEditor;b&&(b.destroy(),this._boxEditor=null)},_disableTextEditing:function(){this._textEditor&&
(this._textEditor.destroy(),this._textEditor=null);this._map.enableKeyboardNavigation()},_disableSymbolEditing:function(){this._textSymbolEditor&&this._textSymbolEditor.hide()},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._disableTextEditing();this._disableSymbolEditing();this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._tool=0;this._modified=!1},_mapPanEndHandler:function(){this._refreshMoveables()},
_mapExtentChangeHandler:function(b,a,f){f&&this._refreshMoveables()},_refreshMoveables:function(b){var f=a.filter([this._graphicMover,this._vertexEditor,this._boxEditor],n.isDefined);a.forEach(f,function(a){a.refresh(b)})},_beginOperation:function(b){a.forEach(this._getAffectedTools(b),function(b){b.suspend()})},_endOperation:function(b){a.forEach(this._getAffectedTools(b),function(b){b.resume()})},_getAffectedTools:function(b){var f=[];switch(b){case "MOVE":f=[this._vertexEditor,this._boxEditor];
break;case "VERTICES":f=[this._boxEditor];break;case "BOX":f=[this._vertexEditor]}return f=a.filter(f,n.isDefined)}});g.mixin(w,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8,EDIT_TEXT:16});h("extend-esri")&&g.setObject("toolbars.Edit",w,k);return w})},"esri/toolbars/_Box":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/has dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../lang ../geometry/Point ../geometry/Polyline ../symbols/SimpleMarkerSymbol ../geometry/webMercatorUtils ../geometry/jsonUtils ../graphic".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t){r=r(null,{declaredClass:"esri.toolbars._Box",constructor:function(b,a,d,e,t,h,g){this._graphic=b;this._map=a;this._toolbar=d;this._scale=e;this._rotate=t;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=h;b=d._options;this._markerSymbol=b.boxHandleSymbol;this._lineSymbol=b.boxLineSymbol;this._moveStartHandler=c.hitch(this,this._moveStartHandler);this._firstMoveHandler=c.hitch(this,this._firstMoveHandler);
this._moveStopHandler=c.hitch(this,this._moveStopHandler);this._moveHandler=c.hitch(this,this._moveHandler);this._isTextPoint=g;this._init()},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null},refresh:function(){this._draw()},suspend:function(){g.forEach(this._getAllGraphics(),function(b){b.hide()})},resume:function(){g.forEach(this._getAllGraphics(),function(b){b.show()});this._draw()},_init:function(){this._draw()},_cleanUp:function(){this._connects&&
g.forEach(this._connects,m.disconnect);var b=this._toolbar._scratchGL;this._anchors&&g.forEach(this._anchors,function(a){b.remove(a.graphic);(a=a.moveable)&&a.destroy()});this._box&&b.remove(this._box);this._box=this._anchors=this._connects=null},_draw:function(){if(this._graphic.getDojoShape()){var b=this._map,a=this._toolbar._scratchGL,e=this._getBoxCoords(),h=new p(b.spatialReference),v=c.clone(g.filter(e,function(b,a){return 8!==a&&0===a%2}));v[0]&&v.push([v[0][0],v[0][1]]);h.addPath(v);this._rotate&&
h.addPath([e[1],e[8]]);this._box?this._box.setGeometry(h):(this._box=new t(h,this._lineSymbol),a.add(this._box));this._anchors?g.forEach(this._anchors,function(a,f){this._scale||(f=8);var c=new d(e[f],b.spatialReference);a.graphic.setGeometry(c);var c=a.moveable,x=a.graphic.getDojoShape();x&&(c?x!==c.shape&&(c.destroy(),a.moveable=this._getMoveable(a.graphic,f)):a.moveable=this._getMoveable(a.graphic,f))},this):(this._anchors=[],this._connects=[],g.forEach(e,function(f,c){!this._scale&&8>c||(f=new d(f,
b.spatialReference),f=new t(f,this._markerSymbol),this._isTextPoint&&1===c%2&&f.hide(),a.add(f),this._anchors.push({graphic:f,moveable:this._getMoveable(f,c)}))},this))}else this._cleanUp()},_getBoxCoords:function(b){var a=this._map,f,d=[],e,t,h;if(this._isTextPoint){f=this._graphic.getNode().getBoundingClientRect();var v=a.__container.getBoundingClientRect();f=[{x:f.left-v.left,y:f.top-v.top},{x:f.right-v.left,y:f.top-v.top},{x:f.right-v.left,y:f.bottom-v.top},{x:f.left-v.left,y:f.bottom-v.top}]}else f=
this._getTransformedBoundingBox(this._graphic);g.forEach(f,function(f,c,x){e=f;(t=x[c+1])||(t=x[0]);h={x:(e.x+t.x)/2,y:(e.y+t.y)/2};b||(e=a.toMap(e),h=a.toMap(h));d.push([e.x,e.y]);d.push([h.x,h.y])});this._rotate&&(f=c.clone(d[1]),f=b?{x:f[0],y:f[1]}:a.toScreen({x:f[0],y:f[1],spatialReference:a.spatialReference}),f.y-=this._toolbar._options.rotateHandleOffset,b||(f=a.toMap(f)),d.push([f.x,f.y]));return d},_getTransformedBoundingBox:function(b){var a=this._map,f=b.geometry.getExtent(),c=b.geometry.spatialReference;
b=new d(f.xmin,f.ymax,c);f=new d(f.xmax,f.ymin,c);b=a.toScreen(b);f=a.toScreen(f);return[{x:b.x,y:b.y},{x:f.x,y:b.y},{x:f.x,y:f.y},{x:b.x,y:f.y}]},_getAllGraphics:function(){var b=[this._box];this._anchors&&g.forEach(this._anchors,function(a){b.push(a.graphic)});return b=g.filter(b,n.isDefined)},_getMoveable:function(b,a){var f=b.getDojoShape();if(f)return b=new l(f),b._index=a,this._connects.push(m.connect(b,"onMoveStart",this._moveStartHandler)),this._connects.push(m.connect(b,"onFirstMove",this._firstMoveHandler)),
this._connects.push(m.connect(b,"onMoveStop",this._moveStopHandler)),b.onMove=this._moveHandler,(f=f.getEventSource())&&h.set(f,"cursor",this._toolbar._cursors["box"+a]),b},_moveStartHandler:function(b){this._toolbar["on"+(8===b.host._index?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic)},_firstMoveHandler:function(b){this._toolbar._deactivateScrollWheel();var a=b.host._index,f=this._wrapOffset=b.host.shape._wrapOffsets[0]||0,d=this._graphic.getLayer().getNavigationTransform(),e;b=g.map(this._getBoxCoords(!0),
function(b){return{x:b[0]+f,y:b[1]}});e=this._isTextPoint?this._map.toScreen(this._graphic.geometry):{x:b[1].x,y:b[3].y};this._centerCoord=q.multiplyPoint(q.invert(d),e);if(8===a)e=q.multiplyPoint(q.invert(d),b[1]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,e)),this._startLine=[this._centerCoord,e],this._moveLine=c.clone(this._startLine);else if(e=q.multiplyPoint(q.invert(d),b[a]),d=q.multiplyPoint(q.invert(d),b[(a+4)%8]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,
e)),this._firstMoverToAnchor=Math.sqrt((e.x-this._centerCoord.x)*(e.x-this._centerCoord.x)+(e.y-this._centerCoord.y)*(e.y-this._centerCoord.y)),this._startBox=d,this._startBox.width=b[4].x-b[0].x,this._startBox.height=b[4].y-b[0].y,this._moveBox=c.clone(this._startBox),this._xfactor=e.x>d.x?1:-1,this._yfactor=e.y>d.y?1:-1,1===a||5===a)this._xfactor=0;else if(3===a||7===a)this._yfactor=0;this._toolbar._beginOperation("BOX");this._toolbar["on"+(8===a?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic)},
_moveHandler:function(b,a){b=b.host._index;var f=this._defaultEventArgs,d,c,e;f.angle=0;f.scaleX=1;f.scaleY=1;if(8===b)d=this._startLine,c=this._moveLine,e=c[1],e.x+=a.dx,e.y+=a.dy,a=this._getAngle(d,c),this._isTextPoint&&(a+=this._graphic.symbol.angle),c=q.rotategAt(a,d[0]),this._graphic.getDojoShape().setTransform(c),f.transform=c,f.angle=a,f.around=d[0];else{d=this._startBox;c=this._moveBox;c.width+=a.dx*this._xfactor;c.height+=a.dy*this._yfactor;this._uniformScaling||this._isTextPoint?(d=c.x+
this._xfactor*c.width,c=c.y+this._yfactor*c.height,d=Math.sqrt((d-this._centerCoord.x)*(d-this._centerCoord.x)+(c-this._centerCoord.y)*(c-this._centerCoord.y)),this._scaleRatio=a=e=d/this._firstMoverToAnchor,d=this._centerCoord):(a=c.width/d.width,e=c.height/d.height,d={x:d.x,y:d.y});if(isNaN(a)||Infinity===a||-Infinity===a)a=1;if(isNaN(e)||Infinity===e||-Infinity===e)e=1;c=q.scaleAt(a,e,d);if(this._isTextPoint){var t=q.rotategAt(this._graphic.symbol.angle,d);this._graphic.getDojoShape().setTransform([t,
c])}else this._graphic.getDojoShape().setTransform(c);f.transform=c;f.scaleX=a;f.scaleY=e;f.around=d}this._toolbar["on"+(8===b?this._rotateEvent:this._scaleEvent)](this._graphic,f)},_moveStopHandler:function(b){this._toolbar._activateScrollWheel();var a=this._graphic,f=this._toolbar,d=f._geo?v.geographicToWebMercator(a.geometry):a.geometry,c=d.spatialReference,e=a.getDojoShape(),t=e.getTransform(),h=a.getLayer().getNavigationTransform();this._isTextPoint?(a=this._graphic.symbol,8===b.host._index?
a.angle+=this._getAngle(this._startLine,this._moveLine):a.font.setSize(Math.round(a.font.size*this._scaleRatio*100)/100),this._graphic.setSymbol(a)):(d=d.toJson(),this._updateSegments(d.paths||d.rings,t,h,c),e.setTransform(null),d=H.fromJson(d),a.setGeometry(f._geo?v.webMercatorToGeographic(d,!0):d));this._draw();this._startLine=this._moveLine=this._startBox=this._moveBox=this._xfactor=this._yfactor=null;f._endOperation("BOX");this._defaultEventArgs.transform=t;f["on"+(8===b.host._index?this._rotateEvent:
this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs)},_updateSegments:function(b,a,d,c){var f=this._map,e=this._wrapOffset||0;g.forEach(b,function(b){g.forEach(b,function(b){this._updatePoint(b,c,e,q,f,d,a)},this)},this)},_updatePoint:function(b,a,d,c,e,t,h){a=e.toScreen({x:b[0],y:b[1],spatialReference:a},!0);a.x+=d;a=c.multiplyPoint([t,h,c.invert(t)],a);a.x-=d;d=e.toMap(a);b[0]=d.x;b[1]=d.y},_getAngle:function(b,a){return 180*Math.atan2(a[0].y-a[1].y,a[0].x-a[1].x)/Math.PI-180*Math.atan2(b[0].y-
b[1].y,b[0].x-b[1].x)/Math.PI},_deNormalizePoint:function(b,a){var f=this._map._getFrameWidth();if(-1===f)return b;for(b={x:b.x,y:b.y};Math.abs(b.x-a.x)>=f;)b.x=b.x<a.x?b.x+f:b.x-f;var d=Math.abs(b.x-a.x);Math.abs(b.x-a.x+f)<d?b.x+=f:Math.abs(b.x-a.x-f)<d&&(b.x-=f);return b}});e("extend-esri")&&c.setObject("toolbars._Box",r,k);return r})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover dojo/mouse".split(" "),
function(r,c,g,m,a,e,h,l,q,k){return c("dojox.gfx.Moveable",null,{constructor:function(a,d){this.shape=a;this.delay=d&&0<d.delay?d.delay:0;this.mover=d&&d.mover?d.mover:q;this.leftButtonOnly=d&&d.leftButtonOnly;this.events=[this.shape.on(e.press,r.hitch(this,"onMouseDown"))]},destroy:function(){g.forEach(this.events,function(a){a.remove()});this.events=this.shape=null},onMouseDown:function(a){this.delay?(this.events.push(this.shape.on(e.move,r.hitch(this,"onMouseMove")),this.shape.on(e.release,r.hitch(this,
"onMouseUp"))),this._lastX=a.clientX,this._lastY=a.clientY):this.leftButtonOnly&&!k.isLeft(a)||new this.mover(this.shape,a,this);m.stop(a)},onMouseMove:function(a){var d=a.clientY;if(Math.abs(a.clientX-this._lastX)>this.delay||Math.abs(d-this._lastY)>this.delay)this.onMouseUp(a),new this.mover(this.shape,a,this);m.stop(a)},onMouseUp:function(a){this.events.pop().remove()},onMoveStart:function(c){a.publish("/gfx/move/start",c);h.add(l.body(),"dojoMove")},onMoveStop:function(c){a.publish("/gfx/move/stop",
c);h.remove(l.body(),"dojoMove")},onFirstMove:function(a){},onMove:function(a,d,c){this.onMoving(a,d,c);this.shape.applyLeftTransform(d);this.onMoved(a,d)},onMoving:function(a,d){},onMoved:function(a,d){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(r,c,g,m,a,e){return g("dojox.gfx.Mover",null,{constructor:function(c,g,q){this.shape=c;this.lastX=g.clientX;this.lastY=g.clientY;c=this.host=q;g=
document;q=m(g,a.move,r.hitch(this,"onFirstMove"));this.events=[m(g,a.move,r.hitch(this,"onMouseMove")),m(g,a.release,r.hitch(this,"destroy")),m(g,"dragstart",r.hitch(e,"stop")),m(g,"selectstart",r.hitch(e,"stop")),q];if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(a){var c=a.clientX,h=a.clientY;this.host.onMove(this,{dx:c-this.lastX,dy:h-this.lastY},a);this.lastX=c;this.lastY=h;e.stop(a)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){c.forEach(this.events,
function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.shape=null}})})},"esri/toolbars/_GraphicMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/dom-style dojox/gfx/Moveable dojox/gfx/Mover dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/webMercatorUtils ../geometry/ScreenPoint ../geometry/Point".split(" "),function(r,c,g,m,a,e,h,l,q,k,n,d,p,b){var v=r(null,{declaredClass:"esri.toolbars._GraphicMover",
constructor:function(b,a,f,d){this.graphic=b;this.map=a;this.toolbar=f;this.tempPt=d;this._enableGraphicMover();this._moved=!1},refresh:function(b){var a=this.graphic.getDojoShape();!a||!b&&a._hostGraphic||(this._disableGraphicMover(),this._enableGraphicMover())},destroy:function(){this._disableGraphicMover()},hasMoved:function(){return this._moved},_enableGraphicMover:function(){var b=this.graphic,d=b.getDojoShape();d&&(d._hostGraphic=b,this._moveable=new e(d,{mover:v.Mover}),this._moveStartHandle=
g.connect(this._moveable,"onMoveStart",this,this._moveStartHandler),this._firstMoveHandle=g.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler),this._movingHandle=g.connect(this._moveable,"onMoving",this,this._movingHandler),this._moveStopHandle=g.connect(this._moveable,"onMoveStop",this,this._moveStopHandler),(b=d.getEventSource())&&a.set(b,"cursor",this.toolbar._cursors.move))},_disableGraphicMover:function(){var b=this._moveable;if(b){g.disconnect(this._moveStartHandle);g.disconnect(this._firstMoveHandle);
g.disconnect(this._movingHandle);g.disconnect(this._moveStopHandle);var d=b.shape;d&&(d._hostGraphic=null,(d=d.getEventSource())&&a.set(d,"cursor","inherit"));b.destroy()}this._moveable=null},_moveStartHandler:function(){var b=this.graphic,a=this.map;this._startTx=b.getDojoShape().getTransform();"point"===this.graphic.geometry.type&&a.snappingManager&&a.snappingManager._setUpSnapping();this.toolbar.onGraphicMoveStart(b)},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic)},
_movingHandler:function(b,a,d){b=b.shape.getTransform();a=this.map;var f;n("esri-pointer")?f=a.navigationManager.pointerEvents._processTouchEvent(d,d):d&&"pointermove"===d.type&&(f=k.prototype._processTouchEvent.call({map:a},d,d));f&&a.snappingManager&&a.snappingManager._onSnappingMouseMoveHandler(f);this.tempPt&&this.tempPt.getDojoShape().setTransform(b);this.toolbar.onGraphicMove(this.graphic,b)},_moveStopHandler:function(a){var c=this.graphic,f=this.toolbar,e=this.map,h=f._geo?d.geographicToWebMercator(c.geometry):
c.geometry,v=h.type,g=c.getDojoShape(),H=g.getTransform();if(m.toJson(H)!==m.toJson(this._startTx)){this._moved=!0;switch(v){case "point":var v=[H,l.invert(this._startTx)],k;e.snappingManager&&(k=e.snappingManager._snappingPoint);h=k||e.toMap(l.multiplyPoint(v,e.toScreen(h,!0)));e.snappingManager&&e.snappingManager._killOffSnapping();break;case "polyline":h=this._updatePolyGeometry(h,h.paths,H);break;case "polygon":h=this._updatePolyGeometry(h,h.rings,H)}g.setTransform(null);c.setGeometry(f._geo?
d.webMercatorToGeographic(h,!0):h);this.tempPt&&this.tempPt.setGeometry(new b(c.geometry.toJson()))}else this._moved=!1;f._endOperation("MOVE");f.onGraphicMoveStop(c,H);this._moved||(a=a.__e,e=this.map.position,a=new p(a.pageX-e.x,a.pageY-e.y),f.onGraphicClick(c,{screenPoint:a,mapPoint:this.map.toMap(a)}))},_updatePolyGeometry:function(b,a,d){var f=this.map,c=b.getPoint(0,0),f=f.toMap(f.toScreen(c).offset(d.dx,d.dy));d=f.x-c.x;for(var c=f.y-c.y,e,h,t,f=0;f<a.length;f++)for(h=a[f],e=0;e<h.length;e++)t=
b.getPoint(f,e),b.setPoint(f,e,t.offset(d,c));return b}});v.Mover=r(h,{declaredClass:"esri.toolbars._Mover",constructor:function(b,a,d){this.__e=a}});n("extend-esri")&&(c.setObject("toolbars._GraphicMover",v,q),c.setObject("toolbars._Mover",v.Mover,q));return v})},"esri/toolbars/_VertexEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/has dijit/Menu dijit/MenuItem ../kernel ./_VertexMover ../geometry/Point ../geometry/jsonUtils dojo/i18n!../nls/jsapi".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d){var p=r(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(b,a,d){this.graphic=b;this.map=a;this.toolbar=d;b=d._options;this._symbol1=b.vertexSymbol;this._symbol2=b.ghostVertexSymbol;a=b.ghostLineSymbol;this._lineStroke={style:a.style,width:a.width,color:a.color};this._canDel=b.allowDeleteVertices;this._canAdd=b.allowAddVertices;this._addControllers()},destroy:function(){this._removeControllers()},refresh:function(b){b?(this._removeControllers(),
this._addControllers()):(this._refresh(this._vertexMovers),this._refresh(this._mpVertexMovers))},suspend:function(){this._suspended||this._removeControllers();this._suspended=!0},resume:function(){this._suspended&&this._addControllers();this._suspended=!1},_addControllers:function(){this._firstMoveHandle=g.connect(q,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=g.connect(q,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),
this._symbol1);this._canAdd&&(this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,!0));var b=this._getGraphicsLayer();this._mouseOverHandle=g.connect(b,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=g.connect(b,"onMouseOut",this,this._mouseOutHandler);this._canDel&&(this._ctxMenu=new e({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"}),b=this._ctxDelete=new h({label:d.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}),
this._deleteHandle=g.connect(b,"onClick",this,this._deleteHandler),this._ctxMenu.addChild(b),this._ctxMenu.startup())},_removeControllers:function(){g.disconnect(this._firstMoveHandle);g.disconnect(this._moveStopHandle);g.disconnect(this._mouseOverHandle);g.disconnect(this._mouseOutHandle);g.disconnect(this._deleteHandle);this._ctxMenu&&(this._ctxDelete=null,this._unbindCtxNode(),this._ctxMenu.destroyRecursive());this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=
this._mpVertexMovers=null},_add:function(b,a,d){var c,f,e=this.graphic,h=[];for(c=0;c<b.length;c++){var g=b[c],v=[];for(f=0;f<g.length;f++)v.push(new q(g[f],a,e,c,f,g.length,this,d));h.push(v)}return h},_remove:function(b){b&&m.forEach(b,function(b){m.forEach(b,function(b){b.destroy()})})},_refresh:function(b){b&&m.forEach(b,function(b){m.forEach(b,function(b){b.refresh()})})},_isNew:function(b){return-1===m.indexOf(this._vertexMovers[b.segIndex],b)?!0:!1},_getGraphicsLayer:function(){return this.toolbar._scratchGL},
_deleteHandler:function(b){b=this._selectedMover;this._updateRelatedGraphic(b,b.relatedGraphic,b.graphic.geometry,b.segIndex,b.ptIndex,b.segLength,!1,!0);this._canAdd&&this._deleteMidpoints(b);this._deleteVertex(b);this.toolbar._endOperation("VERTICES")},_mouseOverHandler:function(b){b=b.graphic;var a=this._findMover(b);a&&(this.toolbar.onVertexMouseOver(this.graphic,a._getInfo()),a._placeholder||(this._selectedMover=a,this._canDel&&this._bindCtxNode(b.getDojoShape().getNode())))},_mouseOutHandler:function(b){if(b=
this._findMover(b.graphic))this.toolbar.onVertexMouseOut(this.graphic,b._getInfo())},_bindCtxNode:function(b){this._unbindCtxNode();this._ctxDelete.set("disabled",this._selectedMover.segLength<=this.minLength?!0:!1);this._ctxMenu.bindDomNode(b);this._bindNode=b},_unbindCtxNode:function(){var b=this._bindNode;b&&this._ctxMenu.unBindDomNode(b)},_findMover:function(b){var a,d=[];a=this._mpVertexMovers;m.forEach(this._vertexMovers,function(b){d=d.concat(b)});a&&m.forEach(a,function(b){d=d.concat(b)});
for(a=0;a<d.length;a++){var c=d[a];if(c.graphic===b)return c}},_firstMoveHandler:function(b){!this._isNew(b)&&this._canAdd&&this._hideRelatedMidpoints(b);this.toolbar._beginOperation("VERTICES")},_moveStopHandler:function(b,a){var d=this._isNew(b);a&&(a.dx||a.dy)?(this._updateRelatedGraphic(b,b.relatedGraphic,b.graphic.geometry,b.segIndex,b.ptIndex,b.segLength,d),this._canAdd&&(d?this._addMidpoints(b):(this._repositionRelatedMidpoints(b),this._showRelatedMidpoints(b))),this.toolbar._endOperation("VERTICES")):
!d&&this._canAdd&&this._showRelatedMidpoints(b)},_showRelatedMidpoints:function(b){var a=this._getAdjacentMidpoints(b.ptIndex,b.segLength),d=this._mpVertexMovers[b.segIndex];for(b=0;b<a.length;b++){var c=d[a[b]];c.graphic.show();c.refresh()}},_hideRelatedMidpoints:function(b){var a=this._getAdjacentMidpoints(b.ptIndex,b.segLength),d=this._mpVertexMovers[b.segIndex];for(b=0;b<a.length;b++)d[a[b]].graphic.hide()},_repositionRelatedMidpoints:function(b){var a,d=this._getAdjacentMidpoints(b.ptIndex,b.segLength),
c=this._mpVertexMovers[b.segIndex];for(a=0;a<d.length;a++){var f=this._getAdjacentVertices(d[a],b.segLength),e=b.relatedGraphic.geometry.getPoint(b.segIndex,f[0]),f=b.relatedGraphic.geometry.getPoint(b.segIndex,f[1]),e=new k({x:(e.x+f.x)/2,y:(e.y+f.y)/2,spatialReference:e.spatialReference.toJson()});c[d[a]].graphic.setGeometry(e)}},_addMidpoints:function(b){var a=b.segIndex,d=b.ptIndex,c=b.segLength,f=d+1,e,h=c+1;this._mpVertexMovers[a].splice(d,1);var g=this._vertexMovers[a];for(e=0;e<f;e++)g[e].segLength+=
1;for(e=f;e<g.length;e++)g[e].ptIndex+=1,g[e].segLength+=1;b.ptIndex=f;b.segLength=g.length+1;g.splice(f,0,b);b.graphic.setSymbol(this._symbol1);g=this._mpVertexMovers[a];for(e=0;e<d;e++)g[e].segLength+=1;for(e=d;e<c-1;e++)g[e].ptIndex+=1,g[e].segLength+=1;f=this._getAdjacentVertices(d,h);a=this._getAdjacentVertices(d+1,h);c=b.relatedGraphic.geometry.getPoint(b.segIndex,f[0]);e=b.relatedGraphic.geometry.getPoint(b.segIndex,f[1]);f=new k({x:(c.x+e.x)/2,y:(c.y+e.y)/2,spatialReference:c.spatialReference.toJson()});
c=b.relatedGraphic.geometry.getPoint(b.segIndex,a[0]);e=b.relatedGraphic.geometry.getPoint(b.segIndex,a[1]);a=new k({x:(c.x+e.x)/2,y:(c.y+e.y)/2,spatialReference:c.spatialReference.toJson()});c=new q(f,this._symbol2,this.graphic,b.segIndex,d,h,this,!0);b=new q(a,this._symbol2,this.graphic,b.segIndex,d+1,h,this,!0);g.splice(d,0,c,b)},_deleteVertex:function(b){var a,d=b.ptIndex,c=this._vertexMovers[b.segIndex];for(a=0;a<d;a++)--c[a].segLength;for(a=d+1;a<c.length;a++){var f=c[a];--f.ptIndex;--f.segLength}c.splice(d,
1);a=b._getInfo();b.destroy();this.toolbar.onVertexDelete(this.graphic,a)}});c.mixin(p,{create:function(b,a,d){switch(b.geometry.type){case "multipoint":return new p.MultipointVertexEditor(b,a,d);case "polyline":return new p.PolylineVertexEditor(b,a,d);case "polygon":return new p.PolygonVertexEditor(b,a,d)}}});p.MultipointVertexEditor=r(p,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=g.connect(q,"onMoveStart",this,this._moveStartHandler);
g.disconnect(this._firstMoveHandle)},destroy:function(){this.inherited(arguments);g.disconnect(this._moveStartHandle)},_getSegments:function(b){var a=b.points,d=[],c=b.spatialReference;for(b=0;b<a.length;b++){var f=a[b];d.push(new k({x:f[0],y:f[1],spatialReference:c.toJson()}))}return[d]},_getMidpointSegments:function(b){return[]},_getControlPoints:function(b,a,d,c,f){return[]},_getGraphicsLayer:function(){return this.graphic._graphicsLayer},_mouseOverHandler:function(b){var a=b.graphic;if(b=this._findMover(b))this.toolbar.onVertexMouseOver(a,
b._getInfo()),this._selectedMover=b,this._canDel&&this._bindCtxNode(b.graphic.getDojoShape().getNode())},_mouseOutHandler:function(b){var a=b.graphic;if(b=this._findMover(b))this.toolbar.onVertexMouseOut(a,b._getInfo())},_findMover:function(b){var a=[].concat(this._vertexMovers[0]),d=b.target;for(b=0;b<a.length;b++){var c=a[b];if(c.graphic.getDojoShape().getNode()===d)return c}},_moveStartHandler:function(b){var a=b.ptIndex,d=b.segLength-1,c=b.relatedGraphic.geometry.points;b=c.splice(a,1);c.push(b[0]);
c=this._vertexMovers[0];for(b=d;b>a;b--)--c[b].ptIndex;b=c.splice(a,1);c.push(b[0]);b[0].ptIndex=d},_moveStopHandler:function(b){this._updateRelatedGraphic(b,b.relatedGraphic,b.graphic.geometry,b.segIndex,b.ptIndex,b.segLength);this.toolbar._endOperation("VERTICES")},_updateRelatedGraphic:function(b,a,d,c,f,e,h,g){b=a.geometry;g?b.removePoint(f):b.setPoint(f,d);a.setGeometry(b)},_deleteMidpoints:function(b){}});p.PolylineVertexEditor=r(p,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,
_getSegments:function(b){var a,d,c=b.paths,f=[];for(a=0;a<c.length;a++){var e=c[a],h=[];for(d=0;d<e.length;d++)h.push(b.getPoint(a,d));f.push(h)}return f},_getMidpointSegments:function(b){var a,d,c=b.paths,f=[],e=b.spatialReference;for(a=0;a<c.length;a++){var h=c[a],g=[];for(d=0;d<h.length-1;d++){var p=b.getPoint(a,d),l=b.getPoint(a,d+1),p=new k({x:(p.x+l.x)/2,y:(p.y+l.y)/2,spatialReference:e.toJson()});g.push(p)}f.push(g)}return f},_getControlPoints:function(b,a,d,c,f){var e=this.map,h,g;this._isNew(b)?
(b=c,c+=1,0<=b&&(h=e.toScreen(a.getPoint(d,b))),c<=f&&(g=e.toScreen(a.getPoint(d,c)))):(b=c-1,c+=1,0<=b&&(h=e.toScreen(a.getPoint(d,b))),c<f&&(g=e.toScreen(a.getPoint(d,c))));return[h,g]},_getAdjacentMidpoints:function(b,a){var d=[],c=b-1;0<=c&&d.push(c);b<a-1&&d.push(b);return d},_getAdjacentVertices:function(b,a){return[b,b+1]},_deleteMidpoints:function(b){var a=this._mpVertexMovers[b.segIndex],d=a.length-1,c=this._getAdjacentMidpoints(b.ptIndex,b.segLength).sort(),f,e=c[0];for(f=0;f<e;f++)--a[f].segLength;
for(f=e+1;f<a.length;f++){var h=a[f];--h.ptIndex;--h.segLength}if(1===c.length)a.splice(e,1)[0].destroy();else for(h=this._getAdjacentVertices(e,d),f=b.relatedGraphic.geometry.getPoint(b.segIndex,h[0]),h=b.relatedGraphic.geometry.getPoint(b.segIndex,h[1]),f=new k({x:(f.x+h.x)/2,y:(f.y+h.y)/2,spatialReference:f.spatialReference.toJson()}),b=new q(f,this._symbol2,this.graphic,b.segIndex,e,d,this,!0),a=a.splice(e,c.length,b),f=0;f<a.length;f++)a[f].destroy()},_updateRelatedGraphic:function(b,a,d,c,f,
e,h,g){b=a.geometry;h?b.insertPoint(c,f+1,n.fromJson(d.toJson())):g?b.removePoint(c,f):b.setPoint(c,f,n.fromJson(d.toJson()));a.setGeometry(b)}});p.PolygonVertexEditor=r(p,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(b){var a,d,c=b.rings,f=[];for(a=0;a<c.length;a++){var e=c[a],h=[];for(d=0;d<e.length-1;d++)h.push(b.getPoint(a,d));f.push(h)}return f},_getMidpointSegments:function(b){var a,d,c=b.rings,f=[],e=b.spatialReference;for(a=0;a<c.length;a++){var h=c[a],
g=[];for(d=0;d<h.length-1;d++){var p=b.getPoint(a,d),l=b.getPoint(a,d+1),p=new k({x:(p.x+l.x)/2,y:(p.y+l.y)/2,spatialReference:e.toJson()});g.push(p)}f.push(g)}return f},_getControlPoints:function(b,a,d,c,f){var e=this.map;this._isNew(b)?b=c:(b=c-1,b=0>b?(f+b)%f:b);c=(c+1)%f;f=e.toScreen(a.getPoint(d,b));a=e.toScreen(a.getPoint(d,c));return[f,a]},_getAdjacentMidpoints:function(b,a){var d=b-1;return[0>d?(a+d)%a:d,b]},_getAdjacentVertices:function(b,a){return[b,(b+1)%a]},_deleteMidpoints:function(b){var a=
b.ptIndex,d=this._mpVertexMovers[b.segIndex],c=d.length-1,f=this._getAdjacentMidpoints(a,b.segLength).sort(),e,h;h=f[0];var g=f[f.length-1];if(0===a)for(e=this._getAdjacentVertices(c-1,c),a=b.relatedGraphic.geometry.getPoint(b.segIndex,e[0]),e=b.relatedGraphic.geometry.getPoint(b.segIndex,e[1]),a=new k({x:(a.x+e.x)/2,y:(a.y+e.y)/2,spatialReference:a.spatialReference.toJson()}),b=new q(a,this._symbol2,this.graphic,b.segIndex,c-1,c,this,!0),d.splice(g,1,b)[0].destroy(),d.splice(h,1)[0].destroy(),f=
0;f<d.length-1;f++)h=d[f],--h.ptIndex,--h.segLength;else{e=this._getAdjacentVertices(h,c);a=b.relatedGraphic.geometry.getPoint(b.segIndex,e[0]);e=b.relatedGraphic.geometry.getPoint(b.segIndex,e[1]);a=new k({x:(a.x+e.x)/2,y:(a.y+e.y)/2,spatialReference:a.spatialReference.toJson()});b=new q(a,this._symbol2,this.graphic,b.segIndex,h,c,this,!0);g=d.splice(h,f.length,b);for(f=0;f<g.length;f++)g[f].destroy();for(f=0;f<h;f++)--d[f].segLength;for(f=h+1;f<d.length;f++)h=d[f],--h.ptIndex,--h.segLength}},_updateRelatedGraphic:function(b,
a,d,c,f,e,h,g){b=a.geometry;h?b.insertPoint(c,f+1,n.fromJson(d.toJson())):g?(b.removePoint(c,f),0===f&&b.setPoint(c,e-1,n.fromJson(b.getPoint(c,0).toJson()))):(b.setPoint(c,f,n.fromJson(d.toJson())),0===f&&b.setPoint(c,e,n.fromJson(d.toJson())));a.setGeometry(b)}});a("extend-esri")&&(c.setObject("toolbars._GraphicVertexEditor",p,l),c.setObject("toolbars._MultipointVertexEditor",p.MultipointVertexEditor,l),c.setObject("toolbars._PolylineVertexEditor",p.PolylineVertexEditor,l),c.setObject("toolbars._PolygonVertexEditor",
p.PolygonVertexEditor,l));return p})},"esri/toolbars/_VertexMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/sniff dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/Point ../graphic ../geometry/webMercatorUtils".split(" "),function(r,c,g,m,a,e,h,l,q,k,n,d,p){r=r(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(b,a,d,c,f,e,h,g){this.point=b;this.symbol=a;this.relatedGraphic=d;this.segIndex=c;this.ptIndex=
f;this.segLength=e;this.editor=h;this.map=h.map;this._scratchGL=h.toolbar._scratchGL;this._placeholder=g||!1;this._type=d.geometry.type;this._init();this._enable()},refresh:function(b){if(b||this._needRefresh())this._disable(),this._enable()},destroy:function(){this._disable();this.graphic&&this._scratchGL.remove(this.graphic);this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null},_init:function(){var b=new n(this.point.toJson()),
b=new d(b,this.symbol);switch(this._type){case "multipoint":b._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(b)}this.graphic=b},_enable:function(){var b=this.graphic.getDojoShape();b&&(b._hasMover=!0,this._moveable=this._getMoveable(b),(b=b.getEventSource())&&a.set(b,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]))},_disable:function(){var b=this._moveable;if(b){g.disconnect(this._startHandle);
g.disconnect(this._firstHandle);g.disconnect(this._movingHandle);g.disconnect(this._stopHandle);var d=b.shape;d&&(d=d.getEventSource())&&a.set(d,"cursor","inherit");b.destroy();this._moveable=null}},_needRefresh:function(){var b=this.graphic.getDojoShape(),a=!1;if(b)switch(this._type){case "multipoint":var d=this.relatedGraphic.getDojoShape();d&&(d=d.children[this.ptIndex],b!==d&&(this.graphic._shape=d,a=!0));break;case "polyline":case "polygon":a=!b._hasMover}return a},_getMoveable:function(b){b=
new e(b,m("mac")&&m("ff")&&!k("esri-touch")&&{leftButtonOnly:!0});this._startHandle=g.connect(b,"onMoveStart",this,this._moveStartHandler);this._firstHandle=g.connect(b,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=g.connect(b,"onMoving",this,this._movingHandler);this._stopHandle=g.connect(b,"onMoveStop",this,this._moveStopHandler);return b},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0)},_getInfo:function(){return{graphic:this.graphic,isGhost:this._placeholder,
segmentIndex:this.segIndex,pointIndex:this._getPtIndex()}},_moveStartHandler:function(b){var a=this.map;a.snappingManager&&a.snappingManager._setUpSnapping();this.editor.toolbar._deactivateScrollWheel();this._startTx=this.graphic.getDojoShape().getTransform();b.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo())},_firstMoveHandler:function(b){var a=b.shape,d=this._getControlEdges(),c=this._scratchGL._div,f,e=[],h=b.host.shape._wrapOffsets[0]||
0;for(f=0;f<d.length;f++){var g=d[f];g.x1+=h;g.x2+=h;e.push([c.createLine({x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2}).setStroke(this.editor._lineStroke),g.x1,g.y1,g.x2,g.y2])}a._lines=e;b.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo())},_movingHandler:function(b,a,d){a=this.map;var c;k("esri-pointer")?c=a.navigationManager.pointerEvents._processTouchEvent(d,d):d&&"pointermove"===d.type&&(c=q.prototype._processTouchEvent.call({map:a},
d,d));c&&a.snappingManager&&a.snappingManager._onSnappingMouseMoveHandler(c);d=b.shape;b=d.getTransform();d=d._lines;for(c=0;c<d.length;c++)a=d[c],a[0].setShape({x1:a[1]+b.dx,y1:a[2]+b.dy,x2:a[3],y2:a[4]});this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),b)},_moveStopHandler:function(b){b=b.shape;var a=this.editor.toolbar,d=b.getTransform(),c=this.map,f=this.graphic,e=a._geo?p.geographicToWebMercator(f.geometry):f.geometry;a._activateScrollWheel();var g,l=b._lines;if(l){for(g=
0;g<l.length;g++)l[g][0].removeShape();b._lines=null}g=!1;var l=!0,k=this._getInfo();d&&(d.dx||d.dy)?this._placeholder&&(this._placeholder=!1,g=!0):l=!1;var n;c.snappingManager&&(n=c.snappingManager._snappingPoint);var C=[d,h.invert(this._startTx)];n=n||c.toMap(h.multiplyPoint(C,c.toScreen(e,!0)));c.snappingManager&&c.snappingManager._killOffSnapping();b.setTransform(null);f.setGeometry(a._geo?p.webMercatorToGeographic(n,!0):n);this.constructor.onMoveStop(this,d);a.onVertexMoveStop(this.relatedGraphic,
k,d);if(!l)a.onVertexClick(this.relatedGraphic,k);if(g)a.onVertexAdd(this.relatedGraphic,this._getInfo())},_getControlEdges:function(){var b=this.map,a=this.relatedGraphic.geometry,d=this.segIndex,c=this.ptIndex,f=this.segLength,e=this._scratchGL.getNavigationTransform(),h=e.dx,e=e.dy,g=b.toScreen(this.graphic.geometry),b=g.x-h,g=g.y-e,p=[],a=this.editor._getControlPoints(this,a,d,c,f);a[0]&&p.push({x1:b,y1:g,x2:a[0].x-h,y2:a[0].y-e});a[1]&&p.push({x1:b,y1:g,x2:a[1].x-h,y2:a[1].y-e});return p}});
k("extend-esri")&&c.setObject("toolbars.VertexMover",r,l);c.mixin(r,{onMoveStart:function(){},onFirstMove:function(){},onMoveStop:function(){}});return r})},"esri/toolbars/TextEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/has dojo/dom-construct dojo/dom-class dojo/dom-style dojo/keys ../kernel".split(" "),function(r,c,g,m,a,e,h,l,q,k){r=r(null,{declaredClass:"esri.toolbars.TextEditor",constructor:function(a,d,c){this._graphic=a;this._map=d;
this._toolbar=c;this._enable(this._graphic)},destroy:function(){this._disable()},onEditStart:function(){},onEditEnd:function(){},_enable:function(a){this._editBox?(g.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null):(this._map.navigationManager.setImmediateClick(!0),this._addEditBoxHandler=g.connect(a.getLayer(),"onDblClick",this,function(d){this._map.navigationManager.setImmediateClick(!1);d.graphic==a&&(m.stop(d),g.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null,
this._addTextBox(a))}))},_disable:function(){this._applyEdit();this._addEditBoxHandler&&(g.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null);this._removeTextBox();this.onEditEnd(this._graphic);this._toolbar.onTextEditEnd(this._graphic)},_addTextBox:function(a,d){if(!this._editBox){var p;a.symbol.text||(a.symbol.text="Tempt text",a.setSymbol(a.symbol),p="");var b=this._createInputTextStyle(a,this._map);""!==p&&(p=d||a.symbol.text);this._editBox=e.create("input",{type:"text",value:p});
l.set(this._editBox,b);h.add(this._editBox,"esriTextEditorInput");this._map.container.appendChild(this._editBox);this._editBox.focus();this._editBoxKeyHandler=g.connect(this._editBox,"onkeyup",c.hitch(this,function(b){b.keyCode!=q.ENTER&&b.keyCode!==q.TAB||this._disable()}));this._editBoxBlurHandler=g.connect(this._editBox,"onblur",c.hitch(this,function(b){this._disable()}));a.symbol.text="";a.setSymbol(a.symbol);a.hide();var k=this._editBox;this._disableBoxHandler||(this._disableBoxHandler=this._map.on("zoom-start",
c.hitch(this,function(){this._disable()})));this._moveBoxHandler=this._map.on("pan",function(b){l.set(k,{left:this._editBoxLeft+b.delta.x+"px",top:this._editBoxTop+b.delta.y+"px"})});this._moveBoxStartHandler=this._map.on("pan-start",function(){this._editBoxLeft=parseFloat(l.get(k,"left"));this._editBoxTop=parseFloat(l.get(k,"top"))});this.onEditStart(a,this._editBox);this._toolbar.onTextEditStart(a,this._editBox)}},_removeTextBox:function(){this._editBoxBlurHandler&&(g.disconnect(this._editBoxBlurHandler),
this._editBoxBlurHandler=null);this._editBox&&(this._editBox.parentNode.removeChild(this._editBox),this._editBox=null);this._disableBoxHandler&&(this._disableBoxHandler.remove(),this._disableBoxHandler=null);this._moveBoxHandler&&(this._moveBoxHandler.remove(),this._moveBoxHandler=null);this._moveBoxStartHandler&&(this._moveBoxStartHandler.remove(),this._moveBoxStartHandler=null);this._editBoxKeyHandler&&(g.disconnect(this._editBoxKeyHandler),this._editBoxKeyHandler=null)},_createInputTextStyle:function(a,
d){d=a.getDojoShape().getTransformedBoundingBox();var c=a.getLayer(),c=c.hasLocalNavigationTransform()?{dx:0,dy:0}:c.getNavigationTransform(),b=a.symbol.font;return{"font-family":b.family,"font-size":b.size+"px","font-style":b.style,"font-variant":b.variant,"font-weight":b.weight,left:d[0].x+c.dx+"px",top:d[0].y+c.dy+"px",width:Math.abs(d[0].x-d[1].x)/Math.cos(a.symbol.angle/180*Math.PI)+"px"}},_applyEdit:function(){if(this._editBox)if(this._editBox.value){this._graphic.show();var a=this._graphic.symbol;
a.text=this._editBox.value;this._graphic.setSymbol(a)}else this._graphic.getLayer().remove(this._graphic)}});a("extend-esri")&&c.setObject("toolbars.TextEditor",r,k);return r})},"widgets/GriddedReferenceGraphic/js/GridSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/dom-style ./ColorPickerEditor ./FontSetting jimu/BaseWidget jimu/dijit/TabContainer3 dijit/_WidgetsInTemplateMixin dojo/text!../templates/GridSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dojo/keys jimu/dijit/formSelect".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v){return r([h,q,d],{baseClass:"jimu-widget-GRGDrafter-Settings",templateString:k,selectedGridSettings:{},_defaultColor:"#1a299c",_defaultTextSize:12,_defaultFont:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},fontSize:12,textColor:"#2f4f4f"},gridSettingsOptions:{cellShape:["default","hexagon"],cellUnits:"meters kilometers miles nautical-miles yards feet".split(" "),labelStartPosition:["lowerLeft","lowerRight","upperLeft","upperRight"],labelType:["alphaNumeric",
"alphaAlpha","numeric"],labelTypeWithRefSys:["gridReferenceSystem","alphaNumeric","alphaAlpha","numeric"],labelDirection:["horizontal","vertical"],gridOrigin:["center","lowerLeft","lowerRight","upperLeft","upperRight"],referenceSystem:["MGRS","USNG"]},constructor:function(b){n.mixin(this,b)},startup:function(){this.tab=new l({tabs:[{title:this.nls.gridSettingsLabel,content:this.gridTab},{title:this.nls.labelSettingsLabel,content:this.labelTab}],selected:this.nls.gridTabLabel});this.tab.placeAt(this.tabsContainer);
this.tab.startup();this.gridOutlineColorPicker=new a({nls:this.nls,typeOfColorPicker:"Outline"},this.cellOutlineColorPicker);m.set(this.gridOutlineColorPicker.slider.domNode,"width","");this.gridOutlineColorPicker.setValues({color:this.config.grg.cellOutline.color,transparency:this.config.grg.cellOutline.transparency});this.gridOutlineColorPicker.startup();this.gridFillColorPicker=new a({nls:this.nls,typeOfColorPicker:"Fill"},this.cellFillColorPicker);m.set(this.gridFillColorPicker.slider.domNode,
"width","");this.gridFillColorPicker.setValues({color:this.config.grg.cellFill.color,transparency:this.config.grg.cellFill.transparency});this.gridFillColorPicker.startup();var d=b(".jimu-color-pickerPopup",this.domNode);c.forEach(d,n.hitch(this,function(b){this.own(g(b,"keydown",n.hitch(this,function(b){b.keyCode!==v.ENTER&&b.keyCode!==v.SPACE||b.currentTarget.click()})))}));this.fontSetting=new e({config:this.config.grg.font||this._defaultFont,nls:this.nls},this.fontSettingNode);this.fontSetting.startup();
this._loadOptionsForDropDown(this.cellShape,this.gridSettingsOptions.cellShape);this._loadOptionsForDropDown(this.labelStartPosition,this.gridSettingsOptions.labelStartPosition);this._loadOptionsForDropDown(this.cellUnits,this.gridSettingsOptions.cellUnits);this._loadOptionsForDropDown(this.labelType,this.gridSettingsOptions.labelType);this._loadOptionsForDropDown(this.labelTypeWithRefSys,this.gridSettingsOptions.labelTypeWithRefSys);this._loadOptionsForDropDown(this.labelDirection,this.gridSettingsOptions.labelDirection);
this._loadOptionsForDropDown(this.gridOrigin,this.gridSettingsOptions.gridOrigin);this._loadOptionsForDropDown(this.referenceSystem,this.gridSettingsOptions.referenceSystem);this.config.grg&&(this.cellShape.setValue(this.config.grg.cellShape),this.cellUnits.setValue(this.config.grg.cellUnits),this.gridOrigin.setValue(this.config.grg.gridOrigin),this.labelType.setValue(this.config.grg.labelType),this.labelDirection.setValue(this.config.grg.labelDirection),this.labelStartPosition.setValue(this.config.grg.labelOrigin),
this.referenceSystem.setValue(this.config.grg.referenceSystem),"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1));this.onGridsettingsChanged()},postCreate:function(){this.inherited(arguments);p.add(this.domNode,"GRGDrafterSettingsContainer GRGDrafterFullWidth");this._handleClickEvents()},_handleClickEvents:function(){this.own(g(this.cellShape,"change",n.hitch(this,function(){"hexagon"===
this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1)})))},_loadOptionsForDropDown:function(b,a){var d=[],e;c.forEach(a,n.hitch(this,function(b){e=this.nls.gridSettings[b].hasOwnProperty("label")?{value:b,label:this.nls.gridSettings[b].label}:{value:b,label:this.nls.gridSettings[b]};d.push(e)}));b.addOption(d)},_isSettingsChanged:function(){var b=!1;this.selectedGridSettings.cellShape!==this.cellShape.get("value")?
b=!0:this.selectedGridSettings.labelStartPosition!==this.labelStartPosition.get("value")?b=!0:this.selectedGridSettings.cellUnits!==this.cellUnits.get("value")?b=!0:this.selectedGridSettings.labelType!==this.labelType.get("value")?b=!0:this.selectedGridSettings.labelTypeWithRefSys!==this.labelTypeWithRefSys.get("value")?b=!0:this.selectedGridSettings.labelDirection!==this.labelDirection.get("value")?b=!0:this.selectedGridSettings.gridOrigin!==this.gridOrigin.get("value")?b=!0:this.selectedGridSettings.referenceSystem!==
this.referenceSystem.get("value")?b=!0:this.selectedGridSettings.gridOutlineColor!==this.gridOutlineColorPicker.getValues().color?b=!0:this.selectedGridSettings.gridOutlineTransparency!==this.gridOutlineColorPicker.getValues().transparency?b=!0:this.selectedGridSettings.gridFillColor!==this.gridFillColorPicker.getValues().color?b=!0:this.selectedGridSettings.gridFillTransparency!==this.gridFillColorPicker.getValues().transparency?b=!0:this.selectedGridSettings.fontSettings!==this.fontSetting.getConfig()&&
(b=!0);return b},onClose:function(){if(this._isSettingsChanged())this.onGridsettingsChanged()},onGridsettingsChanged:function(){this.selectedGridSettings={cellShape:this.cellShape.get("value"),labelStartPosition:this.labelStartPosition.get("value"),cellUnits:this.cellUnits.get("value"),labelType:this.labelType.get("value"),labelTypeWithRefSys:this.labelTypeWithRefSys.get("value"),labelDirection:this.labelDirection.get("value"),gridOrigin:this.gridOrigin.get("value"),referenceSystem:this.referenceSystem.get("value"),
gridOutlineColor:this.gridOutlineColorPicker.getValues().color,gridOutlineTransparency:this.gridOutlineColorPicker.getValues().transparency,gridFillColor:this.gridFillColorPicker.getValues().color,gridFillTransparency:this.gridFillColorPicker.getValues().transparency,fontSettings:n.clone(this.fontSetting.getConfig())};this.emit("gridSettingsChanged",this.selectedGridSettings)}})})},"widgets/GriddedReferenceGraphic/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/dom-attr dojo/on dojo/query dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p){return r([l,q,k],{_defaultColor:"#485566",templateString:n,nls:null,postCreate:function(){this.colorPicker=new p({color:this._defaultColor,width:this._defaultWidth,tabindex:"0",role:"button"},this.colorPicker);this.colorPicker.startup();this.slider=new d({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},
startup:function(){this._setAriaLabelForEditorNodes();this.own(a(this.slider,"change",c.hitch(this,function(b){!1===this._isSameVal()&&this.spinner.setValue(b)})));this.own(a(this.spinner,"change",c.hitch(this,function(b){!1===this._isSameVal()&&100>=b&&this.slider.setValue(b)})));this._stylePolyfill();this.inherited(arguments)},_setAriaLabelForEditorNodes:function(){var b="",a="";this.nls.gridSettings&&(b="Fill"===this.typeOfColorPicker?this.nls.gridSettings.cellFill:this.nls.gridSettings.cellOutline,
a=this.nls.gridSettings.colorPicker);m.set(this.colorPicker.domNode,"aria-label",b+" "+a);m.set(this.slider,"aria-label",b+" "+this.nls.transparency);m.set(this.spinner,"aria-label",b+" "+this.nls.transparency)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var b=null,a=null;(a=this.colorPicker.getColor())&&a.toHex&&(b=a.toHex());a=this.spinner.getValue()/100;return{color:b,transparency:a}},setValues:function(b){if("object"===typeof b||"string"===
typeof b)this.colorPicker.setColor(new g(b.color)),b.transparency="undefined"===typeof b.transparency?0:100*b.transparency,this.slider.setValue(b.transparency),this.spinner.setValue(b.transparency)},_stylePolyfill:function(){var b=e(".dijitSliderLeftBumper",this.domNode)[0];b&&b.parentNode&&h.setStyle(b.parentNode,"background-color","#24b5cc")}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n){return r([c,g],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){q.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;a.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;a.addClass(this.domNode,"disable")},isPartOfPopup:function(d){var c=this.tooltipDialog.domNode;return d===c||a.isDescendant(d,c)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){q.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){q.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var d=a.create("div");this.tooltipDialog=new l({content:d});a.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var c=new k({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:m.hitch(this,function(b){b&&(b=new h(b),this.setColor(b),this.onChange(b))})});c.placeAt(d);c.startup();this.own(e(c,"close",m.hitch(this,function(){this._hideTooltipDialog()})));this.own(e(c,"change-style",m.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(e(this.domNode,"click",m.hitch(this,function(b){b.stopPropagation();b.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(e(document,"click",m.hitch(this,function(b){this.isPartOfPopup(b.srcElement||b.target)||this._hideTooltipDialog()})));this.picker=c},setColor:function(d){if(d instanceof h){null===this.color&&!0===this.showLabel&&this._changeLabel(d);var c=d.toHex();this.color=d;a.setStyle(this.domNode,"backgroundColor",c);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(c,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(d){a.empty(this.domNode);a.create("span",{innerHTML:d.toHex(),className:"color-label",style:{color:n.invertColor(d.toHex())}},this.domNode)},onChange:function(a){a&&this.showLabel&&this._changeLabel(a)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(a){this.domNode.title=a},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/GriddedReferenceGraphic/js/FontSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/array dojo/dom-attr dojo/Evented dojo/query dojo/keys dojo/aspect dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/FontSetting.html jimu/dijit/ColorPickerPopup dijit/form/HorizontalSlider ./TransparencyEditor dojo/store/Memory jimu/dijit/formSelect jimu/dijit/CheckBox jimu/dijit/ImageChooser dijit/form/ComboBox".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t,f){return r([n,d,p,h],{templateString:b,nls:null,_FONTS:null,_MIN_TEXT_SIZE:12,_MAX_TEXT_SIZE:48,_INTERVAL_TEXT_SIZE:2,_DEFAULT_CONFIG:null,postCreate:function(){this.inherited(arguments);this._FONTS="Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";");this._DEFAULT_CONFIG={font:{fontFamily:this._FONTS[0],bold:!1,italic:!1,underline:!1},fontSize:"24",textColor:"#282828",haloSize:1,haloColor:"#FFFFFF",haloOn:!0,labelTransparency:1};
this.config=c.mixin(c.clone(this._DEFAULT_CONFIG),this.config);a.forEach(this._FONTS,c.hitch(this,function(b){this.fontSelect.addOption({value:b,label:b})}));for(var b=new f({}),d=this._MIN_TEXT_SIZE,h=this._MAX_TEXT_SIZE;d<=h;d+=this._INTERVAL_TEXT_SIZE)b.put({id:d,name:d});this.textSizeSelect.store=b;e.set(this.textSizeSelect.domNode,"aria-label",this.nls.textSize);e.set(this.textSizeSelect.domNode,"role","combobox");e.set(this.textSizeSelect.domNode,"aria-expanded","false");k.after(this.textSizeSelect,
"loadAndOpenDropDown",c.hitch(this,function(){e.set(this.textSizeSelect.domNode,"aria-expanded","true")}));k.after(this.textSizeSelect,"closeDropDown",c.hitch(this,function(){e.set(this.textSizeSelect.domNode,"aria-expanded","false")}));this.textSizeSelect.validator=c.hitch(this,function(){var b=this.textSizeSelect.getValue();return null!==b&&""!==b?!isNaN(b):!1});this.textSizeSlider=new H({name:"slider",value:0,minimum:this._MIN_TEXT_SIZE,maximum:this._MAX_TEXT_SIZE,discreteValues:this.textSizeSelect.store.data.length+
1,intermediateChanges:!0,showButtons:!1,style:"display: inline-block;","aria-label":this.nls.textSize},this.sliderBar);this.textSizeSlider.startup();b="";this.nls.gridSettings&&(b=this.nls.gridSettings.colorPicker);this.textColorPicker=new v({role:"button",tabindex:"0","aria-label":this.nls.textColor+" "+b,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0},recordUID:this.recordUID});this.textColorPicker.placeAt(this.textColorBtn);this.textColorPicker.startup();
this.labelTransparency=new t({ariaLabel:this.nls.transparency},this.transparencySlider);this.labelTransparency.startup();for(var p=[],u,d=1,h=10;d<=h;d+=1)u={value:d.toString(),label:d.toString()},p.push(u);this.haloSizeSelect.addOption(p);this.haloSizeSelect.validator=c.hitch(this,function(){var b=this.haloSizeSelect.get("value");return null!==b&&""!==b?!isNaN(b):!1});this.haloColorPicker=new v({role:"button",tabindex:"0","aria-label":this.nls.halo+" "+b,appearance:{showTransparent:!1,showColorPalette:!0,
showCoustom:!0,showCoustomRecord:!0}});this.haloColorPicker.placeAt(this.haloColorBtn);this.haloColorPicker.startup();this.own(g(this.fontSelect,"change",c.hitch(this,function(b){if(this.config.font.fontFamily!==b)this.onSettingChange({font:{fontFamily:b,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline}})})));this._initAppearance();this.own(g(this.bold,"click",c.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.bold,"bold")})));this.own(g(this.italic,
"click",c.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.italic,"italic")})));this.own(g(this.underline,"click",c.hitch(this,function(){this._clickHandlerOfBoldItalicUnderline(this.underline,"underline")})));this.own(g(this.bold,"keydown",c.hitch(this,function(b){b.keyCode!==q.ENTER&&b.keyCode!==q.SPACE||this._clickHandlerOfBoldItalicUnderline(this.bold,"bold")})));this.own(g(this.italic,"keydown",c.hitch(this,function(b){b.keyCode!==q.ENTER&&b.keyCode!==q.SPACE||this._clickHandlerOfBoldItalicUnderline(this.italic,
"italic")})));this.own(g(this.underline,"keydown",c.hitch(this,function(b){b.keyCode!==q.ENTER&&b.keyCode!==q.SPACE||this._clickHandlerOfBoldItalicUnderline(this.underline,"underline")})));this.own(g(this.textSizeSelect,"change",c.hitch(this,function(b){this.config.fontSize!==b&&!1!==this.textSizeSelect.isValid()&&(this.setTextSize(b),this.onSettingChange({fontSize:b}))})));this.own(g(this.textSizeSlider,"change",c.hitch(this,function(b){this.config.fontSize!==b&&(this.setTextSize(Math.round(b)),
this.onSettingChange({fontSize:b}))})));this.own(g(this.textColorPicker,"change",c.hitch(this,function(b){if(this.config.textColor!==b)this.onSettingChange({textColor:b.toHex()})})));this.own(this.labelTransparency.watch("transparency",c.hitch(this,function(){this.onSettingChange({labelTransparency:this.labelTransparency.getValues().transparency})})));this.own(g(this.haloSizeSelect,"change",c.hitch(this,function(b){if(this.config.haloSize!==b&&!1!==this.haloSizeSelect.isValid())this.onSettingChange({haloSize:b})})));
this.own(g(this.haloColorPicker,"change",c.hitch(this,function(b){if(this.config.haloColor!==b)this.onSettingChange({haloColor:b.toHex()})})));this.own(g(this.showHalo,"change",c.hitch(this,function(){this.onSettingChange({haloOn:this.showHalo.checked})})));d=l(".jimu-color-pickerPopup",this.domNode);a.forEach(d,c.hitch(this,function(b){this.own(g(b,"keydown",c.hitch(this,function(b){b.keyCode!==q.ENTER&&b.keyCode!==q.SPACE||b.currentTarget.click()})))}))},startup:function(){this.inherited(arguments);
this.setConfig(this.config);this.refresh()},onSettingChange:function(b){this.config=c.mixin(this.config,b);this.onChange(this.config)},onChange:function(b){this.emit("change",b)},refresh:function(){this.onSettingChange({})},isValid:function(){return!1===this.textSizeSelect.isValid()?!1:!0},getConfig:function(){return this.isValid()?this.config:!1},setConfig:function(b){if("undefined"!==b){"undefined"!==typeof b.font&&(this.config.font=b.font,this.config.font.fontFamily&&this.fontSelect.set("value",
this.config.font.fontFamily),this.fontBtnClickd(this.config.font));"undefined"!==typeof b.fontSize&&(this.config.fontSize=b.fontSize,this.setTextSize(this.config.fontSize));if("undefined"===typeof b.textColor||""===b.textColor)b.textColor=this._DEFAULT_CONFIG.textColor;this.config.textColor=b.textColor;if("undefined"===typeof b.labelTransparency||""===b.labelTransparency)b.labelTransparency=this._DEFAULT_CONFIG.labelTransparency;this.config.labelTransparency=b.labelTransparency;this.labelTransparency.setValues({transparency:this.config.labelTransparency});
if("undefined"===typeof b.haloSize||""===b.haloSize)b.haloSize=this._DEFAULT_CONFIG.haloSize;this.config.haloSize=b.haloSize;this.haloSizeSelect.set("value",b.haloSize);if("undefined"===typeof b.haloColor||""===b.haloColor)b.haloColor=this._DEFAULT_CONFIG.haloColor;this.config.haloColor=b.haloColor;m.setStyle(this.textColorPicker.domNode,"backgroundColor",this.config.textColor);this.textColorPicker.picker.refreshRecords();this.textColorPicker.picker.setColor(this.config.textColor,!1,!0);m.setStyle(this.haloColorPicker.domNode,
"backgroundColor",this.config.haloColor);this.haloColorPicker.picker.refreshRecords();this.haloColorPicker.picker.setColor(this.config.haloColor,!1,!0);if("undefined"===typeof b.haloOn||""===b.haloOn)b.haloOn=this._DEFAULT_CONFIG.haloOn;this.showHalo.set("checked",this.config.haloOn)}},_clickHandlerOfBoldItalicUnderline:function(b,a){var d,c;d=!m.hasClass(b,"selected");b={fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline};
"bold"===a?b.bold=d:"italic"===a?b.italic=d:b.underline=d;c={};c[a]=d;this.fontBtnClickd(c);this.onSettingChange({font:b})},setTextSize:function(b){b!==this.textSizeSelect.getValue()&&this.textSizeSelect.set("value",b);b!==this.textSizeSlider.getValue()&&(b>this._MAX_TEXT_SIZE?b=this._MAX_TEXT_SIZE:b<this._MIN_TEXT_SIZE&&(b=this._MIN_TEXT_SIZE),this.textSizeSlider.set("value",b))},fontBtnClickd:function(b){!0===b.bold?(m.addClass(this.bold,"selected"),e.set(this.bold,"aria-pressed","true")):!1===
b.bold&&(m.removeClass(this.bold,"selected"),e.set(this.bold,"aria-pressed","false"));!0===b.italic?(m.addClass(this.italic,"selected"),e.set(this.italic,"aria-pressed","true")):!1===b.italic&&(m.removeClass(this.italic,"selected"),e.set(this.italic,"aria-pressed","false"));!0===b.underline?(m.addClass(this.underline,"selected"),e.set(this.underline,"aria-pressed","true")):!1===b.underline&&(m.removeClass(this.underline,"selected"),e.set(this.underline,"aria-pressed","false"))},_initAppearance:function(){this.appearance&&
(!1===this.appearance.bold&&m.addClass(this.bold,"hide"),!1===this.appearance.italic&&m.addClass(this.italic,"hide"),!1===this.appearance.underline&&m.addClass(this.underline,"hide"))}})})},"widgets/GriddedReferenceGraphic/js/TransparencyEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/Stateful dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/TransparencyEditor.html dijit/form/HorizontalSlider dijit/form/NumberSpinner".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n,d){return r([e,l,q,k],{templateString:n,transparency:1,postCreate:function(){this.slider=new d({name:"slider",value:0,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;",tabindex:"0","aria-label":this.ariaLabel},this.sliderBar);this.slider.startup();this.inherited(arguments);a.set(this.spinner,"aria-label",this.ariaLabel)},startup:function(){this.own(g(this.slider,"change",c.hitch(this,function(a){!1===
this._isSameVal()&&(this.spinner.setValue(a),this._set("transparency",a/100))})));this.own(g(this.spinner,"change",c.hitch(this,function(a){!1===this._isSameVal()&&100>=a&&(this.slider.setValue(a),this._set("transparency",a/100))})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var a=null,a=this.spinner.getValue()/100;return{transparency:a}},setValues:function(a){if("object"===typeof a||"string"===
typeof a)a.transparency="undefined"===typeof a.transparency?0:100*a.transparency,this.slider.setValue(a.transparency),this.spinner.setValue(a.transparency)},_stylePolyfill:function(){var a=m(".dijitSliderLeftBumper",this.domNode)[0];a&&a.parentNode&&h.setStyle(a.parentNode,"background-color","#24b5cc")}})})},"widgets/GriddedReferenceGraphic/js/drawGRG":function(){define("esri/geometry/Point esri/geometry/Polygon esri/geometry/geometryEngine esri/graphic esri/geometry/webMercatorUtils esri/SpatialReference esri/geometry/Circle esri/request dojo/json ./geometryUtils".split(" "),
function(r,c,g,m,a,e,h,l,q,k){var n={createGRG:function(d,l,b,q,H,t,f,x,D,L,w,u,C,A){var p,v,y,B,E,M,N,Q,K,W,X,ea=[],S=0,T=0,U=q/2/Math.cos(30*Math.PI/180),da,O=d;switch(f){case "upperLeft":"horizontal"===D?(p=l-1,v=-1,"numeric"!==x?y=0:(y=(l-1)*d,"hexagon"===L&&(y+=Math.floor(l/2)))):(p=-1,v=l-1,"numeric"!==x&&(y=l));break;case "upperRight":"horizontal"===D?(p=l-1,v=d,"numeric"!==x?y=d+1:(y=l*d+1,"hexagon"===L&&(y+=Math.floor(l/2)))):(y="numeric"!==x?l:l*(d+1),p=d,v=l-1);break;case "lowerRight":"horizontal"===
D?(p=0,v=d,y=d+1):(p=d,v=0,y=1);break;case "lowerLeft":"horizontal"===D?(y=p=0,v=-1):(p=-1,y=1,v=0)}var Y=d*q/2,Z;Z="hexagon"===L?1===l%2?((l-1)/2*3*U+U)/2:(l/2*3*U-U/2)/2:l*H/2;for(var G=null,G=null,J=1;J<=l;J++){for(var R=1;R<=d;R++){if(u){G=new c;if(1===J&&1===R)switch(102100===b.spatialReference.wkid&&(b=a.webMercatorToGeographic(b)),w){case "center":B=k.getDestinationPoint(b,180+t,Z);B=k.getDestinationPoint(B,270+t,Y);break;case "upperLeft":B=k.getDestinationPoint(b,180+t,2*Z);break;case "upperRight":B=
k.getDestinationPoint(b,180+t,2*Z);B=k.getDestinationPoint(B,270+t,2*Y);break;case "lowerRight":B=k.getDestinationPoint(b,270+t,2*Y);break;case "lowerLeft":B=b}"default"===L?(M=k.getDestinationPoint(B,0+t,H),N=k.getDestinationPoint(M,90+t,q),E=k.getDestinationPoint(N,180+t,H),G.addRing([[B.x,B.y],[M.x,M.y],[N.x,N.y],[E.x,E.y]]),B=E):(E=B,Q=k.getDestinationPoint(E,0+t,U),K=k.getDestinationPoint(Q,60+t,U),N=k.getDestinationPoint(K,120+t,U),W=k.getDestinationPoint(N,180+t,U),X=k.getDestinationPoint(W,
240+t,U),G.addRing([[E.x,E.y],[Q.x,Q.y],[K.x,K.y],[N.x,N.y],[W.x,W.y],[X.x,X.y]]),B=k.getDestinationPoint(B,90+t,q));G=g.simplify(G);C.spatialReference.wkid&&4326!==C.spatialReference.wkid&&(G=A.isLoaded()?A.project(G,C.spatialReference):a.geographicToWebMercator(G));G=new m(G);1===R&&(da="hexagon"===L?O===d?k.getDestinationPoint(Q,300+t,U):K:M)}else{G=new c(new e({wkid:102100}));4326===b.spatialReference.wkid&&(b=a.geographicToWebMercator(b));switch(w){case "center":S=b.x-Y;T=b.y-Z;break;case "upperLeft":S=
b.x;T=b.y-2*Z;break;case "upperRight":S=b.x-2*Y;T=b.y-2*Z;break;case "lowerRight":S=b.x-2*Y;T=b.y;break;case "lowerLeft":S=b.x,T=b.y}"default"===L?G.addRing([[S+(R-1)*q,T+(J-1)*H],[S+(R-1)*q,T+J*H],[S+R*q,T+J*H],[S+R*q,T+(J-1)*H],[S+(R-1)*q,T+(J-1)*H]]):(S=O===d?S+(R-1)*q+q/2:S+(R-1)*q,T=T+U+1.5*(J-1)*U,E=new r([S,T],new e({wkid:102100})),N=new h(E,{radius:U,numberOfPoints:6}),E=g.rotate(N,90,E),G.addRing(E.rings[0]));G=g.rotate(G,-1*t,b);C.spatialReference.wkid&&102100!==C.spatialReference.wkid&&
(G=A.isLoaded()?A.project(G,C.spatialReference):a.webMercatorToGeographic(G));G=new m(G)}switch(f){case "upperLeft":"horizontal"===D?(v+=1,y+=1):(p+=1,"numeric"===x&&(y=l*R-(J-1)));break;case "lowerLeft":"horizontal"===D?(v+=1,y+=1):(p+=1,"numeric"===x&&(y=l*(R-1)+J));break;case "upperRight":"horizontal"===D?(--y,--v):(--p,"numeric"===x&&(y-=d));break;case "lowerRight":"horizontal"===D?(--y,--v):(--p,"numeric"===x&&(y=l*(d-R)+J))}ea.push(n.addGraphicLabel(G,x,y,p,v))}B=da;"hexagon"===L&&(O===d?d++:
d--);switch(f){case "upperLeft":"horizontal"===D?(--p,y="numeric"!==x?0:"hexagon"===L?y-2*O-1:y-2*d,v=-1):(p=-1,v=l-(J+1),"numeric"!==x&&(y=l-J));break;case "upperRight":"horizontal"===D?(--p,"numeric"!==x&&(y=d+1),v=d):(y="numeric"!==x?y-1:l*(d+1)-J,p=d,--v);break;case "lowerRight":"horizontal"===D?(p+=1,y="numeric"!==x?d+1:"hexagon"===L?y+2*O+1:y+2*d,v=d):(p=d,v+=1,y="numeric"!==x?y+1:d*J);break;case "lowerLeft":"horizontal"===D?(p+=1,"numeric"!==x&&(y=0),v=-1):(p=-1,"numeric"!==x&&(y+=1),v=J)}}return ea},
convertNumberToLetters:function(a){for(var d="";0<=a;)d=String.fromCharCode(a%26+65)+d,a=Math.floor(a/26)-1;return d},checkGridSize:function(a,c){return 2E3>a*c},getFeatureServiceParams:function(a,c){return{name:a,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:{wkid:102100},initialExtent:{xmin:c.extent.xmin,ymin:c.extent.ymin,xmax:c.extent.xmax,ymax:c.extent.ymax,
spatialReference:{wkid:102100}},allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(a,c,b,e){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:a,type:"Feature Layer",displayField:"",description:"A GRG (Gridded Reference Graphic) is a grid overlay used for a commonreference point in many situations - from cordon and search operations to securityfor presidential inaugurations.",
tags:"GRG",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,
supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:{xmin:c.extent.xmin,ymin:c.extent.ymin,xmax:c.extent.xmax,ymax:c.extent.ymax,spatialReference:{wkid:102100}},drawingInfo:{renderer:{type:"simple",symbol:e},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},
format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:b}]},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"grid",type:"esriFieldTypeString",
alias:"grid",actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{grid:""}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(a,
c,b){return l({url:a,content:{name:b,type:"Feature Service",token:c,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(a,c,b){return l({url:a,content:{f:"json",token:c,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:q.stringify(b),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(a,c,b){return l({url:a,content:{token:c,addToDefinition:q.stringify(b),
f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},labelReferenceGrid:function(a,c,b,e){for(var d=-1,h=1,f,l=!0,p=null,k=[],w;0<a.length;)if(l){d++;"alphaNumeric"===c?h=1:"alphaAlpha"===c&&(f=0);var u=g.union(a);w=u.getExtent();var q;switch(b){case "lowerLeft":q=g.nearestCoordinate(u,new r(w.xmin,w.ymin,w.spatialReference));break;case "lowerRight":q=g.nearestCoordinate(u,new r(w.xmax,w.ymin,w.spatialReference));break;case "upperLeft":q=g.nearestCoordinate(u,new r(w.xmin,w.ymax,
w.spatialReference));break;case "upperRight":q=g.nearestCoordinate(u,new r(w.xmax,w.ymax,w.spatialReference))}for(w=0;w<a.length;w++)if(g.touches(a[w],q.coordinate)){p=a[w];k.push(n.addGraphicLabel(new m(a[w]),c,h,d,f));h++;f++;l=a.indexOf(a[w]);a.splice(l,1);l=!1;break}}else{l=!0;w=p.getExtent();var v;switch(b){case "lowerLeft":v=g.nearestCoordinate(p,new r(w.xmax,w.ymin,w.spatialReference));break;case "lowerRight":v=g.nearestCoordinate(p,new r(w.xmin,w.ymin,w.spatialReference));break;case "upperLeft":v=
g.nearestCoordinate(p,new r(w.xmax,w.ymax,w.spatialReference));break;case "upperRight":v=g.nearestCoordinate(p,new r(w.xmin,w.ymax,w.spatialReference))}for(u=0;u<a.length;u++){w=a[u].getExtent();var I;switch(b){case "lowerLeft":I=g.nearestCoordinate(a[u],new r(w.xmin,w.ymin,w.spatialReference));break;case "lowerRight":I=g.nearestCoordinate(a[u],new r(w.xmax,w.ymin,w.spatialReference));break;case "upperLeft":I=g.nearestCoordinate(a[u],new r(w.xmin,w.ymax,w.spatialReference));break;case "upperRight":I=
g.nearestCoordinate(a[u],new r(w.xmax,w.ymax,w.spatialReference))}w=g.buffer(I.coordinate,"UTM"===e?1E4:e/5,9001);if(g.contains(w,v.coordinate)){p=a[u];k.push(n.addGraphicLabel(new m(a[u]),c,h,d,f));h++;f++;l=a.indexOf(a[u]);a.splice(l,1);l=!1;break}}}return k},addGraphicLabel:function(a,c,b,e,h){e=n.convertNumberToLetters(e);h=n.convertNumberToLetters(h);var d={};switch(c){case "alphaNumeric":d.grid=e.toString()+b.toString();break;case "alphaAlpha":d.grid=e.toString()+"-"+h.toString();break;case "numeric":d.grid=
b.toString()}a.setAttributes(d);return a},checkPolarRegion:function(a){var d=new c({rings:[[[-180,84],[-180,90],[180,90],[180,84],[-180,84]],[[-180,-90],[-180,-80],[180,-80],[180,-90],[-180,-90]]],spatialReference:{wkid:4326}});return g.intersects(a,d)}};return n})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(r,c,g,m,a,e,h,l,q,k){r=r(e,{declaredClass:"esri.geometry.Circle",
_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(e,d){e.center?d=e:(d=d||{},d.center=e);this.center=c.isArray(d.center)?new a(d.center[0],d.center[1]):d.center;this.radius=d.radius||1E3;this.radiusUnit=d.radiusUnit||k.METERS;this.geodesic=!0===d.geodesic?!0:!1;this.numberOfPoints=d.numberOfPoints||60;this._init()},
toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var a=this.radius*this._unitToMeters[this.radiusUnit],d=this._srType(this.center.spatialReference);if(this.geodesic){var c;switch(d){case "webMercator":c=l.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":c=this.center}a=this._createGeodesicCircle(c,
a,this.numberOfPoints,c.spatialReference);"webMercator"===d&&(a=l.geographicToWebMercator(a))}else{var b;"webMercator"===d||"projected"===d?b=a/this._convert2Meters(1,this.center.spatialReference):"geographic"===d&&(b=a/this._unitToMeters.esriDecimalDegrees);a=this._createPlanarCircle(this.center,b,this.numberOfPoints)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0]);this.verifySR()},_createGeodesicCircle:function(a,d,c,b){for(var g=0,l=Math.PI/180,t=[],f;g<2*Math.PI;)f=h._directGeodeticSolver(a.y*
l,a.x*l,g,d,b),t.push([f.x,f.y]),g+=Math.PI/(c/2);t.push(t[0]);return new e(t)},_createPlanarCircle:function(a,d,c){for(var b=0,h=[],g,l;b<2*Math.PI;)g=a.x+Math.cos(b)*d,l=a.y+Math.sin(b)*d,h.push([g,l]),b+=Math.PI/(c/2);h.push(h[0]);a=new e(a.spatialReference);a.addRing(h);return a},_srType:function(a){return a.isWebMercator()?"webMercator":null!=q[a.wkid]||a.wkt&&0===a.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(a,d){if(null!=q[d.wkid])d=q.values[q[d.wkid]];else{d=d.wkt;
var c=d.lastIndexOf(",")+1,b=d.lastIndexOf("]]");d=parseFloat(d.substring(c,b))}return a*d}});g("extend-esri")&&c.setObject("geometry.Circle",r,m);return r})},"widgets/GriddedReferenceGraphic/js/geometryUtils":function(){define("esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils dojo/Deferred dojo/_base/array dojo/_base/lang esri/geometry/geometryEngine esri/SpatialReference esri/geometry/scaleUtils".split(" "),function(r,c,g,m,a,e,h,l,q,k){var n={getProjectedGeometry:function(d,
c,b){var e,h;e=new a;m.canProject(d,c)?(h=m.project(d,c),e.resolve(h)):b.project([d],c,function(b){h=b[0];e.resolve(h)});return e.promise},getDestinationPoint:function(a,c,b){var d=a.x*Math.PI/180,e=c*Math.PI/180;c=Math.sin(e);var e=Math.cos(e),h=.9966471893352243*Math.tan(a.y*Math.PI/180);a=1/Math.sqrt(1+h*h);var f=h*a,g=Math.atan2(h,e),h=a*c,l=1-h*h,p=2.7233160610984375E11*l/4.040829998465916E13,k=1+p/16384*(4096+p*(-768+p*(320-175*p))),u=p/1024*(256+p*(-128+p*(74-47*p))),m,n,I,F=b/(6356752.314245*
k),y,B=0;do p=Math.cos(2*g+F),m=Math.sin(F),n=Math.cos(F),I=u*m*(p+u/4*(n*(-1+2*p*p)-u/6*p*(-3+4*m*m)*(-3+4*p*p))),y=F,F=b/(6356752.314245*k)+I;while(1E-12<Math.abs(F-y)&&200>++B);if(200<=B)return null;b=f*m-a*n*e;b=Math.atan2(f*n+a*m*e,.9966471893352243*Math.sqrt(h*h+b*b));l=2.0955066654848088E-4*l*(4+.003352810664775694*(4-3*l));d=(d+(Math.atan2(m*c,a*n-f*m*e)-.003352810664775694*(1-l)*h*(F+l*m*(p+l*n*(-1+2*p*p))))+3*Math.PI)%(2*Math.PI)-Math.PI;b=180*b/Math.PI;d=180*d/Math.PI;return new r(d,b,
new q(4326))},getInverseCalculations:function(a,c){var b=c.x*Math.PI/180-a.x*Math.PI/180,d=.9966471893352243*Math.tan(a.y*Math.PI/180);a=1/Math.sqrt(1+d*d);var d=d*a,e=.9966471893352243*Math.tan(c.y*Math.PI/180);c=1/Math.sqrt(1+e*e);var e=e*c,h,f,g,l,p,k,u,q,m,n=b,r,y=0;do{h=Math.sin(n);f=Math.cos(n);g=c*h*c*h+(a*e-d*c*f)*(a*e-d*c*f);g=Math.sqrt(g);if(0==g)return 0;l=d*e+a*c*f;p=Math.atan2(g,l);k=a*c*h/g;u=1-k*k;q=l-2*d*e/u;isNaN(q)&&(q=0);m=2.0955066654848088E-4*u*(4+.003352810664775694*(4-3*u));
r=n;n=b+.003352810664775694*(1-m)*k*(p+m*g*(q+m*l*(-1+2*q*q)))}while(1E-12<Math.abs(n-r)&&200>++y);if(200<=y)return null;n=2.7233160610984375E11*u/4.040829998465916E13;y=n/1024*(256+n*(-128+n*(74-47*n)));b=Math.atan2(c*h,a*e-d*c*f);a=Math.atan2(a*h,-d*c+a*e*f);b=(b+2*Math.PI)%(2*Math.PI);a=(a+2*Math.PI)%(2*Math.PI);d=Number((6356752.314245*(1+n/16384*(4096+n*(-768+n*(320-175*n))))*(p-y*g*(q+y/4*(l*(-1+2*q*q)-y/6*q*(-3+4*g*g)*(-3+4*q*q))))).toFixed(3));b=180*b/Math.PI;a=180*a/Math.PI;return{distance:d,
initialBearing:b,finalBearing:a}},getLineBetweenPoints:function(a){var d,b=[];e.forEach(a,h.hitch(this,function(a){b.push([a.x,a.y])}));0<b.length&&(d=new c({paths:[b],spatialReference:{wkid:4326}}));return d},getAngleBetweenPoints:function(a,c){a=n.getInverseCalculations(a,c);return null===a?0:a.initialBearing},getDistanceBetweenPoints:function(a,c){a=n.getInverseCalculations(a,c);return null===a?0:a.distance},getLengthOfGeometry:function(a){return(a=l.simplify(a))?l.geodesicLength(a,9001):0},getAreaOfGeometry:function(a){var d;
a=l.simplify(a);d={};a?(d.acres=l.geodesicArea(a,109402),d.squareMeters=l.geodesicArea(a,109404),d.squareFeet=l.geodesicArea(a,109405),d.squareUsFeet=l.geodesicArea(a,109406)):(d.acres=0,d.squareMeters=0,d.squareFeet=0,d.squareUsFeet=0);return d},getPolyLineFromPaths:function(a){var d,b;d=new c(new q({wkid:4326}));for(b=0;b<a.length;b++)d.addPath(a[b]);return d},getPolygonFromPolyLines:function(a,c,b,e){var d,l,f;d=[];e=e?new g(new q(e)):new g(new q({wkid:4326}));for(l=0;l<a.length;l++)for(f=0;f<
a[l].length;f++)d.push(a[l][f]);c?d.push(h.clone(d[0])):b&&(d[d.length-1][0]=d[0][0],d[d.length-1][1]=d[0][1]);e.isClockwise(d)||d.reverse();e.addRing(d);return e},getPointsForArc:function(a,c,b,e){var d,h=[],f,g;d=c-a;c=parseInt(d,10);0>=c&&(c=1);f=Math.abs(d)/Math.abs(c);if(0<f)for(d=0;d<Math.abs(c)+1;d++)g=a+f*d,(g=n.getDestinationPoint(b,g,Math.abs(e)))&&h.push(g);return h},getArcParam:function(a){var d;d={};0>a.distance?0>a.radius?(d.bearing=a.initBearing+90,d.centerPoint=n.getDestinationPoint(a.chordMidPoint,
d.bearing,a.centerAndChordDistance),d.startAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordEndPoint),d.endAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordStartPoint)):(d.bearing=a.initBearing-90,d.centerPoint=n.getDestinationPoint(a.chordMidPoint,d.bearing,a.centerAndChordDistance),d.startAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordStartPoint),d.endAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordEndPoint)):0<a.radius?(d.bearing=a.initBearing+90,d.centerPoint=n.getDestinationPoint(a.chordMidPoint,
d.bearing,a.centerAndChordDistance),d.startAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordStartPoint),d.endAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordEndPoint)):(d.bearing=a.initBearing-90,d.centerPoint=n.getDestinationPoint(a.chordMidPoint,d.bearing,a.centerAndChordDistance),d.startAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordEndPoint),d.endAngle=n.getAngleBetweenPoints(d.centerPoint,a.chordStartPoint));return d},removeNegativeExponents:function(a){return 1<a.toString().toLowerCase().split("e-").length?
0:a},getChordLengthFromArcLength:function(a,c){var b;a=Math.abs(a);b=Math.PI*Math.abs(c);c=Math.abs(c)*Math.sin(Math.abs(a)/Math.abs(c)/2);return a<=b?2*c:-2*c},getArcLengthFromChordLength:function(a,c){var b;b=Math.abs(a);c=Math.abs(c);b=2*Math.asin(b/(2*c))*c;0>a&&(b=2*Math.PI*c-b);return b},chordBearingToTangentBearing:function(a,c,b){var d;d=180/Math.PI*Math.acos(Math.abs(b)/2/Math.abs(c));c/=Math.abs(c);a=a+90*c-b/Math.abs(b)*c*d;return n.removeNegativeExponents(0>a?a+360:360<=a?a%360:a)},tangentBearingToChordBearing:function(a,
c,b){var d;d=180/Math.PI*Math.acos(Math.abs(b)/2/Math.abs(c));c/=Math.abs(c);a=a+90*c-b/Math.abs(b)*c*d;return n.removeNegativeExponents(0>a?a+360:360<=a?a%360:a)},getUnitValueForSR:function(a){switch(k.getUnitValueForSR(a)){case 1:return"meters";case 111194.87428468118:return"meters";case .3048:return"feet";case .3048006096:case .3048006096012192:return"uSSurveyFeet"}},getRotationAngleBetweenPoints:function(a,c){var b,d;a=m.project(a,new q(102100));c=m.project(c,new q(102100));b=c.x-a.x;a=c.y-a.y;
c=180*Math.atan2(Math.abs(b),Math.abs(a))/Math.PI;d=180*Math.atan2(Math.abs(a),Math.abs(b))/Math.PI;b=n.removeNegativeExponents(b);a=n.removeNegativeExponents(a);c=n.removeNegativeExponents(c);d=n.removeNegativeExponents(d);if(0===a){if(0===b)return 0;if(0<b)return 90;if(0>b)return 270}else if(0<a){if(0===b)return 0;if(0<b)return c;if(0>b)return 270+d}else if(0>a){if(0===b)return 180;if(0<b)return 90+d;if(0>b)return 180+c}},getScaleDistanceBetweenPoints:function(a,c){a=m.project(a,new q(102100));
c=m.project(c,new q(102100));a=l.distance(a,c,9001);return n.removeNegativeExponents(a)}};return n})},"widgets/GriddedReferenceGraphic/js/geometry-utils":function(){define(["./constants","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon"],function(r,c,g,m){return{toGeographic:function(a){return a.spatialReference.isWebMercator()?c.webMercatorToGeographic(a):a},toWebMercator:function(a){return a.spatialReference.isWebMercator()?a:c.geographicToWebMercator(a)},_latitudeToWebMercatorY:function(a){return r.GEOGRAPHIC_360/
2*(r.HALF_PI-2*Math.atan(Math.exp(-1*a/r.WGS84_EQUATORIAL_RADIUS)))/Math.PI},_longitudeToWebMercatorX:function(a){var c=r.GEOGRAPHIC_360,h=r.GEOGRAPHIC_360/2,g=r.WGS84_EQUATORIAL_RADIUS;return a/g*h/Math.PI-Math.floor((a/g*h/Math.PI+h)/c)*c},pointToGeographic:function(a){for(var c=a.x,h=a.y,g=(a=a.spatialReference.isWebMercator())?r.WEST_WEBMERCATOR_LIMIT:r.WEST_GEOGRAPHIC_LIMIT,q=a?r.EAST_WEBMERCATOR_LIMIT:r.EAST_GEOGRAPHIC_LIMIT,k=a?r.WEBMERCATOR_360:r.GEOGRAPHIC_360,n=0;c<=g;)c+=k,--n;for(;c>q;)c-=
k,n+=1;a&&(c=this._longitudeToWebMercatorX(c),h=this._latitudeToWebMercatorY(h));return{x:c,y:h,offsetX:n}},extentToPolygon:function(a){return new m({rings:[[[a.xmin,a.ymin],[a.xmax,a.ymin],[a.xmax,a.ymax],[a.xmin,a.ymax],[a.xmin,a.ymin]]],spatialReference:a.spatialReference})},polygonToPolyline:function(a){return new g({paths:a.rings,spatialReference:{wkid:a.spatialReference.wkid}})}}})},"widgets/GriddedReferenceGraphic/js/constants":function(){define([],function(){return{ZONE_WIDTH_DEGREES:6,ZONE_HEIGHT_DEGREES:8,
MIN_MGRS_LATITUDE:-80,MAX_MGRS_LATITUDE:84,POSITIVE_180:179.99999999,NEGATIVE_180:-179.99999999,WEST_GEOGRAPHIC_LIMIT:-180,EAST_GEOGRAPHIC_LIMIT:180,GEOGRAPHIC_360:360,WEST_WEBMERCATOR_LIMIT:-2.0037508342789244E7,EAST_WEBMERCATOR_LIMIT:2.0037508342789244E7,WEBMERCATOR_360:4.007501668557849E7,DEGREES_PER_RADIAN:57.29577951308232,RADIANS_PER_DEGREE:.017453292519943295,WGS84_EQUATORIAL_RADIUS:6378137,WGS84_HALF_EQUATORIAL_RADIUS:3189068.5,HALF_PI:1.5707963267948966}})},"widgets/GriddedReferenceGraphic/js/mgrs-utils":function(){define("dojo/json ./constants ./geometry-utils ./geometryUtils ./mgrs ./NonPolarGridZone ./VisibleGridZone ./GridPolygon esri/geometry/geometryEngine esri/geometry/Point esri/geometry/Polygon".split(" "),
function(r,c,g,m,a,e,h,l,q,k,n){Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10});return{_ZonesDictionary:function(){var a,h,b,g="CDEFGHJKLMNPQRSTUVWX".split(""),l={},k=function(a,b){var d,f,h=a+g[b];if("32X"===h||"34X"===h||"36X"===h)return null;"31V"===h?d={xmin:0,ymin:56,xmax:3,ymax:64,id:h}:"32V"===h?d={xmin:3,ymin:56,xmax:12,ymax:64,id:h}:"31X"===h?d={xmin:0,ymin:72,xmax:9,ymax:84,id:h}:"33X"===h?d={xmin:9,ymin:72,xmax:21,ymax:84,id:h}:"35X"===h?d={xmin:21,ymin:72,xmax:33,ymax:84,
id:h}:"37X"===h?d={xmin:33,ymin:72,xmax:42,ymax:84,id:h}:(d=(a-1)*c.ZONE_WIDTH_DEGREES-180,a=a*c.ZONE_WIDTH_DEGREES-180,f=b*c.ZONE_HEIGHT_DEGREES+c.MIN_MGRS_LATITUDE,b=(b+1)*c.ZONE_HEIGHT_DEGREES+c.MIN_MGRS_LATITUDE,d=180===d?c.POSITIVE_180:d,d=-180===d?c.NEGATIVE_180:d,a=180===a?c.POSITIVE_180:a,a=-180===a?c.NEGATIVE_180:a,80===b&&(b=c.MAX_MGRS_LATITUDE),d={xmin:d,ymin:f,xmax:a,ymax:b,id:h});return new e(d)};for(a=1;60>=a;a++)for(h=0;h<g.length;h++)(b=k(a,h))&&(l[b.id]=b);for(a=1;60>=a;a++){var f=
[];for(h=0;h<g.length;h++)if(b=k(a,h))b=new n({rings:r.parse(r.stringify(b._rings))}),f.push(b);f=q.union(f);for(h=0;h<g.length;h++)(b=k(a,h))&&(l[b.id.fullZoneGeometry]=f)}return l}(),zonesFromExtent:function(a,e){var b,d,l,t,f,m,p,L,w,u=a.spatialReference.isWebMercator()?c.WEBMERCATOR_360:c.GEOGRAPHIC_360,C="CDEFGHJKLMNPQRSTUVWX".split(""),A=[];if(a.xmax-a.xmin>u)return A;var u=g.extentToPolygon(a),u=g.toWebMercator(u),I=g.pointToGeographic(new k([a.xmin,a.ymin],a.spatialReference)),F=g.pointToGeographic(new k([a.xmax,
a.ymax],a.spatialReference));a=I.y;l=F.y;L=I.offsetX;w=F.offsetX;for(var y=L;y<=w;y++)for(b=y>L?c.NEGATIVE_180:I.x,d=y<w?c.POSITIVE_180:F.x,t=Math.min(Math.max(Math.floor((a+80)/c.ZONE_HEIGHT_DEGREES),0),19),f=Math.min(Math.floor((l+80)/c.ZONE_HEIGHT_DEGREES),19),b=Math.floor((b+180)/c.ZONE_WIDTH_DEGREES),d=Math.min(Math.floor((d+180)/c.ZONE_WIDTH_DEGREES)+2,60);b<=d;b++)for(var B=t;B<=f;B++)if(m=C[B],m=b+m,this._ZonesDictionary[m]){p=r.parse(r.stringify(this._ZonesDictionary[m]._rings));for(var E=
0;E<p[0].length;E++)p[0][E][0]+=y*c.GEOGRAPHIC_360;p=new n({rings:p});(p=q.intersect(g.toWebMercator(p),u))&&A.push(new h({map:e,polygon:p,fullZoneGeometry:this._ZonesDictionary[m].fullZoneGeometry,offset:y,nonPolarGridZone:this._ZonesDictionary[m],utmZone:this._ZonesDictionary[m].utmZone,latitudeBand:this._ZonesDictionary[m].latitudeZone}))}return A},processZonePolygons:function(c,e,b){var d=[];b=g.toWebMercator(b);for(var h=0;h<c.length;h++){var l=c[h];if(l)var f=l.nonPolarGridZone.latitudeZone,
k=g.toGeographic(l.polygon.getExtent()),q=a.LLtoUTM(k.ymin,k.xmin,l.nonPolarGridZone.utmZone),m=a.LLtoUTM(k.ymin,k.xmax,l.nonPolarGridZone.utmZone),w=a.LLtoUTM(k.ymax,k.xmax,l.nonPolarGridZone.utmZone),k=a.LLtoUTM(k.ymax,k.xmin,l.nonPolarGridZone.utmZone),l={minE:Math.min(q[0],m[0],w[0],k[0]),maxE:Math.max(q[0],m[0],w[0],k[0]),minN:Math.min(q[1],m[1],w[1],k[1]),maxN:Math.max(q[1],m[1],w[1],k[1]),utmZone:l.nonPolarGridZone.utmZone,latitudeZone:f,polygon:l.polygon,offset:l.offset,fullZoneGeometry:g.extentToPolygon(l.nonPolarGridZone.extent)},
d=d.concat(this.handle100kGrids(l,e,b))}return d},handle100kGrids:function(d,e,b){var h=d.polygon,k=d.offset,t=d.utmZone,f=d.latitudeZone,p=d.fullZoneGeometry,D=d.minE,r=d.maxE,w=d.maxN,u=[],C,A,I,F,y;for(d=1E5*Math.floor(d.minN/1E5);d<w;d+=1E5)for(C=1E5*Math.floor(D/1E5);C<r;C+=1E5){y=a.findGridLetters(t,0>d+5E4?1E7+(d+5E4):d+5E4,C+5E4);I=[];for(A=C;A<=C+1E5;A+=1E4)F=a.UTMtoLL(d,A,t),I.push([F.lon,F.lat]);for(A=d;A<d+1E5;A+=1E4)F=a.UTMtoLL(A,C+1E5,t),I.push([F.lon,F.lat]);for(A=C+1E5;A>=C;A-=1E4)F=
a.UTMtoLL(d+1E5,A,t),I.push([F.lon,F.lat]);for(A=d+1E5;A>=d;A-=1E4)F=a.UTMtoLL(A,C,t),I.push([F.lon,F.lat]);for(A=0;A<I.length;A++)I[A][0]+=k*c.GEOGRAPHIC_360;A=new n([I]);I=m.getAngleBetweenPoints(A.getPoint(0,A.rings[0].length-1),A.getPoint(0,A.rings[0].length-2));F=q.rotate(g.extentToPolygon(b),-1*I);I=q.intersect(g.toWebMercator(A),g.toWebMercator(h));F=q.intersects(F,g.toWebMercator(A));if(I||F){var B;F&&(B=q.intersect(g.toWebMercator(A),g.toWebMercator(p)));y={clippedPolygon:I,unclippedPolygon:A,
clippedPolyToUTMZone:B,map:e,xmin:C,ymin:d,xmax:C+1E5,ymax:d+1E5,x:"",y:"",minMaxType:"utm",utmZone:t,latitudeZone:f,utmZonePoly:h,fullZoneGeometry:p,GZD:y,text:y};B&&(y=new l(y),u.push(y))}}return u},handleGridSquares:function(c,e,b,h){var d=[],t=c.utmZonePoly,f=c.latitudeZone,p=c.utmZone,D=c.fullZoneGeometry,r=c.GZD,w=c.xmin,u=c.xmax,C=c.ymin;c=c.ymax;var A,v,F,y,B,E,M,N=!0,Q=!0;h=g.toWebMercator(h);for(A=Math.floor(C/b)*b;A<c;A+=b)for(v=Math.floor(w/b)*b;v<u;v+=b){y=[];E=a.UTMtoLL(A,v,p);y.push([E.lon,
E.lat]);F=a.UTMtoLL(A+b,v,p);y.push([F.lon,F.lat]);M=a.UTMtoLL(A+b,v+b,p);y.push([M.lon,M.lat]);M=a.UTMtoLL(A,v+b,p);y.push([M.lon,M.lat]);y.push([E.lon,E.lat]);y=new n([y]);M=q.intersect(g.toWebMercator(g.extentToPolygon(h)),g.toWebMercator(D));N&&Q&&(B=m.getAngleBetweenPoints(new k(E.lon,E.lat),new k(F.lon,F.lat)),B=q.rotate(M,-1*B));E=q.intersect(g.toWebMercator(y),t);F=q.intersects(B,g.toWebMercator(y));var K;if(E||F){F&&(K=q.intersect(g.toWebMercator(y),g.toWebMercator(D)));F=r+this._padZero(v%
1E5/b,5-Math.log10(b)).toString()+this._padZero((0>C?1E7+A:A)%1E5/b,5-Math.log10(b)).toString();y={clippedPolygon:E,unclippedPolygon:y,fullZoneGeometry:D,clippedPolyToUTMZone:K,map:e,xmin:v,ymin:A,xmax:v+b,ymax:A+b,x:this._padZero(v%1E5/b,5-Math.log10(b)).toString(),y:this._padZero((0>C?1E7+A:A)%1E5/b,5-Math.log10(b)).toString(),minMaxType:"utm",utmZone:p,latitudeZone:f,GZD:r,utmZonePoly:t,text:F};if(!K)continue;N=new l(y);d.push(N)}Q=N=!1}return d},_padZero:function(a,c){for(a=a.toString();a.length<
c;)a="0"+a;return a}}})},"widgets/GriddedReferenceGraphic/js/mgrs":function(){define(["esri/geometry/Point"],function(r){var c,g,m;c=6378137;g=.00669437999;m=g/(1-g);var a=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g));return{setSpheroid:function(e){e=e.toUpperCase();switch(e){case "AIRY 1830":c=6377563.396;g=.00667053999998536;break;case "AIRY MODIFIED":c=6377340.189;g=.00667053999998536;break;case "AVERAGE TERRESTRIAL SYSTEM 1977":c=6378135;g=.00669438499958795;break;case "AUSTRALIAN NATIONAL":c=6378160;
g=.00669454185458764;break;case "BESSEL 1841":c=6377397.155;g=.00667437223180214;break;case "BESSEL MODIFIED":c=6377492.018;g=.00667437223180214;break;case "BESSEL NAMIBIA":c=6377483.865;g=.00667437223180214;break;case "CLARKE 1858":c=6378293.639;g=.00678514600473303;break;case "NAD27":case "CLARKE 1866":c=6378206.4;g=.00676865799760964;break;case "CLARKE 1866 MICHIGAN":c=6378450.047;g=.00676865830738507;break;case "CLARKE 1880":c=6378249.138;g=.00680348101883452;break;case "CLARKE 1880 (ARC)":c=
6378249.145;g=.00680348101883452;break;case "CLARKE 1880 (BENOIT)":c=6378300.79;g=.00680348271028565;break;case "CLARKE 1880 (IGN)":c=6378249.2;g=.00680348767623919;break;case "CLARKE 1880 (RGS)":c=6378249.145;g=.00680351128284906;break;case "CLARKE 1880 (SGA)":c=6378249.2;g=.00680348860198551;break;case "EVEREST 1830 (DEFINITION)":c=6377299.36;g=.00663784663019969;break;case "EVEREST 1830 (MODIFIED)":c=6377304.063;g=.00663784663019969;break;case "EVEREST (ADJUSTMENT 1937)":c=6377276.345;g=.00663784663019969;
break;case "EVEREST (DEFINITION 1962)":c=6377301.243;g=.00663784606842344;break;case "EVEREST (DEFINITION 1967)":c=6377298.556;g=.00663784663019969;break;case "EVEREST (DEFINITION 1975)":c=6377299.151;g=.00663784606842344;break;case "NAD83":case "GEM GRAVITY POTENTIAL MODEL":case "GRS 1980":c=6378137;g=.00669438002290079;break;case "GRS 1967 \x3d INTERNATIONAL 1967":c=6378160;g=.00669460532856765;break;case "HELMERT 1906":c=6378200;g=.00669342162296594;break;case "INDONESIAN NATIONAL":c=6378160;g=
.0066946090804091;break;case "INTERNATIONAL 1924":c=6378388;g=.00672267002233332;break;case "INTERNATIONAL 1967":c=6378160;g=.00669454185458764;break;case "KRASOVSKY 1940":c=6378245;g=.00669342162296594;break;case "TRANSIT PRECISE EPHEMERIS":c=6378145;g=.00669454185458764;break;case "OSU 1986 GEOIDAL MODEL":c=6378136.2;g=.00669438006997852;break;case "OSU 1991 GEOIDAL MODEL":c=6378136.3;g=.00669438006997852;break;case "PLESSIS 1817":c=6376523;g=.00646954373789485;break;case "STRUVE 1860":c=6378298.3;
g=.00677435980080942;break;case "WAR OFFICE":c=6378300.583;g=.00674534331628926;break;case "NWL-10D \x3d\x3d WGS 1972":c=6378135;g=.00669431777826672;break;case "WGS 1972":c=6378135;g=.00669431777826672;break;case "WGS84":case "WGS 1984":c=6378137;g=.00669437999014132;break;case "WGS 1966":c=6378145;g=.00669454185458764;break;case "FISCHER 1960":c=6378166;g=.00669342162296594;break;case "FISCHER 1968":c=6378150;g=.00669342162296594;break;case "FISCHER MODIFIED":c=6378155;g=.00669342162296594;break;
case "HOUGH 1960":c=6378270;g=.00672267002233332;break;case "EVEREST MODIFIED 1969":c=6377295.664;g=.00663784663019969;break;case "WALBECK":c=6376896;g=.00659454809414964;break;case "GRS 1967 TRUNCATED":c=6378160,g=.00669454185458764}m=g/(1-g);a=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g))},getSpheroidList:function(){return"AIRY 1830;AIRY MODIFIED;AUSTRALIAN NATIONAL;AVERAGE TERRESTRIAL SYSTEM 1977;BESSEL 1841;BESSEL MODIFIED;BESSEL NAMIBIA;CLARKE 1858;CLARKE 1866 MICHIGAN;CLARKE 1866;CLARKE 1880 (ARC);CLARKE 1880 (BENOIT);CLARKE 1880 (IGN);CLARKE 1880 (RGS);CLARKE 1880 (SGA);CLARKE 1880;EVEREST (ADJUSTMENT 1937);EVEREST (DEFINITION 1962);EVEREST (DEFINITION 1967);EVEREST (DEFINITION 1975);EVEREST 1830 (DEFINITION);EVEREST 1830 (MODIFIED);EVEREST MODIFIED 1969;FISCHER 1960;FISCHER 1968;FISCHER MODIFIED;GEM GRAVITY POTENTIAL MODEL;GRS 1967 \x3d INTERNATIONAL 1967;GRS 1967 TRUNCATED;GRS 1980;HELMERT 1906;HOUGH 1960;INDONESIAN NATIONAL;INTERNATIONAL 1924;INTERNATIONAL 1967;KRASOVSKY 1940;NWL-10D \x3d\x3d WGS 1972;OSU 1986 GEOIDAL MODEL;OSU 1991 GEOIDAL MODEL;PLESSIS 1817;STRUVE 1860;TRANSIT PRECISE EPHEMERIS;WALBECK;WAR OFFICE;WGS 1966;WGS 1972;WGS 1984".split(";")},
getZoneNumber:function(a,c){a=parseFloat(a);c=parseFloat(c);if(360<c||-180>c){for(;-180>c;)c+=360;for(;180<c;)c-=360}c=c+180-360*Math.floor((c+180)/360)-180;var e=Math.floor((c+180)/6)+1;56<=a&&64>a&&3<=c&&12>c&&(e=32);72<=a&&84>a&&(0<=c&&9>c?e=31:9<=c&&21>c?e=33:21<=c&&33>c?e=35:33<=c&&42>c&&(e=37));return e},LLtoUTM:function(a,h,l){a=parseFloat(a);h=parseFloat(h);if(84<a||-80>a)return"undefined, ensure 84N \x3e Lat \x3e 80S";if(360<h||-180>h){for(;-180>h;)h+=360;for(;180<h;)h-=360}var e,k,n,d;e=
h+180-360*Math.floor((h+180)/360)-180;k=a*Math.PI/180;e=e*Math.PI/180;h=l?l:this.getZoneNumber(a,h);l=(6*(h-1)-180+3)*Math.PI/180;this.UTMLetterDesignator(a);a=c/Math.sqrt(1-g*Math.sin(k)*Math.sin(k));n=Math.tan(k)*Math.tan(k);d=m*Math.cos(k)*Math.cos(k);e=Math.cos(k)*(e-l);return[.9996*a*(e+(1-n+d)*e*e*e/6+(5-18*n+n*n+72*d-58*m)*e*e*e*e*e/120)+5E5,.9996*(c*((1-g/4-3*g*g/64-5*g*g*g/256)*k-(3*g/8+3*g*g/32+45*g*g*g/1024)*Math.sin(2*k)+(15*g*g/256+45*g*g*g/1024)*Math.sin(4*k)-35*g*g*g/3072*Math.sin(6*
k))+a*Math.tan(k)*(e*e/2+(5-n+9*d+4*d*d)*e*e*e*e/24+(61-58*n+n*n+600*d-330*m)*e*e*e*e*e*e/720)),h]},LLtoUSNG:function(a,c,g,m){g=g||5;var e;e=m?m:this.getZoneNumber(a,c);a=parseFloat(a);c=parseFloat(c);var h=this.LLtoUTM(a,c,e);m=h[0];var d=h[1];0>a&&(d+=1E7);h=this.findGridLetters(e,d,m);e=Math.round(d)%1E5;m=Math.round(m)%1E5;e=Math.floor(e/Math.pow(10,5-g));m=Math.floor(m/Math.pow(10,5-g));a=this.getZoneNumber(a,c)+this.UTMLetterDesignator(a)+" "+h+" ";for(c=String(m).length;c<g;c++)a+="0";a+=
m+" ";for(c=String(e).length;c<g;c++)a+="0";return a+e},UTMLetterDesignator:function(a){a=parseFloat(a);return 84>=a&&72<=a?"X":72>a&&64<=a?"W":64>a&&56<=a?"V":56>a&&48<=a?"U":48>a&&40<=a?"T":40>a&&32<=a?"S":32>a&&24<=a?"R":24>a&&16<=a?"Q":16>a&&8<=a?"P":8>a&&0<=a?"N":0>a&&-8<=a?"M":-8>a&&-16<=a?"L":-16>a&&-24<=a?"K":-24>a&&-32<=a?"J":-32>a&&-40<=a?"H":-40>a&&-48<=a?"G":-48>a&&-56<=a?"F":-56>a&&-64<=a?"E":-64>a&&-72<=a?"D":-72>a&&-80<=a?"C":"Z"},findSet:function(a){a=parseInt(a,10);switch(a%6){case 0:return 6;
case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(a,c,g){a=parseInt(a,10);c=parseFloat(c);g=parseFloat(g);var e=1;for(c=Math.round(c);1E5<=c;)c-=1E5,e++;e%=20;c=0;for(g=Math.round(g);1E5<=g;)g-=1E5,c++;c%=8;return this.lettersHelper(this.findSet(a),e,c)},lettersHelper:function(a,c,g){0===c?c=19:c--;0===g?g=7:g--;switch(a){case 1:return a="ABCDEFGHJKLMNPQRSTUV","ABCDEFGH".charAt(g)+a.charAt(c);case 2:return a="FGHJKLMNPQRSTUVABCDE",
"JKLMNPQR".charAt(g)+a.charAt(c);case 3:return a="ABCDEFGHJKLMNPQRSTUV","STUVWXYZ".charAt(g)+a.charAt(c);case 4:return a="FGHJKLMNPQRSTUVABCDE","ABCDEFGH".charAt(g)+a.charAt(c);case 5:return a="ABCDEFGHJKLMNPQRSTUV","JKLMNPQR".charAt(g)+a.charAt(c);case 6:return a="FGHJKLMNPQRSTUVABCDE","STUVWXYZ".charAt(g)+a.charAt(c)}},UTMtoLL:function(e,h,l){h=parseFloat(h)-5E5;e=parseFloat(e);l=parseInt(l,10);e=e/.9996/(c*(1-g/4-3*g*g/64-5*g*g*g/256));e=e+(3*a/2-27*a*a*a/32)*Math.sin(2*e)+(21*a*a/16-55*a*a*a*
a/32)*Math.sin(4*e)+151*a*a*a/96*Math.sin(6*e);var q=c/Math.sqrt(1-g*Math.sin(e)*Math.sin(e)),k=Math.tan(e)*Math.tan(e),n=m*Math.cos(e)*Math.cos(e),d=h/(.9996*q);h=e-q*Math.tan(e)/(c*(1-g)/Math.pow(1-g*Math.sin(e)*Math.sin(e),1.5))*(d*d/2-(5+3*k+10*n-4*n*n-9*m)*d*d*d*d/24+(61+90*k+298*n+45*k*k-252*m-3*n*n)*d*d*d*d*d*d/720);h=180*h/Math.PI;e=(d-(1+2*k+n)*d*d*d/6+(5-2*n+28*k-3*n*n+8*m+24*k*k)*d*d*d*d*d/120)/Math.cos(e);e=6*(l-1)-180+3+180*e/Math.PI;l={};l.lat=h;l.lon=e;return l},USNGtoUTM:function(a,
c,g,m,k,n){g=1+"ABCDEFGHJKLMNPQRSTUVWXYZ".indexOf(g)%8;var d="CDEFGHJKLMNPQRSTUVWX".indexOf(c);m=a%2?"ABCDEFGHJKLMNPQRSTUV".indexOf(m):"FGHJKLMNPQRSTUVABCDE".indexOf(m);m=Number([0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6][d])+m/10;m<[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9][d]&&(m+=2);d={};d.N=1E6*m+Number(n)*Math.pow(10,5-n.length);d.E=1E5*g+Number(k)*Math.pow(10,5-k.length);d.zone=a;d.letter=c;return d},USNGtoLL:function(a){a=this.parseUSNG_str(a);var c=this.USNGtoUTM(a.zone,
a.ltr,a.sq1,a.sq2,a.east,a.north);"N">a.ltr&&(c.N-=1E7);c=this.UTMtoLL(c.N,c.E,a.zone);return[c.lat,c.lon]},parseUSNG_str:function(a){var c=[];a=a.toUpperCase();c=/%20/g;c=a.replace(c,"");c=/ /g;c=a.replace(c,"");if(7>c.length)return 0;a={};var e=0;a.zone=10*c.charAt(e++)+1*c.charAt(e++);a.ltr=c.charAt(e++);a.sq1=c.charAt(e++);a.sq2=c.charAt(e++);a.precision=(c.length-e)/2;a.east="";a.north="";for(var g=0;g<a.precision;g++)a.east+=c.charAt(e++);" "===c[e]&&e++;for(g=0;g<a.precision;g++)a.north+=c.charAt(e++);
return a},isUSNG:function(a){var c;a=a.toUpperCase();c=/%20/g;a=a.replace(c,"");c=/ /g;a=a.replace(c,"");if(15<a.length)return 0;c=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX]$/;if(a.match(c))return 0;c=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}/;return!a.match(c)||7>a.length?0:a},LLtoMGRS:function(a,c,g){return this.LLtoUSNG(a,c,g||5).replace(/ /g,"")},USNGtoPoint:function(a){a=this.USNGtoLL(a);return new r(a[1],a[0])},pointToUSNG:function(a,c){var e=a.getLatitude();
a=a.getLongitude();return this.LLtoUSNG(e,a,c)},LLtoUSNG_nad27:function(a,c,g){return this.LLtoUSNG(a,c,g||5)+" (NAD27)"}}})},"widgets/GriddedReferenceGraphic/js/NonPolarGridZone":function(){define(["dojo/_base/declare","dojo/json","./constants","esri/geometry/Polygon","esri/geometry/Extent"],function(r,c,g,m,a){return r(null,{extent:null,id:null,utmZone:null,latitudeZone:null,_rings:[],constructor:function(c){var e=c.id.match(/(\d+)|([A-Za-z]+)/g);this.id=c.id;this.utmZone=1*e[0];this.latitudeZone=
e[1];this.extent=new a({xmin:c.xmin,ymin:c.ymin,xmax:c.xmax,ymax:c.ymax,spatialReference:c.spatialReference||{wkid:4326}});c=[this.extent.xmin,this.extent.ymin];this._rings=[[c,[this.extent.xmax,this.extent.ymin],[this.extent.xmax,this.extent.ymax],[this.extent.xmin,this.extent.ymax],c]]},toPolygon:function(a){var e=c.parse(c.stringify(this._rings));if(a)for(var l=0;l<e[0].length;l++)e[0][l][0]+=a*g.GEOGRAPHIC_360;return new m({rings:e,spatialReference:this.spatialReference})}})})},"widgets/GriddedReferenceGraphic/js/VisibleGridZone":function(){define(["dojo/_base/declare",
"./GridPolygon"],function(r,c){return r(null,{polygon:null,offset:null,nonPolarGridZone:null,fullZoneGeometry:null,map:null,constructor:function(g){this.offset=Math.round(g.offset);this.polygon=g.polygon;this.nonPolarGridZone=g.nonPolarGridZone;this.fullZoneGeometry=g.fullZoneGeometry;this.map=g.map;this.utmZone=g.utmZone;this.latitudeBand=g.latitudeBand;g={clippedPolygon:this.polygon,unclippedPolygon:this.nonPolarGridZone.toPolygon(g.offset),map:this.map,xmin:this.nonPolarGridZone.extent.xmin,ymin:this.nonPolarGridZone.extent.ymin,
xmax:this.nonPolarGridZone.extent.xmax,ymax:this.nonPolarGridZone.extent.ymax,minMaxType:"degrees",utmZone:this.utmZone,text:this.nonPolarGridZone.id,latitudeBand:this.latitudeBand};this.gridPolygon=new c(g)}})})},"widgets/GriddedReferenceGraphic/js/GridPolygon":function(){define(["dojo/_base/declare"],function(r){return r(null,{clippedPolygon:null,unclippedPolygon:null,clippedPolyToUTMZone:null,utmZonePoly:null,fullZoneGeometry:null,map:null,xmin:0,ymin:0,x:"",y:"",xmax:0,ymax:0,minMaxType:"",utmZone:0,
latitudeZone:"",GZD:"",text:"",constructor:function(c){this.unclippedPolygon=c.unclippedPolygon;this.clippedPolygon=c.clippedPolygon;this.utmZonePoly=c.utmZonePoly;this.fullZoneGeometry=c.fullZoneGeometry;this.clippedPolyToUTMZone=c.clippedPolyToUTMZone;this.map=c.map;this.xmin=c.xmin;this.ymin=c.ymin;this.xmax=c.xmax;this.ymax=c.ymax;this.x=c.x;this.y=c.y;this.minMaxType=c.minMaxType;this.utmZone=Math.round(c.utmZone);this.latitudeZone=c.latitudeZone;this.GZD=c.GZD;this.text=c.text}})})},"widgets/GriddedReferenceGraphic/js/util":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(r,c,g,m){return r(null,{constructor:function(a){this.appConfig=a.appConfig;this.nls=a.nls;(a=this.appConfig.geometryService)||(a="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=new m(a)},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,c,h){var e=new g;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:c.name?
c.name:c,numOfDigits:h||6,rounding:!0,addSpaces:!1};switch(c){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode="mgrsDefault";a.numOfDigits=5;break;case "UTM (H)":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType="utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(a).then(function(a){e.resolve(a)},function(){e.resolve(null)});
return e.promise},getXYNotation:function(a,c){var e=new g,l;l=c.name?c.name:c;c={sr:4326,conversionType:l,strings:[]};switch(l){case "DD":case "DDM":case "DMS":c.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");c.strings.push(a);break;case "USNG":c.strings.push(a);c.addSpaces="false";break;case "MGRS":c.conversionMode="mgrsNewStyle";c.strings.push(a);c.addSpaces="false";break;case "UTM (H)":c.conversionType="utm";c.conversionMode="utmNorthSouth";c.strings.push(a);break;
case "UTM":c.conversionType="utm";c.conversionMode="utmDefault";c.strings.push(a);break;case "GARS":c.conversionMode="garsCenter";c.strings.push(a);break;case "GEOREF":c.strings.push(a)}this.geomService.fromGeoCoordinateString(c).then(function(a){e.resolve(a)},function(){e.resolve(null)});return e.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLatLongNotation,
conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",
pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,
/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(a){return a.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMBandNotation,conversionType:"UTM"},
{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(a){var e=this.getCleanInput(a);a=new g;var h=this.getNotations(),e=c.filter(h,function(a){return a.pattern.test(this.v)},{v:e});0<e.length?a.resolve(e):a.resolve(null);return a.promise},getFormattedDDStr:function(a,c,g){var e={};e.sourceValue=a;e.sourceFormatString=
c;a=a[0].split(/[ ,]+/);e.latdeg=a[0].replace(/[nNsS]/,"");e.londeg=a[1].replace(/[eEwW]/,"");g&&(e.latdeg="N"===a[0].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===a[1].slice(-1)?"-"+e.londeg:"+"+e.londeg);c=c.replace(/X/,e.londeg);c=c.replace(/[eEwW]/,a[1].slice(-1));c=c.replace(/[nNsS]/,a[0].slice(-1));c=c.replace(/Y/,e.latdeg);e.formatResult=c;return e},getFormattedDDMStr:function(a,c,g){var e={};e.sourceValue=a;e.sourceFormatString=c;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=
e.parts[1].replace(/[nNsS]/,"");e.londeg=e.parts[2];e.lonmin=e.parts[3].replace(/[eEwW]/,"");g&&(e.latdeg="N"===e.parts[1].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[3].slice(-1)?"-"+e.londeg:"+"+e.londeg);a=c.replace(/[EeWw]/,e.parts[3].slice(-1));a=a.replace(/Y/,e.lonmin);a=a.replace(/X/,e.londeg);a=a.replace(/[NnSs]/,e.parts[1].slice(-1));a=a.replace(/B/,e.latmin);a=a.replace(/A/,e.latdeg);e.formatResult=a;return e},getFormattedDMSStr:function(a,c,g){var e={};e.sourceValue=a;e.sourceFormatString=
c;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1];e.latsec=e.parts[2].replace(/[NnSs]/,"");e.londeg=e.parts[3];e.lonmin=e.parts[4];e.lonsec=e.parts[5].replace(/[EWew]/,"");g&&(e.latdeg="N"===e.parts[2].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[5].slice(-1)?"-"+e.londeg:"+"+e.londeg);a=c.replace(/A/,e.latdeg);a=a.replace(/B/,e.latmin);a=a.replace(/C/,e.latsec);a=a.replace(/X/,e.londeg);a=a.replace(/Y/,e.lonmin);a=a.replace(/Z/,e.lonsec);a=a.replace(/[NnSs]/,e.parts[2].slice(-1));
a=a.replace(/[EeWw]/,e.parts[5].slice(-1));e.formatResult=a;return e},getFormattedUSNGStr:function(a,c){var e={};e.sourceValue=a;e.sourceFormatString=c;a[0].match(/^[ABYZ]/)?e.gzd=a[0].match(/[ABYZ]/)[0].trim():e.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();e.grdsq=a[0].replace(e.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();e.easting=a[0].replace(e.gzd+e.grdsq,"").match(/^\d{1,5}/)[0].trim();e.northing=a[0].replace(e.gzd+e.grdsq,"").match(/\d{1,5}$/)[0].trim();a=c.replace(/Y/,e.northing);a=a.replace(/X/,
e.easting);a=a.replace(/S/,e.grdsq);a=a.replace(/Z/,e.gzd);e.formatResult=a;return e},getFormattedMGRSStr:function(a,c){var e={};e.sourceValue=a;e.sourceFormatString=c;a[0].match(/^[ABYZ]/)?e.gzd=a[0].match(/[ABYZ]/)[0].trim():e.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();e.grdsq=a[0].replace(e.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();e.easting=a[0].replace(e.gzd+e.grdsq,"").match(/^\d{1,5}/)[0].trim();e.northing=a[0].replace(e.gzd+e.grdsq,"").match(/\d{1,5}$/)[0].trim();a=c.replace(/Y/,e.northing);
a=a.replace(/X/,e.easting);a=a.replace(/S/,e.grdsq);a=a.replace(/Z/,e.gzd);e.formatResult=a;return e},getFormattedGARSStr:function(a,c){var e={};e.sourceValue=a;e.sourceFormatString=c;e.lon=a[0].match(/\d{3}/);e.lat=a[0].match(/[a-zA-Z]{2}/);a=a[0].match(/\d*$/);e.quadrant=a[0][0];e.key=a[0][1];c=c.replace(/K/,e.key);c=c.replace(/Q/,e.quadrant);c=c.replace(/Y/,e.lat);c=c.replace(/X/,e.lon);e.formatResult=c;return e},getFormattedGEOREFStr:function(a,c){var e={};e.sourceValue=a;e.sourceFormatString=
c;e.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();e.lat=a[0].replace(e.lon,"").match(/[a-zA-Z]{1}/)[0].trim();e.quadrant15lon=a[0].replace(e.lon+e.lat,"").match(/[a-zA-Z]{1}/)[0].trim();e.quadrant15lat=a[0].replace(e.lon+e.lat+e.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();a=a[0].replace(e.lon+e.lat+e.quadrant15lon+e.quadrant15lat,"");e.quadrant1lon=a.substr(0,a.length/2);e.quadrant1lat=a.substr(a.length/2,a.length);c=c.replace(/Y/,e.quadrant1lat);c=c.replace(/X/,e.quadrant1lon);c=c.replace(/D/,e.quadrant15lat);
c=c.replace(/C/,e.quadrant15lon);c=c.replace(/B/,e.lat);c=c.replace(/A/,e.lon);e.formatResult=c;return e},getFormattedUTMStr:function(a,c){var e={};e.sourceValue=a;e.sourceFormatString=c;e.parts=a[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.bandLetter=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];a=c.replace(/Y/,e.westing);a=a.replace(/X/,e.easting);a=a.replace(/B/,e.bandLetter);a=a.replace(/Z/,e.zone);e.formatResult=a;return e},getFormattedUTMHStr:function(a,c){var e=
{};e.sourceValue=a;e.sourceFormatString=c;e.parts=a[0].split(/[ ,]+/);e.zone=e.parts[0].replace(/[A-Z]/,"");e.hemisphere=e.parts[0].slice(-1);e.easting=e.parts[1];e.westing=e.parts[2];a=c.replace(/Y/,e.westing);a=a.replace(/X/,e.easting);a=a.replace(/H/,e.hemisphere);a=a.replace(/Z/,e.zone);e.formatResult=a;return e},convertMetersToUnits:function(a,c){var e=0;switch(c.toLowerCase()){case "meters":e=a;break;case "feet":e=3.28084*a;break;case "kilometers":e=.001*a;break;case "miles":e=6.21371E-4*a;
break;case "nautical-miles":e=5.39957E-4*a;break;case "yards":e=1.09361*a}return e},convertToMeters:function(a,c){var e=a;switch(c){case "meters":e=a;break;case "feet":e=.3048*a;break;case "kilometers":e=1E3*a;break;case "miles":e=1609.34*a;break;case "nautical-miles":e=1852.001376036*a;break;case "yards":e=.9144*a}return e}})})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ../SpatialReference ./GeographicTransformation".split(" "),function(r,c,g,m,a,e){function h(c,
g,b,h,k){void 0===h&&(h=null);void 0===k&&(k=!1);if(null===h){var d=e.cacheKey(g,b);void 0!==n[d]?h=n[d]:(h=l(g,b,null),null===h&&(h=new e),n[d]=h)}return q._project(c,g,b instanceof a||!1===k?b:new a(b),h,k)}function l(a,c,b){void 0===b&&(b=null);a=q._getTransformation(a,c,b);return null!==a?e.fromGE(a):null}Object.defineProperty(c,"__esModule",{value:!0});var q=null;c.isLoaded=function(){return!!q&&m.isLoaded()};c.isSupported=function(){return m.isSupported()};var k=null;c.load=function(){if(k)return k.promise;
k=new g;var a=m.load();r(["./geometryEngine"],function(c){q=c;a.then(function(){q._enableProjection(m);k.resolve()},function(a){k.reject(a)})});return k.promise};c.project=function(a,c,b){void 0===b&&(b=null);return a instanceof Array?0===a.length?[]:h(a,a[0].spatialReference,c,b):h([a],a.spatialReference,c,b)[0]};var n={};c.projectMany=h;c.getTransformation=l;c.getTransformations=function(a,c,b){void 0===b&&(b=null);a=q._getTransformationBySuitability(a,c,b);if(null!==a){c=[];for(b=0;b<a.length;b++)c.push(e.fromGE(a[b]));
return c}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(r,c,g,m,a){function e(a){function e(a,b,c){a[b]=c(a[b])}c._pe=a;d.init();p.init();b.init();v.init();H.init();c.PeGCSExtent=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}g(b,a);b.prototype.destroy=function(){c._pe.destroy(this)};return b}(c._pe.PeGCSExtent);for(var h=0,l=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,
c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];h<l.length;h++)a=l[h],e(a.prototype,"getName",function(a){return function(){return a.call(this,Array(d.PE_NAME_MAX))}});h=0;for(l=[c._pe.PeGeogtran,c._pe.PeProjcs];h<l.length;h++)a=l[h],e(a.prototype,"getParameters",function(a){return function(){for(var b=Array(d.PE_PARM_MAX),e=a.call(this),f=0;f<b.length;f++){var g=c._pe.getValue(e,"*");b[f]=g?c._pe.wrapPointer(g,c._pe.PeParameter):null;e+=Int32Array.BYTES_PER_ELEMENT}return b}});
e(c._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var c=[],d=a.call(this);k(c,b,d);return c}});e(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(a){var b=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,e=a.call(this);if(!c._pe.compare(e,c._pe.NULL)){var d=[e],f=this.getSteps();if(1<f)for(var e=c._pe.getPointer(e),g=1;g<f;g++)d.push(c._pe.wrapPointer(e+b*g,c._pe.PeGTlistExtendedGTs))}return d}});var m=c._pe._pe_getPeHorizonSize();
a=function(a){return function(){var b=this._cache;b||(this._cache=b=new Map);if(b.has(a))return b.get(a);var d=null,e=a.call(this);if(!c._pe.compare(e,c._pe.NULL)){var d=[e],f=e.getNump();if(1<f)for(var e=c._pe.getPointer(e),g=1;g<f;g++)d.push(c._pe.wrapPointer(e+m*g,c._pe.PeHorizon))}b.set(a,d);return d}};e(c._pe.PeProjcs.prototype,"horizonGcsGenerate",a);e(c._pe.PeProjcs.prototype,"horizonPcsGenerate",a);c._pe.PeObject.prototype.toString=function(a){void 0===a&&(a=d.PE_STR_OPTS_NONE);c._pe.ensureCache.prepare();
var b=c._pe.getPointer(this),e=c._pe.ensureInt8(Array(d.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(b,a,e))}}function h(a){if(a){var b=c._pe.getClass(a);b&&(b=c._pe.getCache(b))&&(a=c._pe.getPointer(a))&&delete b[a]}}function l(a,b){var d=[];b=Array(b);for(var e=0;e<a;e++)d.push(c._pe.ensureInt8(b));return d}function q(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function k(a,b,d,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*b;e++)a[e]=
c._pe.getValue(d+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var f=0===a.length;for(e=0;e<b;e++)f&&(a[e]=Array(2)),a[e][0]=c._pe.getValue(d,"double"),a[e][1]=c._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(c,"__esModule",{value:!0});var n;c._pe=null;c.isLoaded=function(){return!!c._pe};c.isSupported=function(){return!!a("esri-wasm")};c.load=function(){if(n)return n.promise;n=new m;r(["./support/pe-wasm"],function(a){a({locateFile:function(a){return r.toUrl("./support/"+
a)},onAbort:function(a){n.reject(Error(a))}}).then(function(a){e(a);n.resolve()})});return n.promise};(function(a){function b(a,b,d){c._pe.ensureCache.prepare();var e=q(d),f=d===e,e=c._pe.ensureFloat64(e);(a=c._pe._pe_geog_to_proj(c._pe.getPointer(a),b,e))&&k(d,b,e,f);return a}function e(a,b,c){return g(a,b,c,0)}function g(a,b,d,e){c._pe.ensureCache.prepare();var f=q(d),g=d===f,f=c._pe.ensureFloat64(f);(a=c._pe._pe_proj_to_geog_center(c._pe.getPointer(a),b,f,e))&&k(d,b,f,g);return a}a.geogToProj=
b;a.projGeog=function(a,c,f,g){switch(g){case d.PE_TRANSFORM_P_TO_G:return e(a,c,f);case d.PE_TRANSFORM_G_TO_P:return b(a,c,f)}return 0};a.projToGeog=e;a.projToGeogCenter=g})(c.PeCSTransformations||(c.PeCSTransformations={}));var d;(function(a){a.init=function(){a.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;a.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;
a.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;
a.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;a.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
a.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d=c.PeDefs||(c.PeDefs={}));(function(a){function b(a,b){var d=null,f=g[a];f||(f={},g[a]=f);f.hasOwnProperty(String(b))?d=f[b]:(a=c._pe.PeFactory.prototype.factoryByType(a,b),c._pe.compare(a,c._pe.NULL)||
(d=a,f[b]=d));return d=e(d)}function e(a){if(a){var b=a.getType();switch(b){case d.PE_TYPE_GEOGCS:a=c._pe.castObject(a,c._pe.PeGeogcs);break;case d.PE_TYPE_PROJCS:a=c._pe.castObject(a,c._pe.PeProjcs);break;case d.PE_TYPE_GEOGTRAN:a=c._pe.castObject(a,c._pe.PeGeogtran);break;default:b&d.PE_TYPE_UNIT&&(a=c._pe.castObject(a,c._pe.PeUnit))}}return a}var g={},h={};a.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};a.coordsys=function(a){return b(d.PE_TYPE_COORDSYS,a)};a.factoryByType=
b;a.fromString=function(a,b){var d=null,f=h[a];f||(f={},h[a]=f);f.hasOwnProperty(b)?d=f[b]:(a=c._pe.PeFactory.prototype.fromString(a,b),c._pe.compare(a,c._pe.NULL)||(d=a,f[b]=d));return d=e(d)};a.geogcs=function(a){return b(d.PE_TYPE_GEOGCS,a)};a.geogtran=function(a){return b(d.PE_TYPE_GEOGTRAN,a)};a.getCode=function(a){return c._pe.PeFactory.prototype.getCode(a)};a.projcs=function(a){return b(d.PE_TYPE_PROJCS,a)};a.unit=function(a){return b(d.PE_TYPE_UNIT,a)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=
null;var p;(function(a){var b;a.init=function(){a.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;b=c._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(a,d,e,f,g,h){var k=null,l=new c._pe.PeInteger(h);try{var m=c._pe.PeGTlistExtended.prototype.getGTlist(a,d,e,f,g,l);if(h=l.val)if(k=[m],1<h){var n=c._pe.getPointer(m);for(a=1;a<h;a++)k.push(c._pe.wrapPointer(n+b*a,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(l)}return k}})(p=c.PeGTlistExtended||(c.PeGTlistExtended=
{}));(function(a){a.destroy=function(a){if(a&&a.length){for(var b=0;b<a.length;b++){var d=a[b];h(d);d.getEntries().forEach(function(a){h(a);a=a.getGeogtran();h(a);a.getParameters().forEach(h);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){h(a);var b=a.getDatum();h(b);h(b.getSpheroid());h(a.getPrimem());h(a.getUnit())})})}c._pe.PeGTlistExtendedEntry.prototype.Delete(a[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));(function(a){a.geogToGeog=function(a,b,d,e,g){c._pe.ensureCache.prepare();
var f=q(d),h=d===f,f=c._pe.ensureFloat64(f),l=0;e&&(l=c._pe.ensureFloat64(e));(a=c._pe._pe_geog_to_geog(c._pe.getPointer(a),b,f,l,g))&&k(d,b,f,h);return a}})(c.PeGTTransformations||(c.PeGTTransformations={}));(function(a){function b(a,b,e,f,g,h){c._pe.ensureCache.prepare();var k,m;switch(a){case "dd":k=c._pe._pe_geog_to_dd;m=d.PE_DD_MAX;break;case "ddm":k=c._pe._pe_geog_to_ddm;m=d.PE_DDM_MAX;break;case "dms":k=c._pe._pe_geog_to_dms,m=d.PE_DMS_MAX}a=0;b&&(a=c._pe.getPointer(b));b=q(f);b=c._pe.ensureFloat64(b);
m=l(e,m);f=c._pe.ensureInt32(m);if(g=k(a,e,b,g,f))for(k=0;k<e;k++)h[k]=c._pe.UTF8ToString(m[k]);return g}function e(a,b,d,e,f){c._pe.ensureCache.prepare();var g;switch(a){case "dd":g=c._pe._pe_dd_to_geog;break;case "ddm":g=c._pe._pe_ddm_to_geog;break;case "dms":g=c._pe._pe_dms_to_geog}a=0;b&&(a=c._pe.getPointer(b));b=e.map(function(a){return c._pe.ensureString(a)});e=c._pe.ensureInt32(b);b=c._pe.ensureFloat64(Array(2*d));(g=g(a,d,e,b))&&k(f,d,b);return g}a.geog_to_dms=function(a,c,d,e,f){return b("dms",
a,c,d,e,f)};a.dms_to_geog=function(a,b,c,d){return e("dms",a,b,c,d)};a.geog_to_ddm=function(a,c,d,e,f){return b("ddm",a,c,d,e,f)};a.ddm_to_geog=function(a,b,c,d){return e("ddm",a,b,c,d)};a.geog_to_dd=function(a,c,d,e,f){return b("dd",a,c,d,e,f)};a.dd_to_geog=function(a,b,c,d){return e("dd",a,b,c,d)}})(c.PeNotationDms||(c.PeNotationDms={}));var b;(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;
a.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;a.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geog_to_mgrs_extended=function(a,b,e,g,h,k,m){c._pe.ensureCache.prepare();var f=0;a&&(f=c._pe.getPointer(a));a=q(e);e=c._pe.ensureFloat64(a);a=l(b,d.PE_MGRS_MAX);var n=c._pe.ensureInt32(a);if(g=c._pe._pe_geog_to_mgrs_extended(f,b,e,g,h,k,n))for(h=0;h<b;h++)m[h]=c._pe.UTF8ToString(a[h]);
return g};a.mgrs_to_geog_extended=function(a,b,d,e,g){c._pe.ensureCache.prepare();var f=0;a&&(f=c._pe.getPointer(a));a=d.map(function(a){return c._pe.ensureString(a)});d=c._pe.ensureInt32(a);a=c._pe.ensureFloat64(Array(2*b));(e=c._pe._pe_mgrs_to_geog_extended(f,b,d,e,a))&&k(g,b,a);return e}})(b=c.PeNotationMgrs||(c.PeNotationMgrs={}));(function(a){a.geog_to_usng=function(a,b,e,g,h,k,m){c._pe.ensureCache.prepare();var f=0;a&&(f=c._pe.getPointer(a));a=q(e);e=c._pe.ensureFloat64(a);a=l(b,d.PE_MGRS_MAX);
var n=c._pe.ensureInt32(a);if(g=c._pe._pe_geog_to_usng(f,b,e,g,h,k,n))for(h=0;h<b;h++)m[h]=c._pe.UTF8ToString(a[h]);return g};a.usng_to_geog=function(a,b,d,e){c._pe.ensureCache.prepare();var f=0;a&&(f=c._pe.getPointer(a));a=d.map(function(a){return c._pe.ensureString(a)});d=c._pe.ensureInt32(a);a=c._pe.ensureFloat64(Array(2*b));(f=c._pe._pe_usng_to_geog(f,b,d,a))&&k(e,b,a);return f}})(c.PeNotationUsng||(c.PeNotationUsng={}));var v;(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;
a.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;a.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geog_to_utm=function(a,b,e,g,h){c._pe.ensureCache.prepare();var f=0;a&&(f=c._pe.getPointer(a));a=q(e);e=c._pe.ensureFloat64(a);a=l(b,d.PE_UTM_MAX);var k=c._pe.ensureInt32(a);if(g=c._pe._pe_geog_to_utm(f,b,e,g,k))for(f=0;f<b;f++)h[f]=c._pe.UTF8ToString(a[f]);return g};a.utm_to_geog=function(a,b,d,e,g){c._pe.ensureCache.prepare();var f=0;a&&(f=c._pe.getPointer(a));
a=d.map(function(a){return c._pe.ensureString(a)});d=c._pe.ensureInt32(a);a=c._pe.ensureFloat64(Array(2*b));(e=c._pe._pe_utm_to_geog(f,b,d,e,a))&&k(g,b,a);return e}})(v=c.PeNotationUtm||(c.PeNotationUtm={}));var H;(function(a){var b=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=
c._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(d,e){void 0===e&&(e=a.PE_PCSINFO_OPTION_DOMAIN);var f,g;b.has(d)&&(g=b.get(d),g[e]&&(f=g[e]));f||(f=c._pe.PePCSInfo.prototype.generate(d,e),g||(g=[],b.set(d,g)),g[e]=f);return f}})(H=c.PePCSInfo||(c.PePCSInfo={}));(function(a){a.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));c._init=e})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var r=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var m in g)g.hasOwnProperty(m)&&(c[m]=g[m])};return function(c,g){function m(){this.constructor=c}r(c,g);c.prototype=null===g?Object.create(g):(m.prototype=g.prototype,new m)}}()})},"esri/geometry/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(r,c,g){return function(){function c(a){this.steps=[];this._cached_projection={};this._chain="";
this._gtlistentry=null;if(a&&a.steps){var c=0;for(a=a.steps;c<a.length;c++){var h=a[c];h instanceof g?this.steps.push(h):this.steps.push(new g({wkid:h.wkid,wkt:h.wkt,isInverse:h.isInverse}))}}}c.cacheKey=function(a,c){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==c.wkid&&null!==c.wkid?c.wkid.toString():"-1",void 0!==c.wkt&&null!==c.wkt?c.wkt.toString():""].join()};c.fromGE=function(a){var e=new c,h="",l=0;for(a=a.steps;l<a.length;l++){var m=
g.fromGE(a[l]);e.steps.push(m);h+=m.uid.toString()+","}e._cached_projection={};e._gtlistentry=null;e._chain=h;return e};c.prototype.getInverse=function(){var a=new c;a.steps=[];for(var e=this.steps.length-1;0<=e;e--)a.steps.push(this.steps[e].getInverse());return a};c.prototype.getGTListEntry=function(){for(var a="",c=0,g=this.steps;c<g.length;c++)a+=g[c].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};c.prototype.assignCachedGe=
function(a,e,g){this._cached_projection[c.cacheKey(a,e)]=g};c.prototype.getCachedGeTransformation=function(a,e){for(var g="",l=0,m=this.steps;l<m.length;l++)g+=m[l].uid.toString()+",";g!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=g);a=this._cached_projection[c.cacheKey(a,e)];return void 0===a?null:a};return c}()})},"esri/geometry/GeographicTransformationStep":function(){define(["require","exports"],function(r,c){var g=0;return function(){function c(a){void 0===a&&
(a=null);this.uid=g++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}c.fromGE=function(a){var e=new c;e._wkt=a.wkt;e._wkid=a.wkid;e._isInverse=a.isInverse;return e};Object.defineProperty(c.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=g++},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"wkid",{get:function(){return this._wkid},
set:function(a){this._wkid=a;this.uid=g++},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=g++},enumerable:!0,configurable:!0});c.prototype.getInverse=function(){var a=new c;a._wkt=this.wkt;a._wkid=this._wkid;a._isInverse=!this.isInverse;return a};return c}()})},"widgets/GriddedReferenceGraphic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/CoordinateControl.html":"\x3cdiv class\x3d'coordinateContainer'\x3e\r\n  \x3cdiv class\x3d'coordLabel' data-dojo-attach-point\x3d'coordNameContainer' data-a11y-label-id\x3d'coordLabel'\x3e\r\n    \x3cspan data-dojo-type\x3d'dijit/InlineEditBox' width\x3d'75px' data-dojo-props\x3d\"editor:'dijit/form/TextBox', autoSave:true\"\r\n      data-dojo-attach-point\x3d'coordName'\x3e${type}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'add-with-icon coordInput'\x3e\r\n    \x3ctextarea data-a11y-label-by\x3d'coordLabel' tabindex\x3d\"0\" aria-multiline\x3d\"true\" role\x3d\"textbox\" id\x3d'${uid}' type\x3d'text' rows\x3d'1' class\x3d'ta' data-dojo-attach-point\x3d'coordtext' spellcheck\x3d'false'\r\n    placeholder\x3d'${nls.coordinateInputLabel}'\x3e\x3c/textarea\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'coordactions'\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" id\x3d'${uid}_cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'cpbtn' class\x3d'cpbtn'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" title\x3d\"${nls.formatOutput}\" class\x3d'settingBtn' data-dojo-attach-point\x3d'formatButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.zoomLabel}' title\x3d'${nls.zoomLabel}' class\x3d'zoomBtn' data-dojo-attach-point\x3d'zoomButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.addPointLabel}' title\x3d'${nls.addPointLabel}' class\x3d'drawPointBtn' data-dojo-attach-point\x3d'drawPointButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.removeCoordinate}' title\x3d'${nls.removeCoordinate}' class\x3d'jimu-icon jimu-icon-close' data-dojo-attach-point\x3d'removeControlBtn'\r\n        data-dojo-attach-event\x3d'onclick: remove'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d\"${nls.expandOutput}\" aria-expanded \x3d \"false\" title\x3d\"${nls.expandOutput}\" class\x3d'expandBtn' data-dojo-attach-point\x3d'expandButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d'coordcontrols' class\x3d'coordarea' style\x3d\"display: none\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub1' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub1label' data-a11y-label-id\x3d'sub1Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub1Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub1val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub1val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal1CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub2' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub2label' data-a11y-label-id\x3d'sub2Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub2Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub2val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub2val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal2CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub3' class\x3d'coordformat sub3'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub3label' data-a11y-label-id\x3d'sub3Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub3Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub3val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub3val~cpbtn' aria-label\x3d'$${nls.copyToClipboard}' title\x3d'$${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal3CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub4' class\x3d'coordformat sub4'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub4label' data-a11y-label-id\x3d'sub4Label' /\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub4Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub4val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub4val~cpbtn' aria-label\x3d'${nls.copyToClipboard} title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal4CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"line-separator\"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"trans"\x3e${nls.transparency}\x3c/span\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan class\x3d"percent-display"\x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/GriddedReferenceGraphic/templates/FontSetting.html":'\x3cdiv class\x3d"style-selector"\x3e\r\n  \x3cdiv class\x3d"setting-items font clearFix" data-dojo-attach-point\x3d"fontSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.font}"\x3e${nls.font}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"fontSelect" data-dojo-props\x3d\'style:{width:"100%"}\' data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.font}"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-size clearFix" data-dojo-attach-point\x3d"textSizeSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textSize}"\x3e${nls.textSize}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3c!--role and aria-label added run time--\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"textSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"textColorSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textColor}"\x3e${nls.textColor}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"textColorBtn"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"font-group font-group-btns jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading bold" data-dojo-attach-point\x3d"bold" tabindex\x3d"0" role\x3d"button" aria-label\x3d"bold" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading italic" data-dojo-attach-point\x3d"italic" tabindex\x3d"0" role\x3d"button" aria-label\x3d"italic" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading underline" data-dojo-attach-point\x3d"underline" tabindex\x3d"0" role\x3d"button" aria-label\x3d"underline" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"transparencySetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.transparency}"\x3e${nls.transparency}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"transparencySlider"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e      \r\n    \x3c/div\x3e\r\n  \x3c/div\x3e  \r\n  \x3cdiv class\x3d"setting-items halo-size clearFix" data-dojo-attach-point\x3d"haloSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.halo}"\x3e${nls.halo}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"haloSizeSelect" aria-label\x3d"${nls.halo}"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"halo-color-btn" data-dojo-attach-point\x3d"haloColorBtn" aria-label\x3d"${nls.halo}"\x3e\x3c/div\x3e        \r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"label" title\x3d"${nls.show}"\x3e${nls.show}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cinput class\x3d"halo-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"showHalo" checked\x3d"true" aria-label\x3d"${nls.show}"/\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/TransparencyEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan \x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',"url:widgets/GriddedReferenceGraphic/templates/GridSettings.html":'\x3cdiv\x3e       \r\n    \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsContainer"\x3e\r\n      \x3c!-- Grid Settings Tab --\x3e \r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"gridTab"\x3e\r\n        \r\n        \x3c!-- Grid Shape --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridShapeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellShape}"\x3e\r\n                ${nls.gridSettings.cellShape}\x3c/div\x3e\r\n            \x3cselect class\x3d"GRGcellShapeSelect" data-dojo-attach-point\x3d"cellShape" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.cellShape}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Units --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridUnitsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n                ${nls.gridSettings.cellUnits}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellUnits" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Grid Origin --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridOriginContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n                ${nls.gridSettings.gridOrigin}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"gridOrigin" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridRefSystemContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelLeft" title\x3d"${nls.gridSettings.gridReferenceSystem}"\x3e\r\n                ${nls.gridSettings.gridReferenceSystem}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelRight" title\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n                ${nls.gridSettings.gridDatum}\x3c/div\x3e\r\n            \x3cselect class\x3d"referenceSystemSelect" data-dojo-attach-point\x3d"referenceSystem" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" aria-label\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell Outline Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellOutline}"\x3e\r\n                ${nls.gridSettings.cellOutline}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellOutlineColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell fill Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellFill}"\x3e\r\n                ${nls.gridSettings.cellFill}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellFillColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \r\n      \x3c!-- Label Settings Tab --\x3e\r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"labelTab"\x3e  \r\n        \x3c!-- Label Start Position Selector --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStartPositionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelStartPosition}"\x3e\r\n                ${nls.gridSettings.labelStartPosition}\x3c/div\x3e\r\n            \x3cselect class\x3d"GRGlabelStartPositionSelect" data-dojo-attach-point\x3d"labelStartPosition" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                aria-label\x3d"${nls.gridSettings.labelStartPosition}" role\x3d"listbox"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style without Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelType" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelType}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style with Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleWithRefSysContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelTypeWithRefSys" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelType}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling direction --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelDirectionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n                ${nls.gridSettings.labelDirection}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelDirection" style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect" \r\n                aria-label\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Font Settings --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"fontSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.labelStyle}"\x3e\r\n                ${nls.labelStyle}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"fontSettingNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e        \r\n      \x3c/div\x3e  \r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/Widget.html":'\x3cdiv class\x3d"GRGDrafterMainContainer GRGDrafterFullHeight" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterFullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n    \x3c!---------------\r\n      Main Page Node\r\n    -----------------\x3e\r\n    \x3cdiv class\x3d"esirCTMainPage" data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n      \x3c!-- Create From Area --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer"\r\n            title\x3d"${nls.newGRGFromAreaButtonLabel}" data-dojo-attach-point\x3d"newGRGAreaButton" tabindex\x3d"0"\r\n            role\x3d"button" aria-label\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n            ${nls.newGRGFromAreaButtonLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Create From Area Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromAreaContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n              ${nls.newGRGBySizeButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGBySizeButton" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n              ${nls.newGRGFromRefSystemButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGFromRefSystemButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Create From Point --\x3e\r\n      \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer"\r\n            title\x3d"${nls.newGRGFromPointButtonLabel}" data-dojo-attach-point\x3d"newGRGPointButton" tabindex\x3d"0"\r\n            role\x3d"button" aria-label\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n            ${nls.newGRGFromPointButtonLabel}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Create From Point Options --\x3e\r\n        \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromPointContainer"\x3e\r\n          \x3c!-- Define by size --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n              ${nls.newGRGBySizeButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newPointGRGBySizeButton" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n              ${nls.newGRGFromRefSystemButtonLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newPointGRGFromRefSystemButton"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Define from reference system --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByTimeButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n              ${nls.newGRGByTimeLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"\r\n              title\x3d"${nls.newGRGByTimeLabel}" data-dojo-attach-point\x3d"newPointGRGFromTimeButton" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------------\r\n      GRG From Area By Size Node\r\n    -----------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaBySizePanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeTitle}"\x3e\r\n          ${nls.newGRGAreaBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaBySizeSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\r\n            data-dojo-attach-point\x3d"grgAreaBySizeDrawContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterDoubleButtonLabel GRGDrafterEllipsis"\r\n                  title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaPolygonToolTip}" class\x3d"jimu-icon polygonBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaBySizeDrawPolygonIcon" tabindex\x3d"0" role\x3d"button"\r\n                  aria-label\x3d"${nls.addGRGAreaPolygonToolTip}"\x3e\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaBySizeDrawExtentIcon" tabindex\x3d"0" role\x3d"button"\r\n                  aria-label\x3d"${nls.addGRGAreaExtentToolTip}"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"setNumberRowsColumns" checked\x3d"false"\r\n              aria-label\x3d"${nls.numberRowsColumnsLabel}" /\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"cellHorizontal" value\x3d"10"\r\n                disabled\x3d\'true\' aria-label\x3d\'${nls.numberOfCellsHorizontal}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"cellVertical" value\x3d"10"\r\n                disabled\x3d\'true\' aria-label\x3d\'${nls.numberOfCellsVertical}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeCellWidth"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d\'${nls.cellWidth}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeCellHeight"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d\'${nls.cellHeight}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgAreaBySizeRotation" value\x3d"0" disabled\x3d\'true\'\r\n                aria-label\x3d\'${nls.rotation}\'\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeCreateGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!----------------------------------\r\n      GRG From Area By Reference System\r\n    ------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaByRefSystemPanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaByRefSystemTitle}"\x3e\r\n          ${nls.newGRGAreaByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaByRefSystemSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Area Tool --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawContainer"\x3e\r\n              \x3cdiv\x3e\r\n                \x3cdiv class\x3d"GRGDrafterButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e\r\n                  ${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn"\r\n                  data-dojo-attach-point\x3d"grgAreaByRefSystemDrawIcon" tabindex\x3d"0" role\x3d"button"\r\n                  aria-label\x3d"${nls.addGRGAreaExtentToolTip}"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" class\x3d"GRGGridSizeSelect" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              data-dojo-attach-point\x3d"grgAreaByRefSystemGridSize" aria-label\x3d"${nls.gridSize}"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Clip Grid to GRG Area Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.clipGrid}"\x3e${nls.clipGrid}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                data-dojo-attach-point\x3d"grgAreaByRefSystemClipToggle" checked\x3d"false" aria-label\x3d"${nls.clipGrid}" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgAreaByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)"\r\n              data-dojo-attach-point\x3d"grgAreaByRefLabelFormat" value\x3d"Z" aria-label\x3d"${nls.labelFormat}"\x3e\x3c/input\x3e\r\n            \x3cdiv title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForArea"\r\n              tabindex\x3d"0" role\x3d"tooltip" aria-label\x3d"${nls.helpIconTooltip}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemCreateGRGButton\' tabindex\x3d"0"\r\n                role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-------------------------------------\r\n      GRG From Area From Non Standard Grid\r\n    --------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaFromNonStandardPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgAreaByNonStandardPanelBackButton"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaFromNonStandardTitle}"\x3e\r\n          ${nls.newGRGAreaFromNonStandardTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgAreaByNonStandardSettingsButton"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Area Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"Area GRG by Reference System"\x3eArea GRG from Non\r\n              Standard Grid To Do\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!----------------------------\r\n      GRG From Point by Size Node\r\n    ------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointBySizePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointBySizePanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointBySizeTitle}"\x3e\r\n          ${nls.newGRGPointBySizeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointBySizeSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointBySizeOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellHorizontal" value\x3d"5"\r\n                aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointBySizeCellVertical" value\x3d"5"\r\n                aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellWidth"\r\n                value\x3d"1000" aria-label\x3d"${nls.cellWidth}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellHeight"\r\n                value\x3d"1000" aria-label\x3d"${nls.cellHeight}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Angle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridAngle}"\x3e${nls.gridAngle}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n              data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\' data-dojo-attach-point\x3d"gridAnglePoint"\r\n              value\x3d"0" aria-label\x3d"${nls.gridAngle}"\x3e\x3c/input\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'grgPointBySizeCreateGRGButton\'\r\n                tabindex\x3d"-1" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-----------------------------------\r\n      GRG From Point By Reference System\r\n    -------------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByRefSystemPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointByRefSystemPanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByRefSystemTitle}"\x3e\r\n          ${nls.newGRGPointByRefSystemTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointByRefSystemSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointByRefSystemOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Grid Size DropDown --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n            \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              data-dojo-attach-point\x3d"grgPointByRefSystemGridSize" aria-label\x3d"${nls.gridSize}"\x3e\r\n              \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n              \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n              \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n              \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n              \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n              \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByRefCellHorizontal" value\x3d"5"\r\n                aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByRefCellVertical"\r\n                value\x3d"5" aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Label Format--\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgPointByRefSystemLabelFormat"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)"\r\n              data-dojo-attach-point\x3d"grgPointByRefLabelFormat" value\x3d"Z" aria-label\x3d"${nls.labelFormat}"\x3e\x3c/input\x3e\r\n            \x3cdiv title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn" data-dojo-attach-point\x3d"helpBtnForPt"\r\n              tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.helpIconTooltip}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'grgPointByRefSystemCreateGRGButton\'\r\n                tabindex\x3d"-1" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemClearGRGButton\' tabindex\x3d"0"\r\n                role\x3d"button" aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!---------------------------------\r\n      GRG From Point By Time and Speed\r\n    -----------------------------------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByTimePageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n        \x3c!-- Back to Main Menu Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"grgPointByTimeBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByTimeTitle}"\x3e\r\n          ${nls.newGRGPointByTimeTitle}\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"grgPointByTimeSettingsButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.settingsTitle}"\x3e\x3c/div\x3e\r\n        \x3c!-- GRG Point Form --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"newGRGPointByTimeOriginCoordsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Time --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"timeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.time}"\x3e${nls.time}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeTime"\r\n                value\x3d"1" disabled\x3d\'false\' aria-label\x3d"${nls.time}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                data-dojo-attach-point\x3d"grgPointByTimeTimeUnits"\x3e\r\n                \x3coption value\x3d"3600" selected\x3d"selected"\x3e${nls.hours}\x3c/option\x3e\r\n                \x3coption value\x3d"60"\x3e${nls.minutes}\x3c/option\x3e\r\n                \x3coption value\x3d"1"\x3e${nls.seconds}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rate --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rate}"\x3e${nls.rate}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeRate"\r\n                value\x3d"10" disabled\x3d\'false\' aria-label\x3d"${nls.rate}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n              \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n                data-dojo-attach-point\x3d"grgPointByTimeRateUnits"\x3e\r\n                \x3coption value\x3d"0.3048;1"\x3e${nls.ftPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"0.3048;3600"\x3e${nls.ftPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;1"\x3e${nls.kmPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1000;3600" selected\x3d"selected"\x3e${nls.kmPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1;1"\x3e${nls.mPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1;3600"\x3e${nls.mPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;1"\x3e${nls.miPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1609.344;3600"\x3e${nls.miPerHour}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;1"\x3e${nls.nMPerSec}\x3c/option\x3e\r\n                \x3coption value\x3d"1852;3600"\x3e${nls.nMPerHour}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Set number of cells checkbox --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n              data-dojo-attach-point\x3d"setNumberRowsColumnsTime" checked\x3d"true"\r\n              aria-label\x3d"${nls.numberRowsColumnsLabel}" /\x3e\r\n            \x3clabel class\x3d"GRGCellsLabel" data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Number of Cells Horizontal and Vertical --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsHorizontal}"\x3e\r\n                ${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellHorizontal" value\x3d"10" disabled\x3d\'false\'\r\n                aria-label\x3d"${nls.numberOfCellsHorizontal}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.numberOfCellsVertical}"\x3e\r\n                ${nls.numberOfCellsVertical}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeCellVertical" value\x3d"10" disabled\x3d\'false\'\r\n                aria-label\x3d"${nls.numberOfCellsVertical}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3c!-- GRG Cell Width --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellWidth"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d"${nls.cellWidth}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- GRG Cell Height --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellHeight"\r\n                value\x3d"1000" disabled\x3d\'true\' aria-label\x3d"${nls.cellHeight}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Rotation --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n              \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\'\r\n                data-dojo-attach-point\x3d"grgPointByTimeRotation" value\x3d"0" disabled\x3d\'false\'\r\n                aria-label\x3d"${nls.rotation}"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'grgPointByTimeCreateGRGButton\'\r\n                tabindex\x3d"-1" role\x3d"button" aria-label\x3d"${nls.createGRGBtn}"\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeClearGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n                aria-label\x3d"${nls.clearGRGBtn}"\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!---------\r\n      Settings\r\n    -----------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"settingsPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"gridSettingsPanelBackButton" tabindex\x3d"0" role\x3d"button"\r\n          aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n          ${nls.settingsTitle}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"GRGDrafterSettingsNode" data-dojo-attach-point\x3d"gridSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--------\r\n      Publish\r\n    ----------\x3e\r\n    \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n      \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n        \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}"\r\n          data-dojo-attach-point\x3d"publishPanelBackButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n          ${nls.publishTitle}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n          \x3c!-- GRG Layer Name --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.GRGLayerName}"\x3e${nls.GRGLayerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput controlGroupHidden" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addGRGNameArea"\r\n              data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\', missingMessage:\'${nls.missingLayerNameMessage}\'" required\x3d"true"\r\n              aria-label\x3d"${nls.GRGLayerName}" trim\x3d"true"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"SelectStyle" aria-label\x3d"${nls.GRGLayerName}" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish to new layer --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.publishToNewLayer}"\x3e\r\n              ${nls.publishToNewLayer}\x3c/div\x3e\r\n            \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"publishNewLayer"\r\n              aria-label\x3d"${nls.publishToNewLayer}" /\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Show Labels Toggle --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.showLabels}"\x3e\r\n                ${nls.gridSettings.showLabels}\x3c/div\x3e\r\n              \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                data-dojo-attach-point\x3d"settingsShowLabelsToggle" checked\x3d"true"\r\n                aria-label\x3d"${nls.gridSettings.showLabels}" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish GRG Button --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterBtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizePublishGRGButton\' tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.publishGRGBtn}"\x3e${nls.publishGRGBtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"GRGDrafterPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/css/style.css":'.GRGDrafterMainContainer {min-width: 222px;}.jimu-widget-GRGDrafter .GRGDrafterFullHeight {height: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidth {width: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidthAndPadding {width: 100%; padding-top: 12px; padding-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthLeft {width: 50%;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-left: 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthContainer {display: flex;}.jimu-widget-GRGDrafter .GRGDrafterEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-GRGDrafter .GRGDrafterPointer {cursor: pointer;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowBlock {display: block;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRow {margin: 10px 10px 10px 10px; display: inline-flex;}.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon {margin-top: 6px; height: 16px; width: 16px;}.jimu-widget-GRGDrafter .GRGDrafterButtonIcon {height: 24px; width: 24px; float: left;}.jimu-widget-GRGDrafter .GRGFloatRight {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGFloatRight {float: left;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowItem {width: calc(100% - 40px); margin: 5px 25px 5px 25px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: left; width: calc(100% - 30px); padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: \'Avenir Medium\'; margin: 0 0 8px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: left; width: calc(100% - 65px); padding: 5px 5px 0px 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: left; width: calc(100% - 35px); padding: 0;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: left; padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGNewRightButton {background: url("./images/arrow-right_black.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGNewRightButton {transform: rotate(180deg); float: left;}.jimu-widget-GRGDrafter .GRGNewRightButton:hover {background: url("./images/arrow-right_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGNewDownButton {background: url("./images/arrow-down_black.png") no-repeat; margin-top: 9px;}.jimu-widget-GRGDrafter .GRGNewDownButton:hover {background: url("./images/arrow-down_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByDimension {background: url("./images/byDimension.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByRefSystemButton {background: url("./images/byReferenceSystem.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByTimeButton {background: url("./images/byTime.png") no-repeat;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterButtonIcon {float: right;}.jimu-widget-GRGDrafter .GRGDrafterPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-GRGDrafter .GRGDrafterPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-GRGDrafter .claro .dijitSelect,.claro .dijitSelect .dijitButtonContents,.claro .dijitTextBox {width: calc(100% - 60px); overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {background-image: url(\'./images/settings_black.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon:Hover {background-image: url(\'./images/settings_black_hover.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .settingsLocked {background-image: url(\'./images/settings_locked.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner {height: 18px !important; text-align: left; line-height: 0px !important; padding-bottom: 6px !important;}.jimu-rtl .jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner {text-align: right;}.jimu-widget-GRGDrafter .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-GRGDrafter .GRGDrafterHidden {display: none;}.jimu-rtl .jimu-widget-GRGDrafter .GRGCellsLabel {float: right;}.jimu-widget-GRGDrafter .GRGDrafterSettingsRow {width: 100%; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsButtonIcon {margin-top: 10px; height: 20px; width: 25px; float: right; background-size: 45px;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsDownButton {background: url("../images/down-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsUpButton {background: url("../images/up-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingRow {padding-right: 2px;}.jimu-widget-GRGDrafter .GRGDrafterSettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-GRGDrafter .GRGDrafterDropdownLabel {padding-bottom: 5px;}.jimu-widget-GRGDrafter .GRGDrafterSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterBackButton {overflow: hidden; width: 15px; float: left;}.jimu-widget-GRGDrafter .GRGDrafterTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-GRGDrafter .dijitMenuItem {color: #7989a0;}.jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-right: 2px;}.jimu-widget-GRGDrafter .switch-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-GRGDrafter .jimu-tab3 .tab-item-td.jimu-state-active {border-bottom: 3px solid #000; font-family: "Avenir Heavy"; color: #000000;}.jimu-widget-GRGDrafter .jimu-tab3 .tab-item-td {font-size: 12px;}.jimu-widget-GRGDrafter .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 12px; margin: 20px 0 10px 0;}.jimu-widget-GRGDrafter .tabs .unit-item {margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;}.jimu-widget-GRGDrafter .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-GRGDrafter .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.jimu-widget-GRGDrafter .GRGlabelStartPositionSelect:focus,.jimu-widget-GRGDrafter .GRGcellShapeSelect:focus,.jimu-widget-GRGDrafter .style-selector .jimu-color-picker:focus,.jimu-widget-GRGDrafter .GRGGridSizeSelect:focus,.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon:focus,.jimu-widget-GRGDrafter .GRGDrafterBackButton:focus,.jimu-widget-GRGDrafter .referenceSystemSelect:focus {outline: 2px solid #24B5CC !important; outline-offset: -2px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {float: right; margin: 0px 0px 00px 10px;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBackButton {float: right;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterSettingsIcon {float: left;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow {transform: rotate(180deg);}.jimu-rtl .jimu-widget-GRGDrafter .dijitSelect .dijitInputField {margin-left: 8px; margin-right: 0;}.SubTitle {font-weight: bold;}.jimu-widget-GRGDrafter .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn {float: left; transform: rotateY(180deg);}.jimu-widget-GRGDrafter .helpBtn:hover {float: right; background: url(./images/help_black_hover.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-rtl .jimu-widget-GRGDrafter .helpBtn:hover {float: left;}.jimu-widget-GRGDrafter .polygonBtn {display: inline-block; background: url(./images/polygon_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .polygonBtn:hover {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-polygon-active {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .extentBtn {display: inline-block; background: url(./images/extent_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .extentBtn:hover {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-extent-active {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat; border: none;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-GRGDrafter .GRGDrafterBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-rtl .jimu-widget-GRGDrafter .GRGDrafterBtnContainer {padding-right: 2px;}.jimu-widget-GRGDrafter .controlGroupHidden {display: none;}.jimu-widget-GRGDrafter .controlItem {display: flex;}.jimu-widget-GRGDrafter .jimu-btn {margin-bottom: 6px;}.jimu-widget-GRGDrafter .jimu-coordinate-control .coordLabel {font-size: 12px;}.jimu-widget-GRGDrafter .jimu-coordinate-control textarea {width: 100%;}.jimu-widget-GRGDrafter .jimu-coordinate-control .add-with-icon.coordInput {width: calc(100% - 60px);}.jimu-widget-GRGDrafter .dijitSlider {margin-left: 10px; margin-right: auto; margin-top: 14px; width: calc(100% - 212px); width: -moz-calc(100% - 212px);}.jimu-rtl .jimu-widget-GRGDrafter .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-GRGDrafter .colorPickerEditor {display: inline-flex; width: 100%;}.jimu-widget-GRGDrafter .percent-display {padding: 7px 0 0 2px;}.jimu-widget-GRGDrafter .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}.jimu-widget-GRGDrafter .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 65px; height: 30px;}.jimu-widget-GRGDrafter .dijitSliderImageHandleH {top: -7px;}.jimu-widget-GRGDrafter .dijitSliderThumbHover {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderProgressBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-GRGDrafter .colorPickerEditor .trans {font-family: "Avenir Light"; font-size: 12px; padding: 5px 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-GRGDrafter .sliderbar {width: 60px;}.jimu-widget-GRGDrafter .style-selector .clearFix {*overflow: hidden; *zoom: 1}.jimu-widget-GRGDrafter .style-selector .clearFix:after {display: table; content: ""; width: 0; clear: both}.jimu-widget-GRGDrafter .style-selector .hide {display: none}.jimu-widget-GRGDrafter .settings-container .title {font-size: 14px; color: #000000; letter-spacing: 0.39px; margin-bottom: 20px;}.jimu-widget-GRGDrafter .settings-container .label {font-size: 12px; color: #282828; letter-spacing: 0.33px; line-height: 30px;}.jimu-widget-GRGDrafter .style-selector .label {margin: 0 0; max-width: 160px; line-height: 30px; font-size: 12px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitSelect {width: 100%; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .jimu-color-picker {width: 40px !important; height: 30px !important; border: 1px solid #D7D7D7 !important;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButtonContainer {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitDownArrowButton .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitComboBox .dijitDownArrowButton,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitDownArrowButton {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitInputInner {padding: 1px 0 0 0; font-size: 12px; font-style: normal; height: 28px; line-height: 28px;}.jimu-widget-GRGDrafter .style-selector .dijitSelectLabel {font-size: 12px;}.jimu-widget-GRGDrafter .SelectStyle .dijitSelectLabel {overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 288px; text-align: left;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton {background-color: #ffffff; border: 0.75px solid #e2e5e9; border-left-style: none;}.jimu-widget-GRGDrafter .style-selector .dijitSelect,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitButtonNode {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButton {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitInputField {padding: 0px 10px;}.jimu-widget-GRGDrafter .jimu-image-chooser .display-text {width: 100%; font-size: 12px; color: #4A4A4A; letter-spacing: 0.33px; background-color: #FFF; text-align: center;}.jimu-image-chooser:hover .hint .display-text {color: #FFF;}.jimu-widget-GRGDrafter .dijitTextBoxFocused {border: 1px solid #D7D7D7 !important; box-shadow: 0 0 0 0 !important; outline: 2px solid #24B5CC !important; outline-offset: -2px !important;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 5px 10px;}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none) {.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 0px;}}.jimu-widget-GRGDrafter .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-position: -35px 53%;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitComboBox.dijitValidationTextBox,.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitSelect.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3etable {width: 140px;}.jimu-widget-GRGDrafter .halo-size .halo-size-group\x3e.dijitSelect.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .style-selector .setting-items {height: 30px; width: 100%; margin: 10px 0; vertical-align: middle; white-space: nowrap;}.jimu-widget-GRGDrafter .style-selector .setting-wapper {width: calc(100% - 100px);}.jimu-widget-GRGDrafter .style-selector .background-btn,.jimu-widget-GRGDrafter .style-selector .text-color-btn {width: 40px; height: 30px; overflow: hidden;}.jimu-widget-GRGDrafter .style-selector .halo-color-btn {width: 50px; height: 30px; overflow: hidden; padding-left: 5px; padding-right: 5px;}.jimu-widget-GRGDrafter .style-selector .align-group {margin-right: 8px; margin-left: -3px;}.jimu-rtl .jimu-widget-GRGDrafter .style-selector .align-group {margin-right: -3px; margin-left: 8px;}.jimu-widget-GRGDrafter .style-selector .font-group-btns {margin-left: 6px; margin-right: 6px;}.jimu-widget-GRGDrafter .style-selector .align-btn,.jimu-widget-GRGDrafter .style-selector .font-btn {height: 30px; margin: 0 3px;}.jimu-widget-GRGDrafter .style-selector .font-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .align-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .image-btn {width: 120px; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .bold {background: url("./images/font_B.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .bold.selected {background: url("./images/font_B_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic {background: url("./images/font_I.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic.selected {background: url("./images/font_I_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline {background: url("./images/font_U.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline.selected {background: url("./images/font_U_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .halo-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .halo-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .halo-toggle-group .halo-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px; margin-left: 5px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.DartTheme .jimu-widget-GRGDrafter .dijitSelectDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled {background-color: #4c4c4c;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url(images/tooltip.png);}.claro .dijitPopup.dijitTooltipDialogPopup .jimu-input {vertical-align: bottom;}.claro .dijitPopup.dijitTooltipDialogPopup .settingsContainer {margin-top: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup .checkbox.jimu-float-leading.jimu-icon.jimu-icon-checkbox {margin-right: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup span.jimu-widget-subtitle {display: inline-block; margin-bottom: 6px;}.jimu-widget-GRGDrafter .jimu-coordinate-control .settingBtn,.jimu-widget-GRGDrafter .jimu-coordinate-control .drawPointBtn {margin-left: 2px;}',
"*now":function(r){r(['dojo/i18n!*preload*widgets/GriddedReferenceGraphic/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo dojo/_base/declare jimu/BaseWidget dojo/_base/array dojo/_base/lang dojo/_base/kernel dojo/dom-style dojo/dom-class dojo/dom-construct dojo/on dojo/_base/html dojo/query dojo/topic dojo/json dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/popup dijit/Menu dijit/MenuItem jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/LayerInfos/LayerInfos jimu/LayerStructure jimu/utils jimu/dijit/CoordinateControl esri/arcgis/Portal esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/Point esri/geometry/Polyline esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/toolbars/draw esri/toolbars/edit esri/renderers/SimpleRenderer ./js/GridSettings ./js/drawGRG ./js/geometry-utils ./js/geometryUtils ./js/mgrs-utils ./js/mgrs ./js/util dijit/focus dojo/keys dojo/dom-attr esri/geometry/projection esri/SpatialReference dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner jimu/dijit/formSelect".split(" "),function(r,
c,g,m,a,e,h,l,q,k,n,d,p,b,v,H,t,f,x,D,L,w,u,C,A,I,F,y,B,E,M,N,Q,K,W,X,ea,S,T,U,da,O,Y,Z,G,J,R,ba,ca,ga,V,z,aa,P,fa){return c([g,v,H],{baseClass:"jimu-widget-GRGDrafter",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_gridSettingsInstance:null,_cellShape:"default",_labelStartPosition:"lowerLeft",_cellUnits:"meters",_labelType:"alphaNumeric",_labelTypeWithRefSys:"gridReferenceSystem",_labelDirection:"horizontal",_gridOrigin:"center",_referenceSystem:"MGRS",_showLabels:!0,_GRGAreaFillSymbol:null,
_cellTextSymbol:null,angle:0,featureLayerInfo:null,centerPoint:[],geodesicGrid:!0,postMixInProperties:function(){this.nls.common={};a.mixin(this.nls.common,window.jimuNls.common)},constructor:function(a){c.safeMixin(this,a)},postCreate:function(){P.isSupported()?P.load():new D({message:this.nls.projectionNotSupported});String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})});window.isRTL&&"ar"===
e.locale?(h.set(this.helpBtnForArea,"transform","rotateY(180deg)"),h.set(this.helpBtnForPt,"transform","rotateY(180deg)")):(h.set(this.helpBtnForArea,"transform",""),h.set(this.helpBtnForPt,"transform",""));this.inherited(arguments);this.extentAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:[155,155,155,0],outline:{color:[0,0,255,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,
255],width:1,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};var b=new Y(new S(this.pointSymbol));this._coordinatesLayer=new X;this._coordinatesLayer.spatialReference=this.map.spatialReference;this._coordinatesLayer.setRenderer(b);this._graphicsLayerGRGExtent=new X({id:"graphicsLayerGRGExtent"});this._graphicsLayerGRGTimeExtent=new X({id:"graphicsLayerGRGTimeExtent"});
this._extentSym=new T(this.extentAreaFillSymbol);this._ptSym=new S(this.pointSymbol);this.GRGArea=new W({layerDefinition:{geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"grid",alias:"grid",type:"esriFieldTypeString"}],drawingInfo:{renderer:{type:"simple",symbol:this.gridSymbol},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,
maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:this._cellTextSymbol}]},extent:{xmin:-1.8746028312877923E7,ymin:-6027547.894280539,xmax:1.882429982984192E7,ymax:1.2561937384669386E7,spatialReference:{wkid:102100}}}},{id:"Gridded-Reference-Graphic",outFields:["*"],showLabels:!0});this.createGraphicDeleteMenu();this.map.addLayers([this._graphicsLayerGRGTimeExtent,this.GRGArea,this._graphicsLayerGRGExtent,this._coordinatesLayer]);var c;
if(this.GRGArea.loaded)c=w.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic"),c.enablePopup(),this._showLabels&&c.showLabels();else this.GRGArea.on("load",a.hitch(this,function(){c=w.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");c.enablePopup();this._showLabels&&c.showLabels()}));this.grgPointBySizeCoordTool=new A({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,
graphicsLayer:this._coordinatesLayer});this.grgPointBySizeCoordTool.placeAt(this.newGRGPointBySizeOriginCoordsContainer);this.grgPointBySizeCoordTool.startup();this.own(k(this.grgPointBySizeCoordTool,"coordinates-deleted",a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.own(k(this.grgPointBySizeCoordTool,"get-coordinate-complete",a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.grgPointByRefSystemCoordTool=new A({parentWidget:this,label:this.nls.coordInputLabel,
input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointByRefSystemCoordTool.placeAt(this.newGRGPointByRefSystemOriginCoordsContainer);this.grgPointByRefSystemCoordTool.startup();this.own(k(this.grgPointByRefSystemCoordTool,"coordinates-deleted",a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.own(k(this.grgPointByRefSystemCoordTool,"get-coordinate-complete",a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));
this.grgPointByTimeCoordTool=new A({parentWidget:this,label:this.nls.coordInputLabel,input:!0,showCopyButton:!1,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.addPointToolTip,graphicsLayer:this._coordinatesLayer});this.grgPointByTimeCoordTool.placeAt(this.newGRGPointByTimeOriginCoordsContainer);this.grgPointByTimeCoordTool.startup();this.own(k(this.grgPointByTimeCoordTool,"coordinates-deleted",a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.own(k(this.grgPointByTimeCoordTool,
"get-coordinate-complete",a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()})));this.dt_AreaBySize=new da(this.map);this.dt_AreaByRefSystem=new da(this.map);this.editToolbar=new O(this.map,{uniformScaling:!0,allowAddVertices:!0,allowDeleteVertices:!0});this._initLoading();this._handleClickEvents();this._createGridSettings();this.util=new ga({appConfig:this.appConfig,nls:this.nls});this.restrictedCharlist="'\"\x3c\x3e{}[]#$%^\x26;:/\\";""===this.config.grg.operationalLayer.name&&(l.add(this.publishNewLayer,
"controlGroupHidden"),l.add(this.featureLayerList.domNode,"controlGroupHidden"),this.publishNewLayer.setValue(!0),l.remove(this.addGRGNameArea.domNode,"controlGroupHidden"));this._layerList=this._getAllMapLayers();this._populateSelectList(this.featureLayerList,this._layerList,this.config.grg.operationalLayer.name,!0);0===this.featureLayerList.options.length&&(this.publishNewLayer.setValue(!0),l.add(this.checkBoxParentContainer,"controlGroupHidden"));this._supportAccessibility();C.isAutoFocusFirstNodeWidget(this)&&
V.focus(this.newGRGAreaButton)},startup:function(){this.inherited(arguments);this.busyIndicator=y.create({target:this.domNode.parentNode.parentNode.parentNode,backgroundOpacity:0});this._setTheme();aa.set(this.grgPointByTimeTimeUnits,"aria-label",this.nls.time+""+this.nls.common.unit);aa.set(this.grgPointByTimeRateUnits,"aria-label",this.nls.rate+""+this.nls.common.unit)},resize:function(){var a=d(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<a.length&&h.set(a[0],"width",this.grgAreaBySizePublishGRGButton.clientWidth-
44+"px")},onOpen:function(){},onClose:function(){this.grgPointBySizeCoordinateFormat&&this.grgPointBySizeCoordinateFormat.domNode.offsetParent&&t.close(this.grgPointBySizeCoordinateFormat);this.grgPointByRefSystemCoordinateFormat&&this.grgPointByRefSystemCoordinateFormat.domNode.offsetParent&&t.close(this.grgPointByRefSystemCoordinateFormat);this.grgPointByTimeCoordinateFormat&&this.grgPointByTimeCoordinateFormat.domNode.offsetParent&&t.close(this.grgPointByTimeCoordinateFormat)},_initLoading:function(){this.loading=
new L({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_newGRGAreaButtonClicked:function(){l.contains(this.newGRGAreaButton,"GRGNewRightButton")?(n.removeClass(this.fromAreaContainer,"controlGroupHidden"),n.removeClass(this.newGRGAreaButton,"GRGNewRightButton"),n.addClass(this.newGRGAreaButton,"GRGNewDownButton"),n.addClass(this.fromPointContainer,"controlGroupHidden"),n.removeClass(this.newGRGPointButton,"GRGNewDownButton"),n.addClass(this.newGRGPointButton,"GRGNewRightButton"),
this._supportAccessibility(),V.focus(this.newGRGAreaButton)):(n.addClass(this.fromAreaContainer,"controlGroupHidden"),n.addClass(this.newGRGAreaButton,"GRGNewRightButton"),n.removeClass(this.newGRGAreaButton,"GRGNewDownButton"))},_newGRGPointButtonClicked:function(){l.contains(this.newGRGPointButton,"GRGNewRightButton")?(n.removeClass(this.fromPointContainer,"controlGroupHidden"),n.removeClass(this.newGRGPointButton,"GRGNewRightButton"),n.addClass(this.newGRGPointButton,"GRGNewDownButton"),n.addClass(this.fromAreaContainer,
"controlGroupHidden"),n.removeClass(this.newGRGAreaButton,"GRGNewDownButton"),n.addClass(this.newGRGAreaButton,"GRGNewRightButton"),this._updateLastFocusNode()):(n.addClass(this.fromPointContainer,"controlGroupHidden"),n.addClass(this.newGRGPointButton,"GRGNewRightButton"),n.removeClass(this.newGRGPointButton,"GRGNewDownButton"),this._supportAccessibility())},_publishPanelBackButtonClicked:function(){this.publishMessage.innerHTML="";this.addGRGNameArea.setValue("");this.addGRGNameArea.reset();this._graphicsLayerGRGExtent.show();
this._graphicsLayerGRGTimeExtent.clear();this._showPanel(this._lastOpenPanel)},_grgAreaBySizePublishGRGButtonClicked:function(){var a={name:this.publishNewLayer.checked?this.addGRGNameArea.value:this.featureLayerList.getValue(),url:"",itemId:"",serviceItemId:""};if(this.publishNewLayer.checked)this._isValidGRGLayerName(a.name)?this.publishMessage.innerHTML="":(l.contains(this.addGRGNameArea.domNode,"controlGroupHidden")||V.focus(this.addGRGNameArea.domNode),this.addGRGNameArea.set("state","Error"),
this.addGRGNameArea.displayMessage(this.nls.missingLayerNameMessage),this.publishMessage.innerHTML=this.nls.missingLayerNameMessage);else{var c=this._layerList.filter(function(b){return b.name===a.name},this);1===c.length&&(a.url=c[0].url,a.itemId=c[0].id,a.serviceItemId=b.parse(c[0]._json).serviceItemId)}this._initSaveToPortal(a)},_settingsShowLabelsToggleClicked:function(){var a=w.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");(this._showLabels=this.settingsShowLabelsToggle.checked)?
a.showLabels():a.hideLabels()},_handleClickEvents:function(){this.own(k(this.newGRGAreaButton,"click",a.hitch(this,this._newGRGAreaButtonClicked)));this.own(k(this.newGRGAreaButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._newGRGAreaButtonClicked()})));this.own(k(this.newGRGPointButton,"click",a.hitch(this,this._newGRGPointButtonClicked)));this.own(k(this.newGRGPointButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._newGRGPointButtonClicked()})));
this.own(k(this.newAreaGRGBySizeButton,"click",a.hitch(this,function(){this._showPanel("grgAreaBySize")})));this.own(k(this.newAreaGRGBySizeButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._showPanel("grgAreaBySize")})));this.own(k(this.newAreaGRGFromRefSystemButton,"click",a.hitch(this,function(){this._showPanel("grgAreaByRefSystem")})));this.own(k(this.newAreaGRGFromRefSystemButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||
this._showPanel("grgAreaByRefSystem")})));this.own(k(this.newPointGRGBySizeButton,"click",a.hitch(this,function(){this._showPanel("grgPointBySize");this._toggleGrgPointCreateGRGButton()})));this.own(k(this.newPointGRGBySizeButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._showPanel("grgPointBySize"),this._toggleGrgPointCreateGRGButton()})));this.own(k(this.newPointGRGFromRefSystemButton,"click",a.hitch(this,function(){this._showPanel("grgPointByRefSystem");
this._toggleGrgPointCreateGRGButton()})));this.own(k(this.newPointGRGFromRefSystemButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._showPanel("grgPointByRefSystem"),this._toggleGrgPointCreateGRGButton()})));this.own(k(this.newPointGRGFromTimeButton,"click",a.hitch(this,function(){this._showPanel("grgPointByTime");this._toggleGrgPointCreateGRGButton()})));this.own(k(this.newPointGRGFromTimeButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===
z.SPACE)this._showPanel("grgPointByTime"),this._toggleGrgPointCreateGRGButton()})));this.own(k(this.grgAreaBySizePanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.own(k(this.grgAreaBySizePanelBackButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaBySizeSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgAreaBySizeSettingsButton,"settingsLocked"),
n.removeClass(this.grgAreaBySizeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(k(this.grgAreaBySizeSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(k(this.grgAreaBySizeSettingsButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(k(this.grgAreaBySizeDrawPolygonIcon,"click",a.hitch(this,
this._grgAreaBySizeDrawPolygonIconClicked)));this.own(k(this.grgAreaBySizeDrawPolygonIcon,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgAreaBySizeDrawPolygonIconClicked()})));this.own(k(this.grgAreaBySizeDrawExtentIcon,"click",a.hitch(this,this._grgAreaBySizeDrawExtentIconClicked)));this.own(k(this.grgAreaBySizeDrawExtentIcon,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgAreaBySizeDrawExtentIconClicked()})));this.own(k(this.dt_AreaBySize,
"draw-complete",a.hitch(this,this._dt_AreaBySizeComplete)));this.own(k(this.grgAreaBySizeCreateGRGButton,"click",a.hitch(this,this._grgAreaBySizeCreateGRGButtonClicked)));this.own(k(this.grgAreaBySizeCreateGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgAreaBySizeCreateGRGButtonClicked()})));this.own(k(this.grgAreaBySizeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(k(this.grgAreaBySizeClearGRGButton,"keydown",a.hitch(this,
function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._clearLayers(!0)})));this.own(k(this.setNumberRowsColumns,"click",a.hitch(this,this._setNumberRowsColumnsCheckBoxChanged)));this.own(k(this.setNumberRowsColumns,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._setNumberRowsColumnsCheckBoxChanged()})));this.own(k(this.cellHorizontal,"blur",a.hitch(this,function(){this.cellHorizontal.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(J.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):
this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(k(this.cellVertical,"blur",a.hitch(this,function(){this.cellVertical.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(J.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(k(this.grgAreaBySizeRotation,"keyup",a.hitch(this,
function(){setTimeout(a.hitch(this,function(){if(this.grgAreaBySizeRotation.isValid()&&!isNaN(this.grgAreaBySizeRotation.value)&&this._graphicsLayerGRGExtent.graphics[0]){var a=this.grgAreaBySizeRotation.getValue()-this.angle,a=E.rotate(this._graphicsLayerGRGExtent.graphics[0].geometry,-1*a);this._graphicsLayerGRGExtent.clear();a=new B(a,this._extentSym);this._graphicsLayerGRGExtent.add(a);this.angle=this.grgAreaBySizeRotation.getValue();this.editToolbar.deactivate()}}),1E3)})));this.own(k(this.grgAreaByRefSystemPanelBackButton,
"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.own(k(this.grgAreaByRefSystemPanelBackButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaByRefSystemSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgAreaByRefSystemSettingsButton,"settingsLocked"),n.removeClass(this.grgAreaByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):(this.own(k(this.grgAreaByRefSystemSettingsButton,
"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(k(this.grgAreaByRefSystemSettingsButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(k(this.grgAreaByRefSystemDrawIcon,"click",a.hitch(this,this._grgAreaByRefSystemDrawIconClicked)));this.own(k(this.grgAreaByRefSystemDrawIcon,"keydown",a.hitch(this,
function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgAreaByRefSystemDrawIconClicked()})));this.own(k(this.grgAreaByRefSystemCreateGRGButton,"click",a.hitch(this,this._grgAreaByRefSystemCreateGRGButtonClicked)));this.own(k(this.grgAreaByRefSystemCreateGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgAreaByRefSystemCreateGRGButtonClicked()})));this.own(k(this.grgAreaByRefSystemClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));
this.own(k(this.grgAreaByRefSystemClearGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._clearLayers(!0)})));this.own(k(this.dt_AreaByRefSystem,"draw-complete",a.hitch(this,function(a){this._dt_AreaByRefSystemComplete(a);V.focus(this.grgAreaByRefSystemGridSize.domNode)})));this.own(k(this.grgAreaByRefSystemGridSize,"change",a.hitch(this,function(){switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":this.grgAreaByRefLabelFormat.value="Z";break;case "100000":this.grgAreaByRefLabelFormat.value=
"ZS";break;default:this.grgAreaByRefLabelFormat.value="ZSXY"}})));this.own(k(this.grgPointBySizePanelBackButton,"click",a.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(k(this.grgPointBySizePanelBackButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointBySizeSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgPointBySizeSettingsButton,
"settingsLocked"),n.removeClass(this.grgPointBySizeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(k(this.grgPointBySizeSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(k(this.grgPointBySizeSettingsButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(k(this.grgPointBySizeCreateGRGButton,
"click",a.hitch(this,this._grgPointBySizeCreateGRGButtonClicked)));this.own(k(this.grgPointBySizeCreateGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgPointBySizeCreateGRGButtonClicked()})));this.own(k(this.grgPointBySizeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(k(this.grgPointBySizeClearGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._clearLayers(!0)})));this.own(k(this.grgPointBySizeCoordTool.dt,
"DrawComplete",a.hitch(this,function(){this._dt_Complete();this._onDrawCompleteToggleCreateGRGButton();V.focus(this.grgPointBySizeCellHorizontal.domNode)})));this.own(k(this.grgPointByRefSystemCoordTool.dt,"DrawComplete",a.hitch(this,function(){this._dt_Complete();this._onDrawCompleteToggleCreateGRGButton();V.focus(this.grgPointByRefSystemGridSize.domNode)})));this.own(k(this.grgPointByTimeCoordTool.dt,"DrawComplete",a.hitch(this,function(){this._dt_Complete();this._onDrawCompleteToggleCreateGRGButton();
V.focus(this.grgPointByTimeTime.domNode)})));this.own(k(this.grgPointByRefSystemPanelBackButton,"click",a.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(k(this.grgPointByRefSystemPanelBackButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByRefSystemSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgPointByRefSystemSettingsButton,
"settingsLocked"),n.removeClass(this.grgPointByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):(this.own(k(this.grgPointByRefSystemSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),this.own(k(this.grgPointByRefSystemSettingsButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(k(this.grgPointByRefSystemCreateGRGButton,
"click",a.hitch(this,this._grgPointByRefSystemCreateGRGButtonClicked)));this.own(k(this.grgPointByRefSystemCreateGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgPointByRefSystemCreateGRGButtonClicked()})));this.own(k(this.grgPointByRefSystemClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(k(this.grgPointByRefSystemClearGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._clearLayers(!0)})));
this.own(k(this.grgPointByRefSystemGridSize,"change",a.hitch(this,function(){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":this.grgPointByRefLabelFormat.value="Z";break;case "100000":this.grgPointByRefLabelFormat.value="ZS";break;default:this.grgPointByRefLabelFormat.value="ZSXY"}this._toggleGrgPointCreateGRGButton()})));this.own(k(this.grgPointByTimeBackButton,"click",a.hitch(this,function(){this.onClose();this._resetOnBackToMainPage()})));this.own(k(this.grgPointByTimeBackButton,
"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this.onClose(),this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByTimeSettingsButton.title=this.nls.lockSettings,n.addClass(this.grgPointByTimeSettingsButton,"settingsLocked"),n.removeClass(this.grgPointByTimeSettingsButton,"GRGDrafterSettingsIcon")):(this.own(k(this.grgPointByTimeSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")}))),
this.own(k(this.grgPointByTimeSettingsButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._updateSettingsPage(this._currentOpenPanel),this._showPanel("settingsPage")}))));this.own(k(this.grgPointByTimeCreateGRGButton,"click",a.hitch(this,this._grgPointByTimeCreateGRGButtonClicked)));this.own(k(this.grgPointByTimeCreateGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgPointByTimeCreateGRGButtonClicked()})));this.own(k(this.grgPointByTimeClearGRGButton,
"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(k(this.grgPointByTimeClearGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._clearLayers(!0)})));this.own(k(this.setNumberRowsColumnsTime,"click",a.hitch(this,this._setNumberRowsColumnsTimeCheckBoxChanged)));this.own(k(this.setNumberRowsColumnsTime,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._setNumberRowsColumnsTimeCheckBoxChanged()})));this.own(k(this.gridSettingsPanelBackButton,
"click",a.hitch(this,function(){this._gridSettingsInstance.onClose();this._showPanel(this._lastOpenPanel)})));this.own(k(this.gridSettingsPanelBackButton,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this._gridSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel)})));this.own(k(this.publishPanelBackButton,"click",a.hitch(this,this._publishPanelBackButtonClicked)));this.own(k(this.publishPanelBackButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&
a.keyCode!==z.SPACE||this._publishPanelBackButtonClicked()})));this.own(k(this.grgAreaBySizePublishGRGButton,"click",a.hitch(this,this._grgAreaBySizePublishGRGButtonClicked)));this.own(k(this.grgAreaBySizePublishGRGButton,"keydown",a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._grgAreaBySizePublishGRGButtonClicked()})));this.own(k(this.settingsShowLabelsToggle,"click",a.hitch(this,this._settingsShowLabelsToggleClicked)));this.own(k(this.settingsShowLabelsToggle,"keydown",
a.hitch(this,function(a){a.keyCode!==z.ENTER&&a.keyCode!==z.SPACE||this._settingsShowLabelsToggleClicked()})));this.own(k(this.featureLayerList,"change",a.hitch(this,function(){this.resize()})));this.own(k(this.editToolbar,"graphic-move-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid()})));this.own(k(this.editToolbar,"rotate-stop",a.hitch(this,function(a){this.angle+=parseFloat(a.info.angle.toFixed(1));this.grgAreaBySizeRotation.setValue(this.angle)})));this.own(k(this.editToolbar,
"vertex-move-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(J.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()))})));this.own(k(this.editToolbar,"scale-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(a.graphic.geometry)})));this.own(k(this.publishNewLayer,"change",a.hitch(this,this._onCheckboxClicked)));p.subscribe("moveMap",a.hitch(this,
function(){setTimeout(a.hitch(this,function(){this._moveMap()}),1E3)}))},_populateSelectList:function(b,c,d,e){var f=[];e&&(f=m.filter(c,function(a){return"esriGeometryPolygon"===a.geometryType},this));c=0<f.length?f:c;m.forEach(c,a.hitch(this,function(a){a.url&&"Feature Layer"===a.type&&a.capabilities.includes("Create,Delete,Query,Update,Editing")&&b.addOption({value:a.name,label:C.sanitizeHTML(a.name),selected:!1})}),this);""!==d&&b.set("displayedValue",d)},_getAllMapLayers:function(){var a=[];
u.getInstance().traversal(function(b){"undefined"!==typeof b._layerInfo.layerObject.type&&-1===b._layerInfo.layerObject.type.indexOf("tile")&&a.push(b._layerInfo.layerObject)});return a},_onCheckboxClicked:function(){this.publishNewLayer.checked?(l.add(this.featureLayerList.domNode,"controlGroupHidden"),l.remove(this.addGRGNameArea.domNode,"controlGroupHidden"),this.addGRGNameArea.reset(),this.addGRGNameArea.focus()):(l.add(this.addGRGNameArea.domNode,"controlGroupHidden"),l.remove(this.featureLayerList.domNode,
"controlGroupHidden"));this._addLayerToMap=this.publishNewLayer.checked},_isValidGRGLayerName:function(a){var b=!1,c=this._findRestrictedChars(a,this.restrictedCharlist);c&&0<c.length?b=!1:this._isLayerNameValid(a)?a&&0<a.length&&(b=!0):b=!1;return b},_findRestrictedChars:function(a,b){var c="",d;if(a&&b)for(d=0;d<b.length;d++){var e=b.charAt(d);-1!==a.indexOf(e)&&(" "===e&&(e="spaces"),c=0===c.length?e:c+(" "+e))}return c},_isLayerNameValid:function(a){var b=/^\./,c=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;
return/^[^\\/:\*\?"<>\|()]+$/.test(a)&&!b.test(a)&&!c.test(a)},_updateSettingsPage:function(a){n.removeClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.labelStartPositionContainer,"controlGroupHidden");n.removeClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden");
n.addClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");n.addClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden");n.addClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden");switch(a){case "grgPointBySize":n.removeClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");break;case "grgAreaByRefSystem":case "grgPointByRefSystem":n.addClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden"),
n.addClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden"),n.addClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden"),n.addClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden"),n.removeClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden"),n.removeClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden")}},_getNodeByName:function(a){var b;switch(a){case "mainPage":b=this.mainPageNode;
break;case "grgAreaBySize":b=this.grgAreaBySizePageNode;break;case "grgAreaByRefSystem":b=this.grgAreaByRefSystemPageNode;break;case "grgAreaFromNonStandard":b=this.grgAreaFromNonStandardPageNode;break;case "grgPointBySize":b=this.grgPointBySizePageNode;break;case "grgPointByRefSystem":b=this.grgPointByRefSystemPageNode;break;case "grgPointByTime":b=this.grgPointByTimePageNode;this._gridSettingsInstance.gridOrigin.set("value","center");this._gridOrigin="center";break;case "settingsPage":b=this.settingsPageNode;
break;case "publishPage":b=this.publishPageNode}return b},_resetOnBackToMainPage:function(){this._showPanel("mainPage");this._reset();V.focus(this.newGRGAreaButton)},_reset:function(){this._clearLayers(!0);this.dt_AreaBySize.deactivate();this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation();r.removeClass(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active");r.removeClass(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active");n.addClass(this.fromAreaContainer,"controlGroupHidden");
n.addClass(this.newGRGAreaButton,"GRGNewRightButton");n.removeClass(this.newGRGAreaButton,"GRGNewDownButton");n.addClass(this.fromPointContainer,"controlGroupHidden");n.addClass(this.newGRGPointButton,"GRGNewRightButton");n.removeClass(this.newGRGPointButton,"GRGNewDownButton")},_clearLayers:function(a){this.GRGArea.clear();this.GRGArea.refresh();this.editToolbar.deactivate();this.grgPointBySizeCoordTool.clear();this.grgPointByRefSystemCoordTool.clear();this.grgPointByTimeCoordTool.clear();this._toggleGrgPointCreateGRGButton();
a&&(this._graphicsLayerGRGExtent.clear(),this.angle=0,this.grgAreaBySizeRotation.setValue(this.angle),this.grgAreaBySizeRotation.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellWidth.set("disabled",!0))},_createGridSettings:function(){this._gridSettingsInstance=new Z({nls:this.nls,config:this.config,appConfig:this.appConfig},q.create("div",{},this.gridSettingsNode));this.own(this._gridSettingsInstance.on("gridSettingsChanged",a.hitch(this,function(a){this._cellShape=
a.cellShape;this._labelStartPosition=a.labelStartPosition;this._cellUnits=a.cellUnits;this._labelType=a.labelType;this._labelTypeWithRefSys=a.labelTypeWithRefSys;this._labelDirection=a.labelDirection;this._gridOrigin=a.gridOrigin;this._referenceSystem=a.referenceSystem;"default"===this._cellShape?(this.grgAreaBySizeCellHeight.setValue(this.grgAreaBySizeCellWidth.value),this.grgPointBySizeCellHeight.set("disabled",!1),this.grgPointBySizeCellHeight.setValue(this.grgPointBySizeCellWidth.value)):(this.grgAreaBySizeCellHeight.set("disabled",
!0),this.grgAreaBySizeCellHeight.setValue(0),this.grgPointBySizeCellHeight.set("disabled",!0),this.grgPointBySizeCellHeight.setValue(0));"gridReferenceSystem"!==this._labelTypeWithRefSys?(n.addClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),n.addClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden")):(n.removeClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),n.removeClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden"));var b=new F(a.gridFillColor);b.a=
1-a.gridFillTransparency;var c=new F(a.gridOutlineColor);c.a=1-a.gridOutlineTransparency;this._GRGAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:b,outline:{color:c,width:2,type:"esriSLS",style:"esriSLSSolid"}};b=new T(this._GRGAreaFillSymbol);b=new Y(b);this.GRGArea.setRenderer(b);var b=new F(a.fontSettings.textColor),c=255*(1-a.fontSettings.labelTransparency),d=0;a.fontSettings.haloOn&&(d=parseInt(a.fontSettings.haloSize,10));var e=new F(a.fontSettings.haloColor);this._cellTextSymbol=
{type:"esriTS",color:[b.r,b.g,b.b,c],haloSize:d,haloColor:[e.r,e.g,e.b,c],horizontalAlignment:"center",font:{size:parseInt(a.fontSettings.fontSize,10),style:a.fontSettings.font.italic?"italic":"normal",weight:a.fontSettings.font.bold?"bold":"normal",family:a.fontSettings.font.fontFamily,decoration:a.fontSettings.font.underline?"underline":"none"}};a=new ea({labelExpressionInfo:{value:"{grid}"}});a.symbol=new U(this._cellTextSymbol);this.GRGArea.setLabelingInfo([a]);this.GRGArea.refresh()})));this._gridSettingsInstance.startup();
this.own(k(this._gridSettingsInstance.tab,"tabChanged",a.hitch(this,function(){setTimeout(a.hitch(this,function(){this._updateLastFocusNode()}),200)})))},_showPanel:function(a){var b;this._currentOpenPanel&&(b=this._getNodeByName(this._currentOpenPanel),l.add(b,"GRGDrafterHidden"));b=this._getNodeByName(a);l.remove(b,"GRGDrafterHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=a;this._supportAccessibility();"publishPage"!==a||this.isOnScreen||this.resize()},_grgAreaBySizeDrawPolygonIconClicked:function(){this._clearLayers(!0);
l.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")&&(this.dt_AreaBySize.deactivate(),l.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active"));l.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("polygon"),this.own(k(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(O.MOVE|
O.EDIT_VERTICES,a.graphic)}))),this.own(k(this._graphicsLayerGRGExtent,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this.editToolbar._defaultOptions.uniformScaling=!0,this.editToolbar.activate(O.MOVE|O.EDIT_VERTICES,a.graphic)}))));l.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")},_grgAreaBySizeDrawExtentIconClicked:function(){this._clearLayers(!0);l.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")&&(this.dt_AreaBySize.deactivate(),
l.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));l.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("extent"),this.own(k(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(O.MOVE|O.ROTATE|O.SCALE,a.graphic)}))),this.own(k(this._graphicsLayerGRGExtent,"keydown",
a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this.editToolbar._defaultOptions.uniformScaling=!0,this.editToolbar.activate(O.MOVE|O.ROTATE|O.SCALE,a.graphic)}))));l.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")},_grgPointBySizeDrawButtonClicked:function(){l.contains(this.grgPointBySizeAddPointBtn,"jimu-edit-active")?this.map.enableMapNavigation():(this._clearLayers(!0),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation());l.toggle(this.grgPointBySizeAddPointBtn,
"jimu-edit-active")},_grgAreaByRefSystemDrawIconClicked:function(){l.contains(this.grgAreaByRefSystemDrawIcon,"jimu-extent-active")?(this.dt_AreaByRefSystem.deactivate(),this.map.enableMapNavigation()):(this._graphicsLayerGRGExtent.clear(),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation(),this.dt_AreaByRefSystem.activate("extent"),this.editToolbar.deactivate(),this.own(k(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=
!1;this.editToolbar.activate(O.MOVE|O.SCALE,a.graphic)}))),this.own(k(this._graphicsLayerGRGExtent,"keydown",a.hitch(this,function(a){if(a.keyCode===z.ENTER||a.keyCode===z.SPACE)this.editToolbar._defaultOptions.uniformScaling=!1,this.editToolbar.activate(O.MOVE|O.SCALE,a.graphic)}))));l.toggle(this.grgAreaByRefSystemDrawIcon,"jimu-extent-active")},_dt_AreaBySizeComplete:function(a){var b;this.map.enableMapNavigation();this.dt_AreaBySize.deactivate();"extent"===a.geometry.type?(a.geometry=J.extentToPolygon(a.geometry),
b=new B(a.geometry,this._extentSym),this.grgAreaBySizeRotation.set("disabled",!1),l.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")):(b=new B(a.geometry,this._extentSym),a.geometry=J.extentToPolygon(a.geometry.getExtent()),l.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));"default"===this._cellShape&&this.grgAreaBySizeCellHeight.set("disabled",!1);this.grgAreaBySizeCellWidth.set("disabled",!1);V.focus(this.grgAreaBySizeCellWidth.domNode);this._graphicsLayerGRGExtent.add(b);
this.centerPoint=a.geometry.getCentroid();this._calculateCellWidthAndHeight(a.geometry)},_calculateCellWidthAndHeight:function(a){4326===a.spatialReference.wkid&&(a=K.geographicToWebMercator(a));var b=E.geodesicLength(new Q({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),this._cellUnits)/this.cellHorizontal.value,c=E.geodesicLength(new Q({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,3).y]]],
spatialReference:a.spatialReference}),this._cellUnits)/this.cellVertical.value,d=this.util.convertToMeters(b,this._cellUnits),e=this.util.convertToMeters(c,this._cellUnits);2E4>d&&(2E4>e&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?(this.geodesicGrid=!0,this.grgAreaBySizeCellWidth.setValue(b),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(c):this.grgAreaBySizeCellHeight.setValue(0)):(this.geodesicGrid=!1,this.grgAreaBySizeCellWidth.setValue(E.distance(a.getPoint(0,
0),a.getPoint(0,1),this._cellUnits)/this.cellHorizontal.value),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(E.distance(a.getPoint(0,0),a.getPoint(0,3),this._cellUnits)/this.cellVertical.value):this.grgAreaBySizeCellHeight.setValue(0))},_dt_Complete:function(){this.grgPointBySizeCoordTool.deactivateDrawTool();this.grgPointByRefSystemCoordTool.deactivateDrawTool();this.grgPointByTimeCoordTool.deactivateDrawTool();this.map.enableMapNavigation()},_dt_AreaByRefSystemComplete:function(a){l.remove(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active");a=new B(J.extentToPolygon(a.geometry),this._extentSym);this._graphicsLayerGRGExtent.add(a);this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation()},_grgPointBySizeCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointBySizeCoordinateFormat.content.formats[this.grgPointBySizeCoordinateFormat.content.ct],b=a.defaultFormat,c=this.grgPointBySizeCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.grgPointBySizeCoordTool.inputCoordinate.set("formatPrefix",
this.grgPointBySizeCoordinateFormat.content.addSignChkBox.checked);this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",b);this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",c);this._grgPointBySizeSetCoordLabel(c);t.close(this.grgPointBySizeCoordinateFormat)},_setNumberRowsColumnsCheckBoxChanged:function(){this.setNumberRowsColumns.checked?(this.grgAreaBySizeCellWidth.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.cellHorizontal.set("disabled",!1),this.cellVertical.set("disabled",
!1)):(this.cellHorizontal.set("disabled",!0),this.cellVertical.set("disabled",!0));this._clearLayers(!0)},_setNumberRowsColumnsTimeCheckBoxChanged:function(){this.setNumberRowsColumnsTime.checked?(this.grgPointByTimeCellWidth.set("disabled",!0),this.grgPointByTimeCellHeight.set("disabled",!0),this.grgPointByTimeCellHorizontal.set("disabled",!1),this.grgPointByTimeCellVertical.set("disabled",!1)):(this.grgPointByTimeCellHorizontal.set("disabled",!0),this.grgPointByTimeCellVertical.set("disabled",!0),
this.grgPointByTimeCellWidth.set("disabled",!1),this.grgPointByTimeCellHeight.set("disabled",!1));this._clearLayers(!0)},_grgAreaBySizeCreateGRGButtonClicked:function(){var a=new fa(4326);if(this._graphicsLayerGRGExtent.graphics[0]&&this.grgAreaBySizeCellWidth.isValid()&&this.grgAreaBySizeCellHeight.isValid()&&this.grgAreaBySizeRotation.isValid()){this._clearLayers(!1);var a=P.isLoaded()?P.project(this._graphicsLayerGRGExtent.graphics[0].geometry,a):this._graphicsLayerGRGExtent.graphics[0].geometry,
b=0===this.angle?J.extentToPolygon(a.getExtent()):a;4326===b.spatialReference.wkid&&(b=K.geographicToWebMercator(b));var c,d;this.geodesicGrid?(c=E.geodesicLength(new Q({paths:[[[b.getPoint(0,0).x,b.getPoint(0,0).y],[b.getPoint(0,1).x,b.getPoint(0,1).y]]],spatialReference:b.spatialReference}),"meters"),d=E.geodesicLength(new Q({paths:[[[b.getPoint(0,0).x,b.getPoint(0,0).y],[b.getPoint(0,3).x,b.getPoint(0,3).y]]],spatialReference:b.spatialReference}),"meters")):(c=E.distance(b.getPoint(0,0),b.getPoint(0,
1),"meters"),d=E.distance(b.getPoint(0,0),b.getPoint(0,3),"meters"));var a=this.util.convertToMeters(this.grgAreaBySizeCellWidth.value,this._cellUnits),e=this.util.convertToMeters(this.grgAreaBySizeCellHeight.value,this._cellUnits);c=Math.round(c/a);d="default"===this._cellShape?Math.round(d/e):Math.round(d/a/Math.cos(30*Math.PI/180))+1;G.checkGridSize(c,d)?(b=b.getCentroid(),a=G.createGRG(c,d,b,a,e,this.angle,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,"center",
this.geodesicGrid,this.map,P),this.GRGArea.applyEdits(a,null,null),this.map.setExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().expand(2),!1),this._graphicsLayerGRGExtent.clear(),this._showPanel("publishPage")):new D({message:this.nls.tooManyCellsErrorMessage})}},_grgPointBySizeCreateGRGButtonClicked:function(){if(!l.contains(this.grgPointBySizeCreateGRGButton,"jimu-state-disabled"))if(this.grgPointBySizeCellWidth.isValid()&&this.grgPointBySizeCellHeight.isValid()&&this.gridAnglePoint.isValid()){var a=
K.geographicToWebMercator(this.grgPointBySizeCoordTool.getMapCoordinateDD()),b=this.util.convertToMeters(this.grgPointBySizeCellWidth.value,this._cellUnits),c=this.util.convertToMeters(this.grgPointBySizeCellHeight.value,this._cellUnits);this.geodesicGrid=2E4>b&&(2E4>c&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?!0:!1;if(G.checkGridSize(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value)){a=G.createGRG(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value,
a,b,c,this.gridAnglePoint.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,this.geodesicGrid,this.map,P);this.GRGArea.applyEdits(a,null,null);b=[];for(c=0;c<a.length;c++)b.push(a[c].geometry);a=E.union(b);this.map.setExtent(a.getExtent().expand(2),!1);this._showPanel("publishPage")}else new D({message:this.nls.tooManyCellsErrorMessage})}else new D({message:this.nls.missingParametersMessage})},_grgPointByTimeCreateGRGButtonClicked:function(){if(!l.contains(this.grgPointByTimeCreateGRGButton,
"jimu-state-disabled")){var a,b,c;if(this.grgPointByTimeTime.isValid()&&this.grgPointByTimeRate.isValid()&&this.grgPointByTimeRotation.isValid()){var d=this.grgPointByTimeTime.get("value")*this.grgPointByTimeTimeUnits.get("value");b=this.grgPointByTimeRate.get("value")*this.grgPointByTimeRateUnits.value.split(";")[0]/this.grgPointByTimeRateUnits.value.split(";")[1];b*=d;d=K.geographicToWebMercator(this.grgPointByTimeCoordTool.getMapCoordinateDD());2E5>b?(this.geodesicGrid=!0,a=E.geodesicBuffer(d,
b,9001),b=J.extentToPolygon(a.getExtent()),b=E.geodesicLength(new Q({paths:[[[b.getPoint(0,0).x,b.getPoint(0,0).y],[b.getPoint(0,1).x,b.getPoint(0,1).y]]],spatialReference:b.spatialReference}),"meters")):(this.geodesicGrid=!1,a=E.buffer(d,b,9001),b=J.extentToPolygon(a.getExtent()),b=E.distance(b.getPoint(0,0),b.getPoint(0,1),"meters"));a=new B(a,this._extentSym);this._graphicsLayerGRGTimeExtent.add(a);if(this.setNumberRowsColumnsTime.checked)if(this.grgPointByTimeCellHorizontal.isValid()&&this.grgPointByTimeCellVertical.isValid())a=
b/this.grgPointByTimeCellHorizontal.value,c=b/this.grgPointByTimeCellVertical.value;else{new D({message:this.nls.invalidHorizontalVerticalParametersMessage});return}else if(this.grgPointByTimeCellWidth.isValid()&&this.grgPointByTimeCellHeight.isValid())a=this.util.convertToMeters(this.grgPointByTimeCellWidth.value,this._cellUnits),c=this.util.convertToMeters(this.grgPointByTimeCellHeight.value,this._cellUnits);else{new D({message:this.nls.invalidWidthHeightParametersMessage});return}var e=Math.round(b/
a);b="default"===this._cellShape?Math.round(b/c):Math.round(b/a/Math.cos(30*Math.PI/180))+1;1>e&&(e=1);1>b&&(b=1);if(G.checkGridSize(e,b)){d=G.createGRG(e,b,d,a,c,this.grgPointByTimeRotation.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,this.geodesicGrid,this.map,P);this.GRGArea.applyEdits(d,null,null);b=[];for(a=0;a<d.length;a++)b.push(d[a].geometry);d=E.union(b);this.map.setExtent(d.getExtent().expand(2),!1);this._showPanel("publishPage")}else new D({message:this.nls.tooManyCellsErrorMessage})}else new D({message:this.nls.missingOriginParametersMessage})}},
_grgPointByRefSystemCreateGRGButtonClicked:function(){if(!l.contains(this.grgPointByRefSystemCreateGRGButton,"jimu-state-disabled")){var a,b,c,d,e=[];b=this.grgPointByRefSystemCoordTool.getMapCoordinateDD();this._clearLayers(!1);if(G.checkGridSize(this.grgPointByRefCellHorizontal.getValue(),this.grgPointByRefCellVertical.getValue())){if(this.grgPointByRefCellHorizontal.isValid()&&this.grgPointByRefCellVertical.isValid()){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":a=0>b.x?b.x-b.x%
6-6:b.x-b.x%6;d=0>b.y?b.y-b.y%8-8:b.y-b.y%8;break;case "100000":c=ca.LLtoMGRS(b.y,b.x,5);c=c.substring(0,c.length-10);c+="0000000000";break;case "10000":c=ca.LLtoMGRS(b.y,b.x,1);break;case "1000":c=ca.LLtoMGRS(b.y,b.x,2);break;case "100":c=ca.LLtoMGRS(b.y,b.x,3);break;case "10":c=ca.LLtoMGRS(b.y,b.x,4)}if("UTM"===this.grgPointByRefSystemGridSize.getValue())c=new N(a,d),a=6*this.grgPointByRefCellHorizontal.getValue(),b=8*this.grgPointByRefCellVertical.getValue(),d=new M({xmin:c.x,ymin:c.y,xmax:c.x+
a,ymax:c.y+b,spatialReference:{wkid:4326}});else{c=ca.USNGtoPoint(c);if(isNaN(c.x)||isNaN(c.y)){new D({message:this.nls.grgPolarOriginError});return}a=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellHorizontal.getValue();b=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellVertical.getValue();a=R.getDestinationPoint(c,90,a);a=R.getDestinationPoint(a,0,b);b=this.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),
this._cellUnits)/5;c=R.getDestinationPoint(c,45,b);a=R.getDestinationPoint(a,225,b);d=new M({xmin:c.x,ymin:c.y,xmax:a.x,ymax:a.y,spatialReference:{wkid:4326}})}G.checkPolarRegion(d)&&new D({message:this.nls.grgPolarRegionError});d=K.geographicToWebMercator(d);a=ba.zonesFromExtent(d,this.map);var f;c=[];switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":for(b=0;b<a.length;b++)d=P.isLoaded()?new B(P.project(a[b].gridPolygon.unclippedPolygon,this.map.spatialReference)):4326!==this.map.spatialReference.wkid?
new B(K.geographicToWebMercator(a[b].gridPolygon.unclippedPolygon)):new B(a[b].gridPolygon.unclippedPolygon),f=this.grgPointByRefLabelFormat.value,f=f.replace(/Z/,a[b].gridPolygon.text),d.setAttributes({grid:f}),c.push(d),e.push(d.geometry);break;default:a=ba.processZonePolygons(a,this.map,d);for(f=1E4;f>=this.grgPointByRefSystemGridSize.getValue();){var g=[];for(b=0;b<a.length;b++)g=g.concat(ba.handleGridSquares(a[b],this.map,f,d));a=[];a=g;f/=10}for(b=0;b<a.length;b++)d=P.isLoaded()?new B(P.project(a[b].clippedPolyToUTMZone,
this.map.spatialReference)):this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new B(a[b].clippedPolygon):new B(K.webMercatorToGeographic(a[b].clippedPolygon)):4326!==this.map.spatialReference.wkid?new B(a[b].clippedPolyToUTMZone):new B(K.webMercatorToGeographic(a[b].clippedPolyToUTMZone)),"gridReferenceSystem"===this._labelTypeWithRefSys&&(f=this.grgPointByRefLabelFormat.value,f=f.replace(/Y/,a[b].y),f=f.replace(/X/,a[b].x),f=f.replace(/S/,a[b].GZD),f=f.replace(/Z/,a[b].utmZone+
a[b].latitudeZone),d.setAttributes({grid:f}),c.push(d)),e.push(d.geometry)}0<e.length&&(b=E.union(e),this.map.setExtent(b.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(c=G.labelReferenceGrid(e,this._labelTypeWithRefSys,this._labelStartPosition,this.grgPointByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(c,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}}else new D({message:this.nls.tooManyCellsErrorMessage})}},_grgAreaByRefSystemCreateGRGButtonClicked:function(){var a,
b;if(this._graphicsLayerGRGExtent.graphics[0]){a=P.isLoaded()?P.project(this._graphicsLayerGRGExtent.graphics[0].geometry,new fa(4326)):this._graphicsLayerGRGExtent.graphics[0].geometry;var c=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getWidth(),10)/this.grgAreaByRefSystemGridSize.getValue(),d=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getHeight(),10)/this.grgAreaByRefSystemGridSize.getValue();if(G.checkGridSize(c,d)||"UTM"===this.grgAreaByRefSystemGridSize.getValue()){4326!==
this.map.spatialReference.wkid?G.checkPolarRegion(K.webMercatorToGeographic(this._graphicsLayerGRGExtent.graphics[0].geometry))&&new D({message:this.nls.grgPolarRegionError}):G.checkPolarRegion(this._graphicsLayerGRGExtent.graphics[0].geometry)&&new D({message:this.nls.grgPolarRegionError});c=[];this._clearLayers(!1);var e=ba.zonesFromExtent(a.getExtent(),this.map),d=[];switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":for(g=0;g<e.length;g++)a=this.grgAreaByRefSystemClipToggle.checked?
new B(P.isLoaded()?P.project(e[g].gridPolygon.clippedPolygon,this.map.spatialReference):e[g].gridPolygon.clippedPolygon):new B(P.isLoaded()?P.project(e[g].gridPolygon.unclippedPolygon,this.map.spatialReference):e[g].gridPolygon.unclippedPolygon),c.push(a.geometry),b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Z/,e[g].gridPolygon.text),a.setAttributes({grid:b}),d.push(a);break;default:e=ba.processZonePolygons(e,this.map,a.getExtent());for(b=1E4;b>=this.grgAreaByRefSystemGridSize.getValue();){for(var f=
[],g=0;g<e.length;g++)f=f.concat(ba.handleGridSquares(e[g],this.map,b,a.getExtent()));e=[];e=f;b/=10}for(var g=0;g<e.length;g++)a=this.grgAreaByRefSystemClipToggle.checked?P.isLoaded()?new B(P.project(e[g].clippedPolygon,this.map.spatialReference)):new B(4326!==this.map.spatialReference.wkid?e[g].clippedPolygon:K.webMercatorToGeographic(e[g].clippedPolygon)):P.isLoaded()?new B(P.project(e[g].clippedPolyToUTMZone,this.map.spatialReference)):new B(4326!==this.map.spatialReference.wkid?e[g].clippedPolyToUTMZone:
K.webMercatorToGeographic(e[g].clippedPolyToUTMZone)),c.push(a.geometry),"gridReferenceSystem"===this._labelTypeWithRefSys&&(b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Y/,e[g].y),b=b.replace(/X/,e[g].x),b=b.replace(/S/,e[g].GZD),b=b.replace(/Z/,e[g].utmZone+e[g].latitudeZone),a.setAttributes({grid:b}),d.push(a))}0<c.length&&(a=E.union(c),this.map.setExtent(a.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(d=G.labelReferenceGrid(c,this._labelTypeWithRefSys,this._labelStartPosition,
this.grgAreaByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(d,null,null);this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}else new D({message:this.nls.tooManyCellsErrorMessage})}},createGraphicDeleteMenu:function(){var b,c=new f({});c.addChild(new x({label:this.nls.deleteBtn,onClick:a.hitch(this,function(){this.GRGArea.remove(b);this.GRGArea.refresh()})}));c.startup();this.own(this.GRGArea.on("mouse-over",function(a){b=a.graphic;c.bindDomNode(a.graphic.getDojoShape().getNode())}));
this.own(this.GRGArea.on("mouse-out",function(a){c.unBindDomNode(a.graphic.getDojoShape().getNode())}))},_removeStyleFile:function(a,b){var c=null,c="js"===b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?C.loadStyleLink("darkOverrideCSS",this.folderUrl+
"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?C.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this.inherited(arguments);this.map.removeLayer(this._graphicsLayerGRGExtent);this.map.removeLayer(this.GRGArea)},_initSaveToPortal:function(b){var c=
b.name;(new I.Portal(this.appConfig.portalUrl)).signIn().then(a.hitch(this,function(d){var e=d.credential.token,f=d.orgId,g=d.username;if("org_user"===d.role)this.publishMessage.innerHTML=C.sanitizeHTML(this.nls.createService.format(this.nls.userRole)),this._updateLastFocusNode();else if(b.url){d=new W(b.url+"?token\x3d"+e,{id:b.name,outFields:["*"]});d._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:b.itemId}};var h=[];m.forEach(this.GRGArea.graphics,function(a){h.push(new B(a.geometry,
null,{grid:a.attributes.grid}))},this);d.applyEdits(h,null,null).then(a.hitch(this,function(){this._reset()})).otherwise(a.hitch(this,function(){this._reset()}));p.publish("moveMap",!1);this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+b.serviceItemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._updateLastFocusNode()}else{var k=
this.appConfig.portalUrl+"sharing/content/users/"+g+"/createService";G.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+f+"/isServiceNameAvailable",e,c).then(a.hitch(this,function(b){b.available?(this.busyIndicator.show(),G.createFeatureService(k,e,G.getFeatureServiceParams(c,this.map)).then(a.hitch(this,function(b){if(b.success){var d=b.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";G.addDefinitionToService(d,e,G.getLayerParams(c,this.map,this._cellTextSymbol,this._GRGAreaFillSymbol)).then(a.hitch(this,
function(d){if(d.success){d=new W(b.serviceurl+"/0?token\x3d"+e,{id:c,outFields:["*"]});d._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:b.itemId}};this.map.addLayer(d);var f;if(d.loaded)f=w.getInstanceSync().getLayerInfoById(c),f.enablePopup(),this._showLabels&&f.showLabels();else d.on("load",a.hitch(this,function(){f=w.getInstanceSync().getLayerInfoById(c);f.enablePopup();this._showLabels&&f.showLabels()}));var g=[];m.forEach(this.GRGArea.graphics,function(a){g.push(new B(a.geometry,
null,{grid:a.attributes.grid}))},this);d.applyEdits(g,null,null).then(a.hitch(this,function(){this._reset()})).otherwise(a.hitch(this,function(){this._reset()}));this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+b.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._updateLastFocusNode()}}),a.hitch(this,
function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=C.sanitizeHTML(this.nls.addToDefinition.format(a.message));this._updateLastFocusNode()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=C.sanitizeHTML(this.nls.unableToCreate.format(c)),this._updateLastFocusNode()}),a.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=C.sanitizeHTML(this.nls.createService.format(a.message));this._updateLastFocusNode()}))):(this.busyIndicator.hide(),this.publishMessage.innerHTML=
this.nls.layerNameExists);this._updateLastFocusNode()}))}}),a.hitch(this,function(a){this.publishMessage.innerHTML="ERROR: Error in opening workspace"===a.message?this.nls.publishWorskpaceError:a.message;this._updateLastFocusNode()}))},_supportAccessibility:function(){"mainPage"===this._currentOpenPanel?(C.initFirstFocusNode(this.domNode,this.newGRGAreaButton),C.initLastFocusNode(this.domNode,this.newGRGPointButton)):"grgAreaBySize"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgAreaBySizePanelBackButton,
this.grgAreaBySizeClearGRGButton):"grgAreaByRefSystem"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgAreaByRefSystemPanelBackButton,this.grgAreaByRefSystemClearGRGButton):"grgPointBySize"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointBySizePanelBackButton,this.grgPointBySizeClearGRGButton):"grgPointByRefSystem"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointByRefSystemPanelBackButton,this.grgPointByRefSystemClearGRGButton):"grgPointByTime"===
this._currentOpenPanel?this._setFirstAndLastFocusNode(this.grgPointByTimeBackButton,this.grgPointByTimeClearGRGButton):"publishPage"===this._currentOpenPanel?this._setFirstAndLastFocusNode(this.publishPanelBackButton,this.grgAreaBySizePublishGRGButton):"settingsPage"===this._currentOpenPanel&&(C.initFirstFocusNode(this.domNode,this.gridSettingsPanelBackButton),this._checkGridSettingTabSelected(),this._updateLastFocusNode())},_updateLastFocusNode:function(){if("publishPage"===this._currentOpenPanel){C.initLastFocusNode(this.domNode,
this.grgAreaBySizePublishGRGButton);var a=d("a",this.publishMessage)[0];""!==this.publishMessage.innerHTML&&a&&(C.initLastFocusNode(this.domNode,this.publishMessage),V.focus(a))}else"settingsPage"===this._currentOpenPanel?this._checkGridSettingTabSelected()?("grgPointByRefSystem"===this._lastOpenPanel||"grgAreaByRefSystem"===this._lastOpenPanel?V.focus(this._gridSettingsInstance.referenceSystem.domNode):V.focus(this._gridSettingsInstance.cellShape.domNode),C.initLastFocusNode(this.domNode,this._gridSettingsInstance.gridFillColorPicker.spinner.domNode)):
(V.focus(this._gridSettingsInstance.labelStartPosition.domNode),C.initLastFocusNode(this.domNode,this._gridSettingsInstance.fontSetting.showHalo.domNode)):"mainPage"===this._currentOpenPanel&&C.initLastFocusNode(this.domNode,this.newPointGRGFromTimeButton)},_checkGridSettingTabSelected:function(){return"none"===h.get(this._gridSettingsInstance.gridTab,"display")?!1:!0},_moveMap:function(){var a=this.map.spatialReference,b=new M;b.xmin=this.map.extent.xmin+1E-4;b.ymin=this.map.extent.ymin;b.xmax=this.map.extent.xmax;
b.ymax=this.map.extent.ymax;b.spatialReference=a;this.map.setExtent(b)},_setFirstAndLastFocusNode:function(a,b){C.initFirstFocusNode(this.domNode,a);V.focus(a);C.initLastFocusNode(this.domNode,b)},_toggleGrgPointCreateGRGButton:function(){"grgPointBySize"===this._currentOpenPanel&&(this.grgPointBySizeCoordTool.getMapCoordinateDD()?(l.remove(this.grgPointBySizeCreateGRGButton,"jimu-state-disabled"),aa.set(this.grgPointBySizeCreateGRGButton,"tabindex",0)):(l.add(this.grgPointBySizeCreateGRGButton,"jimu-state-disabled"),
aa.set(this.grgPointBySizeCreateGRGButton,"tabindex",-1)));"grgPointByRefSystem"===this._currentOpenPanel&&(this.grgPointByRefSystemCoordTool.getMapCoordinateDD()&&"UTM"!==this.grgPointByRefSystemGridSize.getValue()?(l.remove(this.grgPointByRefSystemCreateGRGButton,"jimu-state-disabled"),aa.set(this.grgPointByRefSystemCreateGRGButton,"tabindex",0)):(l.add(this.grgPointByRefSystemCreateGRGButton,"jimu-state-disabled"),aa.set(this.grgPointByRefSystemCreateGRGButton,"tabindex",-1)));"grgPointByTime"===
this._currentOpenPanel&&(this.grgPointByTimeCoordTool.getMapCoordinateDD()?(l.remove(this.grgPointByTimeCreateGRGButton,"jimu-state-disabled"),aa.set(this.grgPointByTimeCreateGRGButton,"tabindex",0)):(l.add(this.grgPointByTimeCreateGRGButton,"jimu-state-disabled"),aa.set(this.grgPointByTimeCreateGRGButton,"tabindex",-1)))},_onDrawCompleteToggleCreateGRGButton:function(){setTimeout(a.hitch(this,function(){this._toggleGrgPointCreateGRGButton()}),500)}})});