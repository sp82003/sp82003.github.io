// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/CoordinateControl":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/has dojo/query dojo/dom-attr dojo/dom-class dojo/dom-style dojo/string dojo/topic dojo/keys dojo/Deferred dojo/Evented dojo/dom dojo/dom-construct dojo/aspect jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Tooltip dijit/TooltipDialog dijit/popup dojo/text!./templates/CoordinateControl.html esri/geometry/webMercatorUtils esri/graphic esri/geometry/Point esri/request esri/SpatialReference esri/tasks/GeometryService esri/tasks/ProjectParameters esri/toolbars/draw jimu/dijit/Message ./_CoordinateControlFormatNotation ./_CoordinateControlConfirmNotation dojo/_base/sniff dijit/form/TextBox dijit/form/Textarea dijit/form/Select dijit/InlineEditBox".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m,c,g,u,y,w,z,t,A,v,x,I,q,B,N,G,L,R,D,F,K,E,M,J,O,S){return p([t,A,v,u],{templateString:N,baseClass:"jimu-coordinate-control",parentWidget:null,input:!0,label:null,showCopyButton:!1,showFormatButton:!1,zoomScale:null,showDeleteButton:!0,showExpandButton:!0,showDrawPoint:!0,drawButtonLabel:null,drawToolTip:null,graphicsLayer:null,type:"DD",inputFromText:!0,addSign:!1,hasCustomLabel:!1,postMixInProperties:function(){this.nls=window.jimuNls.coordinateControl;this.isRenderIdForAttrs=
!0},constructor:function(d){p.safeMixin(this,d);this.uid=d.id||x.getUniqueId("cc");null===this.parentWidget&&console.error("No parentWidget parameter supplied: Parameter is mandatory");null===this.label&&console.info("No label parameter supplied (optional): Coordinate Control will have no label");null===this.zoomScale&&console.info("No zoomScale parameter supplied (optional): Coordinate Control will have no zoom button");null===this.drawButtonLabel&&console.info("No drawButtonLabel parameter supplied (optional): Coordinate Control will have no draw button");
null===this.graphicsLayer&&console.info("No graphicsLayer parameter supplied: Input graphics will not be shown on map")},postCreate:function(){this._frmtdlg=new q({id:this.uid+"_formatCoordinateTooltip",content:new O({nls:this.nls,ct:this.type}),style:"width: 400px",onClose:b.hitch(this,this.popupDidClose)});z.after(this._frmtdlg,"onShow",b.hitch(this,function(){this._frmtdlg.content.frmtSelect.focus()}));z.after(this._frmtdlg,"onClose",b.hitch(this,function(){this.formatButton.focus()}));this.own(e(this._frmtdlg,
"keydown",b.hitch(this,function(d){d.keyCode===c.ESCAPE&&B.close(this._frmtdlg)})));"DartTheme"===this.parentWidget.appConfig.theme.name&&h.add(this._frmtdlg.domNode,"coordinateControlDialog");this.defaultFormat&&(this._frmtdlg.content.formats[this.type].defaultFormat=this.defaultFormat);this.geomsrvc=new K(this.parentWidget.appConfig.geometryService);this.dt=new M(this.parentWidget.map);this.initUI();this.setUIListeners()},initUI:function(){null===this.label?this.setHidden(this.coordNameContainer,
!1):this.coordName.setValue(this.label);this.input?(this.zoomButton.parentNode.style.display="none",this.setHidden(this.expandButton,!0),this.setHidden(this.removeControlBtn,!0),this.coordName.set("disabled","disabled"),this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"),this.showDrawPoint?(this.drawPointButton.title=this.drawButtonLabel,null===this.drawToolTip&&(this.drawToolTip=this.nls.tooltip)):this.setHidden(this.drawPointButton,!0)):(this.coordtext.disabled=!0,this.coordtext.placeholder=
"",this.setHidden(this.drawPointButton,!0),this.showExpandButton||(this.setHidden(this.expandButton,!0),h.remove(this.domNode,"coordinateContainer"),h.add(this.domNode,"outputCoordinateContainer"),h.add(this.cpbtn,"outputCopyBtn"),this.coordtext.readOnly=!0),this.showDeleteButton||this.setHidden(this.removeControlBtn,!0));this.showCopyButton||(this.setHidden(this.cpbtn,!0),h.add(this.cpbtn,"inputCopyBtn"),r.set(this.cpbtn,"title",this.nls.copyAll));this.showFormatButton||this.setHidden(this.formatButton,
!0);null===this.zoomScale&&this.setHidden(this.zoomButton,!0);this.formatButton.title=this.input?this.nls.formatInput:this.nls.formatOutput;r.set(this.formatButton,"aria-label",this.formatButton.title)},setUIListeners:function(){this.input||m.subscribe("INPUTPOINTDIDCHANGE",b.hitch(this,this.mapWasClicked));m.subscribe("INPUTERROR",b.hitch(this,this.inputError));this.own(e(this.expandButton,"click",b.hitch(this,this.expandButtonWasClicked)));this.own(e(this.expandButton,"keydown",b.hitch(this,function(d){if(d.keyCode===
c.ENTER||d.keyCode===c.SPACE)this.expandButtonWasClicked(d),d.preventDefault()})));this.own(e(this.zoomButton,"click",b.hitch(this,this.zoomButtonWasClicked)));this.own(e(this.zoomButton,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.zoomButtonWasClicked(d)})));this.own(e(this.coordName,"change",b.hitch(this,this.coordNameDidChange)));this.cpbtn.addEventListener("click",b.hitch(this,this.cpBtnWasClicked));this.own(e(this.cpbtn,"keydown",b.hitch(this,function(d){d.keyCode!==
c.ENTER&&d.keyCode!==c.SPACE||this.cpBtnWasClicked(d)})));this.subVal1CpBtn.addEventListener("click",b.hitch(this,this.cpSubBtnWasClicked));this.own(e(this.subVal1CpBtn,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.cpSubBtnWasClicked(d)})));this.subVal2CpBtn.addEventListener("click",b.hitch(this,this.cpSubBtnWasClicked));this.own(e(this.subVal2CpBtn,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.cpSubBtnWasClicked(d)})));this.subVal3CpBtn.addEventListener("click",
b.hitch(this,this.cpSubBtnWasClicked));this.own(e(this.subVal3CpBtn,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.cpSubBtnWasClicked(d)})));this.subVal4CpBtn.addEventListener("click",b.hitch(this,this.cpSubBtnWasClicked));this.own(e(this.subVal4CpBtn,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.cpSubBtnWasClicked(d)})));this.own(e(this.formatButton,"click",b.hitch(this,this.formatButtonWasClicked)));this.own(e(this.formatButton,
"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.formatButtonWasClicked(d)})));this.own(e(this.drawPointButton,"click",b.hitch(this,this.drawPointButtonWasClicked)));this.own(e(this.drawPointButton,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.drawPointButtonWasClicked(d)})));this.own(e(this.removeControlBtn,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.remove()})));this.own(e(this._frmtdlg.content.applyButton,
"click",b.hitch(this,this.formatDialogApplyButtonClicked)));this.own(e(this._frmtdlg.content.applyButton,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||this.formatDialogApplyButtonClicked()})));this.own(e(this._frmtdlg.content.cancelButton,"click",b.hitch(this,function(){B.close(this._frmtdlg)})));this.own(e(this._frmtdlg.content.cancelButton,"keydown",b.hitch(this,function(d){d.keyCode!==c.ENTER&&d.keyCode!==c.SPACE||B.close(this._frmtdlg)})));this.own(e(this.coordtext,
"keydown",b.hitch(this,this.coordTextInputKeyWasPressed)));this.own(e(this.coordtext,"input",b.hitch(this,function(){this.currentClickPointDD=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none");this.emit("coordinates-deleted",{})})));this.own(this.geomsrvc.on("error",b.hitch(this,this.geomSrvcDidFail)));this.own(e(this.dt,"draw-complete",b.hitch(this,this.drawComplete)));this.own(z.after(this.parentWidget,"onClose",b.hitch(this,function(){this.input&&h.contains(this.drawPointButton,
"drawPointBtn-active")&&this.deactivateDrawTool();this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"closed"===this.parentWidget.state&&B.close(this._frmtdlg)})));this.own(z.after(this.parentWidget,"onOpen",b.hitch(this,function(){var d=this.parentWidget.getParent().getParent().domNode;this.own(e(d,"click",b.hitch(this,function(d){"settingBtn"!==d.target.className&&this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"active"===this.parentWidget.state&&B.close(this._frmtdlg)})))})))},formatDialogApplyButtonClicked:function(){this.type=
this._frmtdlg.content.ct;this.updateDisplay();this.input?this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"):this.hasCustomLabel&&this.coordName.set("value",this.label);B.close(this._frmtdlg)},popupDidClose:function(){if(this._frmtdlg.content.isCanceled)this.addSign!==this._frmtdlg.content.addSignChkBox.checked&&(this._frmtdlg.content.addSignChkBox.checked=this.addSign);else{this.addSign=this._frmtdlg.content.addSignChkBox.checked;var d=this._frmtdlg.content.ct;this.type!==d&&
(this.type=d,this.updateDisplay())}},coordNameDidChange:function(){this.hasCustomLabel=!0},cpSubBtnWasClicked:function(d){var a;this[d.currentTarget.id.split("~")[0]].select();try{a=document.execCommand("copy")}catch(C){a=!1}this.showToolTip(d.currentTarget.id,a?this.nls.copySuccessful:this.nls.copyFailed)},cpBtnWasClicked:function(d){d.preventDefault();var a,b;if(this.input){d=x.toArray().filter(function(d){return"jimu-coordinate-control"===d.baseClass&&!d.input});b=d.map(function(d){if(d.coordtext)return d.coordtext.value}).join("\r\n");
d=this.coordtext.value;this.coordtext.value=d+"\r\n"+b;this.selectText(this.coordtext);try{a=document.execCommand("copy")}catch(T){a=!1}this.coordtext.value=d}else{this.selectText(this.coordtext);try{a=document.execCommand("copy")}catch(T){a=!1}}this.showToolTip(this.cpbtn.id,a?this.nls.copySuccessful:this.nls.copyFailed)},selectText:function(d){var a=document.getSelection();a.removeAllRanges();d.focus();var b=/Edge/.test(navigator.userAgent),c=!!window.MSInputMethodContext&&!!document.documentMode;
if(l("ff")||l("chrome")||l("safari"))!this.input&&this.coordtext.disabled?(this.coordtext.disabled=!1,d.select(),this.coordtext.disabled=!0):d.select();b&&d.select();c&&(b=document.createRange(),b.selectNode(d),a.addRange(b))},showToolTip:function(d,a){var b=y.byId(d);I.show(a,b);setTimeout(function(){I.hide(b)},1E3)},geomSrvcDidComplete:function(d){0>=d[0].length?(new J({message:this.nls.parseCoordinatesError}),m.publish("INPUTERROR")):(this.currentClickPointDD=this.currentClickPoint=new R(d[0][0],
d[0][1],new F({wkid:4326})),this.input&&(this.parentWidget.map.centerAt(this.currentClickPointDD),this.updateDisplay(),m.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0})))},geomSrvcDidFail:function(){new J({message:this.nls.parseCoordinatesError});m.publish("INPUTERROR")},coordTextInputKeyWasPressed:function(d){if(d.keyCode===c.ENTER){d.preventDefault();var a=this.getCleanInput(d.currentTarget.value);this.getCoordinateType(a).then(b.hitch(this,function(d){if(d)if(1===
d.length){var c=this.processCoordTextInput(a,d[0],!1);this.getXYNotation(c,d[0].conversionType).then(b.hitch(this,function(d){0<d[0].length?this.geomSrvcDidComplete(d):this.geomSrvcDidFail()}))}else this.confirmNotationDialog||(this.confirmNotationDialog=new S({title:this.nls.comfirmInputNotation,nls:this.nls,options:d,style:"width: 400px",hasSkipCheckBox:!1,theme:this.parentWidget.appConfig.theme.name})),this.confirmNotationDialog.show().then(b.hitch(this,function(){var c=n.filter(d,function(d){return d.name===
this.confirmNotationDialog.comboOptions.get("value")},this),f=this.processCoordTextInput(a,c[0],!1);this.getXYNotation(f,c[0].conversionType).then(b.hitch(this,function(d){0<d[0].length?this.geomSrvcDidComplete(d):this.geomSrvcDidFail()}))},function(){}));else new J({message:this.nls.parseCoordinatesError}),m.publish("INPUTERROR")}));r.set(this.coordtext,"value",a);this.emit("get-coordinate-complete",a);this.currentClickPoint=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=
"inline-block")}if(d.keyCode===c.BACKSPACE||d.keyCode===c.DELETE)this.clear(),this.currentClickPointDD=null,this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none"),this.emit("coordinates-deleted",{})},getFormattedCoordinateText:function(){return this.coordtext.value},getCurrentMapCoordinate:function(){return this.currentClickPoint},getMapCoordinateDD:function(){return this.currentClickPointDD},deactivateDrawTool:function(){this.dt.deactivate();h.remove(this.drawPointButton,
"drawPointBtn-active")},processCoordTextInput:function(d,a,b){var c=a.pattern.exec(d),f,h,C,e,m,g,t,H,P,A,G=!1,l=a.name;switch(a.name){case "DD":f=c[2];h=c[7];C=c[10];e=c[16];m=c[3].replace(/[,:]/,".");g=c[11].replace(/[,:]/,".");l="DD";break;case "DDrev":f=c[11];h=c[16];C=c[2];e=c[8];m=c[12].replace(/[,:]/,".");g=c[3].replace(/[,:]/,".");l="DD";break;case "DDM":f=c[2];h=c[7];C=c[10];e=c[15];m=c[3];t=c[4].replace(/[,:]/,".");g=c[11];H=c[12].replace(/[,:]/,".");l="DDM";break;case "DDMrev":f=c[10];
h=c[15];C=c[2];e=c[7];m=c[11];t=c[12].replace(/[,:]/,".");g=c[3];H=c[4].replace(/[,:]/,".");l="DDM";break;case "DMS":f=c[2];h=c[8];C=c[11];e=c[17];m=c[3];t=c[4];P=c[5].replace(/[,:]/,".");g=c[12];H=c[13];A=c[14].replace(/[,:]/,".");l="DMS";break;case "DMSrev":f=c[11],h=c[17],C=c[2],e=c[8],m=c[12],t=c[13],P=c[14].replace(/[,:]/,"."),g=c[3],H=c[4],A=c[5].replace(/[,:]/,"."),l="DMS"}f&&h?(G=!0,f=(new RegExp(/[Ss-]/)).test(f)?"-":"+"):f=f&&(new RegExp(/[Ss-]/)).test(f)?"-":h&&(new RegExp(/[Ss-]/)).test(h)?
"-":"+";C&&e?(G=!0,C=(new RegExp(/[Ww-]/)).test(C)?"-":"+"):C=C&&(new RegExp(/[Ww-]/)).test(C)?"-":e&&(new RegExp(/[Ww-]/)).test(e)?"-":"+";G&&(b||new J({message:this.nls.latLongWarningMessage}));switch(l){case "DD":d=f+m+","+C+g;break;case "DDM":d=f+m+" "+t+","+C+g+" "+H;break;case "DMS":d=f+m+" "+t+" "+P+","+C+g+" "+H+" "+A}return d},zoomButtonWasClicked:function(){this.currentClickPointDD&&(this.parentWidget.map.getZoom()<this.zoomScale?this.parentWidget.map.centerAt(this.currentClickPointDD).then(b.hitch(this,
function(){this.parentWidget.map.setScale(this.zoomScale)})):this.parentWidget.map.centerAt(this.currentClickPointDD))},setHidden:function(d,c){a.set(d,"display","none");c&&w.destroy(d.parentNode)},setVisible:function(d){a.set(d,"display","inline-flex")},remove:function(){this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&B.close(this._frmtdlg);this.destroyRecursive();this.emit("removeCoordsControl")},mapWasClicked:function(d){this.currentClickPoint=d.mapPoint;this.getDDPoint(d.mapPoint).then(b.hitch(this,
function(a){this.currentClickPointDDDD=this.currentClickPointDD=a;this.inputFromText=d.inputFromText?!0:!1;this.updateDisplay()}),b.hitch(this,function(d){console.error(d)}))},getDDPoint:function(d){var a=new g,c=new F(3857);G.canProject(d,c)?a.resolve(G.webMercatorToGeographic(G.project(d,c))):(c={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:d.spatialReference.wkid,outSR:4326,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"},
(new D(c,{usePost:!1})).then(b.hitch(this,function(c){c=(c=c&&c.transformations?c.transformations:void 0)&&0<c.length?c[0].wkid:void 0;var f=new E;f.outSR=new F(this.parentWidget.map.spatialReference.toJson());f.geometries=[d];f.transformForward=!0;f.transformation=c;this.geomsrvc.project(f,b.hitch(this,function(d){a.resolve(d[0])}),function(d){a.reject(d)})}),b.hitch(this,function(d){a.reject(d)})));return a},getProjectedPoint:function(d){var a=new g;if(G.canProject(d,this.parentWidget.map))a.resolve(G.geographicToWebMercator(d));
else{var c={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:4326,outSR:this.parentWidget.map.spatialReference.wkid,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"};(new D(c,{usePost:!1})).then(b.hitch(this,function(c){c=(c=c&&c.transformations?c.transformations:void 0)&&0<c.length?c[0].geoTransforms[0].wkid:void 0;var f=new E;f.outSR=new F(this.parentWidget.map.spatialReference);f.geometries=[d];f.transformForward=!0;
f.transformation=c;this.geomsrvc.project(f,b.hitch(this,function(d){a.resolve(d[0])}),function(d){a.reject(d)})}),b.hitch(this,function(d){a.reject(d)}))}return a},expandButtonWasClicked:function(){h.toggle(this.coordcontrols,"expanded");h.contains(this.coordcontrols,"expanded")?(h.remove(this.expandButton,"expandBtn"),h.add(this.expandButton,"collapseBtn"),r.set(this.expandButton,"aria-expanded","true")):(h.remove(this.expandButton,"collapseBtn"),h.add(this.expandButton,"expandBtn"),r.set(this.expandButton,
"aria-expanded","false"));this.setSubCoordUI(h.contains(this.coordcontrols,"expanded"));this._setCoordControlsTabindex(h.contains(this.coordcontrols,"expanded"));this.emit("expandButtonClicked",h.contains(this.coordcontrols,"expanded"))},_setCoordControlsTabindex:function(d){var a,c=[];d?(a=0,d=-1):(a=-1,d=0);c=k("input[tabindex\x3d'"+d+"']",this.coordcontrols);c=c.concat(k("span[tabindex\x3d'"+d+"']",this.coordcontrols));n.forEach(c,b.hitch(this,function(d){r.set(d,"tabindex",a)}))},formatButtonWasClicked:function(){this._frmtdlg.content.setCt(this.type);
B.open({popup:this._frmtdlg,around:this.formatButton})},drawPointButtonWasClicked:function(){if(h.contains(this.drawPointButton,"drawPointBtn-active"))this.dt.deactivate(),this.parentWidget.map.enableMapNavigation();else{this.parentWidget.map.disableMapNavigation();this.dt.activate(M.POINT);var d=this.dt._tooltip;d&&(d.innerHTML=this.drawToolTip)}h.toggle(this.drawPointButton,"drawPointBtn-active")},drawComplete:function(d){var a={};a.mapPoint=d.geometry;this.parentWidget.map.enableMapNavigation();
this.mapWasClicked(a)},setSubCoordUI:function(d){if(d){d="165px";switch(this.type){case "DD":case "DMS":case "DDM":this.sub1label.innerHTML="Lat";this.sub2label.innerHTML="Lon";this.setHidden(this.sub3,!1);this.setHidden(this.sub4,!1);d="90px";break;case "GARS":this.sub1label.innerHTML="Lon";this.sub2label.innerHTML="Lat";this.sub3label.innerHTML="Quadrant";this.sub4label.innerHTML="Key";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "GEOREF":this.sub1label.innerHTML="15\u00b0 Quad";
this.sub2label.innerHTML="1\u00b0 Quad";this.sub3label.innerHTML="Easting";this.setVisible(this.sub3);this.sub4label.innerHTML="Northing";this.setVisible(this.sub4);break;case "USNG":case "MGRS":this.sub1label.innerHTML="GZD";this.sub2label.innerHTML="Grid Sq";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM":this.sub1label.innerHTML="Zone";this.sub2label.innerHTML="Band";this.sub3label.innerHTML="Easting";
this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM_H":this.sub1label.innerHTML="Zone",this.sub2label.innerHTML="Hemisphere",this.sub3label.innerHTML="Easting",this.sub4label.innerHTML="Northing",this.setVisible(this.sub3),this.setVisible(this.sub4)}a.set(this.coordcontrols,"display","block");a.set(this.coordcontrols,"height",d);a.set(this.coordcontrols,"width","300px")}else a.set(this.coordcontrols,"display","none"),a.set(this.coordcontrols,"height",
"0px");d=this.uid.split("_")[1];r.set(this["cc_"+d+"sub1val"],"aria-label",this.sub1label.innerHTML);r.set(this["cc_"+d+"sub2val"],"aria-label",this.sub2label.innerHTML);r.set(this["cc_"+d+"sub3val"],"aria-label",this.sub3label.innerHTML);r.set(this["cc_"+d+"sub4val"],"aria-label",this.sub4label.innerHTML)},setCoordUI:function(d){var a;if(d){var c=this.uid.split("_")[1];if(!this["cc_"+c+"sub1val"]||this.input&&this.inputFromText)return;var b;b=this._frmtdlg.content.formats[this.type];b=b.useCustom?
b.customFormat:b.defaultFormat;switch(this.type){case "DD":d=this.getFormattedDDStr(d,b,this.addSign);this["cc_"+c+"sub1val"].value=f.substitute("${xcrd}",{xcrd:d.latdeg});this["cc_"+c+"sub2val"].value=f.substitute("${ycrd}",{ycrd:d.londeg});a=d.formatResult;break;case "DDM":d=this.getFormattedDDMStr(d,b,this.addSign);this["cc_"+c+"sub1val"].value=f.substitute("${latd} ${latm}",{latd:d.latdeg,latm:d.latmin});this["cc_"+c+"sub2val"].value=f.substitute("${lond} ${lonm}",{lond:d.londeg,lonm:d.lonmin});
a=d.formatResult;break;case "DMS":d=this.getFormattedDMSStr(d,b,this.addSign);this["cc_"+c+"sub1val"].value=f.substitute("${latd} ${latm} ${lats}",{latd:d.latdeg,latm:d.latmin,lats:d.latsec});this["cc_"+c+"sub2val"].value=f.substitute("${lond} ${lonm} ${lons}",{lond:d.londeg,lonm:d.lonmin,lons:d.lonsec});a=d.formatResult;break;case "USNG":d=this.getFormattedUSNGStr(d,b,!1);this["cc_"+c+"sub1val"].value=d.gzd;this["cc_"+c+"sub2val"].value=d.grdsq;this["cc_"+c+"sub3val"].value=d.easting;this["cc_"+
c+"sub4val"].value=d.northing;a=d.formatResult;break;case "MGRS":d=this.getFormattedMGRSStr(d,b,!1);this["cc_"+c+"sub1val"].value=d.gzd;this["cc_"+c+"sub2val"].value=d.grdsq;this["cc_"+c+"sub3val"].value=d.easting;this["cc_"+c+"sub4val"].value=d.northing;a=d.formatResult;break;case "GARS":d=this.getFormattedGARSStr(d,b,!1);this["cc_"+c+"sub1val"].value=d.lon;this["cc_"+c+"sub2val"].value=d.lat;this["cc_"+c+"sub3val"].value=d.quadrant;this["cc_"+c+"sub4val"].value=d.key;a=d.formatResult;break;case "GEOREF":d=
this.getFormattedGEOREFStr(d,b,!1);this["cc_"+c+"sub1val"].value=d.lon+d.lat;this["cc_"+c+"sub2val"].value=d.quadrant15lon+d.quadrant15lat;this["cc_"+c+"sub3val"].value=d.quadrant1lon;this["cc_"+c+"sub4val"].value=d.quadrant1lat;a=d.formatResult;break;case "UTM":d=this.getFormattedUTMStr(d,b,!1);d.bandLetter.match(/^[AaBbYyZz]/)?(this["cc_"+c+"sub1val"].value="",this["cc_"+c+"sub2val"].value="",this["cc_"+c+"sub3val"].value="",this["cc_"+c+"sub4val"].value="",d.formatResult=""):(this["cc_"+c+"sub1val"].value=
d.zone,this["cc_"+c+"sub2val"].value=d.bandLetter,this["cc_"+c+"sub3val"].value=d.easting,this["cc_"+c+"sub4val"].value=d.westing);a=d.formatResult;break;case "UTM_H":d=this.getFormattedUTMHStr(d,b,!1),d.hemisphere.match(/^[AaBbYyZz]/)?(this["cc_"+c+"sub1val"].value="",this["cc_"+c+"sub2val"].value="",this["cc_"+c+"sub3val"].value="",this["cc_"+c+"sub4val"].value="",d.formatResult=""):(this["cc_"+c+"sub1val"].value=d.zone,this["cc_"+c+"sub2val"].value=d.hemisphere,this["cc_"+c+"sub3val"].value=d.easting,
this["cc_"+c+"sub4val"].value=d.westing),a=d.formatResult}}else a="";this.coordcontrols&&this.setSubCoordUI(h.contains(this.coordcontrols,"expanded"));this.coordtext&&(r.set(this.coordtext,"value",a),this.emit("get-coordinate-complete",a))},getFormattedCoordinates:function(){this.getCoordValues(this.currentClickPointDD,this.type,4).then(b.hitch(this,function(d){this.setCoordUI(d)}),b.hitch(this,function(d){console.log(d)}))},updateDisplay:function(){this.currentClickPoint&&(this.currentClickPointDD||
(this.currentClickPointDD=this.currentClickPoint),this.getFormattedCoordinates(this.currentClickPointDD),this.input&&(null!==this.graphicsLayer&&(this.graphicsLayer.clear(),this.currentClickPoint.spatialReference.wkid===this.parentWidget.map.spatialReference.wkid?this.graphicsLayer.add(new L(this.currentClickPoint)):this.getProjectedPoint(this.currentClickPointDD).then(b.hitch(this,function(d){this.graphicsLayer.add(new L(d))}),b.hitch(this,function(d){console.error(d)}))),m.publish("INPUTPOINTDIDCHANGE",
{mapPoint:this.currentClickPointDD,inputFromText:!0}),this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="inline-block")))},clear:function(){this.coordtext.value="";this.currentClickPointDDDD=this.currentClickPointDD=this.currentClickPoint=null;this.graphicsLayer.clear()},inputError:function(){this.setCoordUI()},getCleanInput:function(d){d=d.replace(/\n/g,"");d=d.replace(/\s+/g," ").trim();return d.toUpperCase()},getCoordValues:function(d,a,c){var b=new g;d={sr:4326,coordinates:[[d.x,
d.y]],conversionType:a.name?a.name:a,numOfDigits:c||6,rounding:!0,addSpaces:!1};switch(a){case "DD":d.numOfDigits=6;break;case "USNG":d.numOfDigits=5;break;case "MGRS":d.conversionMode="mgrsDefault";d.numOfDigits=5;break;case "UTM_H":d.conversionType="utm";d.conversionMode="utmNorthSouth";d.addSpaces=!0;break;case "UTM":d.conversionType="utm";d.conversionMode="utmDefault";d.addSpaces=!0;break;case "GARS":d.conversionMode="garsDefault"}this.geomsrvc.toGeoCoordinateString(d).then(function(d){b.resolve(d)},
function(){b.resolve(null)});return b.promise},getXYNotation:function(d,a){var c=new g,b;b=a.name?a.name:a;a={sr:4326,conversionType:b,strings:[]};switch(b){case "DD":case "DDM":case "DMS":a.numOfDigits=2;d=d.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");a.strings.push(d);break;case "DDrev":a.conversionType="DD";a.numOfDigits=2;d=d.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");a.strings.push(d);break;case "DDMrev":a.conversionType="DDM";a.numOfDigits=2;d=d.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,
"");a.strings.push(d);break;case "DMSrev":a.conversionType="DMS";a.numOfDigits=2;d=d.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");a.strings.push(d);break;case "USNG":a.strings.push(d);a.addSpaces="false";break;case "MGRS":a.conversionMode="mgrsNewStyle";a.strings.push(d);a.addSpaces="false";break;case "UTM_H":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.strings.push(d);break;case "UTM":a.conversionType="utm";a.conversionMode="utmDefault";a.strings.push(d);break;case "GARS":a.conversionMode=
"garsCenter";a.strings.push(d);break;case "GEOREF":a.strings.push(d)}this.geomsrvc.fromGeoCoordinateString(a).then(function(d){c.resolve(d)},function(){c.resolve(null)});return c.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(d){return d.source}).join("")),
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(d){return d.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(d){return d.source}).join("")),notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(d){return d.source}).join("")),
notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(d){return d.source}).join("")),notationType:this.nls.DMSLatLongNotation,
conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(d){return d.source}).join("")),notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",
pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,
/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(d){return d.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(d){return d.source}).join("")),notationType:this.nls.UTMBandNotation,conversionType:"UTM"},
{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(d){return d.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM_H"}]},getCoordinateType:function(d){var a=this.getCleanInput(d);d=new g;var c=this.getNotations(),a=n.filter(c,function(d){return d.pattern.test(this.v)},{v:a});0<a.length?d.resolve(a):d.resolve(null);return d.promise},getFormattedDDStr:function(d,a,c){var b={};b.sourceValue=d;b.sourceFormatString=
a;d=d[0].split(/[ ,]+/);b.latdeg=d[0].replace(/[nNsS]/,"");b.londeg=d[1].replace(/[eEwW]/,"");c&&("N"===d[0].slice(-1)?b.latdeg="+"+b.latdeg:b.latdeg="-"+b.latdeg,"W"===d[1].slice(-1)?b.londeg="-"+b.londeg:b.londeg="+"+b.londeg);a=a.replace(/X/,b.londeg);a=a.replace(/[eEwW]/,d[1].slice(-1));a=a.replace(/[nNsS]/,d[0].slice(-1));a=a.replace(/Y/,b.latdeg);b.formatResult=a;return b},getFormattedDDMStr:function(d,a,c){var b={};b.sourceValue=d;b.sourceFormatString=a;b.parts=d[0].split(/[ ,]+/);b.latdeg=
b.parts[0];b.latmin=b.parts[1].replace(/[nNsS]/,"");b.londeg=b.parts[2];b.lonmin=b.parts[3].replace(/[eEwW]/,"");c&&("N"===b.parts[1].slice(-1)?b.latdeg="+"+b.latdeg:b.latdeg="-"+b.latdeg,"W"===b.parts[3].slice(-1)?b.londeg="-"+b.londeg:b.londeg="+"+b.londeg);d=a.replace(/[EeWw]/,b.parts[3].slice(-1));d=d.replace(/Y/,b.lonmin);d=d.replace(/X/,b.londeg);d=d.replace(/[NnSs]/,b.parts[1].slice(-1));d=d.replace(/B/,b.latmin);d=d.replace(/A/,b.latdeg);b.formatResult=d;return b},getFormattedDMSStr:function(d,
a,c){var b={};b.sourceValue=d;b.sourceFormatString=a;b.parts=d[0].split(/[ ,]+/);b.latdeg=b.parts[0];b.latmin=b.parts[1];b.latsec=b.parts[2].replace(/[NnSs]/,"");b.londeg=b.parts[3];b.lonmin=b.parts[4];b.parts[5]&&(b.lonsec=b.parts[5].replace(/[EWew]/,""));c&&("N"===b.parts[2].slice(-1)?b.latdeg="+"+b.latdeg:b.latdeg="-"+b.latdeg,"W"===b.parts[5].slice(-1)?b.londeg="-"+b.londeg:b.londeg="+"+b.londeg);d=a.replace(/A/,b.latdeg);d=d.replace(/B/,b.latmin);d=d.replace(/C/,b.latsec);d=d.replace(/X/,b.londeg);
d=d.replace(/Y/,b.lonmin);d=d.replace(/Z/,b.lonsec);d=d.replace(/[NnSs]/,b.parts[2].slice(-1));b.parts[5]&&(d=d.replace(/[EeWw]/,b.parts[5].slice(-1)));b.formatResult=d;return b},getFormattedUSNGStr:function(d,a){var c={};c.sourceValue=d;c.sourceFormatString=a;d[0].match(/^[ABYZ]/)?c.gzd=d[0].match(/[ABYZ]/)[0].trim():c.gzd=d[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();d[0].replace(c.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)&&(c.grdsq=d[0].replace(c.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim());d[0].replace(c.gzd+
c.grdsq,"").match(/^\d{1,5}/)&&(c.easting=d[0].replace(c.gzd+c.grdsq,"").match(/^\d{1,5}/)[0].trim());d[0].replace(c.gzd+c.grdsq,"").match(/\d{1,5}$/)&&(c.northing=d[0].replace(c.gzd+c.grdsq,"").match(/\d{1,5}$/)[0].trim());d=a.replace(/Y/,c.northing);d=d.replace(/X/,c.easting);d=d.replace(/S/,c.grdsq);d=d.replace(/Z/,c.gzd);c.formatResult=d;return c},getFormattedMGRSStr:function(d,a){var c={};c.sourceValue=d;c.sourceFormatString=a;d[0].match(/^[ABYZ]/)?c.gzd=d[0].match(/[ABYZ]/)[0].trim():c.gzd=
d[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();c.grdsq=d[0].replace(c.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();c.easting=d[0].replace(c.gzd+c.grdsq,"").match(/^\d{1,5}/)[0].trim();c.northing=d[0].replace(c.gzd+c.grdsq,"").match(/\d{1,5}$/)[0].trim();d=a.replace(/Y/,c.northing);d=d.replace(/X/,c.easting);d=d.replace(/S/,c.grdsq);d=d.replace(/Z/,c.gzd);c.formatResult=d;return c},getFormattedGARSStr:function(d,a){var c={};c.sourceValue=d;c.sourceFormatString=a;c.lon=d[0].match(/\d{3}/);c.lat=d[0].match(/[a-zA-Z]{2}/);
d=d[0].match(/\d*$/);c.quadrant=d[0][0];c.key=d[0][1];a=a.replace(/K/,c.key);a=a.replace(/Q/,c.quadrant);a=a.replace(/Y/,c.lat);a=a.replace(/X/,c.lon);c.formatResult=a;return c},getFormattedGEOREFStr:function(a,c){var d={};d.sourceValue=a;d.sourceFormatString=c;d.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();d.lat=a[0].replace(d.lon,"").match(/[a-zA-Z]{1}/)[0].trim();d.quadrant15lon=a[0].replace(d.lon+d.lat,"").match(/[a-zA-Z]{1}/)[0].trim();d.quadrant15lat=a[0].replace(d.lon+d.lat+d.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();
a=a[0].replace(d.lon+d.lat+d.quadrant15lon+d.quadrant15lat,"");d.quadrant1lon=a.substr(0,a.length/2);d.quadrant1lat=a.substr(a.length/2,a.length);c=c.replace(/Y/,d.quadrant1lat);c=c.replace(/X/,d.quadrant1lon);c=c.replace(/D/,d.quadrant15lat);c=c.replace(/C/,d.quadrant15lon);c=c.replace(/B/,d.lat);c=c.replace(/A/,d.lon);d.formatResult=c;return d},getFormattedUTMStr:function(a,c){var d={};d.sourceValue=a;d.sourceFormatString=c;d.parts=a[0].split(/[ ,]+/);d.zone=d.parts[0].replace(/[A-Z]/,"");d.bandLetter=
d.parts[0].slice(-1);d.easting=d.parts[1];d.westing=d.parts[2];a=c.replace(/Y/,d.westing);a=a.replace(/X/,d.easting);a=a.replace(/B/,d.bandLetter);a=a.replace(/Z/,d.zone);d.formatResult=a;return d},getFormattedUTMHStr:function(a,c){var d={};d.sourceValue=a;d.sourceFormatString=c;d.parts=a[0].split(/[ ,]+/);d.zone=d.parts[0].replace(/[A-Z]/,"");d.hemisphere=d.parts[0].slice(-1);d.easting=d.parts[1];d.westing=d.parts[2];a=c.replace(/Y/,d.westing);a=a.replace(/X/,d.easting);a=a.replace(/H/,d.hemisphere);
a=a.replace(/Z/,d.zone);d.formatResult=a;return d}})})},"jimu/dijit/_CoordinateControlFormatNotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(p,n,b,e,l,k,r,h){return p([k,r,h],{baseClass:"jimu-coordinate-control",templateString:'\x3cdiv\x3e\x3cspan class\x3d"formatText"\x3e${nls.editCoordinateDialogTitle}\x3c/span\x3e\x3cdiv class\x3d"controlContainer"\x3e\x3cselect tabindex\x3d"0" class\x3d"selectFormat" data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.editCoordinateDialogTitle}" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\x3c/select\x3e\x3cinput tabindex\x3d"0" type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput"\x3e\x3c/input\x3e\x3cdiv class\x3d"settingsContainer" data-dojo-attach-point\x3d"prefixContainer"\x3e\x3cdiv class\x3d"formatText" data-dojo-attach-point\x3d"addSignChkBox" label\x3d"${nls.posNegPrefixLabel}" data-dojo-type\x3d"jimu/dijit/CheckBox"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btnContainer"\x3e\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.applyButtonLabel}" data-dojo-attach-point\x3d"applyButton" class\x3d"jimu-btn"\x3e${nls.applyButtonLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.cancelButtonLabel}" class\x3d"jimu-btn formatCoordCancelButton"\x3e${nls.cancelButtonLabel}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isCanceled:!1,formats:{},setCt:function(a){this.ct=a;this.frmtSelect.set("value",this.ct)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,
useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},UTM_H:{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};var a=[],b,h;for(h in this.formats)b={value:h,label:this.nls.notations[h]},a.push(b);this.frmtSelect.addOption(a);l.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(e(this.frmtSelect,"change",n.hitch(this,this.frmtSelectValueDidChange)));this.own(e(this.frmtVal,"change",n.hitch(this,
this.formatValDidChange)));this.own(e(this.cancelButton,"click",n.hitch(this,function(){this.isCanceled=!0})));this.own(e(this.applyButton,"click",n.hitch(this,function(){this.isCanceled=!1})));this.displayPrefixContainer()},formatValDidChange:function(){var a=l.get(this.frmtVal,"value"),b=this.frmtSelect.get("value");this.formats[b].customFormat=a;this.formats[b].useCustom=!0},frmtSelectValueDidChange:function(a){var b=this.formats[a].useCustom?this.formats[a].customFormat:this.formats[a].defaultFormat;
this.ct=a;l.set(this.frmtVal,"value",b);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.ct){case "DD":case "DDM":case "DMS":b.set(this.prefixContainer,{display:""});break;default:b.set(this.prefixContainer,{display:"none"})}}})})},"jimu/dijit/_CoordinateControlConfirmNotation":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/aspect dojo/keys dojo/query dijit/Dialog dijit/form/Select dojo/_base/lang".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m){return p([a],{baseClass:"jimu-coordinate-control",numberOfInputs:0,selectOptions:{},comboOptions:{},dfd:null,constructor:function(a){m.mixin(this,a);this.numberOfInputs=a.options.length;this.selectOptions=a.options},postCreate:function(){this.inherited("postCreate",arguments);this.closable=!1;this.closeButtonNode.style.display="none";"DartTheme"===this.theme&&l.add(this.containerNode,"coordinateControlDialog");this.message=e.create("div",{style:"margin-bottom: 5px"},
this.containerNode,"first");this.message.innerHTML=this.numberOfInputs+" "+this.nls.multipleNotationLabel;this.comboOptions=new f({style:{width:"99%"},"aria-label":this.numberOfInputs+" "+this.nls.multipleNotationLabel},e.create("div",{},this.containerNode,"last"));this.own(k.after(this.comboOptions,"onChange",b.hitch(this,this._onComboOptionsChanged)));for(var a=0;a<this.selectOptions.length;a++)this.comboOptions.addOption({value:this.selectOptions[a].name,label:this.selectOptions[a].notationType});
this.buttonDiv=e.create("div",{"class":"buttonContainer",style:"margin-top:10px;"+(window.isRTL?"text-align:left":"text-align:right")},this.containerNode,"last");this.okButton=e.create("div",{innerHTML:this.nls.applyButtonLabel,"class":"jimu-btn",role:"button",tabindex:"0","aria-label":this.nls.applyButtonLabel,onclick:m.hitch(this,function(){this.hide();this.dfd.resolve()}),onkeypress:m.hitch(this,function(a){if(a.keyCode===r.ENTER||a.keyCode===r.SPACE)this.hide(),this.dfd.resolve()})},this.buttonDiv,
"first");this.cancelButton=e.create("div",{innerHTML:this.nls.cancelButtonLabel,"class":"jimu-btn",style:"margin: 0 5px 0 5px",role:"button",tabindex:"0","aria-label":this.nls.cancelButtonLabel,onclick:m.hitch(this,function(){this.hide();this.dfd.cancel()}),onkeypress:m.hitch(this,function(a){if(a.keyCode===r.ENTER||a.keyCode===r.SPACE)this.hide(),this.dfd.cancel()})},this.buttonDiv,"last")},show:function(){this.inherited("show",arguments);this.dfd=new n;var a=this._getDOMElement(".dijitSelectLabel",
this.comboOptions.domNode);a&&l.add(a,"dijitSelectLabelConfirmNotation");return this.dfd},_onComboOptionsChanged:function(){var a=this._getDOMElement(".dijitSelectLabel",this.comboOptions.domNode);a&&l.add(a,"dijitSelectLabelConfirmNotation")},_getDOMElement:function(a,b){return(a=h(a,b))&&1===a.length?a[0]:null}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(p,n,b,e){return p("dijit.form.Textarea",[e,b],
{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);n.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(p,n,b,e,l,k,r){b.add("textarea-needs-help-shrinking",
function(){var b=k.body(),a=n.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},b,"last"),f=a.scrollHeight>=a.clientHeight;b.removeChild(a);return f});return p("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);
this.resize()},postCreate:function(){this.inherited(arguments);var b=this.textbox;b.style.overflowY="hidden";this.own(l(b,"focus, resize",e.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(r.on("resize",e.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.rows=(b.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function e(){var c=
!1;""===a.value&&(a.value=" ",c=!0);var b=a.scrollHeight;c&&(a.value="");return b}var a=this.textbox;"hidden"==a.style.overflowY&&(a.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(e()||a.offsetHeight){var f=e()+Math.max(a.offsetHeight-a.clientHeight,0),m=f+"px";m!=a.style.height&&(a.style.height=m,a.rows=1);if(b("textarea-needs-help-shrinking")){var c=e(),g=a.style.minHeight,l=4,k=a.scrollTop;a.style.minHeight=m;for(a.style.height="auto";0<f;){a.style.minHeight=Math.max(f-l,4)+"px";m=
e();c-=m;f-=c;if(c<l)break;c=m;l<<=1}a.style.height=f+"px";a.style.minHeight=g;a.scrollTop=k}a.style.overflowY=e()>a.clientHeight?"auto":"hidden";"hidden"==a.style.overflowY&&(a.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m,c,g,u,y,w,z,t,A,v,x,I,q,B,N){A=e("dijit._InlineEditor",[t,A,v],{templateString:N,contextRequire:p,postMixInProperties:function(){this.inherited(arguments);this.messages=a.getLocalization("dijit","common",this.lang);n.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?c.getObject(this.editor)||p(this.editor):this.editor,b=this.sourceStyle,
f="line-height:"+b.lineHeight+";",e=h.getComputedStyle(this.domNode);n.forEach(["Weight","Family","Size","Style"],function(a){e["font"+a]!=b["font"+a]&&(f+="font-"+a+":"+b["font"+a]+";")},this);n.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=b[a]},this);var m=this.inlineEditBox.width;"100%"==m?(f+="width:100%;",this.domNode.style.display="block"):f+="width:"+(m+(Number(m)==m?"px":""))+";";m=c.delegate(this.inlineEditBox.editorParams,
{style:f,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new a(m,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,r.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?this.own(b.after(a,"onChange",c.hitch(this,"_onChange"),!0),g(a,"keydown",c.hitch(this,"_onKeyDown"))):"intermediateChanges"in a&&(a.set("intermediateChanges",
!0),this.own(b.after(a,"onChange",c.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":
"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!a.altKey&&!a.ctrlKey&&(a.keyCode==m.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==m.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&z.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(z._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){q.selectInputText(this.editWidget.focusNode)}))}});t=e("dijit.InlineEditBox"+(u("dojo-bidi")?"_NoBidi":""),t,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:B,editorWrapper:A,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=u("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(g(this.displayNode,w,c.hitch(this,"_onClick")),g(this.displayNode,"mouseover, focus",c.hitch(this,"_onMouseOver")),g(this.displayNode,"mouseout, blur",c.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=c.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);k.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(a){f.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);k.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||k.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){k.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
l.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var a=r.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?c.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:h.getComputedStyle(this.displayNode),save:c.hitch(this,"save"),cancel:c.hitch(this,"cancel"),
textDir:this.textDir},a);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var b=this.wrapperWidget;k.add(this.displayNode,"dijitOffScreen");k.remove(b.domNode,"dijitOffScreen");h.set(b.domNode,{visibility:"visible"});l.set(this.displayNode,"tabIndex","-1");var f=b.editWidget,e=this;y(f.onLoadDeferred,c.hitch(b,function(){f.set("displayedValue"in f||"_setDisplayedValueAttr"in f?"displayedValue":"value",e.value);this.defer(function(){b.saveButton&&b.saveButton.set("disabled",
"intermediateChanges"in f);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var c=this.wrapperWidget;h.set(c.domNode,{visibility:"hidden"});k.add(c.domNode,"dijitOffScreen");k.remove(this.displayNode,"dijitOffScreen");l.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
z.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var c=this.wrapperWidget.getValue();this.set("value",c);this._showText(a)}},setValue:function(a){f.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){a=c.trim(a);var b=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":b||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){f.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});u("dojo-bidi")&&(t=e("dijit.InlineEditBox",
t,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));t._InlineEditor=A;return t})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(p,n,b,e,l,k,r){var h={_defaultStandbyParams:{image:r.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(a){if(a=this._normalizeParams(a))return a=new k(h._toStandbyParams(a)),
l.place(a.domNode,b.doc.body),h._createHandle(a)},_normalizeParams:function(a){if(a){if(a.target)return a;if("string"===typeof a){var b=p.byId(a);a=b?b.domNode:e.byId(a)}else a=a.domNode?a.domNode:e.byId(a);if(a)return{target:a}}},_toStandbyParams:function(a){a.imageUrl&&(a.image=a.imageUrl);a.backgroundColor&&(a.color=a.backgroundColor);a.backgroundOpacity&&(a.opacity=a.backgroundOpacity);a.fadeDuration&&(a.duration=a.fadeDuration);return n.mixin({},h._defaultStandbyParams,a)},_createHandle:function(a){return{show:function(){a&&
a.show()},hide:function(){a&&a.hide()},destroy:function(){a&&(a.destroy(),a=null)}}}};return h})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(p,n,b,e,l,k,r,h,a,f,m,c,g,u,y,w,z){p.experimental("dojox.widget.Standby");
return n("dojox.widget.Standby",[y,w],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(a){if(!this._started){if("string"===typeof this.target){var b=z.byId(this.target);this.target=b?b.domNode:k.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,r.set(this._imageNode,"src",this.image),r.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;f.set(this._underlayNode,
{display:"none",backgroundColor:this.color});f.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=c.body()&&c.body().appendChild(this.domNode);7==l("ie")&&(this._ieFixNode=h.create("div"),f.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),c.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(t){console.error(t)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
f.set(this._centerNode,"display","none");f.set(this._underlayNode,"display","none");7==l("ie")&&this._ieFixNode&&(c.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var b=r.get(c.body(),"dir");b&&(b=b.toLowerCase());var e,h=this._scrollerWidths(),g=this.target,k=f.get(this._centerNode,"display");f.set(this._centerNode,
"display","block");var q=a.position(g,!0);if(g===c.body()||g===c.doc)q=m.getBox(),q.x=q.l,q.y=q.t;var y=a.getMarginBox(this._centerNode);f.set(this._centerNode,"display",k);this._ieFixNode&&(e=-this._ieFixNode.offsetTop/1E3,q.x=Math.floor((q.x+.9)/e),q.y=Math.floor((q.y+.9)/e),q.w=Math.floor((q.w+.9)/e),q.h=Math.floor((q.h+.9)/e));var u=f.get(g,"zIndex"),n=k=u;if("auto"===this.zIndex)if("auto"!=u)k=parseInt(k,10),n=parseInt(n,10);else{var p=g;if(p&&p!==c.body()&&p!==c.doc)for(p=g.parentNode,e=-1E5;p&&
p!==c.body();)(u=f.get(p,"zIndex"))&&"auto"!==u&&(u=parseInt(u,10),e<u&&(e=u,k=u+1,n=u+1)),p=p.parentNode}else k=parseInt(this.zIndex,10),n=parseInt(this.zIndex,10);f.set(this._centerNode,"zIndex",n);f.set(this._underlayNode,"zIndex",k);if((k=g.parentNode)&&k!==c.body()&&g!==c.body()&&g!==c.doc){p=q.h;n=q.w;g=a.position(k,!0);this._ieFixNode&&(e=-this._ieFixNode.offsetTop/1E3,g.x=Math.floor((g.x+.9)/e),g.y=Math.floor((g.y+.9)/e),g.w=Math.floor((g.w+.9)/e),g.h=Math.floor((g.h+.9)/e));g.w-=k.scrollHeight>
k.clientHeight&&0<k.clientHeight?h.v:0;g.h-=k.scrollWidth>k.clientWidth&&0<k.clientWidth?h.h:0;"rtl"===b&&(l("opera")?(q.x+=k.scrollHeight>k.clientHeight&&0<k.clientHeight?h.v:0,g.x+=k.scrollHeight>k.clientHeight&&0<k.clientHeight?h.v:0):l("ie")?g.x+=k.scrollHeight>k.clientHeight&&0<k.clientHeight?h.v:0:l("webkit"));g.w<q.w&&(q.w-=g.w);g.h<q.h&&(q.h-=g.h);var w=g.y,z=g.y+g.h,F=q.y,K=q.y+p,b=g.x;e=g.x+g.w;var u=q.x,E=q.x+n;if(K>w&&F<w)q.y=g.y,p-=w-F,q.h=p<g.h?p:q.h-2*(k.scrollWidth>k.clientWidth&&
0<k.clientWidth?h.h:0);else if(F<z&&K>z)q.h=z-F;else if(K<=w||F>=z)q.h=0;if(E>b&&u<b)q.x=g.x,n-=b-u,q.w=n<g.w?n:q.w-2*(k.scrollHeight>k.clientHeight&&0<k.clientHeight?h.w:0);else if(u<e&&E>e)q.w=e-u;else if(E<=b||u>=e)q.w=0}0<q.h&&0<q.w?(f.set(this._underlayNode,{display:"block",width:q.w+"px",height:q.h+"px",top:q.y+"px",left:q.x+"px"}),h=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(h),l("ie")||(h="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(h,this)),h=q.h/2-y.h/2,k=q.w/2-y.w/2,q.h>=y.h&&q.w>=y.w?f.set(this._centerNode,{top:h+q.y+"px",left:k+q.x+"px",display:"block"}):f.set(this._centerNode,"display","none")):(f.set(this._underlayNode,"display","none"),f.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var M=this;this._resizeCheck=setInterval(function(){M._size()},100)}}},_cloneStyles:function(a){b.forEach(a,function(a){f.set(this._underlayNode,a,f.get(this.target,a))},this)},_fadeIn:function(){var a=
this,c=g.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:a.opacity}}}),b=g.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){a.onShow();delete a._anim}});this._anim=u.combine([c,b]);this._anim.play()},_fadeOut:function(){var a=this,c=g.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:a.opacity,end:0}},onEnd:function(){f.set(this.node,{display:"none",zIndex:"-1000"})}}),
b=g.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){f.set(this.node,{display:"none",zIndex:"-1000"});a.onHide();a._enableOverflow();delete a._anim}});this._anim=u.combine([c,b]);this._anim.play()},_ignore:function(a){a&&e.stop(a)},_scrollerWidths:function(){var b=h.create("div");f.set(b,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var e=h.create("div");
f.set(e,{width:"200px",height:"10px"});b.appendChild(e);c.body().appendChild(b);e=a.getContentBox(b);f.set(b,"overflow","scroll");var g=a.getContentBox(b);c.body().removeChild(b);return{v:e.w-g.w,h:e.h-g.h}},_setTextAttr:function(a){this.text=this._textNode.innerHTML=a},_setColorAttr:function(a){f.set(this._underlayNode,"backgroundColor",a);this.color=a},_setImageTextAttr:function(a){r.set(this._imageNode,"alt",a);this.imageText=a},_setImageAttr:function(a){r.set(this._imageNode,"src",a);this.image=
a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a;"image"===a?(this._centerNode=this._imageNode,f.set(this._textNode,"display","none")):(this._centerNode=this._textNode,f.set(this._imageNode,"display","none"))},_setTargetAttr:function(a){if("string"===typeof a){var c=z.byId(a);this._set("target",c?c.domNode:k.byId(a))}else this._set("target",a)},_disableOverflow:function(){if(this.target===c.body()||this.target===c.doc){this._overflowDisabled=!0;var a=c.body();this._oldOverflow=a.style&&
a.style.overflow?f.get(a,"overflow"):"";if(l("ie")&&!l("quirks")){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=f.get(a.parentNode,"overflow")}catch(A){this._oldBodyParentOverflow="scroll"}f.set(a.parentNode,"overflow","hidden")}f.set(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=c.body();l("ie")&&!l("quirks")&&(a.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);f.set(a,"overflow",this._oldOverflow);if(l("webkit")){var b=h.create("div",{style:{height:"2px"}});a.appendChild(b);setTimeout(function(){a.removeChild(b)},0)}delete this._oldOverflow}}})})},"widgets/ThreatAnalysis/js/ThreatAnalysisSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/on dojo/dom dojo/keys ./ColorPickerEditor jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!../templates/ThreatAnalysisSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dojo/dom-attr dijit/registry dijit/focus jimu/utils jimu/dijit/formSelect jimu/dijit/SymbolChooser".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m,c,g,u,y,w,z,t){return p([h,a,c],{baseClass:"jimu-widget-threatAnalysisSetting",templateString:f,selectedSettings:{},colorPickerNodes:[],constructor:function(a){m.mixin(this,a)},startup:function(){var a={fireballDiaOutlineColor:{color:"#d10e40",transparency:0,type:"esriSLSSolid"},fireballDiaFillColor:{color:"#d10e40",transparency:.88,type:"esriSFSSolid"},safeDistanceOutlineColor:{color:"#ffffff",transparency:0,type:"esriSLSNull"},safeDistanceFillColor:{color:"#ffd700",
transparency:.78,type:"esriSFSSolid"}};this.colorPickerNodes=u(".colorPicker",this.domNode);n.forEach(this.colorPickerNodes,m.hitch(this,function(c){c=new r({nls:this.nls,type:g.contains(c,"Line")?"line":"fill"},c);this.own(c.on("ColorPickerEditorChanged",m.hitch(this,function(){this.onSettingsChanged()})));c.setValues({color:this.config.threatAnalysis.symbology[c.id]?this.config.threatAnalysis.symbology[c.id].color:a[c.id].color,transparency:this.config.threatAnalysis.symbology[c.id]?this.config.threatAnalysis.symbology[c.id].transparency:
a[c.id].transparency});c.startup();c.dropdown.set("value",this.config.threatAnalysis.symbology[c.id]?this.config.threatAnalysis.symbology[c.id].type:a[c.id].type)}));var c=u(".jimu-color-pickerPopup",this.domNode);n.forEach(c,m.hitch(this,function(a){this.own(e(a,"keydown",m.hitch(this,function(a){a.keyCode!==k.ENTER&&a.keyCode!==k.SPACE||a.currentTarget.click()})))}));this.onSettingsChanged()},postCreate:function(){this.inherited(arguments);g.add(this.domNode,"SettingsContainer FullWidth");this._handleClickEvents()},
_handleClickEvents:function(){this.own(e(this.mandatorySettingsButton,"click",m.hitch(this,function(){this._openCloseNodes(this.mandatorySettingsButton,this.mandatoryContainer)})));this.own(e(this.mandatorySettingsButton,"keydown",m.hitch(this,function(a){a.keyCode!==k.ENTER&&a.keyCode!==k.SPACE||this._openCloseNodes(this.mandatorySettingsButton,this.mandatoryContainer)})));this.own(e(this.safeSettingsButton,"click",m.hitch(this,function(){this._openCloseNodes(this.safeSettingsButton,this.safeContainer)})));
this.own(e(this.safeSettingsButton,"keydown",m.hitch(this,function(a){if(a.keyCode===k.ENTER||a.keyCode===k.SPACE)this._openCloseNodes(this.safeSettingsButton,this.safeContainer),this._setLastFocusNode()})));this.own(e(this.fireballDiaSettingsButton,"click",m.hitch(this,function(){this._openCloseNodes(this.fireballDiaSettingsButton,this.fireBallContainer)})));this.own(e(this.fireballDiaSettingsButton,"keydown",m.hitch(this,function(a){if(a.keyCode===k.ENTER||a.keyCode===k.SPACE)this._openCloseNodes(this.fireballDiaSettingsButton,
this.fireBallContainer),this._setLastFocusNode()})));this.own(e(this.safeDistanceSettingsButton,"click",m.hitch(this,function(){this._openCloseNodes(this.safeDistanceSettingsButton,this.safeDistanceContainer)})));this.own(e(this.safeDistanceSettingsButton,"keydown",m.hitch(this,function(a){if(a.keyCode===k.ENTER||a.keyCode===k.SPACE)this._openCloseNodes(this.safeDistanceSettingsButton,this.safeDistanceContainer),this._setLastFocusNode()})))},validInputs:function(){var a=!0;n.some(this.colorPickerNodes,
function(c){if(!w.byId(c.id).validateSpinner())return a=!1,!0},this);return a},_openCloseNodes:function(a,c){var e=u(".container",this.domNode),f=u(".SettingsButtonIcon",this.domNode),h=!1;this.validInputs()&&(a&&g.contains(a,"LabelSettingsRightButton")&&(h=!0),n.forEach(e,m.hitch(this,function(a){b.addClass(a,"controlGroupHidden")})),n.forEach(f,m.hitch(this,function(a,c){b.removeClass(a,"LabelSettingsDownButton");b.addClass(a,"LabelSettingsRightButton");y.set(a,"aria-expanded","false");c===f.length-
1&&setTimeout(m.hitch(this,function(){this._setLastFocusNode()}),100)})),h?(b.removeClass(c,"controlGroupHidden"),b.removeClass(a,"LabelSettingsRightButton"),b.addClass(a,"LabelSettingsDownButton"),y.set(a,"aria-expanded","true"),a=u(".jimu-color-picker",c),a.length&&z.focus(a[0])):z.focus(a))},onClose:function(){this.onSettingsChanged();this._openCloseNodes()},onSettingsChanged:function(){n.forEach(this.colorPickerNodes,m.hitch(this,function(a){var c={color:void 0!==w.byId(a.id)?w.byId(a.id).getValues().color:
this.config.threatAnalysis.symbology[a.id].color,transparency:void 0!==w.byId(a.id)?w.byId(a.id).getValues().transparency:this.config.threatAnalysis.symbology[a.id].transparency,type:void 0!==w.byId(a.id)?w.byId(a.id).dropdown.getValue():this.config.threatAnalysis.symbology[a.id].type};this.selectedSettings[a.id]=c}));this.emit("ThreatSettingsChanged",this.selectedSettings)},_setLastFocusNode:function(){if(g.contains(this.safeDistanceSettingsButton,"LabelSettingsDownButton")){var a=u(".dijit",l.byId("safeDistanceFillColor").lastElementChild)[0];
t.initLastFocusNode(this.refDomNode,a)}else t.initLastFocusNode(this.refDomNode,this.safeDistanceSettingsButton)}})})},"widgets/ThreatAnalysis/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Color dojo/on dojo/dom-attr dojo/query dojo/_base/html jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m,c,g,u){return p([a,f,m],{_defaultColor:"#485566",templateString:c,nls:null,postMixInProperties:function(){this.inherited(arguments);this.isRenderIdForAttrs=!0},postCreate:function(){this.colorPicker=new u({color:this._defaultColor,tabindex:"0",role:"button"},this.colorPicker);this.colorPicker.startup();this.own(this.colorPicker.on("change",b.hitch(this,function(){this.onColorPickerEditorChanged()})));this.slider=new g({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,
intermediateChanges:!0,showButtons:!1,style:"display: inline-block;"},this.sliderBar);this.slider.startup();var a=[],c,e="esriSLSDash esriSLSDashDot esriSLSDashDotDot esriSLSDot esriSLSLongDash esriSLSLongDashDot esriSLSNull esriSLSShortDash esriSLSShortDashDot esriSLSShortDashDotDot esriSLSShortDot esriSLSSolid".split(" "),f="esriSFSBackwardDiagonal esriSFSCross esriSFSDiagonalCross esriSFSForwardDiagonal esriSFSHorizontal esriSFSNull esriSFSSolid esriSFSVertical".split(" ");"line"===this.type?n.forEach(e,
b.hitch(this,function(b){c={value:b,label:this.nls.lineStyles[b]};a.push(c)})):n.forEach(f,b.hitch(this,function(b){c={value:b,label:this.nls.fillStyles[b]};a.push(c)}));this.dropdown.addOption(a);this.inherited(arguments)},startup:function(){this._setAriaLabelForEditorNodes();this.own(l(this.slider,"change",b.hitch(this,function(a){isNaN(a)||!1!==this._isSameVal()||(a>this.spinner.maximum?(this.spinner.setValue(0),this.spinner.setValue(this.spinner.maximum)):this.spinner.setValue(a))})));this.own(l(this.spinner,
"change",b.hitch(this,function(a){isNaN(a)||!1===this._isSameVal()&&a<=this.slider.maximum&&this.slider.setValue(a)})));this.own(l(this.dropdown,"change",b.hitch(this,function(){this.onColorPickerEditorChanged()})));this._stylePolyfill();this.inherited(arguments)},_setAriaLabelForEditorNodes:function(){var a;a="fill"===this.type?this.nls.fill:this.nls.outline;k.set(this.colorPicker.domNode,"aria-label",a+" "+this.nls.colorPicker);k.set(this.slider,"aria-label",a+" "+this.nls.transparencyLabel);k.set(this.spinner,
"aria-label",a+" "+this.nls.transparencyLabel);k.set(this.dropdown,"aria-label",a+" "+this.nls.style)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var a=null,c=null;(c=this.colorPicker.getColor())&&c.toHex&&(a=c.toHex());c=this.spinner.getValue()/100;return{color:a,transparency:c}},setValues:function(a){if("object"===typeof a||"string"===typeof a)this.colorPicker.setColor(new e(a.color)),a.transparency="undefined"===typeof a.transparency?0:100*
a.transparency,this.slider.setValue(a.transparency),this.spinner.setValue(a.transparency)},_stylePolyfill:function(){var a=r(".dijitSliderLeftBumper",this.domNode)[0];a&&a.parentNode&&h.setStyle(a.parentNode,"background-color","#24b5cc")},onColorPickerEditorChanged:function(){},validateSpinner:function(){var a=!0;this.spinner.isValid()||(this._shake(this.spinner.domNode,16),this.spinner.focus(),a=!1);return a},_shake:function(a,c){function b(){if(15>e){a.style.transform="translate(0px, 0px)";c-=f;
var m=h(-c,c),k=h(-c,c);a.style.transform="translate("+m+"px, "+k+"px)";e+=1;requestAnimationFrame(b)}15<=e&&(a.style.transform="translate(0, 0)",g._shakingElements.splice(g._shakingElements.indexOf(a),1))}var e=1,f=c/15,h=function(a,c){return Math.floor(Math.random()*(c-a+1))+a};this._shakingElements||(this._shakingElements=[]);if(-1===this._shakingElements.indexOf(a)){this._shakingElements.push(a);var g=this;b()}}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m){return p([n,b],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){a.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;l.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;l.addClass(this.domNode,"disable")},isPartOfPopup:function(a){var c=this.tooltipDialog.domNode;return a===c||l.isDescendant(a,c)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){a.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){a.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var a=l.create("div");this.tooltipDialog=new h({content:a});l.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var b=new f({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:e.hitch(this,function(a){a&&(a=new r(a),this.setColor(a),this.onChange(a))})});b.placeAt(a);b.startup();this.own(k(b,"close",e.hitch(this,function(){this._hideTooltipDialog()})));this.own(k(b,"change-style",e.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(k(this.domNode,"click",e.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(k(document,"click",e.hitch(this,function(a){this.isPartOfPopup(a.srcElement||a.target)||this._hideTooltipDialog()})));this.picker=b},setColor:function(a){if(a instanceof r){null===this.color&&!0===this.showLabel&&this._changeLabel(a);var c=a.toHex();this.color=a;l.setStyle(this.domNode,"backgroundColor",c);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(c,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(a){l.empty(this.domNode);l.create("span",{innerHTML:a.toHex(),className:"color-label",style:{color:m.invertColor(a.toHex())}},this.domNode)},onChange:function(a){a&&this.showLabel&&this._changeLabel(a)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(a){this.domNode.title=a},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/ThreatAnalysis/js/portal-utils":function(){define("esri/request dojo/json dojo/topic dojo/_base/lang esri/arcgis/Portal esri/layers/FeatureLayer jimu/LayerInfos/LayerInfos jimu/utils".split(" "),
function(p,n,b,e,l,k,r,h){return{saveToPortal:function(a){(new l.Portal(a.appConfig.portalUrl)).signIn().then(e.hitch(this,function(f){var m=f.credential.token,c=f.orgId,g=f.username;if("org_user"===f.role)a.publishMessage.innerHTML=h.sanitizeHTML(a.nls.createService.format(a.nls.userRole)),b.publish("setLastFocusNode",!1);else if(a.url)f=new k(a.url+"?token\x3d"+m,{id:a.layerName,outFields:["*"]}),f._wabProperties={itemLayerInfo:{portalUrl:a.appConfig.portalUrl,itemId:a.itemId}},f.applyEdits(a.graphics,
null,null).then(e.hitch(this,function(){b.publish("clear")})).otherwise(e.hitch(this,function(){b.publish("clear")})),b.publish("setBusyIndicator",!1),a.publishMessage.innerHTML=a.nls.successfullyAppended+('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+a.nls.successfullyAppended+'" href\x3d"'+a.appConfig.portalUrl+"home/item.html?id\x3d"+a.serviceItemId+'" target\x3d"_blank"\x3e'+a.nls.manageWebLayerText+"\x3c/a\x3e"),b.publish("setLastFocusNode",!0);else{var l=a.appConfig.portalUrl+
"sharing/content/users/"+g+"/createService";this.isNameAvailable(a.appConfig.portalUrl+"sharing/rest/portals/"+c+"/isServiceNameAvailable",m,a.layerName).then(e.hitch(this,function(c){c.available?(b.publish("setBusyIndicator",!0),this.createFeatureService(l,m,this.getFeatureServiceParams(a.layerName,a.map)).then(e.hitch(this,function(c){if(c.success){var f=c.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";this.addDefinitionToService(f,m,this.getLayerParams(a.layerName,a.map,a.renderer,
a.nls)).then(e.hitch(this,function(f){if(f.success){f=new k(c.serviceurl+"/0?token\x3d"+m,{id:a.layerName,outFields:["*"]});f._wabProperties={itemLayerInfo:{portalUrl:a.appConfig.portalUrl,itemId:c.itemId}};a.map.addLayer(f);var h;if(f.loaded)h=r.getInstanceSync().getLayerInfoById(a.layerName),h.enablePopup();else f.on("load",e.hitch(this,function(){h=r.getInstanceSync().getLayerInfoById(a.layerName);h.enablePopup()}));f.applyEdits(a.graphics,null,null).then(e.hitch(this,function(){b.publish("clear")})).otherwise(e.hitch(this,
function(){b.publish("clear")}));b.publish("setBusyIndicator",!1);a.publishMessage.innerHTML=a.nls.successfullyPublished+('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+a.nls.successfullyPublished+'" href\x3d"'+a.appConfig.portalUrl+"home/item.html?id\x3d"+c.itemId+'" target\x3d"_blank"\x3e'+a.nls.manageWebLayerText+"\x3c/a\x3e");b.publish("setLastFocusNode",!0)}}),e.hitch(this,function(c){b.publish("setBusyIndicator",!1);a.publishMessage.innerHTML=h.sanitizeHTML(a.nls.addToDefinition.format(c.message));
b.publish("setLastFocusNode",!1)}))}else b.publish("setBusyIndicator",!1),a.publishMessage.innerHTML=h.sanitizeHTML(a.nls.unableToCreate.format(a.layerName)),b.publish("setLastFocusNode",!1)}),e.hitch(this,function(c){b.publish("setBusyIndicator",!1);a.publishMessage.innerHTML=h.sanitizeHTML(a.nls.createService.format(c.message));b.publish("setLastFocusNode",!1)}))):(b.publish("setBusyIndicator",!1),a.publishMessage.innerHTML=a.nls.layerNameExists);b.publish("setLastFocusNode",!1)}))}}),e.hitch(this,
function(e){a.publishMessage.innerHTML=e.message;b.publish("setLastFocusNode",!1)}))},getFeatureServiceParams:function(a,b){return{name:a,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"ThreatAnalysis",description:"",copyrightText:"",spatialReference:{wkid:102100},initialExtent:{xmin:b.extent.xmin,ymin:b.extent.ymin,xmax:b.extent.xmax,ymax:b.extent.ymax,spatialReference:{wkid:102100}},allowGeometryUpdates:!0,
units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(a,b,e,c){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:a,type:"Feature Layer",displayField:"",description:"",tags:"ThreatAnalysis",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,
supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,
geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:b.extent,drawingInfo:{renderer:e.toJson(),transparency:0},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"zone_type",type:"esriFieldTypeString",alias:c.zoneTypeLabel,
actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256},{name:"threat_type",type:"esriFieldTypeString",alias:c.threatType,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256},{name:"mandatory_dist",type:"esriFieldTypeDouble",alias:c.mandatoryLabel,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"safe_dist",type:"esriFieldTypeDouble",
alias:c.safeLabel,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"lpg_fireball_dia",type:"esriFieldTypeDouble",alias:c.fireBallDiameterFieldAlias,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"lpg_safe_dist",type:"esriFieldTypeDouble",alias:c.lpgSafeDistanceFieldAlias,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"units",type:"esriFieldTypeString",
alias:c.unitsLabel,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{type:""}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(a,
b,e){return p({url:a,content:{name:e,type:"Feature Service",token:b,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(a,b,e){return p({url:a,content:{f:"json",token:b,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:n.stringify(e),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(a,b,e){return p({url:a,content:{token:b,addToDefinition:n.stringify(e),
f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})}}})},"widgets/ThreatAnalysis/js/SelectFeaturesTool":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/Evented dojo/_base/html dojo/_base/lang jimu/symbolUtils jimu/dijit/DrawBox esri/graphic esri/layers/FeatureLayer esri/tasks/query esri/symbols/jsonUtils esri/layers/GraphicsLayer esri/geometry/Circle esri/renderers/SimpleRenderer esri/geometry/geometryEngine".split(" "),
function(p,n,b,e,l,k,r,h,a,f,m,c,g,u,y,w,z,t,A){return p([b,e,l,r],{baseClass:"jimu-select-features-tool",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\x3c/div\x3e',map:null,bufferLayer:null,drawBoxOption:null,nls:null,currentLayerInfo:null,postCreate:function(){this.inherited(arguments);this.map=this.drawBoxOption.map;this.bufferLayer=new w;var c=this._getPolygonSymbol(),b=new t(c);this.bufferLayer.setRenderer(b);this.map.addLayer(this.bufferLayer);this.drawBoxOption.showClear=
this.drawBoxOption.showClear;this.drawBoxOption.keepOneGraphic=!0;this.drawBox=new m(this.drawBoxOption);this.drawBox.setPolygonSymbol(c);c=f.getGreyPinMarkerSymbol();this.drawBox.setPointSymbol(c);this.drawBox.setLineSymbol(y.fromJson({color:[54,93,141,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"}));this.drawBox.placeAt(this.drawBoxDiv);this.own(k(this.drawBox,"user-clear",a.hitch(this,this._onDrawBoxClear)));this.own(k(this.drawBox,"draw-end",a.hitch(this,this._onDrawEnd)));this.drawBox.btnClear?
h.removeClass(this.drawBox.btnClear,"jimu-float-trailing"):h.addClass(this.drawBox.btnClear,"jimu-float-leading")},reset:function(){this.drawBox.reset();this.clearAllGraphics()},clearAllGraphics:function(){this.drawBox.clear();this._clearBufferLayer()},hideTempLayers:function(){this.bufferLayer&&this.bufferLayer.hide();this.drawBox&&this.drawBox.hideLayer()},showTempLayers:function(){this.bufferLayer&&this.bufferLayer.show();this.drawBox&&this.drawBox.showLayer()},deactivate:function(){this.drawBox&&
this.drawBox.deactivate()},execute:function(){var b,e,f=!1;if(this.currentLayerInfo){null!==this.currentLayerInfo.url?b=new g(this.currentLayerInfo.url,{outFields:["*"]}):(b=this.currentLayerInfo,f=!0);var h=this._getGeometryFromDrawBox();"POINT"===h.geoType&&(h=(new z({center:h,geodesic:!0,radius:25,radiusUnit:"esriFeet"})).getExtent());var m=new u;f?(n.forEach(b.graphics,function(a){if(A.intersects(a.geometry,h)){var b=null;switch(a.geometry.type){case "point":b=this._getPointSymbol();break;case "polyline":b=
this._getPolylineSymbol();break;case "polygon":b=this._getPolygonSymbol();break;default:b=null}this.bufferLayer.add(new c(a.geometry,b))}},this),this.drawBox.clear(),e=A.union(n.map(this.bufferLayer.graphics,function(a){return a.geometry})),this.emit("selection-complete",{geometry:e})):(m.geometry=h,b.queryFeatures(m,a.hitch(this,function(a){n.forEach(a.features,function(a){var b=null;switch(a.geometry.type){case "point":b=this._getPointSymbol();break;case "polyline":b=this._getPolylineSymbol();break;
case "polygon":b=this._getPolygonSymbol();break;default:b=null}this.bufferLayer.add(new c(a.geometry,b))},this);this.drawBox.clear();e=A.union(n.map(a.features,function(a){return a.geometry}));this.emit("selection-complete",{geometry:e})})))}},setLayerInfo:function(a){this.currentLayerInfo=a},_getPointSymbol:function(){return y.fromJson({color:[36,181,204,175],size:16,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{style:"esriSLSSolid",color:[36,181,204,255],width:2,type:"esriSLS"}})},
_getPolylineSymbol:function(){return y.fromJson({style:"esriSFSSolid",width:5,color:[36,181,204,175],type:"esriSLS"})},_getPolygonSymbol:function(){return y.fromJson({style:"esriSFSSolid",color:[36,181,204,175],type:"esriSFS",outline:{style:"esriSLSSolid",color:[36,181,204,255],width:2,type:"esriSLS"}})},_getGeometryFromDrawBox:function(){var a=null,c=this.drawBox.getFirstGraphic();c&&(a=c.geometry);return a},_getGeometryFromBufferLayer:function(){var a=null;0<this.bufferLayer.graphics.length&&(a=
this.bufferLayer.graphics[0].geometry);return a},_onDrawBoxClear:function(){this._clearBufferLayer()},_onDrawEnd:function(){this._updateBuffer()},_clearBufferLayer:function(){this.bufferLayer&&this.bufferLayer.clear()},_updateBuffer:function(){this._clearBufferLayer();this.execute()},destroy:function(){this.bufferLayer&&this.map.removeLayer(this.bufferLayer);this.bufferLayer=null;this.inherited(arguments)}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),
function(p,n,b,e,l,k,r,h,a,f){p=p(k,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(a,c){a.center?c=a:(c=c||{},c.center=a);this.center=n.isArray(c.center)?new l(c.center[0],c.center[1]):c.center;this.radius=c.radius||1E3;this.radiusUnit=c.radiusUnit||f.METERS;this.geodesic=
!0===c.geodesic?!0:!1;this.numberOfPoints=c.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var a=this.radius*this._unitToMeters[this.radiusUnit],c=this._srType(this.center.spatialReference);if(this.geodesic){var b;switch(c){case "webMercator":b=h.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");
break;case "geographic":b=this.center}a=this._createGeodesicCircle(b,a,this.numberOfPoints,b.spatialReference);"webMercator"===c&&(a=h.geographicToWebMercator(a))}else{var e;"webMercator"===c||"projected"===c?e=a/this._convert2Meters(1,this.center.spatialReference):"geographic"===c&&(e=a/this._unitToMeters.esriDecimalDegrees);a=this._createPlanarCircle(this.center,e,this.numberOfPoints)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0]);this.verifySR()},_createGeodesicCircle:function(a,
c,b,e){for(var f=0,h=Math.PI/180,g=[],m;f<2*Math.PI;)m=r._directGeodeticSolver(a.y*h,a.x*h,f,c,e),g.push([m.x,m.y]),f+=Math.PI/(b/2);g.push(g[0]);return new k(g)},_createPlanarCircle:function(a,c,b){for(var e=0,f=[],h,g;e<2*Math.PI;)h=a.x+Math.cos(e)*c,g=a.y+Math.sin(e)*c,f.push([h,g]),e+=Math.PI/(b/2);f.push(f[0]);a=new k(a.spatialReference);a.addRing(f);return a},_srType:function(b){return b.isWebMercator()?"webMercator":null!=a[b.wkid]||b.wkt&&0===b.wkt.indexOf("PROJCS")?"projected":"geographic"},
_convert2Meters:function(b,c){if(null!=a[c.wkid])c=a.values[a[c.wkid]];else{c=c.wkt;var e=c.lastIndexOf(",")+1,f=c.lastIndexOf("]]");c=parseFloat(c.substring(e,f))}return b*c}});b("extend-esri")&&n.setObject("geometry.Circle",p,e);return p})},"widgets/ThreatAnalysis/js/jquery.easy-autocomplete":function(){define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],function(p){var n=function(b){b.Configuration=function(b){function e(b,a){function e(a,c){for(var f in c)void 0===a[f]&&
b.log("Property '"+f+"' does not exist in EasyAutocomplete options API."),"object"===typeof a[f]&&-1===p.inArray(f,r)&&e(a[f],c[f])}e(k,a)}var k={data:"list-required",url:"list-required",dataType:"json",listLocation:function(b){return b},xmlElementName:"",getValue:function(b){return b},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(b,a){b=k.getValue(b);a=k.getValue(a);return b<a?-1:b>a?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,
match:{enabled:!1,caseSensitive:!1,method:function(b,a){return-1<b.search(a)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",
minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(b){return b},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},r=["ajaxSettings","template"];this.get=function(b){return k[b]};this.equals=function(b,a){var e;e=void 0!==k[b]&&null!==k[b]?!0:!1;return e&&k[b]===a?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===k.url&&"list-required"===k.data?!1:!0};this.checkRequiredProperties=function(){for(var b in k)if("required"===
k[b])return!1;return!0};this.printPropertiesThatDoesntExist=function(b,a){e(b,a)};(function(){"xml"===b.dataType&&(b.getValue||(b.getValue=function(a){return p(a).text()}),b.list||(b.list={}),b.list.sort||(b.list.sort={}),b.list.sort.method=function(a,c){a=b.getValue(a);c=b.getValue(c);return a<c?-1:a>c?1:0},b.list.match||(b.list.match={}),b.list.match.method=function(a,b){return-1<a.search(b)?!0:!1});if(void 0!==b.categories&&b.categories instanceof Array){for(var e=[],a=0,f=b.categories.length;a<
f;a+=1){var m=b.categories[a],c;for(c in k.categories[0])void 0===m[c]&&(m[c]=k.categories[0][c]);e.push(m)}b.categories=e}})();(function(){function e(a,b){var f=a||{},c;for(c in a)void 0!==b[c]&&null!==b[c]&&("object"!==typeof b[c]||b[c]instanceof Array?f[c]=b[c]:e(a[c],b[c]));void 0!==b.data&&null!==b.data&&"object"===typeof b.data&&(f.data=b.data);return f}k=e(k,b)})();!0===k.loggerEnabled&&e(console,b);k.ajaxSettings=void 0!==b.ajaxSettings&&"object"===typeof b.ajaxSettings?b.ajaxSettings:{};
(function(){var e;"list-required"!==k.url&&"function"!==typeof k.url&&(e=k.url,k.url=function(){return e});void 0!==k.ajaxSettings.url&&"function"!==typeof k.ajaxSettings.url&&(e=k.ajaxSettings.url,k.ajaxSettings.url=function(){return e});if("string"===typeof k.listLocation){var a=k.listLocation;"XML"===k.dataType.toUpperCase()?k.listLocation=function(b){return p(b).find(a)}:k.listLocation=function(b){return b[a]}}if("string"===typeof k.getValue){var f=k.getValue;k.getValue=function(a){return a[f]}}void 0!==
b.categories&&(k.categoriesAssigned=!0)})()};return b}(n||{}),n=function(b){b.Logger=function(){this.error=function(b){};this.warning=function(b){}};return b}(n||{}),n=function(b){b.Constans=function(){var b={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(e){return b[e]}};return b}(n||{}),n=function(b){b.ListBuilderService=function(b,l){function e(e,a){function f(){var c={},f;void 0!==e.xmlElementName&&(c.xmlElementName=
e.xmlElementName);void 0!==e.listLocation?f=e.listLocation:void 0!==b.get("listLocation")&&(f=b.get("listLocation"));void 0!==f?"string"===typeof f?c.data=p(a).find(f):"function"===typeof f&&(c.data=f(a)):c.data=a;return c}function h(){var b={};void 0!==e.listLocation?"string"===typeof e.listLocation?b.data=a[e.listLocation]:"function"===typeof e.listLocation&&(b.data=e.listLocation(a)):b.data=a;return b}var c={},c="XML"===b.get("dataType").toUpperCase()?f():h();void 0!==e.header&&(c.header=e.header);
void 0!==e.maxNumberOfElements&&(c.maxNumberOfElements=e.maxNumberOfElements);void 0!==b.get("list").maxNumberOfElements&&(c.maxListSize=b.get("list").maxNumberOfElements);if(void 0!==e.getValue)if("string"===typeof e.getValue){var g=e.getValue;c.getValue=function(a){return a[g]}}else"function"===typeof e.getValue&&(c.getValue=e.getValue);else c.getValue=b.get("getValue");return c}function r(e){var a=[];void 0===e.xmlElementName&&(e.xmlElementName=b.get("xmlElementName"));p(e.data).find(e.xmlElementName).each(function(){a.push(this)});
return a}this.init=function(e){var a=[],f={};f.data=b.get("listLocation")(e);f.getValue=b.get("getValue");f.maxListSize=b.get("list").maxNumberOfElements;a.push(f);return a};this.updateCategories=function(h,a){if(b.get("categoriesAssigned")){h=[];for(var f=0;f<b.get("categories").length;f+=1){var k=e(b.get("categories")[f],a);h.push(k)}}return h};this.convertXml=function(e){if("XML"===b.get("dataType").toUpperCase())for(var a=0;a<e.length;a+=1)e[a].data=r(e[a]);return e};this.processData=function(e,
a){for(var f=0,h=e.length;f<h;f+=1)e[f].data=l(b,e[f],a);return e};this.checkIfDataExists=function(b){for(var a=0,e=b.length;a<e;a+=1)if(void 0!==b[a].data&&b[a].data instanceof Array&&0<b[a].data.length)return!0;return!1}};return b}(n||{}),n=function(b){b.proccess=function(e,l,k){function r(a,b){e.get("list").match.caseSensitive||("string"===typeof a&&(a=a.toLowerCase()),b=b.toLowerCase());return e.get("list").match.method(a,b)?!0:!1}b.proccess.match=r;var h=l.data,h=function(a,b){var f=[],c="";
if(e.get("list").match.enabled)for(var g=0,h=a.length;g<h;g+=1)c=e.get("getValue")(a[g]),r(c,b)&&f.push(a[g]);else f=a;return f}(h,k),h=function(a){void 0!==l.maxNumberOfElements&&a.length>l.maxNumberOfElements&&(a=a.slice(0,l.maxNumberOfElements));return a}(h);return h=function(a){e.get("list").sort.enabled&&a.sort(e.get("list").sort.method);return a}(h)};return b}(n||{}),n=function(b){b.Template=function(b){var e={basic:{type:"basic",method:function(b){return b},cssClass:""},description:{type:"description",
fields:{description:"description"},method:function(b){return b+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(b){return b},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(b){return b},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(b){return b},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},k=function(b){var h=b.fields,a;return"description"===b.type?
(a=e.description.method,"string"===typeof h.description?a=function(a,b){return a+" - \x3cspan\x3e"+b[h.description]+"\x3c/span\x3e"}:"function"===typeof h.description&&(a=function(a,b){return a+" - \x3cspan\x3e"+h.description(b)+"\x3c/span\x3e"}),a):"iconRight"===b.type?("string"===typeof h.iconSrc?a=function(a,b){return a+"\x3cimg class\x3d'eac-icon' src\x3d'"+b[h.iconSrc]+"' /\x3e"}:"function"===typeof h.iconSrc&&(a=function(a,b){return a+"\x3cimg class\x3d'eac-icon' src\x3d'"+h.iconSrc(b)+"' /\x3e"}),
a):"iconLeft"===b.type?("string"===typeof h.iconSrc?a=function(a,b){return"\x3cimg class\x3d'eac-icon' src\x3d'"+b[h.iconSrc]+"' /\x3e"+a}:"function"===typeof h.iconSrc&&(a=function(a,b){return"\x3cimg class\x3d'eac-icon' src\x3d'"+h.iconSrc(b)+"' /\x3e"+a}),a):"links"===b.type?("string"===typeof h.link?a=function(a,b){return"\x3ca href\x3d'"+b[h.link]+"' \x3e"+a+"\x3c/a\x3e"}:"function"===typeof h.link&&(a=function(a,b){return"\x3ca href\x3d'"+h.link(b)+"' \x3e"+a+"\x3c/a\x3e"}),a):"custom"===b.type?
b.method:e.basic.method};this.getTemplateClass=function(b){var h=function(){return""};return b&&b.type?b.type&&e[b.type]?function(){var a=e[b.type].cssClass;return function(){return a}}():h:h}(b);b=b&&b.type?b.type&&e[b.type]?k(b):e.basic.method:e.basic.method;this.build=b};return b}(n||{}),n=function(b){b.main=function(e,l){function k(){function a(a,b){return g.get("highlightPhrase")&&""!==b?(b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(a+"").replace(new RegExp("("+b+")","gi"),"\x3cb\x3e$1\x3c/b\x3e")):
a}t.parent().hasClass(c.getValue("WRAPPER_CSS_CLASS"))&&(t.next("."+c.getValue("CONTAINER_CLASS")).remove(),t.unwrap());(function(){var a=p("\x3cdiv\x3e"),b=c.getValue("WRAPPER_CSS_CLASS");g.get("theme")&&""!==g.get("theme")&&(b+=" eac-"+g.get("theme"));g.get("cssClasses")&&""!==g.get("cssClasses")&&(b+=" "+g.get("cssClasses"));""!==y.getTemplateClass()&&(b+=" "+y.getTemplateClass());a.addClass(b);t.wrap(a);!0===g.get("adjustWidth")&&t.parent().css("width","100%")})();(function(){var b=p("\x3cdiv\x3e").addClass(c.getValue("CONTAINER_CLASS"));
b.attr("id",n()).prepend(p("\x3cul\x3e"));(function(){b.on("show.eac",function(){var a,c;switch(g.get("list").showAnimation.type){case "slide":a=g.get("list").showAnimation.time;c=g.get("list").showAnimation.callback;b.find("ul").slideDown(a,c);break;case "fade":a=g.get("list").showAnimation.time;c=g.get("list").showAnimation.callback;b.find("ul").fadeIn(a,c);break;default:b.find("ul").show()}g.get("list").onShowListEvent()}).on("hide.eac",function(){var a,c;switch(g.get("list").hideAnimation.type){case "slide":a=
g.get("list").hideAnimation.time;c=g.get("list").hideAnimation.callback;b.find("ul").slideUp(a,c);break;case "fade":a=g.get("list").hideAnimation.time;c=g.get("list").hideAnimation.callback;b.find("ul").fadeOut(a,c);break;default:b.find("ul").hide()}g.get("list").onHideListEvent()}).on("selectElement.eac",function(){b.find("ul li").removeClass("selected");b.find("ul li").eq(x).addClass("selected");g.get("list").onSelectItemEvent()}).on("loadElements.eac",function(c,e,f){var h="";c=b.find("ul");c.empty().detach();
v=[];for(var k=0,l=0,n=e.length;l<n;l+=1){var q=e[l].data;if(0!==q.length){void 0!==e[l].header&&0<e[l].header.length&&c.append("\x3cdiv class\x3d'eac-category' \x3e"+e[l].header+"\x3c/div\x3e");for(var r=0,u=q.length;r<u&&k<e[l].maxListSize;r+=1)h=p("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var b=r,c=k,d=e[l].getValue(q[b]);h.find(" \x3e div").on("click",function(){t.val(d).trigger("change");x=c;m(c);g.get("list").onClickEvent();g.get("list").onChooseEvent()}).mouseover(function(){x=
c;m(c);g.get("list").onMouseOverEvent()}).mouseout(function(){g.get("list").onMouseOutEvent()}).html(y.build(a(d,f),q[b]))}(),c.append(h),v.push(q[r]),k+=1}}b.append(c);g.get("list").onLoadEvent()})})();t.after(b)})();A=p("#"+n());g.get("placeholder")&&t.attr("placeholder",g.get("placeholder"))}function n(){var a=t.attr("id");return a=c.getValue("CONTAINER_ID")+a}function h(){z("autocompleteOff",!0)&&t.attr("autocomplete","off");(function(){t.focusout(function(){var a=t.val(),b;g.get("list").match.caseSensitive||
(a=a.toLowerCase());for(var c=0,e=v.length;c<e;c+=1)if(b=g.get("getValue")(v[c]),g.get("list").match.caseSensitive||(b=b.toLowerCase()),b===a){x=c;m(x);break}})})();(function(){t.off("keyup").keyup(function(b){function c(b){if(!(b.length<g.get("minCharNumber"))){if("list-required"!==g.get("data")){var c=g.get("data"),e=w.init(c),e=w.updateCategories(e,c),e=w.processData(e,b);A.trigger("loadElements.eac",[e,b]);0<t.parent().find("li").length?a():f()}c=function(){var a={},b=g.get("ajaxSettings")||{},
c;for(c in b)a[c]=b[c];return a}();if(void 0===c.url||""===c.url)c.url=g.get("url");if(void 0===c.dataType||""===c.dataType)c.dataType=g.get("dataType");void 0!==c.url&&"list-required"!==c.url&&(c.url=c.url(b),c.data=g.get("preparePostData")(c.data,b),p.ajax(c).done(function(c){var e=w.init(c),e=w.updateCategories(e,c),e=w.convertXml(e);if(!1!==g.get("matchResponseProperty")?"string"===typeof g.get("matchResponseProperty")?c[g.get("matchResponseProperty")]===b:"function"===typeof g.get("matchResponseProperty")?
g.get("matchResponseProperty")(c)===b:1:1)e=w.processData(e,b),A.trigger("loadElements.eac",[e,b]);w.checkIfDataExists(e)&&0<t.parent().find("li").length?a():f();g.get("ajaxCallback")()}).fail(function(){u.warning("Fail to load response data")}).always(function(){}))}}switch(b.keyCode){case 27:f();t.trigger("blur");break;case 38:b.preventDefault();0<v.length&&0<x&&(--x,t.val(g.get("getValue")(v[x])),m(x));break;case 40:b.preventDefault();0<v.length&&x<v.length-1&&(x+=1,t.val(g.get("getValue")(v[x])),
m(x));break;default:if(40<b.keyCode||8===b.keyCode){var e=t.val();!0!==g.get("list").hideOnEmptyPhrase||8!==b.keyCode||""!==e?0<g.get("requestDelay")?(void 0!==I&&clearTimeout(I),I=setTimeout(function(){c(e)},g.get("requestDelay"))):c(e):f()}}})})();(function(){t.on("keydown",function(a){a=a||window.event;if(38===a.keyCode)return!1}).keydown(function(a){13===a.keyCode&&-1<x&&(t.val(g.get("getValue")(v[x])),g.get("list").onKeyEnterEvent(),g.get("list").onChooseEvent(),x=-1,f(),a.preventDefault())})})();
t.off("keypress");(function(){t.focus(function(){""!==t.val()&&0<v.length&&(x=-1,a())})})();(function(){t.blur(function(){setTimeout(function(){x=-1;f()},250)})})()}function a(){A.trigger("show.eac")}function f(){A.trigger("hide.eac")}function m(a){A.trigger("selectElement.eac",a)}var c=new b.Constans,g=new b.Configuration(l),u=new b.Logger,y=new b.Template(l.template),w=new b.ListBuilderService(g,b.proccess),z=g.equals,t=e,A="",v=[],x=-1,I;b.consts=c;this.getConstants=function(){return c};this.getConfiguration=
function(){return g};this.getContainer=function(){return A};this.getSelectedItemIndex=function(){return x};this.getItems=function(){return v};this.getItemData=function(a){return v.length<a||void 0===v[a]?-1:v[a]};this.getSelectedItemData=function(){return this.getItemData(x)};this.build=function(){k()};this.init=function(){0===t.length?u.error("Input field doesn't exist."):g.checkDataUrlProperties()?g.checkRequiredProperties()?(k(),h()):u.error("Will not work without mentioned properties."):u.error("One of options variables 'data' or 'url' must be defined.")}};
b.eacHandles=[];b.getHandle=function(e){return b.eacHandles[e]};b.inputHasId=function(b){return void 0!==p(b).attr("id")&&0<p(b).attr("id").length?!0:!1};b.assignRandomId=function(b){var e="";do e="eac-"+Math.floor(1E4*Math.random());while(0!==p("#"+e).length);p(b).attr("id",e)};b.setHandle=function(e,l){b.eacHandles[l]=e};return b}(n||{});(function(b){b.fn.easyAutocomplete=function(e){return this.each(function(){var l=b(this),k=new n.main(l,e);n.inputHasId(l)||n.assignRandomId(l);k.init();n.setHandle(k,
l.attr("id"))})};b.fn.getSelectedItemIndex=function(){var e=b(this).attr("id");return void 0!==e?n.getHandle(e).getSelectedItemIndex():-1};b.fn.getItems=function(){var e=b(this).attr("id");return void 0!==e?n.getHandle(e).getItems():-1};b.fn.getItemData=function(e){var l=b(this).attr("id");return void 0!==l&&-1<e?n.getHandle(l).getItemData(e):-1};b.fn.getSelectedItemData=function(){var e=b(this).attr("id");return void 0!==e?n.getHandle(e).getSelectedItemData():-1}})(jQuery)})},"jimu/loaderplugins/jquery-loader":function(){define(["dojo/Deferred",
"dojo/when"],function(p,n){var b,e={},l=function(a){var f=new p;if(e.locked)return setTimeout(function(){l(a)},50),f;if(e[a])return e.locked=!0,f.resolve(e[a]),f;e.locked=!0;b([a],function(){e[a]=window.jQuery;f.resolve(e[a])});return f},k=function(a,e,h){b([a[e]],function(){e===a.length-1?h.resolve():(e++,k(a,e,h))})},r=function(a,b){a=new p;b[0]?k(b,0,a):a.resolve();return a},h=function(a,b){var f=new p;l(a).then(function(c){r(a,b).then(function(){e.locked=!1;f.resolve(c)})});return f};return{load:function(a,
e,k){a=a.split(",");var c=[];b=e;0===a.length?k(null):(e=a[0],c=a.slice(1),n(h(e,c),k))}}})},"widgets/ThreatAnalysis/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/ThreatAnalysis/models/ThreatTypes.json":'[{\r\n    "ID": 1,\r\n    "Threat": "Pipe Bomb",\r\n    "Capacity": 5,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 70,\r\n    "Outdoor_Dist": 1200,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 2,\r\n    "Threat": "Suicide Bomb",\r\n    "Capacity": 20,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 110,\r\n    "Outdoor_Dist": 1700,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 3,\r\n    "Threat": "Briefcase",\r\n    "Capacity": 50,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 150,\r\n    "Outdoor_Dist": 1850,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 4,\r\n    "Threat": "Car",\r\n    "Capacity": 500,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 320,\r\n    "Outdoor_Dist": 1900,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 5,\r\n    "Threat": "SUV/VAN",\r\n    "Capacity": 1000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 400,\r\n    "Outdoor_Dist": 2400,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 6,\r\n    "Threat": "Small Delivery Truck",\r\n    "Capacity": 4000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 640,\r\n    "Outdoor_Dist": 3800,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 7,\r\n    "Threat": "Container/Water Truck",\r\n    "Capacity": 10000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 860,\r\n    "Outdoor_Dist": 5100,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 8,\r\n    "Threat": "Semi-Trailer",\r\n    "Capacity": 60000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 1570,\r\n    "Outdoor_Dist": 9300,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  }\r\n]',
"url:widgets/ThreatAnalysis/models/LpgThreatTypes.json":'[{\r\n    "ID": 1,\r\n    "Threat": "Small LPG Tank",\r\n    "LPG Mass": 20,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 40,\r\n    "Safe_Dist": 160,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 2,\r\n    "Threat": "Large LPG Tank",\r\n    "LPG Mass": 100,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 69,\r\n    "Safe_Dist": 276,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 3,\r\n    "Threat": "Commercial/Residential LPG Tank",\r\n    "LPG Mass": 2000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 184,\r\n    "Safe_Dist": 736,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 4,\r\n    "Threat": "Small LPG Truck",\r\n    "LPG Mass": 8000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 292,\r\n    "Safe_Dist": 1168,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 5,\r\n    "Threat": "Semi-Tanker LPG",\r\n    "LPG Mass": 40000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 499,\r\n    "Safe_Dist": 1996,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  }\r\n]',
"url:jimu/dijit/templates/CoordinateControl.html":"\x3cdiv class\x3d'coordinateContainer'\x3e\r\n  \x3cdiv class\x3d'coordLabel' data-dojo-attach-point\x3d'coordNameContainer' data-a11y-label-id\x3d'coordLabel'\x3e\r\n    \x3cspan data-dojo-type\x3d'dijit/InlineEditBox' width\x3d'75px' data-dojo-props\x3d\"editor:'dijit/form/TextBox', autoSave:true\"\r\n      data-dojo-attach-point\x3d'coordName'\x3e${type}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'add-with-icon coordInput'\x3e\r\n    \x3ctextarea data-a11y-label-by\x3d'coordLabel' tabindex\x3d\"0\" aria-multiline\x3d\"true\" role\x3d\"textbox\" id\x3d'${uid}' type\x3d'text' rows\x3d'1' class\x3d'ta' data-dojo-attach-point\x3d'coordtext' spellcheck\x3d'false'\r\n    placeholder\x3d'${nls.coordinateInputLabel}'\x3e\x3c/textarea\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'coordactions'\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" id\x3d'${uid}_cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'cpbtn' class\x3d'cpbtn'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" title\x3d\"${nls.formatOutput}\" class\x3d'settingBtn' data-dojo-attach-point\x3d'formatButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.zoomLabel}' title\x3d'${nls.zoomLabel}' class\x3d'zoomBtn' data-dojo-attach-point\x3d'zoomButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.addPointLabel}' title\x3d'${nls.addPointLabel}' class\x3d'drawPointBtn' data-dojo-attach-point\x3d'drawPointButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.removeCoordinate}' title\x3d'${nls.removeCoordinate}' class\x3d'jimu-icon jimu-icon-close' data-dojo-attach-point\x3d'removeControlBtn'\r\n        data-dojo-attach-event\x3d'onclick: remove'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d\"${nls.expandOutput}\" aria-expanded \x3d \"false\" title\x3d\"${nls.expandOutput}\" class\x3d'expandBtn' data-dojo-attach-point\x3d'expandButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d'coordcontrols' class\x3d'coordarea' style\x3d\"display: none\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub1' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub1label' data-a11y-label-id\x3d'sub1Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub1Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub1val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub1val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal1CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub2' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub2label' data-a11y-label-id\x3d'sub2Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub2Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub2val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub2val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal2CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub3' class\x3d'coordformat sub3'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub3label' data-a11y-label-id\x3d'sub3Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub3Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub3val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub3val~cpbtn' aria-label\x3d'$${nls.copyToClipboard}' title\x3d'$${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal3CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub4' class\x3d'coordformat sub4'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub4label' data-a11y-label-id\x3d'sub4Label' /\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub4Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub4val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub4val~cpbtn' aria-label\x3d'${nls.copyToClipboard} title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal4CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"line-separator\"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:widgets/ThreatAnalysis/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\r\n    \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels" style\x3d"height:2.5em;" container\x3d"topDecoration"\x3e\r\n      \x3cli\x3e${nls.transparencyLabel}\x3c/li\x3e\r\n      \x3cli\x3e\x3c/li\x3e\r\n    \x3c/ol\x3e\r\n  \x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0" data-dojo-attach-point\x3d"spinner"\r\n    data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cdiv class\x3d\'styleSelectSection\'\x3e\r\n    \x3clabel for\x3d"${id}_select"\x3e${nls.style}\x3c/label\x3e\r\n    \x3cselect class\x3d"styleSelect" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"dropdown"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/templates/ThreatAnalysisSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"margin: 10px 0px 10px 0px;"\x3e\r\n    \x3cdiv\x3e${nls.chemicalThreatLabel}\x3c/div\x3e\r\n    \x3c!-- Mandatory Evacuation Distance DropDown --\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.mandatoryButtonLabel}"\r\n        data-dojo-attach-point\x3d"mandatorySettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.mandatoryButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.mandatoryLabel}"\x3e${nls.mandatoryLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Mandatory Evacuation Distance Color Pickers --\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"mandatoryContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"mandatoryOutlineColor" data-dojo-attach-point\x3d"mandatoryOutlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"mandatoryFillColor" data-dojo-attach-point\x3d"mandatoryFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Safe Evacuation Distance DropDown --\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.safeButtonLabel}"\r\n        data-dojo-attach-point\x3d"safeSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.safeButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.safeLabel}"\x3e${nls.safeLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Safe Evacuation Distance --\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"safeContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"safeOutlineColor" data-dojo-attach-point\x3d"safeOutlineColorPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"safeFillColor" data-dojo-attach-point\x3d"safeFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e${nls.lpgThreatLabel}\x3c/div\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.fireballButtonLabel}"\r\n        data-dojo-attach-point\x3d"fireballDiaSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.fireballButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.fireBallDiameterLable}"\x3e\r\n        ${nls.fireBallDiameterLable}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"fireBallContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"fireballDiaOutlineColor" data-dojo-attach-point\x3d"fireballDiaOutlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"fireballDiaFillColor" data-dojo-attach-point\x3d"fireballDiaFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.safeDistanceButtonLabel}"\r\n        data-dojo-attach-point\x3d"safeDistanceSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.safeDistanceButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.lpgSafeDistanceLable}"\x3e${nls.lpgSafeDistanceLable}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"safeDistanceContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"safeDistanceOutlineColor"\r\n        data-dojo-attach-point\x3d"safeDistanceOutlineColorPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"safeDistanceFillColor" data-dojo-attach-point\x3d"safeDistanceFillColorPicker"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/Widget.html":'\x3cdiv style\x3d"height: 100%" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"FullHeight FullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n\r\n    \x3c!---------------------\r\n          Threat Analysis Main Page Node\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"FullHeight" data-dojo-attach-point\x3d"threatMainPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth NewHeader"\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"MainTitleDiv Ellipsis" title\x3d"${nls.threatAnalysisMainPageTitle}"\x3e\r\n          \x3ca href\x3d"${nls.jcatURL}" data-dojo-attach-point\x3d"threatAnalysisTitleUrl" tabinex\x3d"0"\r\n            aria-label\x3d\'${nls.threatAnalysisMainPageTitle}\' role\x3d\'link\'\r\n            target\x3d"_blank"\x3e${nls.threatAnalysisMainPageTitle}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"SettingsIcon Pointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"threatAnalysisSettingsButton" tabindex\x3d"0" aria-label\x3d"${nls.settingsTitle}"\r\n          role\x3d"button"\x3e\x3c/div\x3e\r\n        \x3c!-- Threat Analysis Point Form --\x3e\r\n        \x3cdiv class\x3d"MainPageRow"\x3e\r\n          \x3c!-- Input Location --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" data-a11y-label-id\x3d"inputLocationLabel" style\x3d"width: 100%"\r\n              title\x3d"${nls.inputLocation}"\x3e${nls.inputLocation}\x3c/div\x3e\r\n            \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"inputSelectStyle"\r\n              data-dojo-attach-point\x3d"inputTypeSelect" data-a11y-label-by\x3d"inputLocationLabel" tabindex\x3d"0"\x3e\r\n              \x3coption value\x3d"interactive"\x3e${nls.interactive}\x3c/option\x3e\r\n              \x3coption value\x3d"manual_location" selected\x3e${nls.fromCoord}\x3c/option\x3e\r\n              \x3coption value\x3d"existing_features"\x3e${nls.existingFeature}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Interactive Draw Tools --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow" data-dojo-attach-point\x3d"interActiveDiv"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.selectDrawModeLabel}"\r\n              data-a11y-label-id\x3d"selectDrawModeLabel"\x3e${nls.selectDrawModeLabel}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drawBox" data-dojo-type\x3d"jimu/dijit/DrawBox"\r\n              data-dojo-props\x3d\'geoTypes:["POINT","POLYLINE","POLYGON"],showClear:false,deactivateAfterDrawing:true\'\r\n              style\x3d"margin-top:5px;" data-a11y-label-by\x3d"selectDrawModeLabel"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Threat Analysis Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingFirstRow" data-dojo-attach-point\x3d"coordInputDiv"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'threatAnalysisCoordContainer\'\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Existing Features --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow" data-dojo-attach-point\x3d"existingFeatureDiv"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.selectFeatureLabel}"\r\n              data-a11y-label-id\x3d"selectFeatureLabel"\x3e\r\n              ${nls.selectFeatureLabel}\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"inputSelectStyle"\r\n                data-dojo-attach-point\x3d"layerSelect" tabindex\x3d"0" data-a11y-label-by\x3d"selectFeatureLabel"\x3e\x3c/select\x3e\r\n              \x3cdiv class\x3d"drawing-section" data-dojo-attach-point\x3d"drawingSection"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.threatTypeCatagoryLabel}"\x3e\r\n              ${nls.threatTypeCatagoryLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"inputSelectStyle" data-dojo-attach-point\x3d"threatCatagorySelect"\r\n              data-dojo-type\x3d"dijit/form/Select"\x3e\r\n              \x3coption value\x3d"chemicalThreatCatogory" selected\x3d"selected"\x3e${nls.chemicalThreatCatagoryLabel}\x3c/option\x3e\r\n              \x3coption value\x3d"lpgThreatCatogary"\x3e${nls.lpgThreatCatagoryLabel}\x3c/option\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Threat Type Container --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"HalfWidthLeft SettingRow"\x3e\r\n              \x3c!-- Threat Type Input --\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.threatType}"\r\n                data-a11y-label-id\x3d"threatType"\x3e${nls.threatType}\x3c/div\x3e\r\n              \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"SelectStyle esriCTThreatInputType"\r\n                data-dojo-attach-point\x3d"threatType" tabindex\x3d"0" data-a11y-label-by\x3d"threatType"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"HalfWidthRight SettingRow"\x3e\r\n              \x3c!-- Unit type --\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.unitsLabel}"\r\n                data-a11y-label-id\x3d"unitsLabel"\x3e${nls.unitsLabel}\x3c/div\x3e\r\n              \x3cselect class\x3d"SelectStyle" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"unitType"\r\n                tabindex\x3d"0" data-a11y-label-by\x3d"unitsLabel"\x3e\r\n                \x3coption value\x3d"feet" selected\x3e${nls.feetLabel}\x3c/option\x3e\r\n                \x3coption value\x3d"meters"\x3e${nls.metersLabel}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Evacuation Distances Container --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer" data-dojo-attach-point\x3d"evacDistances"\x3e\r\n            \x3cdiv class\x3d"HalfWidthLeft SettingRow"\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" data-dojo-attach-point\x3d"mandatoryLabel" title\x3d"${nls.mandatoryLabel}"\r\n                data-a11y-label-id\x3d"mandatoryLabel"\x3e\r\n                ${nls.mandatoryLabel}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%;background-color: #d8d8d882"\r\n                data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'readOnly:true\'\r\n                data-dojo-attach-point\x3d"mandatoryDist" value\x3d"0" tabindex\x3d"0"\r\n                data-a11y-label-by\x3d"mandatoryLabel"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"HalfWidthRight SettingRow"\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" data-dojo-attach-point\x3d"safeLabel" title\x3d"${nls.safeLabel}"\r\n                data-a11y-label-id\x3d"safeLabel"\x3e\r\n                ${nls.safeLabel}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%;background-color: #d8d8d882"\r\n                data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'readOnly:true\' data-dojo-attach-point\x3d"safeDist"\r\n                value\x3d"0" tabindex\x3d"0" data-a11y-label-by\x3d"safeLabel"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear threatAnalysis Buttons --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"BtnContainer HalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'threatCreateButton\' tabindex\x3d"-1"\r\n                aria-label\x3d\'${nls.createBtn}\' role\x3d\'button\'\x3e${nls.createBtn}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"BtnContainer HalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'threatClearButton\' tabindex\x3d"0" aria-label\x3d\'${nls.clearBtn}\'\r\n                role\x3d\'button\'\x3e${nls.clearBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Settings\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"Hidden FullHeight" data-dojo-attach-point\x3d"threatSettingsPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth SettingHeader"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"BackButton Pointer" title\x3d"${nls.common.back}"\r\n            data-dojo-attach-point\x3d"threatSettingsPanelBackButton" tabindex\x3d"0" aria-label\x3d"${nls.common.back}"\r\n            role\x3d"button"\x3e\r\n            \x3cdiv class\x3d"ItemLeftArrow"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"TitleDiv Ellipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n            ${nls.settingsTitle}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"SettingsNode" data-dojo-attach-point\x3d"threatSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Publish\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"Hidden FullHeight" data-dojo-attach-point\x3d"threatResultsPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth SettingHeader"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"BackButton Pointer" title\x3d"${nls.common.back}"\r\n            data-dojo-attach-point\x3d"threatResultsPanelBackButton" tabindex\x3d"0" aria-label\x3d"${nls.common.back}"\r\n            role\x3d"button"\x3e\r\n            \x3cdiv class\x3d"ItemLeftArrow"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"TitleDiv Ellipsis" title\x3d"${nls.resultsTitle}"\x3e${nls.resultsTitle}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"MainPageRow"\x3e\r\n          \x3c!-- threatAnalysis Layer Name --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" title\x3d"${nls.layerName}" data-a11y-label-id\x3d"layerName"\x3e\r\n              ${nls.layerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput controlGroupHidden" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addTANameArea"\r\n              data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\'" required\x3d"true" data-a11y-label-by\x3d"layerName"\r\n              trim\x3d"true"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"publishSelect" data-a11y-label-by\x3d"layerName" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n              tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n            \x3cdiv class\x3d"TACheckBoxNode" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish threatAnalysis Button --\x3e\r\n          \x3cdiv class\x3d"BtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'threatPublishButton\' tabindex\x3d"0"\r\n              aria-label\x3d"${nls.publishTABtn}" role\x3d"button"\x3e${nls.publishTABtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"PublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/css/style.css":".jimu-widget-threatAnalysis .MainContainer {min-width: 222px;}.jimu-widget-threatAnalysis .FullHeight {height: 100%;}.jimu-widget-threatAnalysis .FullWidth {width: 100%;}.jimu-widget-threatAnalysis .HalfWidthContainer {display: flex;}.jimu-widget-threatAnalysis .HalfWidthLeft {width: 50%;}.jimu-rtl .jimu-widget-threatAnalysis .HalfWidthLeft {padding-left: 2px;}.jimu-widget-threatAnalysis .HalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-threatAnalysis .HalfWidthRight {padding: 0px 2px 0px 0px;}.jimu-widget-threatAnalysis .Ellipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-threatAnalysis .Pointer {cursor: pointer;}.jimu-widget-threatAnalysis .MainPageRow {width: calc(100% - 20px); margin: 10px 10px 10px 10px; display: inline-block;}.jimu-widget-threatAnalysis .InputLabel {float: left; line-height: 28px; padding: 5px 0px 0px 0px; width: 100%;}.jimu-widget-threatAnalysis .TACheckBoxNode {padding-top: 10px;}.jimu-rtl .jimu-widget-threatAnalysis .InputLabel {padding: 5px 2px 0px 0px;}.jimu-widget-threatAnalysis .InputLabelSettings {float: left; line-height: 28px; padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .PublishMessage {line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: normal;}.jimu-widget-threatAnalysis .claro .dijitSelect,.claro .dijitTextBox {width: calc(100% - 60px); overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;}.jimu-widget-threatAnalysis .noResize .dijitSelectLabel,.jimu-widget-threatAnalysis .noResize .dijitTextBox .dijitInputInner,.jimu-widget-threatAnalysis .noResize .dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 80px; text-align: left;}.jimu-widget-threatAnalysis .SelectStyle:focus {outline: 2px solid #24B5CC !important; outline-offset: -2px;}.jimu-widget-threatAnalysis .NewHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-threatAnalysis .SettingsIcon {background-image: url('./images/settings_black.png'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-rtl .jimu-widget-threatAnalysis .SettingsIcon {float: left;}.jimu-widget-threatAnalysis .SettingsIcon:hover {background-image: url('./images/settings_black_hover_black.png'); background-repeat: no-repeat;}.jimu-widget-threatAnalysis .dijitTextBox .dijitInputInner {font-size: 14px; padding-right: 0px !important;}.claro .jimu-widget-threatAnalysis .dijitTextBox .dijitInputInner {height: 17px !important; line-height: 17px !important;}.jimu-widget-threatAnalysis .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-threatAnalysis .Hidden {display: none;}.claro .dijitTextBox {width: calc(100% - 45px);}.jimu-widget-threatAnalysis .SettingsRow {width: 100%; display: inline-flex;}.jimu-widget-threatAnalysis .SettingsButtonIcon {margin-top: 13px; height: 16px; width: 16px;}.jimu-rtl .jimu-widget-threatAnalysis .SettingsButtonIcon {margin-top: 9px;}.jimu-widget-threatAnalysis .LabelSettingsDownButton {background: url(\"./images/arrow-down_black.png\") no-repeat; margin-top: 15px;}.jimu-widget-threatAnalysis .LabelSettingsDownButton:hover {background: url(\"./images/arrow-down_black_hover.png\") no-repeat;}.jimu-widget-threatAnalysis .LabelSettingsRightButton {background: url(\"./images/arrow-right_black.png\") no-repeat;}.jimu-rtl .jimu-widget-threatAnalysis .LabelSettingsRightButton {transform: rotate(180deg);}.jimu-widget-threatAnalysis .LabelSettingsRightButton:hover {background: url(\"./images/arrow-right_black_hover.png\") no-repeat;}.jimu-widget-threatAnalysis .SettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block; overflow: hidden;}.jimu-widget-threatAnalysis .SettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-threatAnalysis .SettingFirstRow {padding-top: 12px; padding-bottom: 6px;}.jimu-widget-threatAnalysis .SettingRow {padding-bottom: 6px;}.jimu-widget-threatAnalysis .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: 'Avenir Medium'; margin: 0 0 8px 0; text-align: left;}.jimu-widget-threatAnalysis .inputSelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: 'Avenir Medium'; margin: 0 0 8px 0;}.jimu-widget-threatAnalysis .inputSelectStyle .dijitSelectLabel {-ms-text-overflow: ellipsis; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 288px; text-align: left; margin-top: 5px;}.jimu-widget-threatAnalysis .SelectStyle.SelectStyleMini {width: calc(100% - 45px); float: left;}.jimu-widget-threatAnalysis .SettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-threatAnalysis .SettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-rtl .jimu-widget-threatAnalysis .SettingHeader {float: none; padding: 0px;}.jimu-widget-threatAnalysis .BackButton {width: 20px; float: left;}.jimu-rtl .jimu-widget-threatAnalysis .BackButton {float: right;}.jimu-widget-threatAnalysis .MainTitleDiv {line-height: 10px; font-weight: bold; text-align: left; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-rtl .jimu-widget-threatAnalysis .MainTitleDiv {text-align: right;}.jimu-widget-threatAnalysis .TitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-rtl .jimu-widget-threatAnalysis .TitleDiv {padding-top: 10px;}.jimu-widget-threatAnalysis .ItemLeftArrow {background-image: url('./images/left-arrow_black.png'); float: left; margin: 0px 5px 0px 0px; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-rtl .jimu-widget-threatAnalysis .ItemLeftArrow {float: none; margin: 0px; transform: rotate(180deg);}.jimu-widget-threatAnalysis .ItemLeftArrow:hover {background-image: url('./images/left-arrow_black_hover.png');}.jimu-widget-threatAnalysis .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #ffffff;}.jimu-widget-threatAnalysis .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-threatAnalysis .dijitSelect .dijitArrowButton {background-color: #ffffff; background-image: none; border-color: #ffffff;}.jimu-widget-threatAnalysis .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-threatAnalysis .dijitMenuItem {color: #7989a0;}.jimu-widget-threatAnalysis .dijitSelect .dijitInputField {margin-right: 0px;}.jimu-widget-threatAnalysis .switch-toggle-group {padding: 5px;}.jimu-widget-threatAnalysis .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-threatAnalysis .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox:before {content: \"\"; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-threatAnalysis .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-threatAnalysis .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.SubTitle {font-weight: bold;}.jimu-widget-threatAnalysis .editBtn {float: right; background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 7px;}.jimu-widget-threatAnalysis .editBtn:hover {background: url('./images/draw_black_hover.png'); background-repeat: no-repeat;}.jimu-widget-threatAnalysis .jimu-edit-active {background: url('./images/draw_black_hover.png'); background-repeat: no-repeat; border: none;}.jimu-widget-threatAnalysis .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-widget-threatAnalysis .helpBtn:hover {background: url(./images/help_black_hover.png);}.jimu-widget-threatAnalysis .add-with-icon {height: 30px; padding-left: 2px;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-threatAnalysis .BtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-threatAnalysis .controlGroupHidden {display: none;}.jimu-widget-threatAnalysis .controlItem {display: flex;}.jimu-widget-threatAnalysis .jimu-btn {margin-bottom: 6px; width: 100%;}.jimu-widget-threatAnalysis .dijitSlider {width: calc(100% - 268px); margin-left: 5px; margin-right: auto; margin-top: 4px;}.jimu-rtl .jimu-widget-threatAnalysis .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-threatAnalysis .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-threatAnalysis .colorPickerEditor {padding-top: 5px; padding-bottom: 8px; min-width: 345px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .colorPickerEditor {padding-top: 5px; padding-bottom: 8px; width: 100%; display: inline-flex;}}.jimu-widget-threatAnalysis .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px; margin-top: 26px;}}.jimu-widget-threatAnalysis .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 70px; height: 30px; margin: 0 5px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 66px; height: 30px; margin-top: 25px;}}.jimu-widget-threatAnalysis .dijitSliderImageHandleH {top: -7px;}.jimu-widget-threatAnalysis .dijitSliderThumbHover {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis .dijitSlider .dijitSliderProgressBarH,.jimu-widget-threatAnalysis .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-threatAnalysis .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-threatAnalysis .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-threatAnalysis .colorPickerEditor .trans {font-family: \"Avenir Light\"; font-size: 12px; padding: 0 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-threatAnalysis .sliderbar {width: 60px;}.jimu-widget-threatAnalysis .styleSelectSection {display: inline-grid; vertical-align: bottom; width: 140px !important;}@supports (-ms-ime-align: auto) {.jimu-widget-threatAnalysis .styleSelectSection {display: -ms-inline-grid; vertical-align: bottom; height: 45px;} .jimu-widget-threatAnalysis .styleSelect {width: 145px !important; margin-top: 15px;}}.jimu-widget-threatAnalysis .styleSelect {width: 80%;}.jimu-widget-threatAnalysis .publishSelect .dijitSelectLabel {-ms-text-overflow: ellipsis; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 288px; text-align: left; margin-top: 5px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .styleSelectSection {display: inline-grid; vertical-align: bottom; margin: 8px 10px 0 10px;}}.dijitRuleLabelH {left: -12%;}.easy-autocomplete {position: relative;}.easy-autocomplete input {border-color: #ccc; border-style: solid; border-width: 1px; color: #555; float: none; padding: 6px 12px;}.easy-autocomplete input:hover,.easy-autocomplete input:focus {box-shadow: none;}.easy-autocomplete a {display: inline-flex;}.easy-autocomplete a:hover {cursor: help;}.easy-autocomplete-container ul {background: none repeat scroll 0 0 #ffffff; border-top: 1px dotted #ccc; display: none; margin-top: 0; padding-bottom: 0; padding-left: 0; position: relative; top: -1px;}.easy-autocomplete-container ul li,.easy-autocomplete-container ul .eac-category {background: inherit; border-color: #ccc; border-image: none; border-style: solid; border-width: 0 1px; display: block; font-size: 14px; font-weight: normal; padding: 4px 12px;}.easy-autocomplete-container ul li:last-child {border-radius: 0 0 2px 2px; border-width: 0 1px 1px;}.easy-autocomplete-container ul li.selected {background: none repeat scroll 0 0 #ebebeb; cursor: pointer;}.jimu-widget-threatAnalysis .weatherPanel {overflow-x: auto !important; overflow-y: hidden !important; display: inline-flex; width: 100%; border: 1px solid #d9dde0; padding: 10px; height: 100px;}.jimu-widget-threatAnalysis .Col {float: left; height: 80px; width: 220px; border-left: none; border-right: 1px solid #ffffff; border-right: 1px solid rgba(255, 255, 255, 0.5); margin-left: 0; padding: 0 20px; overflow: hidden; text-overflow: ellipsis;}.jimu-rtl .jimu-widget-threatAnalysis .Col {float: right; border-left: 1px solid #ffffff; border-left: 1px solid rgba(255, 255, 255, 0.5); border-right: none;}.jimu-widget-threatAnalysis .ColSmall,.jimu-widget-threatAnalysis .ColSmallUnknown {float: left; height: 100%; width: calc(100% / 3); border-left: none; border-right: 1px solid #afaeae; margin-left: 0; overflow: hidden; text-overflow: ellipsis; text-align: center;}.jimu-widget-threatAnalysis .ColSmallUnknown {padding: 0;}.jimu-rtl .jimu-widget-threatAnalysis .ColSmall {float: right; border-left: 1px solid #ffffff; border-left: 1px solid rgba(255, 255, 255, 0.5); border-right: none;}.jimu-widget-threatAnalysis .ColLast {border-left: none; border-right: none;}.jimu-widget-threatAnalysis .Col .label,.jimu-widget-threatAnalysis .ColSmall .label {font-size: 13px; padding: 2px 0; overflow: hidden; text-overflow: ellipsis; width: 100%;}.jimu-widget-threatAnalysis .loading {background-image: url('images/loading.gif'); background-repeat: no-repeat; background-position: center 10px;}.jimu-widget-threatAnalysis .jimu-coordinate-control textarea {width: 100%; height: 30px; border: 1px solid #ccc; padding: 7px 0px 5px 14px;}.jimu-rtl .jimu-widget-threatAnalysis .jimu-coordinate-control textarea {padding: 7px 4px 10px 14px;}.jimu-widget-threatAnalysis .coordInput {width: calc(100% - 60px);}.jimu-rtl .jimu-widget-threatAnalysis .coordInput {width: calc(100% - 60px);}.jimu-widget-threatAnalysis .tabsContainer {border: 1px solid #838383;}.jimu-widget-threatAnalysis .jimu-tab3 .tab-item-td {border-bottom: 0px;}.jimu-widget-threatAnalysis .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24B5CC; background-color: transparent !important;}.LaunchpadTheme .jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: none; width: 16px; height: 16px; top: -5px;}.LaunchpadTheme .jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: none;}.LaunchpadTheme .jimu-checkbox {display: inline-flex;}.jimu-widget-threatAnalysis .colorPickerEditor .dijitSelectLabel,.jimu-widget-threatAnalysis .esriCTThreatInputType .dijitSelectLabel {text-overflow: ellipsis; -ms-text-overflow: ellipsis; text-align: justify; overflow: hidden; width: 70px; padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .esriCTThreatInputType .dijitSelectLabel {width: 100px;}",
"*now":function(p){p(['dojo/i18n!*preload*widgets/ThreatAnalysis/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidget dojo/_base/lang dojo/_base/array dojo/dom-class dojo/dom-style dojo/dom-construct dojo/json dojo/on dojo/topic dojo/fx dojo/string dojo/dom-attr dojo/query dojo/mouse dojo/number dojo/_base/kernel dojo/text!./models/ThreatTypes.json dojo/text!./models/LpgThreatTypes.json dojo/keys dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/Tooltip dijit/focus jimu/dijit/LoadingIndicator jimu/dijit/CoordinateControl jimu/LayerInfos/LayerInfos jimu/LayerStructure jimu/utils jimu/symbolUtils jimu/dijit/CheckBox esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/symbols/PictureMarkerSymbol esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esri/symbols/jsonUtils esri/InfoTemplate ./js/ThreatAnalysisSettings ./js/portal-utils ./js/SelectFeaturesTool ./js/jquery.easy-autocomplete dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner jimu/dijit/formSelect jimu/dijit/DrawBox".split(" "),function(p,
n,b,e,l,k,r,h,a,f,m,c,g,u,y,w,z,t,A,v,x,I,q,B,N,G,L,R,D,F,K,E,M,J,O,S,d,P,C,T,W,X,U,Q,Y,V,Z){return p([n,x,I],{baseClass:"jimu-widget-threatAnalysis",_selectedThreat:null,_threatData:null,_lastOpenPanel:"threatMainPage",_currentOpenPanel:"threatMainPage",_threatSettingsInstance:null,_renderer:null,_layerList:null,_drawBox:null,_currentGeometry:null,_pointSymbol:null,_polylineSymbol:null,_polygonSymbol:null,_selectedUnitType:null,_addLayerToMap:!0,postMixInProperties:function(){this.inherited(arguments);
this.nls.common={};b.mixin(this.nls.common,window.jimuNls.common);this.isRenderIdForAttrs=!0},constructor:function(a){p.safeMixin(this,a)},postCreate:function(){L.getInstance(this.map,this.map.itemInfo).then(b.hitch(this,function(a){this._jimuLayerInfos=a}));this.openAtStartAysn=!0;f.subscribe("setBusyIndicator",b.hitch(this,function(a){a?this.busyIndicator.show():this.busyIndicator.hide()}));f.subscribe("clear",b.hitch(this,function(){this._reset();this._moveMap()}));f.subscribe("setLastFocusNode",
b.hitch(this,function(a){a&&this._setFirstLastFocusNodes()}));String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})});String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});this.inherited(arguments);this._initGL();this.ThreatArea=new P({layerDefinition:{geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",
alias:"ObjectID",type:"esriFieldTypeOID"},{name:"threat_type",alias:this.nls.threatType,type:"esriFieldTypeString"},{name:"zone_type",alias:this.nls.zoneTypeLabel,type:"esriFieldTypeString"},{name:"mandatory_dist",alias:this.nls.mandatoryLabel,type:"esriFieldTypeDouble"},{name:"safe_dist",alias:this.nls.safeLabel,type:"esriFieldTypeDouble"},{name:"lpg_fireball_dia",alias:this.nls.fireBallDiameterFieldAlias,type:"esriFieldTypeDouble"},{name:"lpg_safe_dist",alias:this.nls.lpgSafeDistanceFieldAlias,
type:"esriFieldTypeDouble"},{name:"units",alias:this.nls.unitsLabel,type:"esriFieldTypeString"}],extent:this.map.extent}},{id:this.nls.threatGraphicLayer,outFields:["*"]});this.map.addLayer(this.ThreatArea);var a;if(this.ThreatArea.loaded)(a=L.getInstanceSync().getLayerInfoById(this.nls.threatGraphicLayer))&&a.enablePopup();else this.ThreatArea.on("load",b.hitch(this,function(){(a=L.getInstanceSync().getLayerInfoById(this.nls.threatGraphicLayer))&&a.enablePopup()}));this.threatCoordinateControl=new G({parentWidget:this,
label:this.nls.threatAnalysisCoordInputLabel,showFormatButton:!0,drawButtonLabel:this.nls.threatAddPointToolTip,drawToolTip:this.nls.threatDrawPointToolTip,graphicsLayer:this._threatLocation,"aria-label":this.nls.threatAnalysisCoordInputLabel});this.threatCoordinateControl.placeAt(this.threatAnalysisCoordContainer);"DartTheme"===this.appConfig.theme.name&&l.add(this.threatCoordinateControl.domNode,"dartThemeClaroDijitTooltipContainerOverride");this._initDefaultSymbols();this._initLoading();this.publishNewLayer=
new K({checked:!1,label:this.nls.publishToNewLayer},r.create("div",{},this.checkBoxParentContainer));this._initListeners();this._createSettings();this.config.hasOwnProperty("threatTypes")?(this._threatData=this.config.threatTypes,this._threatData=this._convertDistanceMetersToFeet(this._threatData,!0)):this._threatData=h.parse(t);this.config.hasOwnProperty("lpgThreatTypes")?(this._lpgThreatData=this.config.lpgThreatTypes,this._lpgThreatData=this._convertDistanceMetersToFeet(this._lpgThreatData,!1)):
this._lpgThreatData=h.parse(A);var c=this._getAllMapLayers();this._initDrawBox();this._populateSelectList(this.featureLayerList,c,this.config.threatAnalysis.operationalLayer.name,!1);0===this.featureLayerList.options.length&&(this.publishNewLayer.setValue(!0),l.add(this.checkBoxParentContainer,"controlGroupHidden"));this.inputTypeSelect.selectedIndex=0;document.createEvent("Event").initEvent("change",!1,!0);this.inputTypeSelect.onChange();this._initThreatTypeCtrl(this._threatData);this.mandatoryDist.invalidMessage=
this.nls.invalidNumberMessage;this.mandatoryDist.rangeMessage=this.nls.invalidRangeMessage;this.safeDist.invalidMessage=this.nls.invalidNumberMessage;this.safeDist.rangeMessage=this.nls.invalidRangeMessage;this.addTANameArea.invalidMessage=this.nls.invalidLayerName;this.addTANameArea.missingMessage=this.nls.missingLayerNameMessage;this.unitType.set("value",this.config.threatAnalysis.unit);this._selectedUnitType=this.unitType.get("value");""===this.config.threatAnalysis.operationalLayer.name&&(l.add(this.featureLayerList.domNode,
"controlGroupHidden"),this.publishNewLayer.setValue(!0),l.remove(this.addTANameArea.domNode,"controlGroupHidden"));this._setFirstLastFocusNodes()},startup:function(){this.busyIndicator=M.create({target:null!==this.domNode.parentNode.parentNode?this.domNode.parentNode.parentNode:this.domNode.parentNode,backgroundOpacity:0});this._setTheme();var a=!!window.MSInputMethodContext&&!!document.documentMode,c=/Edge/.test(navigator.userAgent),d=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(a||
c||d)&&setTimeout(b.hitch(this,function(){this._reset()},2E3));this._setFirstLastFocusNodes(!0)},resize:function(){var a=u(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<a.length&&k.set(a[0],"width",this.threatPublishButton.clientWidth-44+"px");a=u(".dijitValidationTextBoxLabel",this.layerSelect.domNode);0<a.length&&k.set(a[0],"width",this.threatCatagorySelect.domNode.clientWidth-44+"px")},_removeStyleFile:function(a,b){var c=null,c="js"===b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===
b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?D.loadStyleLink("darkOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?D.loadStyleLink("darkDashboardOverrideCSS",
this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this._threatLocation&&this.map.removeLayer(this._threatLocation);this.ThreatArea&&this.map.removeLayer(this.ThreatArea);this.drawBox&&this.drawBox.clear();this.inherited(arguments)},_initGL:function(){this._ptSym=new T(this.folderUrl+"images/CoordinateLocation.png",26,26);this._ptSym.setOffset(0,13);var a=new W(this._ptSym);this._threatLocation=new C;this._threatLocation.spatialReference=
this.map.spatialReference;this._threatLocation.setRenderer(a);this._threatLocation.name="Threat Location";this.map.addLayer(this._threatLocation)},_initThreatTypeCtrl:function(a){var b=this,c={"Pipe Bomb":"pipeBombLabel","Suicide Bomb":"suicideBombLabel",Briefcase:"briefcaseLabel",Car:"carLabel","SUV/VAN":"suvVanLabel","Small Delivery Truck":"smallDeliveryTruckLabel","Container/Water Truck":"containerWaterTruckLabel","Semi-Trailer":"semiTrailerLabel","Small LPG Tank":"smallLPGTank","Large LPG Tank":"largeLPGTank",
"Commercial/Residential LPG Tank":"commercialResidentialLPGTank","Small LPG Truck":"smallLPGTruck","Semi-Tanker LPG":"semiTankerLPG"},d=function(a){return void 0!==c[a]?b.nls[c[a]]:a};this.threatType.options=[];this.threatType.addOption({value:"",label:"",defaultSelected:!0,selected:!0,unit:""});e.forEach(a,function(a){this.threatType.addOption({value:a.Threat,label:D.sanitizeHTML(d(a.Threat)),defaultSelected:!1,selected:!1,unit:a.Unit})},b)},_initAutoCompleteCtrl:function(a){a={data:a,placeholder:this.nls.threatPlaceholder,
getValue:function(a){return a.Threat},list:{match:{enabled:!0},sort:{enabled:!0},onChooseEvent:b.hitch(this,function(){var a=$(this.threatType).getSelectedItemIndex();this._selectedThreat=$(this.threatType).getSelectedItemData(a);"chemicalThreatCatogory"===this.threatCatagorySelect.get("value")?this._setDistanceInputControls({mandatoryDistance:this._selectedThreat.Bldg_Dist,safeDistance:this._selectedThreat.Outdoor_Dist}):this._setDistanceInputControls({mandatoryDistance:this._selectedThreat.Fireball_Dia,
safeDistance:this._selectedThreat.Safe_Dist});""!==this.threatCoordinateControl.coordtext.value&&this._toggleCreateZoneButton(!1)}),onShowListEvent:b.hitch(this,function(){this._selectedThreat=null;this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0});this._toggleCreateZoneButton(!0)})}};$(this.threatType).easyAutocomplete(a)},_initLoading:function(){this.loading=new N({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_initListeners:function(){this.config.threatAnalysis.lockSettings?
this.threatAnalysisSettingsButton.title=this.nls.lockSettings:(this.own(a(this.threatAnalysisSettingsButton,"click",b.hitch(this,function(){this._showPanel("threatSettingsPage")}))),this.own(a(this._jimuLayerInfos,"layerInfosChanged",b.hitch(this,this._onLayerInfosChange))),this.own(a(this.threatAnalysisSettingsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._showPanel("threatSettingsPage"),this._setFirstLastFocusNodes()}))));this.own(a(this.threatCreateButton,
"click",b.hitch(this,this._threatCreateButtonClicked)));this.own(a(this.threatCreateButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this._threatCreateButtonClicked(),this._setFirstLastFocusNodes()})));this.own(a(this.threatClearButton,"click",b.hitch(this,function(){this.threatType.set("value","");this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet");this._setLabelText(this.mandatoryLabel,this.nls.mandatoryLabel);this._setLabelText(this.safeLabel,
this.nls.safeLabel);this._selectedThreat=null;this.map.infoWindow.isShowing&&this.map.infoWindow.hide();this._reset();this._setFirstLastFocusNodes()})));this.own(a(this.threatClearButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.threatType.set("value",""),this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet"),this._setLabelText(this.mandatoryLabel,this.nls.mandatoryLabel),this._setLabelText(this.safeLabel,this.nls.safeLabel),this._selectedThreat=
null,this.map.infoWindow.isShowing&&this.map.infoWindow.hide(),this._reset(),this._setFirstLastFocusNodes()})));this.own(a(this.threatCoordinateControl.dt,"DrawComplete",b.hitch(this,function(){this.threatCoordinateControl.deactivateDrawTool();this.threatCoordinateControl.currentClickPointDD&&(this._currentGeometry=this.threatCoordinateControl.currentClickPointDD,null!==this._selectedThreat&&this._toggleCreateZoneButton(!0));B.focus(this.threatType.domNode)})));this.own(a(this.threatCoordinateControl,
"coordinates-deleted",b.hitch(this,function(){this._reset()})));this.own(a(this.threatCoordinateControl,"get-coordinate-complete",b.hitch(this,function(){setTimeout(b.hitch(this,function(){this.threatCoordinateControl.currentClickPointDD&&(this._currentGeometry=this.threatCoordinateControl.currentClickPointDD,null!==this._selectedThreat&&this._toggleCreateZoneButton(!0))}),1E3)})));this.own(a(this.threatSettingsPanelBackButton,"click",b.hitch(this,function(){this._threatSettingsInstance.validInputs()&&
(this._threatSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel))})));this.own(a(this.threatSettingsPanelBackButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||!this._threatSettingsInstance.validInputs()||(this._threatSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel),setTimeout(b.hitch(this,function(){this._setFirstLastFocusNodes()}),0))})));this.own(a(this.threatResultsPanelBackButton,"click",b.hitch(this,function(){this.publishMessage.innerHTML=
"";this.addTANameArea.setValue("");this.addTANameArea.reset();this._threatLocation.show();this._showPanel(this._lastOpenPanel)})));this.own(a(this.threatResultsPanelBackButton,"keydown",b.hitch(this,function(a){if(a.keyCode===v.ENTER||a.keyCode===v.SPACE)this.publishMessage.innerHTML="",this.addTANameArea.setValue(""),this.addTANameArea.reset(),this._threatLocation.show(),this._showPanel(this._lastOpenPanel),setTimeout(b.hitch(this,function(){this._setFirstLastFocusNodes()}),0)})));this.own(a(this.threatPublishButton,
"click",b.hitch(this,function(){this._threatPublishButtonClicked()})));this.own(a(this.threatPublishButton,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._threatPublishButtonClicked()})));this.own(a(this.drawBox,"DrawEnd",b.hitch(this,this._onDrawEnd)));this.selectFeaturesTool=new Z({drawBoxOption:{map:this.map,geoTypes:["EXTENT","POLYGON"],showClear:!1},nls:this.nls});this.own(a(this.selectFeaturesTool,"selection-complete",b.hitch(this,function(a){this._toggleCreateZoneButton(this._selectedThreat&&
a.geometry?!0:!1);this._currentGeometry=a.geometry;B.focus(this.threatType.domNode)})));this.selectFeaturesTool.placeAt(this.drawingSection);this.own(a(this.inputTypeSelect,"change",b.hitch(this,this._onInputTypeSelectionChanged)));this.own(a(this.threatType,"change",b.hitch(this,this._onThreatTypeSelectionChanged)));this.own(a(this.unitType,"change",b.hitch(this,this._onUnitTypeSelectionChanged)));this.own(a(this.layerSelect,"change",b.hitch(this,this._onLayerSelectionChanged)));this.own(a(this.publishNewLayer,
"click",b.hitch(this,this._onCheckboxClicked)));this.own(a(this.publishNewLayer,"change",b.hitch(this,this._onCheckboxClicked)));this.own(a(this.publishNewLayer,"keydown",b.hitch(this,function(a){a.keyCode!==v.ENTER&&a.keyCode!==v.SPACE||this._onCheckboxClicked()})));this.own(a(this.featureLayerList,"change",b.hitch(this,function(){this.resize()})));this.own(a(this.threatCatagorySelect,"change",b.hitch(this,function(a){"chemicalThreatCatogory"===a?(this._initThreatTypeCtrl(this._threatData),this.mandatoryLabel.innerHTML=
this.nls.mandatoryLabel,this.safeLabel.innerHTML=this.nls.safeLabel):(this._initThreatTypeCtrl(this._lpgThreatData),this.mandatoryLabel.innerHTML=this.nls.fireBallDiameterLable,this.safeLabel.innerHTML=this.nls.lpgSafeDistanceLable);this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet");1===this.threatType.options.length&&this._toggleCreateZoneButton(!1)})))},_threatPublishButtonClicked:function(){if(this.publishNewLayer.checked&&!this.addTANameArea.isValid())this.publishMessage.innerHTML=
this.nls.missingLayerNameMessage;else{this.publishMessage.innerHTML="";var a={layerName:this.publishNewLayer.checked?this.addTANameArea.value:this.featureLayerList.getValue(),url:"",itemId:"",serviceItemId:"",map:this.map,appConfig:this.appConfig,renderer:this._renderer,publishMessage:this.publishMessage,nls:this.nls,graphics:this.ThreatArea.graphics};if(!this.publishNewLayer.checked){var b=this._layerList.filter(function(b){return b.name===a.layerName},this);1===b.length&&(a.url=b[0].url,a.itemId=
b[0].id,a.serviceItemId=h.parse(b[0]._json).serviceItemId)}V._layerList=this._layerList;V.saveToPortal(a)}},_showThreatLocationTooltip:function(){this.own(a.once(this.threatCoordinateControl.coordtext,y.enter,b.hitch(this,function(){q.show(this.nls.manualCoordinateInputInfo,this.threatCoordinateControl.coordtext)})));this.own(a.once(this.threatCoordinateControl.coordtext,y.leave,b.hitch(this,function(){q.hide(this.threatCoordinateControl.coordtext)})))},_onCheckboxClicked:function(){this.publishNewLayer.checked?
(l.add(this.featureLayerList.domNode,"controlGroupHidden"),l.remove(this.addTANameArea.domNode,"controlGroupHidden"),this.addTANameArea.reset(),this.addTANameArea.focus()):(l.add(this.addTANameArea.domNode,"controlGroupHidden"),l.remove(this.featureLayerList.domNode,"controlGroupHidden"));this._addLayerToMap=this.publishNewLayer.checked},_onInputTypeSelectionChanged:function(){var a=this.inputTypeSelect.get("value");"interactive"===a&&(m.wipeIn({node:this.interActiveDiv}).play(),this.coordInputDiv.style.display=
this.existingFeatureDiv.style.display="none");"manual_location"===a&&(m.wipeIn({node:this.coordInputDiv}).play(),this.interActiveDiv.style.display=this.existingFeatureDiv.style.display="none",this._showThreatLocationTooltip());"existing_features"===a&&(m.wipeIn({node:this.existingFeatureDiv}).play(),this.coordInputDiv.style.display=this.interActiveDiv.style.display="none")},_onLayerSelectionChanged:function(){this.selectFeaturesTool.setLayerInfo(this._getSelectedLayerInfo());this.resize()},_onThreatTypeSelectionChanged:function(){var a=
this.threatType.get("value"),c=this.threatCatagorySelect.get("value");e.forEach("chemicalThreatCatogory"===c?this._threatData:this._lpgThreatData,b.hitch(this,function(b){b.Threat===a&&(this._selectedThreat="chemicalThreatCatogory"===c?{threatType:b.Threat,mandatoryDistance:b.Bldg_Dist,safeDistance:b.Outdoor_Dist,unitType:b.Unit}:{threatType:b.Threat,mandatoryDistance:b.Fireball_Dia,safeDistance:b.Safe_Dist,unitType:b.Unit},this._setDistanceInputControls(this._selectedThreat,this._selectedUnitType),
this._currentGeometry&&this._toggleCreateZoneButton(!0))}))},_onUnitTypeSelectionChanged:function(){this._selectedUnitType=this.unitType.get("value");this._selectedThreat&&this._setDistanceInputControls(this._selectedThreat,this._selectedUnitType)},_setLabelText:function(a,c){e.forEach(["title","innerHTML"],b.hitch(this,function(b){g.set(a,b,c)}))},_getNodeByName:function(a){var b;switch(a){case "threatMainPage":b=this.threatMainPageNode;break;case "threatSettingsPage":b=this.threatSettingsPageNode;
break;case "threatResultsPage":b=this.threatResultsPageNode}return b},_reset:function(){this._clearLayers();this.map.enableMapNavigation()},_clearLayers:function(){this.ThreatArea.clear();this.ThreatArea.refresh();this._toggleCreateZoneButton(!1);this._threatLocation.clear();this.threatCoordinateControl.clear();this.selectFeaturesTool.reset();this._selectedThreat=this._currentGeometry=null;this.drawBox.clear();this.threatType.set("value","");this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},
"feet")},_createSettings:function(){this._threatSettingsInstance=new Y({nls:this.nls,config:this.config,appConfig:this.appConfig,refDomNode:this.domNode},r.create("div",{},this.threatSettingsNode));this.own(this._threatSettingsInstance.on("ThreatSettingsChanged",b.hitch(this,function(a){this._createRenderer(a)})));this._threatSettingsInstance.startup()},_createRenderer:function(a){var b=new E(a.mandatoryFillColor.color),c=255*(1-a.mandatoryFillColor.transparency),d=new E(a.mandatoryOutlineColor.color),
e=255*(1-a.mandatoryOutlineColor.transparency),f=new E(a.safeFillColor.color),g=255*(1-a.safeFillColor.transparency),h=new E(a.safeOutlineColor.color),k=255*(1-a.safeOutlineColor.transparency),l=new E(a.fireballDiaFillColor.color),m=255*(1-a.fireballDiaFillColor.transparency),n=new E(a.fireballDiaOutlineColor.color),p=255*(1-a.fireballDiaOutlineColor.transparency),H=new E(a.safeDistanceFillColor.color),r=255*(1-a.safeDistanceFillColor.transparency),q=new E(a.safeDistanceOutlineColor.color);this._renderer=
new X({type:"uniqueValue",field1:"zone_type",uniqueValueInfos:[{value:this.nls.mandatoryLabel,symbol:{color:[b.r,b.g,b.b,c],outline:{color:[d.r,d.g,d.b,e],width:1,type:"esriSLS",style:a.mandatoryOutlineColor.type},type:"esriSFS",style:a.mandatoryFillColor.type}},{value:this.nls.safeLabel,symbol:{color:[f.r,f.g,f.b,g],outline:{color:[h.r,h.g,h.b,k],width:1,type:"esriSLS",style:a.safeOutlineColor.type},type:"esriSFS",style:a.safeFillColor.type}},{value:this.nls.fireBallDiameterLable,symbol:{color:[l.r,
l.g,l.b,m],outline:{color:[n.r,n.g,n.b,p],width:1,type:"esriSLS",style:a.fireballDiaOutlineColor.type},type:"esriSFS",style:a.fireballDiaFillColor.type}},{value:this.nls.lpgSafeDistanceLable,symbol:{color:[H.r,H.g,H.b,r],outline:{color:[q.r,q.g,q.b,255*(1-a.safeDistanceOutlineColor.transparency)],width:1,type:"esriSLS",style:a.safeDistanceOutlineColor.type},type:"esriSFS",style:a.safeDistanceFillColor.type}}]});this.ThreatArea.setRenderer(this._renderer);this.ThreatArea.refresh()},_showPanel:function(a){var b;
this._currentOpenPanel&&(b=this._getNodeByName(this._currentOpenPanel),l.add(b,"Hidden"));b=this._getNodeByName(a);l.remove(b,"Hidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=a;this._setFirstLastFocusNodes()},_threatCreateButtonClicked:function(){if(!l.contains(this.threatCreateButton,"jimu-state-disabled")){var a=this.threatCatagorySelect.get("value");this._createThreatAreas(this._currentGeometry,this._selectedThreat,this._selectedUnitType,a)}},_createThreatAreas:function(a,
b,c,e){if(a&&b){var f=[],g=null,h="feet"===c.toLowerCase()?this.nls.feetLabel:this.nls.metersLabel,k=a.spatialReference.isWebMercator()?a:d.geographicToWebMercator(a),l="feet"===c.toLowerCase()?9002:9001,g="feet"===c.toLowerCase()?b.mandatoryDistance:this._convertToMeters(b.mandatoryDistance,!1);a=new J(O.buffer(k,g,l));"chemicalThreatCatogory"===e?(a.setAttributes({zone_type:this.nls.mandatoryLabel,mandatory_dist:g,threat_type:b.threatType,safe_dist:0,lpg_fireball_dia:0,lpg_safe_dist:0,units:h}),
g=new Q,g.setTitle(this.nls._widgetLabel),g.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.mandatoryLabel+":\x3c/b\x3e ${mandatory_dist:NumberFormat(places:2)} "+h+"\x3cbr /\x3e")):(a.setAttributes({zone_type:this.nls.fireBallDiameterLable,lpg_fireball_dia:g,threat_type:b.threatType,lpg_safe_dist:0,mandatory_dist:0,safe_dist:0,units:h}),g=new Q,g.setTitle(this.nls._widgetLabel),g.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+
this.nls.fireBallDiameterLable+":\x3c/b\x3e ${lpg_fireball_dia:NumberFormat(places:2)} "+h+"\x3cbr /\x3e"));a.setInfoTemplate(g);f.push(a);g="feet"===c.toLowerCase()?b.safeDistance:this._convertToMeters(b.safeDistance,!1);c=O.buffer(k,g,l);a=O.difference(c,a.geometry);c=new J(a?a:c);"chemicalThreatCatogory"===e?(c.setAttributes({zone_type:this.nls.safeLabel,mandatory_dist:0,safe_dist:g,threat_type:b.threatType,lpg_fireball_dia:0,lpg_safe_dist:0,units:h}),g=new Q,g.setTitle(this.nls._widgetLabel),
g.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.safeLabel+":\x3c/b\x3e ${safe_dist:NumberFormat(places:2)} "+h+"\x3cbr /\x3e")):(c.setAttributes({zone_type:this.nls.lpgSafeDistanceLable,lpg_fireball_dia:0,lpg_safe_dist:g,threat_type:b.threatType,mandatory_dist:0,safe_dist:0,units:h}),g=new Q,g.setTitle(this.nls._widgetLabel),g.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.lpgSafeDistanceLable+
":\x3c/b\x3e ${lpg_safe_dist:NumberFormat(places:2)} "+h+"\x3cbr /\x3e"));c.setInfoTemplate(g);f.push(c);this.ThreatArea.applyEdits(f,null,null);this.map.setExtent(this.ThreatArea.graphics[this.ThreatArea.graphics.length-1].geometry.getExtent().expand(2));this._showPanel("threatResultsPage");this.isOnScreen&&this.resize();this.selectFeaturesTool.reset()}},_getAllMapLayers:function(){var a=[];R.getInstance().traversal(b.hitch(this,function(b){"undefined"!==typeof b._layerInfo.layerObject.type&&-1===
b._layerInfo.layerObject.type.indexOf("tile")&&"FeatureCollection"!==b._layerInfo.layerObject.type&&"esriGeometryPolygon"===b._layerInfo.layerObject.geometryType&&a.push(b._layerInfo.layerObject)}));return a},_initDrawBox:function(){this.drawBox.setMap(this.map);var a=F.getGreyPinMarkerSymbol();this.drawBox.setPointSymbol(a)},_onDrawEnd:function(a,b){this.drawBox.clear();this._currentGeometry=a.geometry;var c=null,c="POINT"===b?this._pointSymbol:"POLYLINE"===b?this._polylineSymbol:this._polygonSymbol;
"EXTENT"!==b&&(this._threatLocation.clear(),this._threatLocation.add(new J(a.geometry,c,null,null)));this._selectedThreat&&this._currentGeometry&&this._toggleCreateZoneButton(!0);B.focus(this.threatType.domNode)},_toggleCreateZoneButton:function(a){a?(l.remove(this.threatCreateButton,"jimu-state-disabled"),g.set(this.threatCreateButton,"tabindex",0)):(l.add(this.threatCreateButton,"jimu-state-disabled"),g.set(this.threatCreateButton,"tabindex",-1))},_setDistanceInputControls:function(a,b){if(a&&a.hasOwnProperty("mandatoryDistance")&&
a.hasOwnProperty("safeDistance")){var d="meters"===b.toLowerCase()?this._convertToMeters(a.mandatoryDistance,!0):this._formatNumber(a.mandatoryDistance);this.mandatoryDist.set("value",c.substitute("${mandatoryDistance} ${unitType}",{mandatoryDistance:d,unitType:"meters"===b.toLowerCase()?this.nls.metersLabel:this.nls.feetLabel}));d="meters"===b.toLowerCase()?this._convertToMeters(a.safeDistance,!0):this._formatNumber(a.safeDistance);this.safeDist.set("value",c.substitute("${safeDistance} ${unitType}",
{safeDistance:d,unitType:"meters"===b.toLowerCase()?this.nls.metersLabel:this.nls.feetLabel}))}},_convertToMeters:function(a,b){return b?this._formatNumber(a/3.280839895):a/3.280839895},_convertToFeet:function(a,b){return b?this._formatNumber(3.280839895*a):3.280839895*a},_formatNumber:function(a){return w.format(a,{places:2,locale:z.locale})},_populateSelectList:function(a,c,d,f){f&&(a.options=[]);e.forEach(c,b.hitch(this,function(b){if(f){var c=this._jimuLayerInfos.getLayerInfoById(b.id),d="";c&&
(d=c.title?c.title:c.name);"Feature Layer"===b.type&&a.addOption({value:d,label:D.sanitizeHTML(b.name)?D.sanitizeHTML(b.name):d,selected:!1})}else b.url&&"Feature Layer"===b.type&&b.capabilities.includes("Create,Delete,Query,Update,Editing")&&a.addOption({value:b.name,label:D.sanitizeHTML(b.name),selected:!1})}));""!==d&&a.set("displayedValue",d);f&&0<a.options.length&&this.selectFeaturesTool&&this.selectFeaturesTool.setLayerInfo(this._getSelectedLayerInfo())},_initDefaultSymbols:function(){var a=
{style:"esriSMSCircle",color:[0,0,128,128],name:"Circle",outline:{color:[0,0,128,255],width:1},type:"esriSMS",size:18},b={style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},c={style:"esriSFSSolid",color:[79,129,189,128],type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}};this._pointSymbol||(this._pointSymbol=U.fromJson(a));this._polylineSymbol||(this._polylineSymbol=U.fromJson(b));this._polygonSymbol||(this._polygonSymbol=U.fromJson(c))},
_moveMap:function(){var a=this.map.spatialReference,b=new S;b.xmin=this.map.extent.xmin+1E-4;b.ymin=this.map.extent.ymin;b.xmax=this.map.extent.xmax;b.ymax=this.map.extent.ymax;b.spatialReference=a;this.map.setExtent(b)},_setFirstLastFocusNodes:function(a){if("threatResultsPage"===this._currentOpenPanel){D.initFirstFocusNode(this.domNode,this.threatResultsPanelBackButton);D.initLastFocusNode(this.domNode,this.threatPublishButton);var b=u("a",this.publishMessage)[0];""!==this.publishMessage.innerHTML&&
b?(D.initLastFocusNode(this.domNode,this.publishMessage),B.focus(b)):""===this.publishMessage.innerHTML&&B.focus(this.threatResultsPanelBackButton)}"threatSettingsPage"===this._currentOpenPanel&&(D.initFirstFocusNode(this.domNode,this.threatSettingsPanelBackButton),B.focus(this.threatSettingsPanelBackButton),this._threatSettingsInstance._setLastFocusNode());"threatMainPage"===this._currentOpenPanel&&(D.initFirstFocusNode(this.domNode,this.threatAnalysisTitleUrl),D.initLastFocusNode(this.domNode,this.threatClearButton),
a?D.isAutoFocusFirstNodeWidget(this)&&B.focus(this.threatAnalysisTitleUrl):B.focus(this.threatAnalysisTitleUrl))},_convertDistanceMetersToFeet:function(a,c){var d=[];e.forEach(a,b.hitch(this,function(a){"meters"===a.Unit&&(c?(a.Bldg_Dist=this._convertToFeet(a.Bldg_Dist),a.Outdoor_Dist=this._convertToFeet(a.Outdoor_Dist)):(a.Bldg_Dist=this._convertToFeet(a.Fireball_Dia),a.Outdoor_Dist=this._convertToFeet(a.Safe_Dist)));d.push(a)}));return d},_onLayerInfosChange:function(){this._layerList="";this._layerList=
this._getLayers();this._populateSelectList(this.layerSelect,this._layerList,"",!0)},_getLayers:function(){var a=[],b;for(b in this.map._layers)if(this.map._layers.hasOwnProperty(b)){var c;c=this.map._layers[b];c.hasOwnProperty("type")&&"Feature Layer"===c.type&&a.push(c)}return a},_getSelectedLayerInfo:function(){var a,c=this.layerSelect.get("value");e.forEach(this._layerList,b.hitch(this,function(b){var d=this._jimuLayerInfos.getLayerInfoById(b.id);c===(d.title?d.title:b.name)&&(a=b)}));return a}})});